var UC=t=>{throw TypeError(t)};var Nv=(t,e,n)=>e.has(t)||UC("Cannot "+n);var ae=(t,e,n)=>(Nv(t,e,"read from private field"),n?n.call(t):e.get(t)),pt=(t,e,n)=>e.has(t)?UC("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Qe=(t,e,n,r)=>(Nv(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Mn=(t,e,n)=>(Nv(t,e,"access private method"),n);var hf=(t,e,n,r)=>({set _(i){Qe(t,e,i,n)},get _(){return ae(t,e,r)}});function sU(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function jd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Av={exports:{}},xu={},Rv={exports:{}},lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BC;function oU(){if(BC)return lt;BC=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.iterator;function g($){return $===null||typeof $!="object"?null:($=m&&$[m]||$["@@iterator"],typeof $=="function"?$:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,x={};function k($,re,O){this.props=$,this.context=re,this.refs=x,this.updater=O||y}k.prototype.isReactComponent={},k.prototype.setState=function($,re){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,re,"setState")},k.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function T(){}T.prototype=k.prototype;function _($,re,O){this.props=$,this.context=re,this.refs=x,this.updater=O||y}var P=_.prototype=new T;P.constructor=_,C(P,k.prototype),P.isPureReactComponent=!0;var E=Array.isArray,I=Object.prototype.hasOwnProperty,A={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};function R($,re,O){var ve,oe={},ce=null,ie=null;if(re!=null)for(ve in re.ref!==void 0&&(ie=re.ref),re.key!==void 0&&(ce=""+re.key),re)I.call(re,ve)&&!L.hasOwnProperty(ve)&&(oe[ve]=re[ve]);var Se=arguments.length-2;if(Se===1)oe.children=O;else if(1<Se){for(var Ce=Array(Se),Le=0;Le<Se;Le++)Ce[Le]=arguments[Le+2];oe.children=Ce}if($&&$.defaultProps)for(ve in Se=$.defaultProps,Se)oe[ve]===void 0&&(oe[ve]=Se[ve]);return{$$typeof:t,type:$,key:ce,ref:ie,props:oe,_owner:A.current}}function j($,re){return{$$typeof:t,type:$.type,key:re,ref:$.ref,props:$.props,_owner:$._owner}}function U($){return typeof $=="object"&&$!==null&&$.$$typeof===t}function z($){var re={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(O){return re[O]})}var F=/\/+/g;function W($,re){return typeof $=="object"&&$!==null&&$.key!=null?z(""+$.key):re.toString(36)}function Y($,re,O,ve,oe){var ce=typeof $;(ce==="undefined"||ce==="boolean")&&($=null);var ie=!1;if($===null)ie=!0;else switch(ce){case"string":case"number":ie=!0;break;case"object":switch($.$$typeof){case t:case e:ie=!0}}if(ie)return ie=$,oe=oe(ie),$=ve===""?"."+W(ie,0):ve,E(oe)?(O="",$!=null&&(O=$.replace(F,"$&/")+"/"),Y(oe,re,O,"",function(Le){return Le})):oe!=null&&(U(oe)&&(oe=j(oe,O+(!oe.key||ie&&ie.key===oe.key?"":(""+oe.key).replace(F,"$&/")+"/")+$)),re.push(oe)),1;if(ie=0,ve=ve===""?".":ve+":",E($))for(var Se=0;Se<$.length;Se++){ce=$[Se];var Ce=ve+W(ce,Se);ie+=Y(ce,re,O,Ce,oe)}else if(Ce=g($),typeof Ce=="function")for($=Ce.call($),Se=0;!(ce=$.next()).done;)ce=ce.value,Ce=ve+W(ce,Se++),ie+=Y(ce,re,O,Ce,oe);else if(ce==="object")throw re=String($),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.");return ie}function K($,re,O){if($==null)return $;var ve=[],oe=0;return Y($,ve,"","",function(ce){return re.call(O,ce,oe++)}),ve}function X($){if($._status===-1){var re=$._result;re=re(),re.then(function(O){($._status===0||$._status===-1)&&($._status=1,$._result=O)},function(O){($._status===0||$._status===-1)&&($._status=2,$._result=O)}),$._status===-1&&($._status=0,$._result=re)}if($._status===1)return $._result.default;throw $._result}var se={current:null},H={transition:null},te={ReactCurrentDispatcher:se,ReactCurrentBatchConfig:H,ReactCurrentOwner:A};function D(){throw Error("act(...) is not supported in production builds of React.")}return lt.Children={map:K,forEach:function($,re,O){K($,function(){re.apply(this,arguments)},O)},count:function($){var re=0;return K($,function(){re++}),re},toArray:function($){return K($,function(re){return re})||[]},only:function($){if(!U($))throw Error("React.Children.only expected to receive a single React element child.");return $}},lt.Component=k,lt.Fragment=n,lt.Profiler=i,lt.PureComponent=_,lt.StrictMode=r,lt.Suspense=u,lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=te,lt.act=D,lt.cloneElement=function($,re,O){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var ve=C({},$.props),oe=$.key,ce=$.ref,ie=$._owner;if(re!=null){if(re.ref!==void 0&&(ce=re.ref,ie=A.current),re.key!==void 0&&(oe=""+re.key),$.type&&$.type.defaultProps)var Se=$.type.defaultProps;for(Ce in re)I.call(re,Ce)&&!L.hasOwnProperty(Ce)&&(ve[Ce]=re[Ce]===void 0&&Se!==void 0?Se[Ce]:re[Ce])}var Ce=arguments.length-2;if(Ce===1)ve.children=O;else if(1<Ce){Se=Array(Ce);for(var Le=0;Le<Ce;Le++)Se[Le]=arguments[Le+2];ve.children=Se}return{$$typeof:t,type:$.type,key:oe,ref:ce,props:ve,_owner:ie}},lt.createContext=function($){return $={$$typeof:o,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:s,_context:$},$.Consumer=$},lt.createElement=R,lt.createFactory=function($){var re=R.bind(null,$);return re.type=$,re},lt.createRef=function(){return{current:null}},lt.forwardRef=function($){return{$$typeof:l,render:$}},lt.isValidElement=U,lt.lazy=function($){return{$$typeof:f,_payload:{_status:-1,_result:$},_init:X}},lt.memo=function($,re){return{$$typeof:d,type:$,compare:re===void 0?null:re}},lt.startTransition=function($){var re=H.transition;H.transition={};try{$()}finally{H.transition=re}},lt.unstable_act=D,lt.useCallback=function($,re){return se.current.useCallback($,re)},lt.useContext=function($){return se.current.useContext($)},lt.useDebugValue=function(){},lt.useDeferredValue=function($){return se.current.useDeferredValue($)},lt.useEffect=function($,re){return se.current.useEffect($,re)},lt.useId=function(){return se.current.useId()},lt.useImperativeHandle=function($,re,O){return se.current.useImperativeHandle($,re,O)},lt.useInsertionEffect=function($,re){return se.current.useInsertionEffect($,re)},lt.useLayoutEffect=function($,re){return se.current.useLayoutEffect($,re)},lt.useMemo=function($,re){return se.current.useMemo($,re)},lt.useReducer=function($,re,O){return se.current.useReducer($,re,O)},lt.useRef=function($){return se.current.useRef($)},lt.useState=function($){return se.current.useState($)},lt.useSyncExternalStore=function($,re,O){return se.current.useSyncExternalStore($,re,O)},lt.useTransition=function(){return se.current.useTransition()},lt.version="18.3.1",lt}var VC;function Vb(){return VC||(VC=1,Rv.exports=oU()),Rv.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zC;function aU(){if(zC)return xu;zC=1;var t=Vb(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(l,u,d){var f,m={},g=null,y=null;d!==void 0&&(g=""+d),u.key!==void 0&&(g=""+u.key),u.ref!==void 0&&(y=u.ref);for(f in u)r.call(u,f)&&!s.hasOwnProperty(f)&&(m[f]=u[f]);if(l&&l.defaultProps)for(f in u=l.defaultProps,u)m[f]===void 0&&(m[f]=u[f]);return{$$typeof:e,type:l,key:g,ref:y,props:m,_owner:i.current}}return xu.Fragment=n,xu.jsx=o,xu.jsxs=o,xu}var $C;function lU(){return $C||($C=1,Av.exports=aU()),Av.exports}var h=lU(),w=Vb();const Ni=jd(w),zb=sU({__proto__:null,default:Ni},[w]);var ff={},Mv={exports:{}},nr={},Dv={exports:{}},jv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WC;function cU(){return WC||(WC=1,(function(t){function e(H,te){var D=H.length;H.push(te);e:for(;0<D;){var $=D-1>>>1,re=H[$];if(0<i(re,te))H[$]=te,H[D]=re,D=$;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var te=H[0],D=H.pop();if(D!==te){H[0]=D;e:for(var $=0,re=H.length,O=re>>>1;$<O;){var ve=2*($+1)-1,oe=H[ve],ce=ve+1,ie=H[ce];if(0>i(oe,D))ce<re&&0>i(ie,oe)?(H[$]=ie,H[ce]=D,$=ce):(H[$]=oe,H[ve]=D,$=ve);else if(ce<re&&0>i(ie,D))H[$]=ie,H[ce]=D,$=ce;else break e}}return te}function i(H,te){var D=H.sortIndex-te.sortIndex;return D!==0?D:H.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],f=1,m=null,g=3,y=!1,C=!1,x=!1,k=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(H){for(var te=n(d);te!==null;){if(te.callback===null)r(d);else if(te.startTime<=H)r(d),te.sortIndex=te.expirationTime,e(u,te);else break;te=n(d)}}function E(H){if(x=!1,P(H),!C)if(n(u)!==null)C=!0,X(I);else{var te=n(d);te!==null&&se(E,te.startTime-H)}}function I(H,te){C=!1,x&&(x=!1,T(R),R=-1),y=!0;var D=g;try{for(P(te),m=n(u);m!==null&&(!(m.expirationTime>te)||H&&!z());){var $=m.callback;if(typeof $=="function"){m.callback=null,g=m.priorityLevel;var re=$(m.expirationTime<=te);te=t.unstable_now(),typeof re=="function"?m.callback=re:m===n(u)&&r(u),P(te)}else r(u);m=n(u)}if(m!==null)var O=!0;else{var ve=n(d);ve!==null&&se(E,ve.startTime-te),O=!1}return O}finally{m=null,g=D,y=!1}}var A=!1,L=null,R=-1,j=5,U=-1;function z(){return!(t.unstable_now()-U<j)}function F(){if(L!==null){var H=t.unstable_now();U=H;var te=!0;try{te=L(!0,H)}finally{te?W():(A=!1,L=null)}}else A=!1}var W;if(typeof _=="function")W=function(){_(F)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,K=Y.port2;Y.port1.onmessage=F,W=function(){K.postMessage(null)}}else W=function(){k(F,0)};function X(H){L=H,A||(A=!0,W())}function se(H,te){R=k(function(){H(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){C||y||(C=!0,X(I))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(H){switch(g){case 1:case 2:case 3:var te=3;break;default:te=g}var D=g;g=te;try{return H()}finally{g=D}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,te){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var D=g;g=H;try{return te()}finally{g=D}},t.unstable_scheduleCallback=function(H,te,D){var $=t.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?$+D:$):D=$,H){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=D+re,H={id:f++,callback:te,priorityLevel:H,startTime:D,expirationTime:re,sortIndex:-1},D>$?(H.sortIndex=D,e(d,H),n(u)===null&&H===n(d)&&(x?(T(R),R=-1):x=!0,se(E,D-$))):(H.sortIndex=re,e(u,H),C||y||(C=!0,X(I))),H},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(H){var te=g;return function(){var D=g;g=te;try{return H.apply(this,arguments)}finally{g=D}}}})(jv)),jv}var HC;function uU(){return HC||(HC=1,Dv.exports=cU()),Dv.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qC;function dU(){if(qC)return nr;qC=1;var t=Vb(),e=uU();function n(a){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+a,p=1;p<arguments.length;p++)c+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(a,c){o(a,c),o(a+"Capture",c)}function o(a,c){for(i[a]=c,a=0;a<c.length;a++)r.add(c[a])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function g(a){return u.call(m,a)?!0:u.call(f,a)?!1:d.test(a)?m[a]=!0:(f[a]=!0,!1)}function y(a,c,p,v){if(p!==null&&p.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return v?!1:p!==null?!p.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function C(a,c,p,v){if(c===null||typeof c>"u"||y(a,c,p,v))return!0;if(v)return!1;if(p!==null)switch(p.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function x(a,c,p,v,b,S,N){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=v,this.attributeNamespace=b,this.mustUseProperty=p,this.propertyName=a,this.type=c,this.sanitizeURL=S,this.removeEmptyString=N}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){k[a]=new x(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var c=a[0];k[c]=new x(c,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){k[a]=new x(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){k[a]=new x(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){k[a]=new x(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){k[a]=new x(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){k[a]=new x(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){k[a]=new x(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){k[a]=new x(a,5,!1,a.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function _(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var c=a.replace(T,_);k[c]=new x(c,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var c=a.replace(T,_);k[c]=new x(c,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var c=a.replace(T,_);k[c]=new x(c,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){k[a]=new x(a,1,!1,a.toLowerCase(),null,!1,!1)}),k.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){k[a]=new x(a,1,!1,a.toLowerCase(),null,!0,!0)});function P(a,c,p,v){var b=k.hasOwnProperty(c)?k[c]:null;(b!==null?b.type!==0:v||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(C(c,p,b,v)&&(p=null),v||b===null?g(c)&&(p===null?a.removeAttribute(c):a.setAttribute(c,""+p)):b.mustUseProperty?a[b.propertyName]=p===null?b.type===3?!1:"":p:(c=b.attributeName,v=b.attributeNamespace,p===null?a.removeAttribute(c):(b=b.type,p=b===3||b===4&&p===!0?"":""+p,v?a.setAttributeNS(v,c,p):a.setAttribute(c,p))))}var E=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=Symbol.for("react.element"),A=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),z=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),se=Symbol.for("react.offscreen"),H=Symbol.iterator;function te(a){return a===null||typeof a!="object"?null:(a=H&&a[H]||a["@@iterator"],typeof a=="function"?a:null)}var D=Object.assign,$;function re(a){if($===void 0)try{throw Error()}catch(p){var c=p.stack.trim().match(/\n( *(at )?)/);$=c&&c[1]||""}return`
`+$+a}var O=!1;function ve(a,c){if(!a||O)return"";O=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(ne){var v=ne}Reflect.construct(a,[],c)}else{try{c.call()}catch(ne){v=ne}a.call(c.prototype)}else{try{throw Error()}catch(ne){v=ne}a()}}catch(ne){if(ne&&v&&typeof ne.stack=="string"){for(var b=ne.stack.split(`
`),S=v.stack.split(`
`),N=b.length-1,B=S.length-1;1<=N&&0<=B&&b[N]!==S[B];)B--;for(;1<=N&&0<=B;N--,B--)if(b[N]!==S[B]){if(N!==1||B!==1)do if(N--,B--,0>B||b[N]!==S[B]){var q=`
`+b[N].replace(" at new "," at ");return a.displayName&&q.includes("<anonymous>")&&(q=q.replace("<anonymous>",a.displayName)),q}while(1<=N&&0<=B);break}}}finally{O=!1,Error.prepareStackTrace=p}return(a=a?a.displayName||a.name:"")?re(a):""}function oe(a){switch(a.tag){case 5:return re(a.type);case 16:return re("Lazy");case 13:return re("Suspense");case 19:return re("SuspenseList");case 0:case 2:case 15:return a=ve(a.type,!1),a;case 11:return a=ve(a.type.render,!1),a;case 1:return a=ve(a.type,!0),a;default:return""}}function ce(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case L:return"Fragment";case A:return"Portal";case j:return"Profiler";case R:return"StrictMode";case W:return"Suspense";case Y:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case z:return(a.displayName||"Context")+".Consumer";case U:return(a._context.displayName||"Context")+".Provider";case F:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case K:return c=a.displayName||null,c!==null?c:ce(a.type)||"Memo";case X:c=a._payload,a=a._init;try{return ce(a(c))}catch{}}return null}function ie(a){var c=a.type;switch(a.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=c.render,a=a.displayName||a.name||"",c.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(c);case 8:return c===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function Se(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Ce(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Le(a){var c=Ce(a)?"checked":"value",p=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),v=""+a[c];if(!a.hasOwnProperty(c)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var b=p.get,S=p.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return b.call(this)},set:function(N){v=""+N,S.call(this,N)}}),Object.defineProperty(a,c,{enumerable:p.enumerable}),{getValue:function(){return v},setValue:function(N){v=""+N},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function qe(a){a._valueTracker||(a._valueTracker=Le(a))}function Je(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var p=c.getValue(),v="";return a&&(v=Ce(a)?a.checked?"true":"false":a.value),a=v,a!==p?(c.setValue(a),!0):!1}function jt(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function Ct(a,c){var p=c.checked;return D({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??a._wrapperState.initialChecked})}function sn(a,c){var p=c.defaultValue==null?"":c.defaultValue,v=c.checked!=null?c.checked:c.defaultChecked;p=Se(c.value!=null?c.value:p),a._wrapperState={initialChecked:v,initialValue:p,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function fn(a,c){c=c.checked,c!=null&&P(a,"checked",c,!1)}function Pn(a,c){fn(a,c);var p=Se(c.value),v=c.type;if(p!=null)v==="number"?(p===0&&a.value===""||a.value!=p)&&(a.value=""+p):a.value!==""+p&&(a.value=""+p);else if(v==="submit"||v==="reset"){a.removeAttribute("value");return}c.hasOwnProperty("value")?on(a,c.type,p):c.hasOwnProperty("defaultValue")&&on(a,c.type,Se(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(a.defaultChecked=!!c.defaultChecked)}function cr(a,c,p){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var v=c.type;if(!(v!=="submit"&&v!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+a._wrapperState.initialValue,p||c===a.value||(a.value=c),a.defaultValue=c}p=a.name,p!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,p!==""&&(a.name=p)}function on(a,c,p){(c!=="number"||jt(a.ownerDocument)!==a)&&(p==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+p&&(a.defaultValue=""+p))}var Fn=Array.isArray;function _n(a,c,p,v){if(a=a.options,c){c={};for(var b=0;b<p.length;b++)c["$"+p[b]]=!0;for(p=0;p<a.length;p++)b=c.hasOwnProperty("$"+a[p].value),a[p].selected!==b&&(a[p].selected=b),b&&v&&(a[p].defaultSelected=!0)}else{for(p=""+Se(p),c=null,b=0;b<a.length;b++){if(a[b].value===p){a[b].selected=!0,v&&(a[b].defaultSelected=!0);return}c!==null||a[b].disabled||(c=a[b])}c!==null&&(c.selected=!0)}}function Cr(a,c){if(c.dangerouslySetInnerHTML!=null)throw Error(n(91));return D({},c,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function Jn(a,c){var p=c.value;if(p==null){if(p=c.children,c=c.defaultValue,p!=null){if(c!=null)throw Error(n(92));if(Fn(p)){if(1<p.length)throw Error(n(93));p=p[0]}c=p}c==null&&(c=""),p=c}a._wrapperState={initialValue:Se(p)}}function zr(a,c){var p=Se(c.value),v=Se(c.defaultValue);p!=null&&(p=""+p,p!==a.value&&(a.value=p),c.defaultValue==null&&a.defaultValue!==p&&(a.defaultValue=p)),v!=null&&(a.defaultValue=""+v)}function Tr(a){var c=a.textContent;c===a._wrapperState.initialValue&&c!==""&&c!==null&&(a.value=c)}function M(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Q(a,c){return a==null||a==="http://www.w3.org/1999/xhtml"?M(c):a==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var de,be=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,p,v,b){MSApp.execUnsafeLocalFunction(function(){return a(c,p,v,b)})}:a})(function(a,c){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=c;else{for(de=de||document.createElement("div"),de.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=de.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;c.firstChild;)a.appendChild(c.firstChild)}});function Pe(a,c){if(c){var p=a.firstChild;if(p&&p===a.lastChild&&p.nodeType===3){p.nodeValue=c;return}}a.textContent=c}var Ne={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ft=["Webkit","ms","Moz","O"];Object.keys(Ne).forEach(function(a){ft.forEach(function(c){c=c+a.charAt(0).toUpperCase()+a.substring(1),Ne[c]=Ne[a]})});function ot(a,c,p){return c==null||typeof c=="boolean"||c===""?"":p||typeof c!="number"||c===0||Ne.hasOwnProperty(a)&&Ne[a]?(""+c).trim():c+"px"}function Xe(a,c){a=a.style;for(var p in c)if(c.hasOwnProperty(p)){var v=p.indexOf("--")===0,b=ot(p,c[p],v);p==="float"&&(p="cssFloat"),v?a.setProperty(p,b):a[p]=b}}var kt=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function at(a,c){if(c){if(kt[a]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(n(137,a));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(n(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(n(61))}if(c.style!=null&&typeof c.style!="object")throw Error(n(62))}}function Zt(a,c){if(a.indexOf("-")===-1)return typeof c.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rt=null;function Bs(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Vs=null,$r=null,Er=null;function ra(a){if(a=su(a)){if(typeof Vs!="function")throw Error(n(280));var c=a.stateNode;c&&(c=Eh(c),Vs(a.stateNode,a.type,c))}}function le(a){$r?Er?Er.push(a):Er=[a]:$r=a}function Re(){if($r){var a=$r,c=Er;if(Er=$r=null,ra(a),c)for(a=0;a<c.length;a++)ra(c[a])}}function Ze(a,c){return a(c)}function mt(){}var Ft=!1;function an(a,c,p){if(Ft)return a(c,p);Ft=!0;try{return Ze(a,c,p)}finally{Ft=!1,($r!==null||Er!==null)&&(mt(),Re())}}function Wr(a,c){var p=a.stateNode;if(p===null)return null;var v=Eh(p);if(v===null)return null;p=v[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(a=a.type,v=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!v;break e;default:a=!1}if(a)return null;if(p&&typeof p!="function")throw Error(n(231,c,typeof p));return p}var bi=!1;if(l)try{var Pr={};Object.defineProperty(Pr,"passive",{get:function(){bi=!0}}),window.addEventListener("test",Pr,Pr),window.removeEventListener("test",Pr,Pr)}catch{bi=!1}function rl(a,c,p,v,b,S,N,B,q){var ne=Array.prototype.slice.call(arguments,3);try{c.apply(p,ne)}catch(pe){this.onError(pe)}}var Hr=!1,wn=null,qr=!1,xi=null,nh={onError:function(a){Hr=!0,wn=a}};function rh(a,c,p,v,b,S,N,B,q){Hr=!1,wn=null,rl.apply(nh,arguments)}function ih(a,c,p,v,b,S,N,B,q){if(rh.apply(this,arguments),Hr){if(Hr){var ne=wn;Hr=!1,wn=null}else throw Error(n(198));qr||(qr=!0,xi=ne)}}function wi(a){var c=a,p=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(p=c.return),a=c.return;while(a)}return c.tag===3?p:null}function Bc(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function zs(a){if(wi(a)!==a)throw Error(n(188))}function sh(a){var c=a.alternate;if(!c){if(c=wi(a),c===null)throw Error(n(188));return c!==a?null:a}for(var p=a,v=c;;){var b=p.return;if(b===null)break;var S=b.alternate;if(S===null){if(v=b.return,v!==null){p=v;continue}break}if(b.child===S.child){for(S=b.child;S;){if(S===p)return zs(b),a;if(S===v)return zs(b),c;S=S.sibling}throw Error(n(188))}if(p.return!==v.return)p=b,v=S;else{for(var N=!1,B=b.child;B;){if(B===p){N=!0,p=b,v=S;break}if(B===v){N=!0,v=b,p=S;break}B=B.sibling}if(!N){for(B=S.child;B;){if(B===p){N=!0,p=S,v=b;break}if(B===v){N=!0,v=S,p=b;break}B=B.sibling}if(!N)throw Error(n(189))}}if(p.alternate!==v)throw Error(n(190))}if(p.tag!==3)throw Error(n(188));return p.stateNode.current===p?a:c}function $s(a){return a=sh(a),a!==null?dk(a):null}function dk(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var c=dk(a);if(c!==null)return c;a=a.sibling}return null}var hk=e.unstable_scheduleCallback,fk=e.unstable_cancelCallback,gF=e.unstable_shouldYield,vF=e.unstable_requestPaint,Yt=e.unstable_now,yF=e.unstable_getCurrentPriorityLevel,Jm=e.unstable_ImmediatePriority,pk=e.unstable_UserBlockingPriority,oh=e.unstable_NormalPriority,bF=e.unstable_LowPriority,mk=e.unstable_IdlePriority,ah=null,ki=null;function xF(a){if(ki&&typeof ki.onCommitFiberRoot=="function")try{ki.onCommitFiberRoot(ah,a,void 0,(a.current.flags&128)===128)}catch{}}var Gr=Math.clz32?Math.clz32:SF,wF=Math.log,kF=Math.LN2;function SF(a){return a>>>=0,a===0?32:31-(wF(a)/kF|0)|0}var lh=64,ch=4194304;function Vc(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function uh(a,c){var p=a.pendingLanes;if(p===0)return 0;var v=0,b=a.suspendedLanes,S=a.pingedLanes,N=p&268435455;if(N!==0){var B=N&~b;B!==0?v=Vc(B):(S&=N,S!==0&&(v=Vc(S)))}else N=p&~b,N!==0?v=Vc(N):S!==0&&(v=Vc(S));if(v===0)return 0;if(c!==0&&c!==v&&(c&b)===0&&(b=v&-v,S=c&-c,b>=S||b===16&&(S&4194240)!==0))return c;if((v&4)!==0&&(v|=p&16),c=a.entangledLanes,c!==0)for(a=a.entanglements,c&=v;0<c;)p=31-Gr(c),b=1<<p,v|=a[p],c&=~b;return v}function CF(a,c){switch(a){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function TF(a,c){for(var p=a.suspendedLanes,v=a.pingedLanes,b=a.expirationTimes,S=a.pendingLanes;0<S;){var N=31-Gr(S),B=1<<N,q=b[N];q===-1?((B&p)===0||(B&v)!==0)&&(b[N]=CF(B,c)):q<=c&&(a.expiredLanes|=B),S&=~B}}function Qm(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function gk(){var a=lh;return lh<<=1,(lh&4194240)===0&&(lh=64),a}function Xm(a){for(var c=[],p=0;31>p;p++)c.push(a);return c}function zc(a,c,p){a.pendingLanes|=c,c!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,c=31-Gr(c),a[c]=p}function EF(a,c){var p=a.pendingLanes&~c;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=c,a.mutableReadLanes&=c,a.entangledLanes&=c,c=a.entanglements;var v=a.eventTimes;for(a=a.expirationTimes;0<p;){var b=31-Gr(p),S=1<<b;c[b]=0,v[b]=-1,a[b]=-1,p&=~S}}function Zm(a,c){var p=a.entangledLanes|=c;for(a=a.entanglements;p;){var v=31-Gr(p),b=1<<v;b&c|a[v]&c&&(a[v]|=c),p&=~b}}var St=0;function vk(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var yk,eg,bk,xk,wk,tg=!1,dh=[],Ws=null,Hs=null,qs=null,$c=new Map,Wc=new Map,Gs=[],PF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kk(a,c){switch(a){case"focusin":case"focusout":Ws=null;break;case"dragenter":case"dragleave":Hs=null;break;case"mouseover":case"mouseout":qs=null;break;case"pointerover":case"pointerout":$c.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wc.delete(c.pointerId)}}function Hc(a,c,p,v,b,S){return a===null||a.nativeEvent!==S?(a={blockedOn:c,domEventName:p,eventSystemFlags:v,nativeEvent:S,targetContainers:[b]},c!==null&&(c=su(c),c!==null&&eg(c)),a):(a.eventSystemFlags|=v,c=a.targetContainers,b!==null&&c.indexOf(b)===-1&&c.push(b),a)}function _F(a,c,p,v,b){switch(c){case"focusin":return Ws=Hc(Ws,a,c,p,v,b),!0;case"dragenter":return Hs=Hc(Hs,a,c,p,v,b),!0;case"mouseover":return qs=Hc(qs,a,c,p,v,b),!0;case"pointerover":var S=b.pointerId;return $c.set(S,Hc($c.get(S)||null,a,c,p,v,b)),!0;case"gotpointercapture":return S=b.pointerId,Wc.set(S,Hc(Wc.get(S)||null,a,c,p,v,b)),!0}return!1}function Sk(a){var c=ia(a.target);if(c!==null){var p=wi(c);if(p!==null){if(c=p.tag,c===13){if(c=Bc(p),c!==null){a.blockedOn=c,wk(a.priority,function(){bk(p)});return}}else if(c===3&&p.stateNode.current.memoizedState.isDehydrated){a.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}a.blockedOn=null}function hh(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var p=rg(a.domEventName,a.eventSystemFlags,c[0],a.nativeEvent);if(p===null){p=a.nativeEvent;var v=new p.constructor(p.type,p);rt=v,p.target.dispatchEvent(v),rt=null}else return c=su(p),c!==null&&eg(c),a.blockedOn=p,!1;c.shift()}return!0}function Ck(a,c,p){hh(a)&&p.delete(c)}function IF(){tg=!1,Ws!==null&&hh(Ws)&&(Ws=null),Hs!==null&&hh(Hs)&&(Hs=null),qs!==null&&hh(qs)&&(qs=null),$c.forEach(Ck),Wc.forEach(Ck)}function qc(a,c){a.blockedOn===c&&(a.blockedOn=null,tg||(tg=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,IF)))}function Gc(a){function c(b){return qc(b,a)}if(0<dh.length){qc(dh[0],a);for(var p=1;p<dh.length;p++){var v=dh[p];v.blockedOn===a&&(v.blockedOn=null)}}for(Ws!==null&&qc(Ws,a),Hs!==null&&qc(Hs,a),qs!==null&&qc(qs,a),$c.forEach(c),Wc.forEach(c),p=0;p<Gs.length;p++)v=Gs[p],v.blockedOn===a&&(v.blockedOn=null);for(;0<Gs.length&&(p=Gs[0],p.blockedOn===null);)Sk(p),p.blockedOn===null&&Gs.shift()}var il=E.ReactCurrentBatchConfig,fh=!0;function NF(a,c,p,v){var b=St,S=il.transition;il.transition=null;try{St=1,ng(a,c,p,v)}finally{St=b,il.transition=S}}function AF(a,c,p,v){var b=St,S=il.transition;il.transition=null;try{St=4,ng(a,c,p,v)}finally{St=b,il.transition=S}}function ng(a,c,p,v){if(fh){var b=rg(a,c,p,v);if(b===null)xg(a,c,v,ph,p),kk(a,v);else if(_F(b,a,c,p,v))v.stopPropagation();else if(kk(a,v),c&4&&-1<PF.indexOf(a)){for(;b!==null;){var S=su(b);if(S!==null&&yk(S),S=rg(a,c,p,v),S===null&&xg(a,c,v,ph,p),S===b)break;b=S}b!==null&&v.stopPropagation()}else xg(a,c,v,null,p)}}var ph=null;function rg(a,c,p,v){if(ph=null,a=Bs(v),a=ia(a),a!==null)if(c=wi(a),c===null)a=null;else if(p=c.tag,p===13){if(a=Bc(c),a!==null)return a;a=null}else if(p===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null);return ph=a,null}function Tk(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yF()){case Jm:return 1;case pk:return 4;case oh:case bF:return 16;case mk:return 536870912;default:return 16}default:return 16}}var Ks=null,ig=null,mh=null;function Ek(){if(mh)return mh;var a,c=ig,p=c.length,v,b="value"in Ks?Ks.value:Ks.textContent,S=b.length;for(a=0;a<p&&c[a]===b[a];a++);var N=p-a;for(v=1;v<=N&&c[p-v]===b[S-v];v++);return mh=b.slice(a,1<v?1-v:void 0)}function gh(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function vh(){return!0}function Pk(){return!1}function ur(a){function c(p,v,b,S,N){this._reactName=p,this._targetInst=b,this.type=v,this.nativeEvent=S,this.target=N,this.currentTarget=null;for(var B in a)a.hasOwnProperty(B)&&(p=a[B],this[B]=p?p(S):S[B]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?vh:Pk,this.isPropagationStopped=Pk,this}return D(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=vh)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=vh)},persist:function(){},isPersistent:vh}),c}var sl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sg=ur(sl),Kc=D({},sl,{view:0,detail:0}),RF=ur(Kc),og,ag,Yc,yh=D({},Kc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cg,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Yc&&(Yc&&a.type==="mousemove"?(og=a.screenX-Yc.screenX,ag=a.screenY-Yc.screenY):ag=og=0,Yc=a),og)},movementY:function(a){return"movementY"in a?a.movementY:ag}}),_k=ur(yh),MF=D({},yh,{dataTransfer:0}),DF=ur(MF),jF=D({},Kc,{relatedTarget:0}),lg=ur(jF),OF=D({},sl,{animationName:0,elapsedTime:0,pseudoElement:0}),LF=ur(OF),FF=D({},sl,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),UF=ur(FF),BF=D({},sl,{data:0}),Ik=ur(BF),VF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$F={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function WF(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=$F[a])?!!c[a]:!1}function cg(){return WF}var HF=D({},Kc,{key:function(a){if(a.key){var c=VF[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=gh(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?zF[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cg,charCode:function(a){return a.type==="keypress"?gh(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?gh(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),qF=ur(HF),GF=D({},yh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nk=ur(GF),KF=D({},Kc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cg}),YF=ur(KF),JF=D({},sl,{propertyName:0,elapsedTime:0,pseudoElement:0}),QF=ur(JF),XF=D({},yh,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),ZF=ur(XF),e3=[9,13,27,32],ug=l&&"CompositionEvent"in window,Jc=null;l&&"documentMode"in document&&(Jc=document.documentMode);var t3=l&&"TextEvent"in window&&!Jc,Ak=l&&(!ug||Jc&&8<Jc&&11>=Jc),Rk=" ",Mk=!1;function Dk(a,c){switch(a){case"keyup":return e3.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jk(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ol=!1;function n3(a,c){switch(a){case"compositionend":return jk(c);case"keypress":return c.which!==32?null:(Mk=!0,Rk);case"textInput":return a=c.data,a===Rk&&Mk?null:a;default:return null}}function r3(a,c){if(ol)return a==="compositionend"||!ug&&Dk(a,c)?(a=Ek(),mh=ig=Ks=null,ol=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Ak&&c.locale!=="ko"?null:c.data;default:return null}}var i3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ok(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!i3[a.type]:c==="textarea"}function Lk(a,c,p,v){le(v),c=Sh(c,"onChange"),0<c.length&&(p=new sg("onChange","change",null,p,v),a.push({event:p,listeners:c}))}var Qc=null,Xc=null;function s3(a){tS(a,0)}function bh(a){var c=dl(a);if(Je(c))return a}function o3(a,c){if(a==="change")return c}var Fk=!1;if(l){var dg;if(l){var hg="oninput"in document;if(!hg){var Uk=document.createElement("div");Uk.setAttribute("oninput","return;"),hg=typeof Uk.oninput=="function"}dg=hg}else dg=!1;Fk=dg&&(!document.documentMode||9<document.documentMode)}function Bk(){Qc&&(Qc.detachEvent("onpropertychange",Vk),Xc=Qc=null)}function Vk(a){if(a.propertyName==="value"&&bh(Xc)){var c=[];Lk(c,Xc,a,Bs(a)),an(s3,c)}}function a3(a,c,p){a==="focusin"?(Bk(),Qc=c,Xc=p,Qc.attachEvent("onpropertychange",Vk)):a==="focusout"&&Bk()}function l3(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return bh(Xc)}function c3(a,c){if(a==="click")return bh(c)}function u3(a,c){if(a==="input"||a==="change")return bh(c)}function d3(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var Kr=typeof Object.is=="function"?Object.is:d3;function Zc(a,c){if(Kr(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var p=Object.keys(a),v=Object.keys(c);if(p.length!==v.length)return!1;for(v=0;v<p.length;v++){var b=p[v];if(!u.call(c,b)||!Kr(a[b],c[b]))return!1}return!0}function zk(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function $k(a,c){var p=zk(a);a=0;for(var v;p;){if(p.nodeType===3){if(v=a+p.textContent.length,a<=c&&v>=c)return{node:p,offset:c-a};a=v}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=zk(p)}}function Wk(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?Wk(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function Hk(){for(var a=window,c=jt();c instanceof a.HTMLIFrameElement;){try{var p=typeof c.contentWindow.location.href=="string"}catch{p=!1}if(p)a=c.contentWindow;else break;c=jt(a.document)}return c}function fg(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}function h3(a){var c=Hk(),p=a.focusedElem,v=a.selectionRange;if(c!==p&&p&&p.ownerDocument&&Wk(p.ownerDocument.documentElement,p)){if(v!==null&&fg(p)){if(c=v.start,a=v.end,a===void 0&&(a=c),"selectionStart"in p)p.selectionStart=c,p.selectionEnd=Math.min(a,p.value.length);else if(a=(c=p.ownerDocument||document)&&c.defaultView||window,a.getSelection){a=a.getSelection();var b=p.textContent.length,S=Math.min(v.start,b);v=v.end===void 0?S:Math.min(v.end,b),!a.extend&&S>v&&(b=v,v=S,S=b),b=$k(p,S);var N=$k(p,v);b&&N&&(a.rangeCount!==1||a.anchorNode!==b.node||a.anchorOffset!==b.offset||a.focusNode!==N.node||a.focusOffset!==N.offset)&&(c=c.createRange(),c.setStart(b.node,b.offset),a.removeAllRanges(),S>v?(a.addRange(c),a.extend(N.node,N.offset)):(c.setEnd(N.node,N.offset),a.addRange(c)))}}for(c=[],a=p;a=a.parentNode;)a.nodeType===1&&c.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<c.length;p++)a=c[p],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var f3=l&&"documentMode"in document&&11>=document.documentMode,al=null,pg=null,eu=null,mg=!1;function qk(a,c,p){var v=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;mg||al==null||al!==jt(v)||(v=al,"selectionStart"in v&&fg(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),eu&&Zc(eu,v)||(eu=v,v=Sh(pg,"onSelect"),0<v.length&&(c=new sg("onSelect","select",null,c,p),a.push({event:c,listeners:v}),c.target=al)))}function xh(a,c){var p={};return p[a.toLowerCase()]=c.toLowerCase(),p["Webkit"+a]="webkit"+c,p["Moz"+a]="moz"+c,p}var ll={animationend:xh("Animation","AnimationEnd"),animationiteration:xh("Animation","AnimationIteration"),animationstart:xh("Animation","AnimationStart"),transitionend:xh("Transition","TransitionEnd")},gg={},Gk={};l&&(Gk=document.createElement("div").style,"AnimationEvent"in window||(delete ll.animationend.animation,delete ll.animationiteration.animation,delete ll.animationstart.animation),"TransitionEvent"in window||delete ll.transitionend.transition);function wh(a){if(gg[a])return gg[a];if(!ll[a])return a;var c=ll[a],p;for(p in c)if(c.hasOwnProperty(p)&&p in Gk)return gg[a]=c[p];return a}var Kk=wh("animationend"),Yk=wh("animationiteration"),Jk=wh("animationstart"),Qk=wh("transitionend"),Xk=new Map,Zk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ys(a,c){Xk.set(a,c),s(c,[a])}for(var vg=0;vg<Zk.length;vg++){var yg=Zk[vg],p3=yg.toLowerCase(),m3=yg[0].toUpperCase()+yg.slice(1);Ys(p3,"on"+m3)}Ys(Kk,"onAnimationEnd"),Ys(Yk,"onAnimationIteration"),Ys(Jk,"onAnimationStart"),Ys("dblclick","onDoubleClick"),Ys("focusin","onFocus"),Ys("focusout","onBlur"),Ys(Qk,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),g3=new Set("cancel close invalid load scroll toggle".split(" ").concat(tu));function eS(a,c,p){var v=a.type||"unknown-event";a.currentTarget=p,ih(v,c,void 0,a),a.currentTarget=null}function tS(a,c){c=(c&4)!==0;for(var p=0;p<a.length;p++){var v=a[p],b=v.event;v=v.listeners;e:{var S=void 0;if(c)for(var N=v.length-1;0<=N;N--){var B=v[N],q=B.instance,ne=B.currentTarget;if(B=B.listener,q!==S&&b.isPropagationStopped())break e;eS(b,B,ne),S=q}else for(N=0;N<v.length;N++){if(B=v[N],q=B.instance,ne=B.currentTarget,B=B.listener,q!==S&&b.isPropagationStopped())break e;eS(b,B,ne),S=q}}}if(qr)throw a=xi,qr=!1,xi=null,a}function At(a,c){var p=c[Eg];p===void 0&&(p=c[Eg]=new Set);var v=a+"__bubble";p.has(v)||(nS(c,a,2,!1),p.add(v))}function bg(a,c,p){var v=0;c&&(v|=4),nS(p,a,v,c)}var kh="_reactListening"+Math.random().toString(36).slice(2);function nu(a){if(!a[kh]){a[kh]=!0,r.forEach(function(p){p!=="selectionchange"&&(g3.has(p)||bg(p,!1,a),bg(p,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[kh]||(c[kh]=!0,bg("selectionchange",!1,c))}}function nS(a,c,p,v){switch(Tk(c)){case 1:var b=NF;break;case 4:b=AF;break;default:b=ng}p=b.bind(null,c,p,a),b=void 0,!bi||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(b=!0),v?b!==void 0?a.addEventListener(c,p,{capture:!0,passive:b}):a.addEventListener(c,p,!0):b!==void 0?a.addEventListener(c,p,{passive:b}):a.addEventListener(c,p,!1)}function xg(a,c,p,v,b){var S=v;if((c&1)===0&&(c&2)===0&&v!==null)e:for(;;){if(v===null)return;var N=v.tag;if(N===3||N===4){var B=v.stateNode.containerInfo;if(B===b||B.nodeType===8&&B.parentNode===b)break;if(N===4)for(N=v.return;N!==null;){var q=N.tag;if((q===3||q===4)&&(q=N.stateNode.containerInfo,q===b||q.nodeType===8&&q.parentNode===b))return;N=N.return}for(;B!==null;){if(N=ia(B),N===null)return;if(q=N.tag,q===5||q===6){v=S=N;continue e}B=B.parentNode}}v=v.return}an(function(){var ne=S,pe=Bs(p),ge=[];e:{var fe=Xk.get(a);if(fe!==void 0){var Ie=sg,Me=a;switch(a){case"keypress":if(gh(p)===0)break e;case"keydown":case"keyup":Ie=qF;break;case"focusin":Me="focus",Ie=lg;break;case"focusout":Me="blur",Ie=lg;break;case"beforeblur":case"afterblur":Ie=lg;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ie=_k;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ie=DF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ie=YF;break;case Kk:case Yk:case Jk:Ie=LF;break;case Qk:Ie=QF;break;case"scroll":Ie=RF;break;case"wheel":Ie=ZF;break;case"copy":case"cut":case"paste":Ie=UF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ie=Nk}var Oe=(c&4)!==0,Jt=!Oe&&a==="scroll",J=Oe?fe!==null?fe+"Capture":null:fe;Oe=[];for(var G=ne,ee;G!==null;){ee=G;var xe=ee.stateNode;if(ee.tag===5&&xe!==null&&(ee=xe,J!==null&&(xe=Wr(G,J),xe!=null&&Oe.push(ru(G,xe,ee)))),Jt)break;G=G.return}0<Oe.length&&(fe=new Ie(fe,Me,null,p,pe),ge.push({event:fe,listeners:Oe}))}}if((c&7)===0){e:{if(fe=a==="mouseover"||a==="pointerover",Ie=a==="mouseout"||a==="pointerout",fe&&p!==rt&&(Me=p.relatedTarget||p.fromElement)&&(ia(Me)||Me[ns]))break e;if((Ie||fe)&&(fe=pe.window===pe?pe:(fe=pe.ownerDocument)?fe.defaultView||fe.parentWindow:window,Ie?(Me=p.relatedTarget||p.toElement,Ie=ne,Me=Me?ia(Me):null,Me!==null&&(Jt=wi(Me),Me!==Jt||Me.tag!==5&&Me.tag!==6)&&(Me=null)):(Ie=null,Me=ne),Ie!==Me)){if(Oe=_k,xe="onMouseLeave",J="onMouseEnter",G="mouse",(a==="pointerout"||a==="pointerover")&&(Oe=Nk,xe="onPointerLeave",J="onPointerEnter",G="pointer"),Jt=Ie==null?fe:dl(Ie),ee=Me==null?fe:dl(Me),fe=new Oe(xe,G+"leave",Ie,p,pe),fe.target=Jt,fe.relatedTarget=ee,xe=null,ia(pe)===ne&&(Oe=new Oe(J,G+"enter",Me,p,pe),Oe.target=ee,Oe.relatedTarget=Jt,xe=Oe),Jt=xe,Ie&&Me)t:{for(Oe=Ie,J=Me,G=0,ee=Oe;ee;ee=cl(ee))G++;for(ee=0,xe=J;xe;xe=cl(xe))ee++;for(;0<G-ee;)Oe=cl(Oe),G--;for(;0<ee-G;)J=cl(J),ee--;for(;G--;){if(Oe===J||J!==null&&Oe===J.alternate)break t;Oe=cl(Oe),J=cl(J)}Oe=null}else Oe=null;Ie!==null&&rS(ge,fe,Ie,Oe,!1),Me!==null&&Jt!==null&&rS(ge,Jt,Me,Oe,!0)}}e:{if(fe=ne?dl(ne):window,Ie=fe.nodeName&&fe.nodeName.toLowerCase(),Ie==="select"||Ie==="input"&&fe.type==="file")var Fe=o3;else if(Ok(fe))if(Fk)Fe=u3;else{Fe=l3;var Ve=a3}else(Ie=fe.nodeName)&&Ie.toLowerCase()==="input"&&(fe.type==="checkbox"||fe.type==="radio")&&(Fe=c3);if(Fe&&(Fe=Fe(a,ne))){Lk(ge,Fe,p,pe);break e}Ve&&Ve(a,fe,ne),a==="focusout"&&(Ve=fe._wrapperState)&&Ve.controlled&&fe.type==="number"&&on(fe,"number",fe.value)}switch(Ve=ne?dl(ne):window,a){case"focusin":(Ok(Ve)||Ve.contentEditable==="true")&&(al=Ve,pg=ne,eu=null);break;case"focusout":eu=pg=al=null;break;case"mousedown":mg=!0;break;case"contextmenu":case"mouseup":case"dragend":mg=!1,qk(ge,p,pe);break;case"selectionchange":if(f3)break;case"keydown":case"keyup":qk(ge,p,pe)}var ze;if(ug)e:{switch(a){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else ol?Dk(a,p)&&(Ge="onCompositionEnd"):a==="keydown"&&p.keyCode===229&&(Ge="onCompositionStart");Ge&&(Ak&&p.locale!=="ko"&&(ol||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&ol&&(ze=Ek()):(Ks=pe,ig="value"in Ks?Ks.value:Ks.textContent,ol=!0)),Ve=Sh(ne,Ge),0<Ve.length&&(Ge=new Ik(Ge,a,null,p,pe),ge.push({event:Ge,listeners:Ve}),ze?Ge.data=ze:(ze=jk(p),ze!==null&&(Ge.data=ze)))),(ze=t3?n3(a,p):r3(a,p))&&(ne=Sh(ne,"onBeforeInput"),0<ne.length&&(pe=new Ik("onBeforeInput","beforeinput",null,p,pe),ge.push({event:pe,listeners:ne}),pe.data=ze))}tS(ge,c)})}function ru(a,c,p){return{instance:a,listener:c,currentTarget:p}}function Sh(a,c){for(var p=c+"Capture",v=[];a!==null;){var b=a,S=b.stateNode;b.tag===5&&S!==null&&(b=S,S=Wr(a,p),S!=null&&v.unshift(ru(a,S,b)),S=Wr(a,c),S!=null&&v.push(ru(a,S,b))),a=a.return}return v}function cl(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function rS(a,c,p,v,b){for(var S=c._reactName,N=[];p!==null&&p!==v;){var B=p,q=B.alternate,ne=B.stateNode;if(q!==null&&q===v)break;B.tag===5&&ne!==null&&(B=ne,b?(q=Wr(p,S),q!=null&&N.unshift(ru(p,q,B))):b||(q=Wr(p,S),q!=null&&N.push(ru(p,q,B)))),p=p.return}N.length!==0&&a.push({event:c,listeners:N})}var v3=/\r\n?/g,y3=/\u0000|\uFFFD/g;function iS(a){return(typeof a=="string"?a:""+a).replace(v3,`
`).replace(y3,"")}function Ch(a,c,p){if(c=iS(c),iS(a)!==c&&p)throw Error(n(425))}function Th(){}var wg=null,kg=null;function Sg(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Cg=typeof setTimeout=="function"?setTimeout:void 0,b3=typeof clearTimeout=="function"?clearTimeout:void 0,sS=typeof Promise=="function"?Promise:void 0,x3=typeof queueMicrotask=="function"?queueMicrotask:typeof sS<"u"?function(a){return sS.resolve(null).then(a).catch(w3)}:Cg;function w3(a){setTimeout(function(){throw a})}function Tg(a,c){var p=c,v=0;do{var b=p.nextSibling;if(a.removeChild(p),b&&b.nodeType===8)if(p=b.data,p==="/$"){if(v===0){a.removeChild(b),Gc(c);return}v--}else p!=="$"&&p!=="$?"&&p!=="$!"||v++;p=b}while(p);Gc(c)}function Js(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return a}function oS(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var p=a.data;if(p==="$"||p==="$!"||p==="$?"){if(c===0)return a;c--}else p==="/$"&&c++}a=a.previousSibling}return null}var ul=Math.random().toString(36).slice(2),Si="__reactFiber$"+ul,iu="__reactProps$"+ul,ns="__reactContainer$"+ul,Eg="__reactEvents$"+ul,k3="__reactListeners$"+ul,S3="__reactHandles$"+ul;function ia(a){var c=a[Si];if(c)return c;for(var p=a.parentNode;p;){if(c=p[ns]||p[Si]){if(p=c.alternate,c.child!==null||p!==null&&p.child!==null)for(a=oS(a);a!==null;){if(p=a[Si])return p;a=oS(a)}return c}a=p,p=a.parentNode}return null}function su(a){return a=a[Si]||a[ns],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function dl(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(n(33))}function Eh(a){return a[iu]||null}var Pg=[],hl=-1;function Qs(a){return{current:a}}function Rt(a){0>hl||(a.current=Pg[hl],Pg[hl]=null,hl--)}function _t(a,c){hl++,Pg[hl]=a.current,a.current=c}var Xs={},In=Qs(Xs),Qn=Qs(!1),sa=Xs;function fl(a,c){var p=a.type.contextTypes;if(!p)return Xs;var v=a.stateNode;if(v&&v.__reactInternalMemoizedUnmaskedChildContext===c)return v.__reactInternalMemoizedMaskedChildContext;var b={},S;for(S in p)b[S]=c[S];return v&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=c,a.__reactInternalMemoizedMaskedChildContext=b),b}function Xn(a){return a=a.childContextTypes,a!=null}function Ph(){Rt(Qn),Rt(In)}function aS(a,c,p){if(In.current!==Xs)throw Error(n(168));_t(In,c),_t(Qn,p)}function lS(a,c,p){var v=a.stateNode;if(c=c.childContextTypes,typeof v.getChildContext!="function")return p;v=v.getChildContext();for(var b in v)if(!(b in c))throw Error(n(108,ie(a)||"Unknown",b));return D({},p,v)}function _h(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Xs,sa=In.current,_t(In,a),_t(Qn,Qn.current),!0}function cS(a,c,p){var v=a.stateNode;if(!v)throw Error(n(169));p?(a=lS(a,c,sa),v.__reactInternalMemoizedMergedChildContext=a,Rt(Qn),Rt(In),_t(In,a)):Rt(Qn),_t(Qn,p)}var rs=null,Ih=!1,_g=!1;function uS(a){rs===null?rs=[a]:rs.push(a)}function C3(a){Ih=!0,uS(a)}function Zs(){if(!_g&&rs!==null){_g=!0;var a=0,c=St;try{var p=rs;for(St=1;a<p.length;a++){var v=p[a];do v=v(!0);while(v!==null)}rs=null,Ih=!1}catch(b){throw rs!==null&&(rs=rs.slice(a+1)),hk(Jm,Zs),b}finally{St=c,_g=!1}}return null}var pl=[],ml=0,Nh=null,Ah=0,_r=[],Ir=0,oa=null,is=1,ss="";function aa(a,c){pl[ml++]=Ah,pl[ml++]=Nh,Nh=a,Ah=c}function dS(a,c,p){_r[Ir++]=is,_r[Ir++]=ss,_r[Ir++]=oa,oa=a;var v=is;a=ss;var b=32-Gr(v)-1;v&=~(1<<b),p+=1;var S=32-Gr(c)+b;if(30<S){var N=b-b%5;S=(v&(1<<N)-1).toString(32),v>>=N,b-=N,is=1<<32-Gr(c)+b|p<<b|v,ss=S+a}else is=1<<S|p<<b|v,ss=a}function Ig(a){a.return!==null&&(aa(a,1),dS(a,1,0))}function Ng(a){for(;a===Nh;)Nh=pl[--ml],pl[ml]=null,Ah=pl[--ml],pl[ml]=null;for(;a===oa;)oa=_r[--Ir],_r[Ir]=null,ss=_r[--Ir],_r[Ir]=null,is=_r[--Ir],_r[Ir]=null}var dr=null,hr=null,Ot=!1,Yr=null;function hS(a,c){var p=Mr(5,null,null,0);p.elementType="DELETED",p.stateNode=c,p.return=a,c=a.deletions,c===null?(a.deletions=[p],a.flags|=16):c.push(p)}function fS(a,c){switch(a.tag){case 5:var p=a.type;return c=c.nodeType!==1||p.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(a.stateNode=c,dr=a,hr=Js(c.firstChild),!0):!1;case 6:return c=a.pendingProps===""||c.nodeType!==3?null:c,c!==null?(a.stateNode=c,dr=a,hr=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(p=oa!==null?{id:is,overflow:ss}:null,a.memoizedState={dehydrated:c,treeContext:p,retryLane:1073741824},p=Mr(18,null,null,0),p.stateNode=c,p.return=a,a.child=p,dr=a,hr=null,!0):!1;default:return!1}}function Ag(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Rg(a){if(Ot){var c=hr;if(c){var p=c;if(!fS(a,c)){if(Ag(a))throw Error(n(418));c=Js(p.nextSibling);var v=dr;c&&fS(a,c)?hS(v,p):(a.flags=a.flags&-4097|2,Ot=!1,dr=a)}}else{if(Ag(a))throw Error(n(418));a.flags=a.flags&-4097|2,Ot=!1,dr=a}}}function pS(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;dr=a}function Rh(a){if(a!==dr)return!1;if(!Ot)return pS(a),Ot=!0,!1;var c;if((c=a.tag!==3)&&!(c=a.tag!==5)&&(c=a.type,c=c!=="head"&&c!=="body"&&!Sg(a.type,a.memoizedProps)),c&&(c=hr)){if(Ag(a))throw mS(),Error(n(418));for(;c;)hS(a,c),c=Js(c.nextSibling)}if(pS(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8){var p=a.data;if(p==="/$"){if(c===0){hr=Js(a.nextSibling);break e}c--}else p!=="$"&&p!=="$!"&&p!=="$?"||c++}a=a.nextSibling}hr=null}}else hr=dr?Js(a.stateNode.nextSibling):null;return!0}function mS(){for(var a=hr;a;)a=Js(a.nextSibling)}function gl(){hr=dr=null,Ot=!1}function Mg(a){Yr===null?Yr=[a]:Yr.push(a)}var T3=E.ReactCurrentBatchConfig;function ou(a,c,p){if(a=p.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(n(309));var v=p.stateNode}if(!v)throw Error(n(147,a));var b=v,S=""+a;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===S?c.ref:(c=function(N){var B=b.refs;N===null?delete B[S]:B[S]=N},c._stringRef=S,c)}if(typeof a!="string")throw Error(n(284));if(!p._owner)throw Error(n(290,a))}return a}function Mh(a,c){throw a=Object.prototype.toString.call(c),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a))}function gS(a){var c=a._init;return c(a._payload)}function vS(a){function c(J,G){if(a){var ee=J.deletions;ee===null?(J.deletions=[G],J.flags|=16):ee.push(G)}}function p(J,G){if(!a)return null;for(;G!==null;)c(J,G),G=G.sibling;return null}function v(J,G){for(J=new Map;G!==null;)G.key!==null?J.set(G.key,G):J.set(G.index,G),G=G.sibling;return J}function b(J,G){return J=ao(J,G),J.index=0,J.sibling=null,J}function S(J,G,ee){return J.index=ee,a?(ee=J.alternate,ee!==null?(ee=ee.index,ee<G?(J.flags|=2,G):ee):(J.flags|=2,G)):(J.flags|=1048576,G)}function N(J){return a&&J.alternate===null&&(J.flags|=2),J}function B(J,G,ee,xe){return G===null||G.tag!==6?(G=Cv(ee,J.mode,xe),G.return=J,G):(G=b(G,ee),G.return=J,G)}function q(J,G,ee,xe){var Fe=ee.type;return Fe===L?pe(J,G,ee.props.children,xe,ee.key):G!==null&&(G.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===X&&gS(Fe)===G.type)?(xe=b(G,ee.props),xe.ref=ou(J,G,ee),xe.return=J,xe):(xe=rf(ee.type,ee.key,ee.props,null,J.mode,xe),xe.ref=ou(J,G,ee),xe.return=J,xe)}function ne(J,G,ee,xe){return G===null||G.tag!==4||G.stateNode.containerInfo!==ee.containerInfo||G.stateNode.implementation!==ee.implementation?(G=Tv(ee,J.mode,xe),G.return=J,G):(G=b(G,ee.children||[]),G.return=J,G)}function pe(J,G,ee,xe,Fe){return G===null||G.tag!==7?(G=ma(ee,J.mode,xe,Fe),G.return=J,G):(G=b(G,ee),G.return=J,G)}function ge(J,G,ee){if(typeof G=="string"&&G!==""||typeof G=="number")return G=Cv(""+G,J.mode,ee),G.return=J,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case I:return ee=rf(G.type,G.key,G.props,null,J.mode,ee),ee.ref=ou(J,null,G),ee.return=J,ee;case A:return G=Tv(G,J.mode,ee),G.return=J,G;case X:var xe=G._init;return ge(J,xe(G._payload),ee)}if(Fn(G)||te(G))return G=ma(G,J.mode,ee,null),G.return=J,G;Mh(J,G)}return null}function fe(J,G,ee,xe){var Fe=G!==null?G.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number")return Fe!==null?null:B(J,G,""+ee,xe);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case I:return ee.key===Fe?q(J,G,ee,xe):null;case A:return ee.key===Fe?ne(J,G,ee,xe):null;case X:return Fe=ee._init,fe(J,G,Fe(ee._payload),xe)}if(Fn(ee)||te(ee))return Fe!==null?null:pe(J,G,ee,xe,null);Mh(J,ee)}return null}function Ie(J,G,ee,xe,Fe){if(typeof xe=="string"&&xe!==""||typeof xe=="number")return J=J.get(ee)||null,B(G,J,""+xe,Fe);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case I:return J=J.get(xe.key===null?ee:xe.key)||null,q(G,J,xe,Fe);case A:return J=J.get(xe.key===null?ee:xe.key)||null,ne(G,J,xe,Fe);case X:var Ve=xe._init;return Ie(J,G,ee,Ve(xe._payload),Fe)}if(Fn(xe)||te(xe))return J=J.get(ee)||null,pe(G,J,xe,Fe,null);Mh(G,xe)}return null}function Me(J,G,ee,xe){for(var Fe=null,Ve=null,ze=G,Ge=G=0,gn=null;ze!==null&&Ge<ee.length;Ge++){ze.index>Ge?(gn=ze,ze=null):gn=ze.sibling;var yt=fe(J,ze,ee[Ge],xe);if(yt===null){ze===null&&(ze=gn);break}a&&ze&&yt.alternate===null&&c(J,ze),G=S(yt,G,Ge),Ve===null?Fe=yt:Ve.sibling=yt,Ve=yt,ze=gn}if(Ge===ee.length)return p(J,ze),Ot&&aa(J,Ge),Fe;if(ze===null){for(;Ge<ee.length;Ge++)ze=ge(J,ee[Ge],xe),ze!==null&&(G=S(ze,G,Ge),Ve===null?Fe=ze:Ve.sibling=ze,Ve=ze);return Ot&&aa(J,Ge),Fe}for(ze=v(J,ze);Ge<ee.length;Ge++)gn=Ie(ze,J,Ge,ee[Ge],xe),gn!==null&&(a&&gn.alternate!==null&&ze.delete(gn.key===null?Ge:gn.key),G=S(gn,G,Ge),Ve===null?Fe=gn:Ve.sibling=gn,Ve=gn);return a&&ze.forEach(function(lo){return c(J,lo)}),Ot&&aa(J,Ge),Fe}function Oe(J,G,ee,xe){var Fe=te(ee);if(typeof Fe!="function")throw Error(n(150));if(ee=Fe.call(ee),ee==null)throw Error(n(151));for(var Ve=Fe=null,ze=G,Ge=G=0,gn=null,yt=ee.next();ze!==null&&!yt.done;Ge++,yt=ee.next()){ze.index>Ge?(gn=ze,ze=null):gn=ze.sibling;var lo=fe(J,ze,yt.value,xe);if(lo===null){ze===null&&(ze=gn);break}a&&ze&&lo.alternate===null&&c(J,ze),G=S(lo,G,Ge),Ve===null?Fe=lo:Ve.sibling=lo,Ve=lo,ze=gn}if(yt.done)return p(J,ze),Ot&&aa(J,Ge),Fe;if(ze===null){for(;!yt.done;Ge++,yt=ee.next())yt=ge(J,yt.value,xe),yt!==null&&(G=S(yt,G,Ge),Ve===null?Fe=yt:Ve.sibling=yt,Ve=yt);return Ot&&aa(J,Ge),Fe}for(ze=v(J,ze);!yt.done;Ge++,yt=ee.next())yt=Ie(ze,J,Ge,yt.value,xe),yt!==null&&(a&&yt.alternate!==null&&ze.delete(yt.key===null?Ge:yt.key),G=S(yt,G,Ge),Ve===null?Fe=yt:Ve.sibling=yt,Ve=yt);return a&&ze.forEach(function(iU){return c(J,iU)}),Ot&&aa(J,Ge),Fe}function Jt(J,G,ee,xe){if(typeof ee=="object"&&ee!==null&&ee.type===L&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case I:e:{for(var Fe=ee.key,Ve=G;Ve!==null;){if(Ve.key===Fe){if(Fe=ee.type,Fe===L){if(Ve.tag===7){p(J,Ve.sibling),G=b(Ve,ee.props.children),G.return=J,J=G;break e}}else if(Ve.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===X&&gS(Fe)===Ve.type){p(J,Ve.sibling),G=b(Ve,ee.props),G.ref=ou(J,Ve,ee),G.return=J,J=G;break e}p(J,Ve);break}else c(J,Ve);Ve=Ve.sibling}ee.type===L?(G=ma(ee.props.children,J.mode,xe,ee.key),G.return=J,J=G):(xe=rf(ee.type,ee.key,ee.props,null,J.mode,xe),xe.ref=ou(J,G,ee),xe.return=J,J=xe)}return N(J);case A:e:{for(Ve=ee.key;G!==null;){if(G.key===Ve)if(G.tag===4&&G.stateNode.containerInfo===ee.containerInfo&&G.stateNode.implementation===ee.implementation){p(J,G.sibling),G=b(G,ee.children||[]),G.return=J,J=G;break e}else{p(J,G);break}else c(J,G);G=G.sibling}G=Tv(ee,J.mode,xe),G.return=J,J=G}return N(J);case X:return Ve=ee._init,Jt(J,G,Ve(ee._payload),xe)}if(Fn(ee))return Me(J,G,ee,xe);if(te(ee))return Oe(J,G,ee,xe);Mh(J,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"?(ee=""+ee,G!==null&&G.tag===6?(p(J,G.sibling),G=b(G,ee),G.return=J,J=G):(p(J,G),G=Cv(ee,J.mode,xe),G.return=J,J=G),N(J)):p(J,G)}return Jt}var vl=vS(!0),yS=vS(!1),Dh=Qs(null),jh=null,yl=null,Dg=null;function jg(){Dg=yl=jh=null}function Og(a){var c=Dh.current;Rt(Dh),a._currentValue=c}function Lg(a,c,p){for(;a!==null;){var v=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,v!==null&&(v.childLanes|=c)):v!==null&&(v.childLanes&c)!==c&&(v.childLanes|=c),a===p)break;a=a.return}}function bl(a,c){jh=a,Dg=yl=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&c)!==0&&(Zn=!0),a.firstContext=null)}function Nr(a){var c=a._currentValue;if(Dg!==a)if(a={context:a,memoizedValue:c,next:null},yl===null){if(jh===null)throw Error(n(308));yl=a,jh.dependencies={lanes:0,firstContext:a}}else yl=yl.next=a;return c}var la=null;function Fg(a){la===null?la=[a]:la.push(a)}function bS(a,c,p,v){var b=c.interleaved;return b===null?(p.next=p,Fg(c)):(p.next=b.next,b.next=p),c.interleaved=p,os(a,v)}function os(a,c){a.lanes|=c;var p=a.alternate;for(p!==null&&(p.lanes|=c),p=a,a=a.return;a!==null;)a.childLanes|=c,p=a.alternate,p!==null&&(p.childLanes|=c),p=a,a=a.return;return p.tag===3?p.stateNode:null}var eo=!1;function Ug(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xS(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function as(a,c){return{eventTime:a,lane:c,tag:0,payload:null,callback:null,next:null}}function to(a,c,p){var v=a.updateQueue;if(v===null)return null;if(v=v.shared,(gt&2)!==0){var b=v.pending;return b===null?c.next=c:(c.next=b.next,b.next=c),v.pending=c,os(a,p)}return b=v.interleaved,b===null?(c.next=c,Fg(v)):(c.next=b.next,b.next=c),v.interleaved=c,os(a,p)}function Oh(a,c,p){if(c=c.updateQueue,c!==null&&(c=c.shared,(p&4194240)!==0)){var v=c.lanes;v&=a.pendingLanes,p|=v,c.lanes=p,Zm(a,p)}}function wS(a,c){var p=a.updateQueue,v=a.alternate;if(v!==null&&(v=v.updateQueue,p===v)){var b=null,S=null;if(p=p.firstBaseUpdate,p!==null){do{var N={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};S===null?b=S=N:S=S.next=N,p=p.next}while(p!==null);S===null?b=S=c:S=S.next=c}else b=S=c;p={baseState:v.baseState,firstBaseUpdate:b,lastBaseUpdate:S,shared:v.shared,effects:v.effects},a.updateQueue=p;return}a=p.lastBaseUpdate,a===null?p.firstBaseUpdate=c:a.next=c,p.lastBaseUpdate=c}function Lh(a,c,p,v){var b=a.updateQueue;eo=!1;var S=b.firstBaseUpdate,N=b.lastBaseUpdate,B=b.shared.pending;if(B!==null){b.shared.pending=null;var q=B,ne=q.next;q.next=null,N===null?S=ne:N.next=ne,N=q;var pe=a.alternate;pe!==null&&(pe=pe.updateQueue,B=pe.lastBaseUpdate,B!==N&&(B===null?pe.firstBaseUpdate=ne:B.next=ne,pe.lastBaseUpdate=q))}if(S!==null){var ge=b.baseState;N=0,pe=ne=q=null,B=S;do{var fe=B.lane,Ie=B.eventTime;if((v&fe)===fe){pe!==null&&(pe=pe.next={eventTime:Ie,lane:0,tag:B.tag,payload:B.payload,callback:B.callback,next:null});e:{var Me=a,Oe=B;switch(fe=c,Ie=p,Oe.tag){case 1:if(Me=Oe.payload,typeof Me=="function"){ge=Me.call(Ie,ge,fe);break e}ge=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=Oe.payload,fe=typeof Me=="function"?Me.call(Ie,ge,fe):Me,fe==null)break e;ge=D({},ge,fe);break e;case 2:eo=!0}}B.callback!==null&&B.lane!==0&&(a.flags|=64,fe=b.effects,fe===null?b.effects=[B]:fe.push(B))}else Ie={eventTime:Ie,lane:fe,tag:B.tag,payload:B.payload,callback:B.callback,next:null},pe===null?(ne=pe=Ie,q=ge):pe=pe.next=Ie,N|=fe;if(B=B.next,B===null){if(B=b.shared.pending,B===null)break;fe=B,B=fe.next,fe.next=null,b.lastBaseUpdate=fe,b.shared.pending=null}}while(!0);if(pe===null&&(q=ge),b.baseState=q,b.firstBaseUpdate=ne,b.lastBaseUpdate=pe,c=b.shared.interleaved,c!==null){b=c;do N|=b.lane,b=b.next;while(b!==c)}else S===null&&(b.shared.lanes=0);da|=N,a.lanes=N,a.memoizedState=ge}}function kS(a,c,p){if(a=c.effects,c.effects=null,a!==null)for(c=0;c<a.length;c++){var v=a[c],b=v.callback;if(b!==null){if(v.callback=null,v=p,typeof b!="function")throw Error(n(191,b));b.call(v)}}}var au={},Ci=Qs(au),lu=Qs(au),cu=Qs(au);function ca(a){if(a===au)throw Error(n(174));return a}function Bg(a,c){switch(_t(cu,c),_t(lu,a),_t(Ci,au),a=c.nodeType,a){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:Q(null,"");break;default:a=a===8?c.parentNode:c,c=a.namespaceURI||null,a=a.tagName,c=Q(c,a)}Rt(Ci),_t(Ci,c)}function xl(){Rt(Ci),Rt(lu),Rt(cu)}function SS(a){ca(cu.current);var c=ca(Ci.current),p=Q(c,a.type);c!==p&&(_t(lu,a),_t(Ci,p))}function Vg(a){lu.current===a&&(Rt(Ci),Rt(lu))}var Ut=Qs(0);function Fh(a){for(var c=a;c!==null;){if(c.tag===13){var p=c.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var zg=[];function $g(){for(var a=0;a<zg.length;a++)zg[a]._workInProgressVersionPrimary=null;zg.length=0}var Uh=E.ReactCurrentDispatcher,Wg=E.ReactCurrentBatchConfig,ua=0,Bt=null,ln=null,pn=null,Bh=!1,uu=!1,du=0,E3=0;function Nn(){throw Error(n(321))}function Hg(a,c){if(c===null)return!1;for(var p=0;p<c.length&&p<a.length;p++)if(!Kr(a[p],c[p]))return!1;return!0}function qg(a,c,p,v,b,S){if(ua=S,Bt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Uh.current=a===null||a.memoizedState===null?N3:A3,a=p(v,b),uu){S=0;do{if(uu=!1,du=0,25<=S)throw Error(n(301));S+=1,pn=ln=null,c.updateQueue=null,Uh.current=R3,a=p(v,b)}while(uu)}if(Uh.current=$h,c=ln!==null&&ln.next!==null,ua=0,pn=ln=Bt=null,Bh=!1,c)throw Error(n(300));return a}function Gg(){var a=du!==0;return du=0,a}function Ti(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pn===null?Bt.memoizedState=pn=a:pn=pn.next=a,pn}function Ar(){if(ln===null){var a=Bt.alternate;a=a!==null?a.memoizedState:null}else a=ln.next;var c=pn===null?Bt.memoizedState:pn.next;if(c!==null)pn=c,ln=a;else{if(a===null)throw Error(n(310));ln=a,a={memoizedState:ln.memoizedState,baseState:ln.baseState,baseQueue:ln.baseQueue,queue:ln.queue,next:null},pn===null?Bt.memoizedState=pn=a:pn=pn.next=a}return pn}function hu(a,c){return typeof c=="function"?c(a):c}function Kg(a){var c=Ar(),p=c.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=a;var v=ln,b=v.baseQueue,S=p.pending;if(S!==null){if(b!==null){var N=b.next;b.next=S.next,S.next=N}v.baseQueue=b=S,p.pending=null}if(b!==null){S=b.next,v=v.baseState;var B=N=null,q=null,ne=S;do{var pe=ne.lane;if((ua&pe)===pe)q!==null&&(q=q.next={lane:0,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),v=ne.hasEagerState?ne.eagerState:a(v,ne.action);else{var ge={lane:pe,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null};q===null?(B=q=ge,N=v):q=q.next=ge,Bt.lanes|=pe,da|=pe}ne=ne.next}while(ne!==null&&ne!==S);q===null?N=v:q.next=B,Kr(v,c.memoizedState)||(Zn=!0),c.memoizedState=v,c.baseState=N,c.baseQueue=q,p.lastRenderedState=v}if(a=p.interleaved,a!==null){b=a;do S=b.lane,Bt.lanes|=S,da|=S,b=b.next;while(b!==a)}else b===null&&(p.lanes=0);return[c.memoizedState,p.dispatch]}function Yg(a){var c=Ar(),p=c.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=a;var v=p.dispatch,b=p.pending,S=c.memoizedState;if(b!==null){p.pending=null;var N=b=b.next;do S=a(S,N.action),N=N.next;while(N!==b);Kr(S,c.memoizedState)||(Zn=!0),c.memoizedState=S,c.baseQueue===null&&(c.baseState=S),p.lastRenderedState=S}return[S,v]}function CS(){}function TS(a,c){var p=Bt,v=Ar(),b=c(),S=!Kr(v.memoizedState,b);if(S&&(v.memoizedState=b,Zn=!0),v=v.queue,Jg(_S.bind(null,p,v,a),[a]),v.getSnapshot!==c||S||pn!==null&&pn.memoizedState.tag&1){if(p.flags|=2048,fu(9,PS.bind(null,p,v,b,c),void 0,null),mn===null)throw Error(n(349));(ua&30)!==0||ES(p,c,b)}return b}function ES(a,c,p){a.flags|=16384,a={getSnapshot:c,value:p},c=Bt.updateQueue,c===null?(c={lastEffect:null,stores:null},Bt.updateQueue=c,c.stores=[a]):(p=c.stores,p===null?c.stores=[a]:p.push(a))}function PS(a,c,p,v){c.value=p,c.getSnapshot=v,IS(c)&&NS(a)}function _S(a,c,p){return p(function(){IS(c)&&NS(a)})}function IS(a){var c=a.getSnapshot;a=a.value;try{var p=c();return!Kr(a,p)}catch{return!0}}function NS(a){var c=os(a,1);c!==null&&Zr(c,a,1,-1)}function AS(a){var c=Ti();return typeof a=="function"&&(a=a()),c.memoizedState=c.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hu,lastRenderedState:a},c.queue=a,a=a.dispatch=I3.bind(null,Bt,a),[c.memoizedState,a]}function fu(a,c,p,v){return a={tag:a,create:c,destroy:p,deps:v,next:null},c=Bt.updateQueue,c===null?(c={lastEffect:null,stores:null},Bt.updateQueue=c,c.lastEffect=a.next=a):(p=c.lastEffect,p===null?c.lastEffect=a.next=a:(v=p.next,p.next=a,a.next=v,c.lastEffect=a)),a}function RS(){return Ar().memoizedState}function Vh(a,c,p,v){var b=Ti();Bt.flags|=a,b.memoizedState=fu(1|c,p,void 0,v===void 0?null:v)}function zh(a,c,p,v){var b=Ar();v=v===void 0?null:v;var S=void 0;if(ln!==null){var N=ln.memoizedState;if(S=N.destroy,v!==null&&Hg(v,N.deps)){b.memoizedState=fu(c,p,S,v);return}}Bt.flags|=a,b.memoizedState=fu(1|c,p,S,v)}function MS(a,c){return Vh(8390656,8,a,c)}function Jg(a,c){return zh(2048,8,a,c)}function DS(a,c){return zh(4,2,a,c)}function jS(a,c){return zh(4,4,a,c)}function OS(a,c){if(typeof c=="function")return a=a(),c(a),function(){c(null)};if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function LS(a,c,p){return p=p!=null?p.concat([a]):null,zh(4,4,OS.bind(null,c,a),p)}function Qg(){}function FS(a,c){var p=Ar();c=c===void 0?null:c;var v=p.memoizedState;return v!==null&&c!==null&&Hg(c,v[1])?v[0]:(p.memoizedState=[a,c],a)}function US(a,c){var p=Ar();c=c===void 0?null:c;var v=p.memoizedState;return v!==null&&c!==null&&Hg(c,v[1])?v[0]:(a=a(),p.memoizedState=[a,c],a)}function BS(a,c,p){return(ua&21)===0?(a.baseState&&(a.baseState=!1,Zn=!0),a.memoizedState=p):(Kr(p,c)||(p=gk(),Bt.lanes|=p,da|=p,a.baseState=!0),c)}function P3(a,c){var p=St;St=p!==0&&4>p?p:4,a(!0);var v=Wg.transition;Wg.transition={};try{a(!1),c()}finally{St=p,Wg.transition=v}}function VS(){return Ar().memoizedState}function _3(a,c,p){var v=so(a);if(p={lane:v,action:p,hasEagerState:!1,eagerState:null,next:null},zS(a))$S(c,p);else if(p=bS(a,c,p,v),p!==null){var b=Bn();Zr(p,a,v,b),WS(p,c,v)}}function I3(a,c,p){var v=so(a),b={lane:v,action:p,hasEagerState:!1,eagerState:null,next:null};if(zS(a))$S(c,b);else{var S=a.alternate;if(a.lanes===0&&(S===null||S.lanes===0)&&(S=c.lastRenderedReducer,S!==null))try{var N=c.lastRenderedState,B=S(N,p);if(b.hasEagerState=!0,b.eagerState=B,Kr(B,N)){var q=c.interleaved;q===null?(b.next=b,Fg(c)):(b.next=q.next,q.next=b),c.interleaved=b;return}}catch{}finally{}p=bS(a,c,b,v),p!==null&&(b=Bn(),Zr(p,a,v,b),WS(p,c,v))}}function zS(a){var c=a.alternate;return a===Bt||c!==null&&c===Bt}function $S(a,c){uu=Bh=!0;var p=a.pending;p===null?c.next=c:(c.next=p.next,p.next=c),a.pending=c}function WS(a,c,p){if((p&4194240)!==0){var v=c.lanes;v&=a.pendingLanes,p|=v,c.lanes=p,Zm(a,p)}}var $h={readContext:Nr,useCallback:Nn,useContext:Nn,useEffect:Nn,useImperativeHandle:Nn,useInsertionEffect:Nn,useLayoutEffect:Nn,useMemo:Nn,useReducer:Nn,useRef:Nn,useState:Nn,useDebugValue:Nn,useDeferredValue:Nn,useTransition:Nn,useMutableSource:Nn,useSyncExternalStore:Nn,useId:Nn,unstable_isNewReconciler:!1},N3={readContext:Nr,useCallback:function(a,c){return Ti().memoizedState=[a,c===void 0?null:c],a},useContext:Nr,useEffect:MS,useImperativeHandle:function(a,c,p){return p=p!=null?p.concat([a]):null,Vh(4194308,4,OS.bind(null,c,a),p)},useLayoutEffect:function(a,c){return Vh(4194308,4,a,c)},useInsertionEffect:function(a,c){return Vh(4,2,a,c)},useMemo:function(a,c){var p=Ti();return c=c===void 0?null:c,a=a(),p.memoizedState=[a,c],a},useReducer:function(a,c,p){var v=Ti();return c=p!==void 0?p(c):c,v.memoizedState=v.baseState=c,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:c},v.queue=a,a=a.dispatch=_3.bind(null,Bt,a),[v.memoizedState,a]},useRef:function(a){var c=Ti();return a={current:a},c.memoizedState=a},useState:AS,useDebugValue:Qg,useDeferredValue:function(a){return Ti().memoizedState=a},useTransition:function(){var a=AS(!1),c=a[0];return a=P3.bind(null,a[1]),Ti().memoizedState=a,[c,a]},useMutableSource:function(){},useSyncExternalStore:function(a,c,p){var v=Bt,b=Ti();if(Ot){if(p===void 0)throw Error(n(407));p=p()}else{if(p=c(),mn===null)throw Error(n(349));(ua&30)!==0||ES(v,c,p)}b.memoizedState=p;var S={value:p,getSnapshot:c};return b.queue=S,MS(_S.bind(null,v,S,a),[a]),v.flags|=2048,fu(9,PS.bind(null,v,S,p,c),void 0,null),p},useId:function(){var a=Ti(),c=mn.identifierPrefix;if(Ot){var p=ss,v=is;p=(v&~(1<<32-Gr(v)-1)).toString(32)+p,c=":"+c+"R"+p,p=du++,0<p&&(c+="H"+p.toString(32)),c+=":"}else p=E3++,c=":"+c+"r"+p.toString(32)+":";return a.memoizedState=c},unstable_isNewReconciler:!1},A3={readContext:Nr,useCallback:FS,useContext:Nr,useEffect:Jg,useImperativeHandle:LS,useInsertionEffect:DS,useLayoutEffect:jS,useMemo:US,useReducer:Kg,useRef:RS,useState:function(){return Kg(hu)},useDebugValue:Qg,useDeferredValue:function(a){var c=Ar();return BS(c,ln.memoizedState,a)},useTransition:function(){var a=Kg(hu)[0],c=Ar().memoizedState;return[a,c]},useMutableSource:CS,useSyncExternalStore:TS,useId:VS,unstable_isNewReconciler:!1},R3={readContext:Nr,useCallback:FS,useContext:Nr,useEffect:Jg,useImperativeHandle:LS,useInsertionEffect:DS,useLayoutEffect:jS,useMemo:US,useReducer:Yg,useRef:RS,useState:function(){return Yg(hu)},useDebugValue:Qg,useDeferredValue:function(a){var c=Ar();return ln===null?c.memoizedState=a:BS(c,ln.memoizedState,a)},useTransition:function(){var a=Yg(hu)[0],c=Ar().memoizedState;return[a,c]},useMutableSource:CS,useSyncExternalStore:TS,useId:VS,unstable_isNewReconciler:!1};function Jr(a,c){if(a&&a.defaultProps){c=D({},c),a=a.defaultProps;for(var p in a)c[p]===void 0&&(c[p]=a[p]);return c}return c}function Xg(a,c,p,v){c=a.memoizedState,p=p(v,c),p=p==null?c:D({},c,p),a.memoizedState=p,a.lanes===0&&(a.updateQueue.baseState=p)}var Wh={isMounted:function(a){return(a=a._reactInternals)?wi(a)===a:!1},enqueueSetState:function(a,c,p){a=a._reactInternals;var v=Bn(),b=so(a),S=as(v,b);S.payload=c,p!=null&&(S.callback=p),c=to(a,S,b),c!==null&&(Zr(c,a,b,v),Oh(c,a,b))},enqueueReplaceState:function(a,c,p){a=a._reactInternals;var v=Bn(),b=so(a),S=as(v,b);S.tag=1,S.payload=c,p!=null&&(S.callback=p),c=to(a,S,b),c!==null&&(Zr(c,a,b,v),Oh(c,a,b))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var p=Bn(),v=so(a),b=as(p,v);b.tag=2,c!=null&&(b.callback=c),c=to(a,b,v),c!==null&&(Zr(c,a,v,p),Oh(c,a,v))}};function HS(a,c,p,v,b,S,N){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(v,S,N):c.prototype&&c.prototype.isPureReactComponent?!Zc(p,v)||!Zc(b,S):!0}function qS(a,c,p){var v=!1,b=Xs,S=c.contextType;return typeof S=="object"&&S!==null?S=Nr(S):(b=Xn(c)?sa:In.current,v=c.contextTypes,S=(v=v!=null)?fl(a,b):Xs),c=new c(p,S),a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Wh,a.stateNode=c,c._reactInternals=a,v&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=S),c}function GS(a,c,p,v){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(p,v),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(p,v),c.state!==a&&Wh.enqueueReplaceState(c,c.state,null)}function Zg(a,c,p,v){var b=a.stateNode;b.props=p,b.state=a.memoizedState,b.refs={},Ug(a);var S=c.contextType;typeof S=="object"&&S!==null?b.context=Nr(S):(S=Xn(c)?sa:In.current,b.context=fl(a,S)),b.state=a.memoizedState,S=c.getDerivedStateFromProps,typeof S=="function"&&(Xg(a,c,S,p),b.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(c=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),c!==b.state&&Wh.enqueueReplaceState(b,b.state,null),Lh(a,p,b,v),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.flags|=4194308)}function wl(a,c){try{var p="",v=c;do p+=oe(v),v=v.return;while(v);var b=p}catch(S){b=`
Error generating stack: `+S.message+`
`+S.stack}return{value:a,source:c,stack:b,digest:null}}function ev(a,c,p){return{value:a,source:null,stack:p??null,digest:c??null}}function tv(a,c){try{console.error(c.value)}catch(p){setTimeout(function(){throw p})}}var M3=typeof WeakMap=="function"?WeakMap:Map;function KS(a,c,p){p=as(-1,p),p.tag=3,p.payload={element:null};var v=c.value;return p.callback=function(){Qh||(Qh=!0,gv=v),tv(a,c)},p}function YS(a,c,p){p=as(-1,p),p.tag=3;var v=a.type.getDerivedStateFromError;if(typeof v=="function"){var b=c.value;p.payload=function(){return v(b)},p.callback=function(){tv(a,c)}}var S=a.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(p.callback=function(){tv(a,c),typeof v!="function"&&(ro===null?ro=new Set([this]):ro.add(this));var N=c.stack;this.componentDidCatch(c.value,{componentStack:N!==null?N:""})}),p}function JS(a,c,p){var v=a.pingCache;if(v===null){v=a.pingCache=new M3;var b=new Set;v.set(c,b)}else b=v.get(c),b===void 0&&(b=new Set,v.set(c,b));b.has(p)||(b.add(p),a=G3.bind(null,a,c,p),c.then(a,a))}function QS(a){do{var c;if((c=a.tag===13)&&(c=a.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return a;a=a.return}while(a!==null);return null}function XS(a,c,p,v,b){return(a.mode&1)===0?(a===c?a.flags|=65536:(a.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(c=as(-1,1),c.tag=2,to(p,c,1))),p.lanes|=1),a):(a.flags|=65536,a.lanes=b,a)}var D3=E.ReactCurrentOwner,Zn=!1;function Un(a,c,p,v){c.child=a===null?yS(c,null,p,v):vl(c,a.child,p,v)}function ZS(a,c,p,v,b){p=p.render;var S=c.ref;return bl(c,b),v=qg(a,c,p,v,S,b),p=Gg(),a!==null&&!Zn?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~b,ls(a,c,b)):(Ot&&p&&Ig(c),c.flags|=1,Un(a,c,v,b),c.child)}function eC(a,c,p,v,b){if(a===null){var S=p.type;return typeof S=="function"&&!Sv(S)&&S.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(c.tag=15,c.type=S,tC(a,c,S,v,b)):(a=rf(p.type,null,v,c,c.mode,b),a.ref=c.ref,a.return=c,c.child=a)}if(S=a.child,(a.lanes&b)===0){var N=S.memoizedProps;if(p=p.compare,p=p!==null?p:Zc,p(N,v)&&a.ref===c.ref)return ls(a,c,b)}return c.flags|=1,a=ao(S,v),a.ref=c.ref,a.return=c,c.child=a}function tC(a,c,p,v,b){if(a!==null){var S=a.memoizedProps;if(Zc(S,v)&&a.ref===c.ref)if(Zn=!1,c.pendingProps=v=S,(a.lanes&b)!==0)(a.flags&131072)!==0&&(Zn=!0);else return c.lanes=a.lanes,ls(a,c,b)}return nv(a,c,p,v,b)}function nC(a,c,p){var v=c.pendingProps,b=v.children,S=a!==null?a.memoizedState:null;if(v.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},_t(Sl,fr),fr|=p;else{if((p&1073741824)===0)return a=S!==null?S.baseLanes|p:p,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:a,cachePool:null,transitions:null},c.updateQueue=null,_t(Sl,fr),fr|=a,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},v=S!==null?S.baseLanes:p,_t(Sl,fr),fr|=v}else S!==null?(v=S.baseLanes|p,c.memoizedState=null):v=p,_t(Sl,fr),fr|=v;return Un(a,c,b,p),c.child}function rC(a,c){var p=c.ref;(a===null&&p!==null||a!==null&&a.ref!==p)&&(c.flags|=512,c.flags|=2097152)}function nv(a,c,p,v,b){var S=Xn(p)?sa:In.current;return S=fl(c,S),bl(c,b),p=qg(a,c,p,v,S,b),v=Gg(),a!==null&&!Zn?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~b,ls(a,c,b)):(Ot&&v&&Ig(c),c.flags|=1,Un(a,c,p,b),c.child)}function iC(a,c,p,v,b){if(Xn(p)){var S=!0;_h(c)}else S=!1;if(bl(c,b),c.stateNode===null)qh(a,c),qS(c,p,v),Zg(c,p,v,b),v=!0;else if(a===null){var N=c.stateNode,B=c.memoizedProps;N.props=B;var q=N.context,ne=p.contextType;typeof ne=="object"&&ne!==null?ne=Nr(ne):(ne=Xn(p)?sa:In.current,ne=fl(c,ne));var pe=p.getDerivedStateFromProps,ge=typeof pe=="function"||typeof N.getSnapshotBeforeUpdate=="function";ge||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(B!==v||q!==ne)&&GS(c,N,v,ne),eo=!1;var fe=c.memoizedState;N.state=fe,Lh(c,v,N,b),q=c.memoizedState,B!==v||fe!==q||Qn.current||eo?(typeof pe=="function"&&(Xg(c,p,pe,v),q=c.memoizedState),(B=eo||HS(c,p,B,v,fe,q,ne))?(ge||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(c.flags|=4194308)):(typeof N.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=v,c.memoizedState=q),N.props=v,N.state=q,N.context=ne,v=B):(typeof N.componentDidMount=="function"&&(c.flags|=4194308),v=!1)}else{N=c.stateNode,xS(a,c),B=c.memoizedProps,ne=c.type===c.elementType?B:Jr(c.type,B),N.props=ne,ge=c.pendingProps,fe=N.context,q=p.contextType,typeof q=="object"&&q!==null?q=Nr(q):(q=Xn(p)?sa:In.current,q=fl(c,q));var Ie=p.getDerivedStateFromProps;(pe=typeof Ie=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(B!==ge||fe!==q)&&GS(c,N,v,q),eo=!1,fe=c.memoizedState,N.state=fe,Lh(c,v,N,b);var Me=c.memoizedState;B!==ge||fe!==Me||Qn.current||eo?(typeof Ie=="function"&&(Xg(c,p,Ie,v),Me=c.memoizedState),(ne=eo||HS(c,p,ne,v,fe,Me,q)||!1)?(pe||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(v,Me,q),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(v,Me,q)),typeof N.componentDidUpdate=="function"&&(c.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof N.componentDidUpdate!="function"||B===a.memoizedProps&&fe===a.memoizedState||(c.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||B===a.memoizedProps&&fe===a.memoizedState||(c.flags|=1024),c.memoizedProps=v,c.memoizedState=Me),N.props=v,N.state=Me,N.context=q,v=ne):(typeof N.componentDidUpdate!="function"||B===a.memoizedProps&&fe===a.memoizedState||(c.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||B===a.memoizedProps&&fe===a.memoizedState||(c.flags|=1024),v=!1)}return rv(a,c,p,v,S,b)}function rv(a,c,p,v,b,S){rC(a,c);var N=(c.flags&128)!==0;if(!v&&!N)return b&&cS(c,p,!1),ls(a,c,S);v=c.stateNode,D3.current=c;var B=N&&typeof p.getDerivedStateFromError!="function"?null:v.render();return c.flags|=1,a!==null&&N?(c.child=vl(c,a.child,null,S),c.child=vl(c,null,B,S)):Un(a,c,B,S),c.memoizedState=v.state,b&&cS(c,p,!0),c.child}function sC(a){var c=a.stateNode;c.pendingContext?aS(a,c.pendingContext,c.pendingContext!==c.context):c.context&&aS(a,c.context,!1),Bg(a,c.containerInfo)}function oC(a,c,p,v,b){return gl(),Mg(b),c.flags|=256,Un(a,c,p,v),c.child}var iv={dehydrated:null,treeContext:null,retryLane:0};function sv(a){return{baseLanes:a,cachePool:null,transitions:null}}function aC(a,c,p){var v=c.pendingProps,b=Ut.current,S=!1,N=(c.flags&128)!==0,B;if((B=N)||(B=a!==null&&a.memoizedState===null?!1:(b&2)!==0),B?(S=!0,c.flags&=-129):(a===null||a.memoizedState!==null)&&(b|=1),_t(Ut,b&1),a===null)return Rg(c),a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((c.mode&1)===0?c.lanes=1:a.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(N=v.children,a=v.fallback,S?(v=c.mode,S=c.child,N={mode:"hidden",children:N},(v&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=N):S=sf(N,v,0,null),a=ma(a,v,p,null),S.return=c,a.return=c,S.sibling=a,c.child=S,c.child.memoizedState=sv(p),c.memoizedState=iv,a):ov(c,N));if(b=a.memoizedState,b!==null&&(B=b.dehydrated,B!==null))return j3(a,c,N,v,B,b,p);if(S){S=v.fallback,N=c.mode,b=a.child,B=b.sibling;var q={mode:"hidden",children:v.children};return(N&1)===0&&c.child!==b?(v=c.child,v.childLanes=0,v.pendingProps=q,c.deletions=null):(v=ao(b,q),v.subtreeFlags=b.subtreeFlags&14680064),B!==null?S=ao(B,S):(S=ma(S,N,p,null),S.flags|=2),S.return=c,v.return=c,v.sibling=S,c.child=v,v=S,S=c.child,N=a.child.memoizedState,N=N===null?sv(p):{baseLanes:N.baseLanes|p,cachePool:null,transitions:N.transitions},S.memoizedState=N,S.childLanes=a.childLanes&~p,c.memoizedState=iv,v}return S=a.child,a=S.sibling,v=ao(S,{mode:"visible",children:v.children}),(c.mode&1)===0&&(v.lanes=p),v.return=c,v.sibling=null,a!==null&&(p=c.deletions,p===null?(c.deletions=[a],c.flags|=16):p.push(a)),c.child=v,c.memoizedState=null,v}function ov(a,c){return c=sf({mode:"visible",children:c},a.mode,0,null),c.return=a,a.child=c}function Hh(a,c,p,v){return v!==null&&Mg(v),vl(c,a.child,null,p),a=ov(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function j3(a,c,p,v,b,S,N){if(p)return c.flags&256?(c.flags&=-257,v=ev(Error(n(422))),Hh(a,c,N,v)):c.memoizedState!==null?(c.child=a.child,c.flags|=128,null):(S=v.fallback,b=c.mode,v=sf({mode:"visible",children:v.children},b,0,null),S=ma(S,b,N,null),S.flags|=2,v.return=c,S.return=c,v.sibling=S,c.child=v,(c.mode&1)!==0&&vl(c,a.child,null,N),c.child.memoizedState=sv(N),c.memoizedState=iv,S);if((c.mode&1)===0)return Hh(a,c,N,null);if(b.data==="$!"){if(v=b.nextSibling&&b.nextSibling.dataset,v)var B=v.dgst;return v=B,S=Error(n(419)),v=ev(S,v,void 0),Hh(a,c,N,v)}if(B=(N&a.childLanes)!==0,Zn||B){if(v=mn,v!==null){switch(N&-N){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}b=(b&(v.suspendedLanes|N))!==0?0:b,b!==0&&b!==S.retryLane&&(S.retryLane=b,os(a,b),Zr(v,a,b,-1))}return kv(),v=ev(Error(n(421))),Hh(a,c,N,v)}return b.data==="$?"?(c.flags|=128,c.child=a.child,c=K3.bind(null,a),b._reactRetry=c,null):(a=S.treeContext,hr=Js(b.nextSibling),dr=c,Ot=!0,Yr=null,a!==null&&(_r[Ir++]=is,_r[Ir++]=ss,_r[Ir++]=oa,is=a.id,ss=a.overflow,oa=c),c=ov(c,v.children),c.flags|=4096,c)}function lC(a,c,p){a.lanes|=c;var v=a.alternate;v!==null&&(v.lanes|=c),Lg(a.return,c,p)}function av(a,c,p,v,b){var S=a.memoizedState;S===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:v,tail:p,tailMode:b}:(S.isBackwards=c,S.rendering=null,S.renderingStartTime=0,S.last=v,S.tail=p,S.tailMode=b)}function cC(a,c,p){var v=c.pendingProps,b=v.revealOrder,S=v.tail;if(Un(a,c,v.children,p),v=Ut.current,(v&2)!==0)v=v&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&lC(a,p,c);else if(a.tag===19)lC(a,p,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}v&=1}if(_t(Ut,v),(c.mode&1)===0)c.memoizedState=null;else switch(b){case"forwards":for(p=c.child,b=null;p!==null;)a=p.alternate,a!==null&&Fh(a)===null&&(b=p),p=p.sibling;p=b,p===null?(b=c.child,c.child=null):(b=p.sibling,p.sibling=null),av(c,!1,b,p,S);break;case"backwards":for(p=null,b=c.child,c.child=null;b!==null;){if(a=b.alternate,a!==null&&Fh(a)===null){c.child=b;break}a=b.sibling,b.sibling=p,p=b,b=a}av(c,!0,p,null,S);break;case"together":av(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function qh(a,c){(c.mode&1)===0&&a!==null&&(a.alternate=null,c.alternate=null,c.flags|=2)}function ls(a,c,p){if(a!==null&&(c.dependencies=a.dependencies),da|=c.lanes,(p&c.childLanes)===0)return null;if(a!==null&&c.child!==a.child)throw Error(n(153));if(c.child!==null){for(a=c.child,p=ao(a,a.pendingProps),c.child=p,p.return=c;a.sibling!==null;)a=a.sibling,p=p.sibling=ao(a,a.pendingProps),p.return=c;p.sibling=null}return c.child}function O3(a,c,p){switch(c.tag){case 3:sC(c),gl();break;case 5:SS(c);break;case 1:Xn(c.type)&&_h(c);break;case 4:Bg(c,c.stateNode.containerInfo);break;case 10:var v=c.type._context,b=c.memoizedProps.value;_t(Dh,v._currentValue),v._currentValue=b;break;case 13:if(v=c.memoizedState,v!==null)return v.dehydrated!==null?(_t(Ut,Ut.current&1),c.flags|=128,null):(p&c.child.childLanes)!==0?aC(a,c,p):(_t(Ut,Ut.current&1),a=ls(a,c,p),a!==null?a.sibling:null);_t(Ut,Ut.current&1);break;case 19:if(v=(p&c.childLanes)!==0,(a.flags&128)!==0){if(v)return cC(a,c,p);c.flags|=128}if(b=c.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),_t(Ut,Ut.current),v)break;return null;case 22:case 23:return c.lanes=0,nC(a,c,p)}return ls(a,c,p)}var uC,lv,dC,hC;uC=function(a,c){for(var p=c.child;p!==null;){if(p.tag===5||p.tag===6)a.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===c)break;for(;p.sibling===null;){if(p.return===null||p.return===c)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},lv=function(){},dC=function(a,c,p,v){var b=a.memoizedProps;if(b!==v){a=c.stateNode,ca(Ci.current);var S=null;switch(p){case"input":b=Ct(a,b),v=Ct(a,v),S=[];break;case"select":b=D({},b,{value:void 0}),v=D({},v,{value:void 0}),S=[];break;case"textarea":b=Cr(a,b),v=Cr(a,v),S=[];break;default:typeof b.onClick!="function"&&typeof v.onClick=="function"&&(a.onclick=Th)}at(p,v);var N;p=null;for(ne in b)if(!v.hasOwnProperty(ne)&&b.hasOwnProperty(ne)&&b[ne]!=null)if(ne==="style"){var B=b[ne];for(N in B)B.hasOwnProperty(N)&&(p||(p={}),p[N]="")}else ne!=="dangerouslySetInnerHTML"&&ne!=="children"&&ne!=="suppressContentEditableWarning"&&ne!=="suppressHydrationWarning"&&ne!=="autoFocus"&&(i.hasOwnProperty(ne)?S||(S=[]):(S=S||[]).push(ne,null));for(ne in v){var q=v[ne];if(B=b!=null?b[ne]:void 0,v.hasOwnProperty(ne)&&q!==B&&(q!=null||B!=null))if(ne==="style")if(B){for(N in B)!B.hasOwnProperty(N)||q&&q.hasOwnProperty(N)||(p||(p={}),p[N]="");for(N in q)q.hasOwnProperty(N)&&B[N]!==q[N]&&(p||(p={}),p[N]=q[N])}else p||(S||(S=[]),S.push(ne,p)),p=q;else ne==="dangerouslySetInnerHTML"?(q=q?q.__html:void 0,B=B?B.__html:void 0,q!=null&&B!==q&&(S=S||[]).push(ne,q)):ne==="children"?typeof q!="string"&&typeof q!="number"||(S=S||[]).push(ne,""+q):ne!=="suppressContentEditableWarning"&&ne!=="suppressHydrationWarning"&&(i.hasOwnProperty(ne)?(q!=null&&ne==="onScroll"&&At("scroll",a),S||B===q||(S=[])):(S=S||[]).push(ne,q))}p&&(S=S||[]).push("style",p);var ne=S;(c.updateQueue=ne)&&(c.flags|=4)}},hC=function(a,c,p,v){p!==v&&(c.flags|=4)};function pu(a,c){if(!Ot)switch(a.tailMode){case"hidden":c=a.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?a.tail=null:p.sibling=null;break;case"collapsed":p=a.tail;for(var v=null;p!==null;)p.alternate!==null&&(v=p),p=p.sibling;v===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:v.sibling=null}}function An(a){var c=a.alternate!==null&&a.alternate.child===a.child,p=0,v=0;if(c)for(var b=a.child;b!==null;)p|=b.lanes|b.childLanes,v|=b.subtreeFlags&14680064,v|=b.flags&14680064,b.return=a,b=b.sibling;else for(b=a.child;b!==null;)p|=b.lanes|b.childLanes,v|=b.subtreeFlags,v|=b.flags,b.return=a,b=b.sibling;return a.subtreeFlags|=v,a.childLanes=p,c}function L3(a,c,p){var v=c.pendingProps;switch(Ng(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return An(c),null;case 1:return Xn(c.type)&&Ph(),An(c),null;case 3:return v=c.stateNode,xl(),Rt(Qn),Rt(In),$g(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(a===null||a.child===null)&&(Rh(c)?c.flags|=4:a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Yr!==null&&(bv(Yr),Yr=null))),lv(a,c),An(c),null;case 5:Vg(c);var b=ca(cu.current);if(p=c.type,a!==null&&c.stateNode!=null)dC(a,c,p,v,b),a.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!v){if(c.stateNode===null)throw Error(n(166));return An(c),null}if(a=ca(Ci.current),Rh(c)){v=c.stateNode,p=c.type;var S=c.memoizedProps;switch(v[Si]=c,v[iu]=S,a=(c.mode&1)!==0,p){case"dialog":At("cancel",v),At("close",v);break;case"iframe":case"object":case"embed":At("load",v);break;case"video":case"audio":for(b=0;b<tu.length;b++)At(tu[b],v);break;case"source":At("error",v);break;case"img":case"image":case"link":At("error",v),At("load",v);break;case"details":At("toggle",v);break;case"input":sn(v,S),At("invalid",v);break;case"select":v._wrapperState={wasMultiple:!!S.multiple},At("invalid",v);break;case"textarea":Jn(v,S),At("invalid",v)}at(p,S),b=null;for(var N in S)if(S.hasOwnProperty(N)){var B=S[N];N==="children"?typeof B=="string"?v.textContent!==B&&(S.suppressHydrationWarning!==!0&&Ch(v.textContent,B,a),b=["children",B]):typeof B=="number"&&v.textContent!==""+B&&(S.suppressHydrationWarning!==!0&&Ch(v.textContent,B,a),b=["children",""+B]):i.hasOwnProperty(N)&&B!=null&&N==="onScroll"&&At("scroll",v)}switch(p){case"input":qe(v),cr(v,S,!0);break;case"textarea":qe(v),Tr(v);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(v.onclick=Th)}v=b,c.updateQueue=v,v!==null&&(c.flags|=4)}else{N=b.nodeType===9?b:b.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=M(p)),a==="http://www.w3.org/1999/xhtml"?p==="script"?(a=N.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof v.is=="string"?a=N.createElement(p,{is:v.is}):(a=N.createElement(p),p==="select"&&(N=a,v.multiple?N.multiple=!0:v.size&&(N.size=v.size))):a=N.createElementNS(a,p),a[Si]=c,a[iu]=v,uC(a,c,!1,!1),c.stateNode=a;e:{switch(N=Zt(p,v),p){case"dialog":At("cancel",a),At("close",a),b=v;break;case"iframe":case"object":case"embed":At("load",a),b=v;break;case"video":case"audio":for(b=0;b<tu.length;b++)At(tu[b],a);b=v;break;case"source":At("error",a),b=v;break;case"img":case"image":case"link":At("error",a),At("load",a),b=v;break;case"details":At("toggle",a),b=v;break;case"input":sn(a,v),b=Ct(a,v),At("invalid",a);break;case"option":b=v;break;case"select":a._wrapperState={wasMultiple:!!v.multiple},b=D({},v,{value:void 0}),At("invalid",a);break;case"textarea":Jn(a,v),b=Cr(a,v),At("invalid",a);break;default:b=v}at(p,b),B=b;for(S in B)if(B.hasOwnProperty(S)){var q=B[S];S==="style"?Xe(a,q):S==="dangerouslySetInnerHTML"?(q=q?q.__html:void 0,q!=null&&be(a,q)):S==="children"?typeof q=="string"?(p!=="textarea"||q!=="")&&Pe(a,q):typeof q=="number"&&Pe(a,""+q):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(i.hasOwnProperty(S)?q!=null&&S==="onScroll"&&At("scroll",a):q!=null&&P(a,S,q,N))}switch(p){case"input":qe(a),cr(a,v,!1);break;case"textarea":qe(a),Tr(a);break;case"option":v.value!=null&&a.setAttribute("value",""+Se(v.value));break;case"select":a.multiple=!!v.multiple,S=v.value,S!=null?_n(a,!!v.multiple,S,!1):v.defaultValue!=null&&_n(a,!!v.multiple,v.defaultValue,!0);break;default:typeof b.onClick=="function"&&(a.onclick=Th)}switch(p){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}}v&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return An(c),null;case 6:if(a&&c.stateNode!=null)hC(a,c,a.memoizedProps,v);else{if(typeof v!="string"&&c.stateNode===null)throw Error(n(166));if(p=ca(cu.current),ca(Ci.current),Rh(c)){if(v=c.stateNode,p=c.memoizedProps,v[Si]=c,(S=v.nodeValue!==p)&&(a=dr,a!==null))switch(a.tag){case 3:Ch(v.nodeValue,p,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Ch(v.nodeValue,p,(a.mode&1)!==0)}S&&(c.flags|=4)}else v=(p.nodeType===9?p:p.ownerDocument).createTextNode(v),v[Si]=c,c.stateNode=v}return An(c),null;case 13:if(Rt(Ut),v=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(Ot&&hr!==null&&(c.mode&1)!==0&&(c.flags&128)===0)mS(),gl(),c.flags|=98560,S=!1;else if(S=Rh(c),v!==null&&v.dehydrated!==null){if(a===null){if(!S)throw Error(n(318));if(S=c.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(n(317));S[Si]=c}else gl(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;An(c),S=!1}else Yr!==null&&(bv(Yr),Yr=null),S=!0;if(!S)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=p,c):(v=v!==null,v!==(a!==null&&a.memoizedState!==null)&&v&&(c.child.flags|=8192,(c.mode&1)!==0&&(a===null||(Ut.current&1)!==0?cn===0&&(cn=3):kv())),c.updateQueue!==null&&(c.flags|=4),An(c),null);case 4:return xl(),lv(a,c),a===null&&nu(c.stateNode.containerInfo),An(c),null;case 10:return Og(c.type._context),An(c),null;case 17:return Xn(c.type)&&Ph(),An(c),null;case 19:if(Rt(Ut),S=c.memoizedState,S===null)return An(c),null;if(v=(c.flags&128)!==0,N=S.rendering,N===null)if(v)pu(S,!1);else{if(cn!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(N=Fh(a),N!==null){for(c.flags|=128,pu(S,!1),v=N.updateQueue,v!==null&&(c.updateQueue=v,c.flags|=4),c.subtreeFlags=0,v=p,p=c.child;p!==null;)S=p,a=v,S.flags&=14680066,N=S.alternate,N===null?(S.childLanes=0,S.lanes=a,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=N.childLanes,S.lanes=N.lanes,S.child=N.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=N.memoizedProps,S.memoizedState=N.memoizedState,S.updateQueue=N.updateQueue,S.type=N.type,a=N.dependencies,S.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),p=p.sibling;return _t(Ut,Ut.current&1|2),c.child}a=a.sibling}S.tail!==null&&Yt()>Cl&&(c.flags|=128,v=!0,pu(S,!1),c.lanes=4194304)}else{if(!v)if(a=Fh(N),a!==null){if(c.flags|=128,v=!0,p=a.updateQueue,p!==null&&(c.updateQueue=p,c.flags|=4),pu(S,!0),S.tail===null&&S.tailMode==="hidden"&&!N.alternate&&!Ot)return An(c),null}else 2*Yt()-S.renderingStartTime>Cl&&p!==1073741824&&(c.flags|=128,v=!0,pu(S,!1),c.lanes=4194304);S.isBackwards?(N.sibling=c.child,c.child=N):(p=S.last,p!==null?p.sibling=N:c.child=N,S.last=N)}return S.tail!==null?(c=S.tail,S.rendering=c,S.tail=c.sibling,S.renderingStartTime=Yt(),c.sibling=null,p=Ut.current,_t(Ut,v?p&1|2:p&1),c):(An(c),null);case 22:case 23:return wv(),v=c.memoizedState!==null,a!==null&&a.memoizedState!==null!==v&&(c.flags|=8192),v&&(c.mode&1)!==0?(fr&1073741824)!==0&&(An(c),c.subtreeFlags&6&&(c.flags|=8192)):An(c),null;case 24:return null;case 25:return null}throw Error(n(156,c.tag))}function F3(a,c){switch(Ng(c),c.tag){case 1:return Xn(c.type)&&Ph(),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return xl(),Rt(Qn),Rt(In),$g(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 5:return Vg(c),null;case 13:if(Rt(Ut),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(n(340));gl()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return Rt(Ut),null;case 4:return xl(),null;case 10:return Og(c.type._context),null;case 22:case 23:return wv(),null;case 24:return null;default:return null}}var Gh=!1,Rn=!1,U3=typeof WeakSet=="function"?WeakSet:Set,Ae=null;function kl(a,c){var p=a.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(v){zt(a,c,v)}else p.current=null}function cv(a,c,p){try{p()}catch(v){zt(a,c,v)}}var fC=!1;function B3(a,c){if(wg=fh,a=Hk(),fg(a)){if("selectionStart"in a)var p={start:a.selectionStart,end:a.selectionEnd};else e:{p=(p=a.ownerDocument)&&p.defaultView||window;var v=p.getSelection&&p.getSelection();if(v&&v.rangeCount!==0){p=v.anchorNode;var b=v.anchorOffset,S=v.focusNode;v=v.focusOffset;try{p.nodeType,S.nodeType}catch{p=null;break e}var N=0,B=-1,q=-1,ne=0,pe=0,ge=a,fe=null;t:for(;;){for(var Ie;ge!==p||b!==0&&ge.nodeType!==3||(B=N+b),ge!==S||v!==0&&ge.nodeType!==3||(q=N+v),ge.nodeType===3&&(N+=ge.nodeValue.length),(Ie=ge.firstChild)!==null;)fe=ge,ge=Ie;for(;;){if(ge===a)break t;if(fe===p&&++ne===b&&(B=N),fe===S&&++pe===v&&(q=N),(Ie=ge.nextSibling)!==null)break;ge=fe,fe=ge.parentNode}ge=Ie}p=B===-1||q===-1?null:{start:B,end:q}}else p=null}p=p||{start:0,end:0}}else p=null;for(kg={focusedElem:a,selectionRange:p},fh=!1,Ae=c;Ae!==null;)if(c=Ae,a=c.child,(c.subtreeFlags&1028)!==0&&a!==null)a.return=c,Ae=a;else for(;Ae!==null;){c=Ae;try{var Me=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Me!==null){var Oe=Me.memoizedProps,Jt=Me.memoizedState,J=c.stateNode,G=J.getSnapshotBeforeUpdate(c.elementType===c.type?Oe:Jr(c.type,Oe),Jt);J.__reactInternalSnapshotBeforeUpdate=G}break;case 3:var ee=c.stateNode.containerInfo;ee.nodeType===1?ee.textContent="":ee.nodeType===9&&ee.documentElement&&ee.removeChild(ee.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(xe){zt(c,c.return,xe)}if(a=c.sibling,a!==null){a.return=c.return,Ae=a;break}Ae=c.return}return Me=fC,fC=!1,Me}function mu(a,c,p){var v=c.updateQueue;if(v=v!==null?v.lastEffect:null,v!==null){var b=v=v.next;do{if((b.tag&a)===a){var S=b.destroy;b.destroy=void 0,S!==void 0&&cv(c,p,S)}b=b.next}while(b!==v)}}function Kh(a,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var p=c=c.next;do{if((p.tag&a)===a){var v=p.create;p.destroy=v()}p=p.next}while(p!==c)}}function uv(a){var c=a.ref;if(c!==null){var p=a.stateNode;switch(a.tag){case 5:a=p;break;default:a=p}typeof c=="function"?c(a):c.current=a}}function pC(a){var c=a.alternate;c!==null&&(a.alternate=null,pC(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&(delete c[Si],delete c[iu],delete c[Eg],delete c[k3],delete c[S3])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function mC(a){return a.tag===5||a.tag===3||a.tag===4}function gC(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||mC(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function dv(a,c,p){var v=a.tag;if(v===5||v===6)a=a.stateNode,c?p.nodeType===8?p.parentNode.insertBefore(a,c):p.insertBefore(a,c):(p.nodeType===8?(c=p.parentNode,c.insertBefore(a,p)):(c=p,c.appendChild(a)),p=p._reactRootContainer,p!=null||c.onclick!==null||(c.onclick=Th));else if(v!==4&&(a=a.child,a!==null))for(dv(a,c,p),a=a.sibling;a!==null;)dv(a,c,p),a=a.sibling}function hv(a,c,p){var v=a.tag;if(v===5||v===6)a=a.stateNode,c?p.insertBefore(a,c):p.appendChild(a);else if(v!==4&&(a=a.child,a!==null))for(hv(a,c,p),a=a.sibling;a!==null;)hv(a,c,p),a=a.sibling}var kn=null,Qr=!1;function no(a,c,p){for(p=p.child;p!==null;)vC(a,c,p),p=p.sibling}function vC(a,c,p){if(ki&&typeof ki.onCommitFiberUnmount=="function")try{ki.onCommitFiberUnmount(ah,p)}catch{}switch(p.tag){case 5:Rn||kl(p,c);case 6:var v=kn,b=Qr;kn=null,no(a,c,p),kn=v,Qr=b,kn!==null&&(Qr?(a=kn,p=p.stateNode,a.nodeType===8?a.parentNode.removeChild(p):a.removeChild(p)):kn.removeChild(p.stateNode));break;case 18:kn!==null&&(Qr?(a=kn,p=p.stateNode,a.nodeType===8?Tg(a.parentNode,p):a.nodeType===1&&Tg(a,p),Gc(a)):Tg(kn,p.stateNode));break;case 4:v=kn,b=Qr,kn=p.stateNode.containerInfo,Qr=!0,no(a,c,p),kn=v,Qr=b;break;case 0:case 11:case 14:case 15:if(!Rn&&(v=p.updateQueue,v!==null&&(v=v.lastEffect,v!==null))){b=v=v.next;do{var S=b,N=S.destroy;S=S.tag,N!==void 0&&((S&2)!==0||(S&4)!==0)&&cv(p,c,N),b=b.next}while(b!==v)}no(a,c,p);break;case 1:if(!Rn&&(kl(p,c),v=p.stateNode,typeof v.componentWillUnmount=="function"))try{v.props=p.memoizedProps,v.state=p.memoizedState,v.componentWillUnmount()}catch(B){zt(p,c,B)}no(a,c,p);break;case 21:no(a,c,p);break;case 22:p.mode&1?(Rn=(v=Rn)||p.memoizedState!==null,no(a,c,p),Rn=v):no(a,c,p);break;default:no(a,c,p)}}function yC(a){var c=a.updateQueue;if(c!==null){a.updateQueue=null;var p=a.stateNode;p===null&&(p=a.stateNode=new U3),c.forEach(function(v){var b=Y3.bind(null,a,v);p.has(v)||(p.add(v),v.then(b,b))})}}function Xr(a,c){var p=c.deletions;if(p!==null)for(var v=0;v<p.length;v++){var b=p[v];try{var S=a,N=c,B=N;e:for(;B!==null;){switch(B.tag){case 5:kn=B.stateNode,Qr=!1;break e;case 3:kn=B.stateNode.containerInfo,Qr=!0;break e;case 4:kn=B.stateNode.containerInfo,Qr=!0;break e}B=B.return}if(kn===null)throw Error(n(160));vC(S,N,b),kn=null,Qr=!1;var q=b.alternate;q!==null&&(q.return=null),b.return=null}catch(ne){zt(b,c,ne)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)bC(c,a),c=c.sibling}function bC(a,c){var p=a.alternate,v=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(Xr(c,a),Ei(a),v&4){try{mu(3,a,a.return),Kh(3,a)}catch(Oe){zt(a,a.return,Oe)}try{mu(5,a,a.return)}catch(Oe){zt(a,a.return,Oe)}}break;case 1:Xr(c,a),Ei(a),v&512&&p!==null&&kl(p,p.return);break;case 5:if(Xr(c,a),Ei(a),v&512&&p!==null&&kl(p,p.return),a.flags&32){var b=a.stateNode;try{Pe(b,"")}catch(Oe){zt(a,a.return,Oe)}}if(v&4&&(b=a.stateNode,b!=null)){var S=a.memoizedProps,N=p!==null?p.memoizedProps:S,B=a.type,q=a.updateQueue;if(a.updateQueue=null,q!==null)try{B==="input"&&S.type==="radio"&&S.name!=null&&fn(b,S),Zt(B,N);var ne=Zt(B,S);for(N=0;N<q.length;N+=2){var pe=q[N],ge=q[N+1];pe==="style"?Xe(b,ge):pe==="dangerouslySetInnerHTML"?be(b,ge):pe==="children"?Pe(b,ge):P(b,pe,ge,ne)}switch(B){case"input":Pn(b,S);break;case"textarea":zr(b,S);break;case"select":var fe=b._wrapperState.wasMultiple;b._wrapperState.wasMultiple=!!S.multiple;var Ie=S.value;Ie!=null?_n(b,!!S.multiple,Ie,!1):fe!==!!S.multiple&&(S.defaultValue!=null?_n(b,!!S.multiple,S.defaultValue,!0):_n(b,!!S.multiple,S.multiple?[]:"",!1))}b[iu]=S}catch(Oe){zt(a,a.return,Oe)}}break;case 6:if(Xr(c,a),Ei(a),v&4){if(a.stateNode===null)throw Error(n(162));b=a.stateNode,S=a.memoizedProps;try{b.nodeValue=S}catch(Oe){zt(a,a.return,Oe)}}break;case 3:if(Xr(c,a),Ei(a),v&4&&p!==null&&p.memoizedState.isDehydrated)try{Gc(c.containerInfo)}catch(Oe){zt(a,a.return,Oe)}break;case 4:Xr(c,a),Ei(a);break;case 13:Xr(c,a),Ei(a),b=a.child,b.flags&8192&&(S=b.memoizedState!==null,b.stateNode.isHidden=S,!S||b.alternate!==null&&b.alternate.memoizedState!==null||(mv=Yt())),v&4&&yC(a);break;case 22:if(pe=p!==null&&p.memoizedState!==null,a.mode&1?(Rn=(ne=Rn)||pe,Xr(c,a),Rn=ne):Xr(c,a),Ei(a),v&8192){if(ne=a.memoizedState!==null,(a.stateNode.isHidden=ne)&&!pe&&(a.mode&1)!==0)for(Ae=a,pe=a.child;pe!==null;){for(ge=Ae=pe;Ae!==null;){switch(fe=Ae,Ie=fe.child,fe.tag){case 0:case 11:case 14:case 15:mu(4,fe,fe.return);break;case 1:kl(fe,fe.return);var Me=fe.stateNode;if(typeof Me.componentWillUnmount=="function"){v=fe,p=fe.return;try{c=v,Me.props=c.memoizedProps,Me.state=c.memoizedState,Me.componentWillUnmount()}catch(Oe){zt(v,p,Oe)}}break;case 5:kl(fe,fe.return);break;case 22:if(fe.memoizedState!==null){kC(ge);continue}}Ie!==null?(Ie.return=fe,Ae=Ie):kC(ge)}pe=pe.sibling}e:for(pe=null,ge=a;;){if(ge.tag===5){if(pe===null){pe=ge;try{b=ge.stateNode,ne?(S=b.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(B=ge.stateNode,q=ge.memoizedProps.style,N=q!=null&&q.hasOwnProperty("display")?q.display:null,B.style.display=ot("display",N))}catch(Oe){zt(a,a.return,Oe)}}}else if(ge.tag===6){if(pe===null)try{ge.stateNode.nodeValue=ne?"":ge.memoizedProps}catch(Oe){zt(a,a.return,Oe)}}else if((ge.tag!==22&&ge.tag!==23||ge.memoizedState===null||ge===a)&&ge.child!==null){ge.child.return=ge,ge=ge.child;continue}if(ge===a)break e;for(;ge.sibling===null;){if(ge.return===null||ge.return===a)break e;pe===ge&&(pe=null),ge=ge.return}pe===ge&&(pe=null),ge.sibling.return=ge.return,ge=ge.sibling}}break;case 19:Xr(c,a),Ei(a),v&4&&yC(a);break;case 21:break;default:Xr(c,a),Ei(a)}}function Ei(a){var c=a.flags;if(c&2){try{e:{for(var p=a.return;p!==null;){if(mC(p)){var v=p;break e}p=p.return}throw Error(n(160))}switch(v.tag){case 5:var b=v.stateNode;v.flags&32&&(Pe(b,""),v.flags&=-33);var S=gC(a);hv(a,S,b);break;case 3:case 4:var N=v.stateNode.containerInfo,B=gC(a);dv(a,B,N);break;default:throw Error(n(161))}}catch(q){zt(a,a.return,q)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function V3(a,c,p){Ae=a,xC(a)}function xC(a,c,p){for(var v=(a.mode&1)!==0;Ae!==null;){var b=Ae,S=b.child;if(b.tag===22&&v){var N=b.memoizedState!==null||Gh;if(!N){var B=b.alternate,q=B!==null&&B.memoizedState!==null||Rn;B=Gh;var ne=Rn;if(Gh=N,(Rn=q)&&!ne)for(Ae=b;Ae!==null;)N=Ae,q=N.child,N.tag===22&&N.memoizedState!==null?SC(b):q!==null?(q.return=N,Ae=q):SC(b);for(;S!==null;)Ae=S,xC(S),S=S.sibling;Ae=b,Gh=B,Rn=ne}wC(a)}else(b.subtreeFlags&8772)!==0&&S!==null?(S.return=b,Ae=S):wC(a)}}function wC(a){for(;Ae!==null;){var c=Ae;if((c.flags&8772)!==0){var p=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:Rn||Kh(5,c);break;case 1:var v=c.stateNode;if(c.flags&4&&!Rn)if(p===null)v.componentDidMount();else{var b=c.elementType===c.type?p.memoizedProps:Jr(c.type,p.memoizedProps);v.componentDidUpdate(b,p.memoizedState,v.__reactInternalSnapshotBeforeUpdate)}var S=c.updateQueue;S!==null&&kS(c,S,v);break;case 3:var N=c.updateQueue;if(N!==null){if(p=null,c.child!==null)switch(c.child.tag){case 5:p=c.child.stateNode;break;case 1:p=c.child.stateNode}kS(c,N,p)}break;case 5:var B=c.stateNode;if(p===null&&c.flags&4){p=B;var q=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":q.autoFocus&&p.focus();break;case"img":q.src&&(p.src=q.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var ne=c.alternate;if(ne!==null){var pe=ne.memoizedState;if(pe!==null){var ge=pe.dehydrated;ge!==null&&Gc(ge)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Rn||c.flags&512&&uv(c)}catch(fe){zt(c,c.return,fe)}}if(c===a){Ae=null;break}if(p=c.sibling,p!==null){p.return=c.return,Ae=p;break}Ae=c.return}}function kC(a){for(;Ae!==null;){var c=Ae;if(c===a){Ae=null;break}var p=c.sibling;if(p!==null){p.return=c.return,Ae=p;break}Ae=c.return}}function SC(a){for(;Ae!==null;){var c=Ae;try{switch(c.tag){case 0:case 11:case 15:var p=c.return;try{Kh(4,c)}catch(q){zt(c,p,q)}break;case 1:var v=c.stateNode;if(typeof v.componentDidMount=="function"){var b=c.return;try{v.componentDidMount()}catch(q){zt(c,b,q)}}var S=c.return;try{uv(c)}catch(q){zt(c,S,q)}break;case 5:var N=c.return;try{uv(c)}catch(q){zt(c,N,q)}}}catch(q){zt(c,c.return,q)}if(c===a){Ae=null;break}var B=c.sibling;if(B!==null){B.return=c.return,Ae=B;break}Ae=c.return}}var z3=Math.ceil,Yh=E.ReactCurrentDispatcher,fv=E.ReactCurrentOwner,Rr=E.ReactCurrentBatchConfig,gt=0,mn=null,en=null,Sn=0,fr=0,Sl=Qs(0),cn=0,gu=null,da=0,Jh=0,pv=0,vu=null,er=null,mv=0,Cl=1/0,cs=null,Qh=!1,gv=null,ro=null,Xh=!1,io=null,Zh=0,yu=0,vv=null,ef=-1,tf=0;function Bn(){return(gt&6)!==0?Yt():ef!==-1?ef:ef=Yt()}function so(a){return(a.mode&1)===0?1:(gt&2)!==0&&Sn!==0?Sn&-Sn:T3.transition!==null?(tf===0&&(tf=gk()),tf):(a=St,a!==0||(a=window.event,a=a===void 0?16:Tk(a.type)),a)}function Zr(a,c,p,v){if(50<yu)throw yu=0,vv=null,Error(n(185));zc(a,p,v),((gt&2)===0||a!==mn)&&(a===mn&&((gt&2)===0&&(Jh|=p),cn===4&&oo(a,Sn)),tr(a,v),p===1&&gt===0&&(c.mode&1)===0&&(Cl=Yt()+500,Ih&&Zs()))}function tr(a,c){var p=a.callbackNode;TF(a,c);var v=uh(a,a===mn?Sn:0);if(v===0)p!==null&&fk(p),a.callbackNode=null,a.callbackPriority=0;else if(c=v&-v,a.callbackPriority!==c){if(p!=null&&fk(p),c===1)a.tag===0?C3(TC.bind(null,a)):uS(TC.bind(null,a)),x3(function(){(gt&6)===0&&Zs()}),p=null;else{switch(vk(v)){case 1:p=Jm;break;case 4:p=pk;break;case 16:p=oh;break;case 536870912:p=mk;break;default:p=oh}p=MC(p,CC.bind(null,a))}a.callbackPriority=c,a.callbackNode=p}}function CC(a,c){if(ef=-1,tf=0,(gt&6)!==0)throw Error(n(327));var p=a.callbackNode;if(Tl()&&a.callbackNode!==p)return null;var v=uh(a,a===mn?Sn:0);if(v===0)return null;if((v&30)!==0||(v&a.expiredLanes)!==0||c)c=nf(a,v);else{c=v;var b=gt;gt|=2;var S=PC();(mn!==a||Sn!==c)&&(cs=null,Cl=Yt()+500,fa(a,c));do try{H3();break}catch(B){EC(a,B)}while(!0);jg(),Yh.current=S,gt=b,en!==null?c=0:(mn=null,Sn=0,c=cn)}if(c!==0){if(c===2&&(b=Qm(a),b!==0&&(v=b,c=yv(a,b))),c===1)throw p=gu,fa(a,0),oo(a,v),tr(a,Yt()),p;if(c===6)oo(a,v);else{if(b=a.current.alternate,(v&30)===0&&!$3(b)&&(c=nf(a,v),c===2&&(S=Qm(a),S!==0&&(v=S,c=yv(a,S))),c===1))throw p=gu,fa(a,0),oo(a,v),tr(a,Yt()),p;switch(a.finishedWork=b,a.finishedLanes=v,c){case 0:case 1:throw Error(n(345));case 2:pa(a,er,cs);break;case 3:if(oo(a,v),(v&130023424)===v&&(c=mv+500-Yt(),10<c)){if(uh(a,0)!==0)break;if(b=a.suspendedLanes,(b&v)!==v){Bn(),a.pingedLanes|=a.suspendedLanes&b;break}a.timeoutHandle=Cg(pa.bind(null,a,er,cs),c);break}pa(a,er,cs);break;case 4:if(oo(a,v),(v&4194240)===v)break;for(c=a.eventTimes,b=-1;0<v;){var N=31-Gr(v);S=1<<N,N=c[N],N>b&&(b=N),v&=~S}if(v=b,v=Yt()-v,v=(120>v?120:480>v?480:1080>v?1080:1920>v?1920:3e3>v?3e3:4320>v?4320:1960*z3(v/1960))-v,10<v){a.timeoutHandle=Cg(pa.bind(null,a,er,cs),v);break}pa(a,er,cs);break;case 5:pa(a,er,cs);break;default:throw Error(n(329))}}}return tr(a,Yt()),a.callbackNode===p?CC.bind(null,a):null}function yv(a,c){var p=vu;return a.current.memoizedState.isDehydrated&&(fa(a,c).flags|=256),a=nf(a,c),a!==2&&(c=er,er=p,c!==null&&bv(c)),a}function bv(a){er===null?er=a:er.push.apply(er,a)}function $3(a){for(var c=a;;){if(c.flags&16384){var p=c.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var v=0;v<p.length;v++){var b=p[v],S=b.getSnapshot;b=b.value;try{if(!Kr(S(),b))return!1}catch{return!1}}}if(p=c.child,c.subtreeFlags&16384&&p!==null)p.return=c,c=p;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function oo(a,c){for(c&=~pv,c&=~Jh,a.suspendedLanes|=c,a.pingedLanes&=~c,a=a.expirationTimes;0<c;){var p=31-Gr(c),v=1<<p;a[p]=-1,c&=~v}}function TC(a){if((gt&6)!==0)throw Error(n(327));Tl();var c=uh(a,0);if((c&1)===0)return tr(a,Yt()),null;var p=nf(a,c);if(a.tag!==0&&p===2){var v=Qm(a);v!==0&&(c=v,p=yv(a,v))}if(p===1)throw p=gu,fa(a,0),oo(a,c),tr(a,Yt()),p;if(p===6)throw Error(n(345));return a.finishedWork=a.current.alternate,a.finishedLanes=c,pa(a,er,cs),tr(a,Yt()),null}function xv(a,c){var p=gt;gt|=1;try{return a(c)}finally{gt=p,gt===0&&(Cl=Yt()+500,Ih&&Zs())}}function ha(a){io!==null&&io.tag===0&&(gt&6)===0&&Tl();var c=gt;gt|=1;var p=Rr.transition,v=St;try{if(Rr.transition=null,St=1,a)return a()}finally{St=v,Rr.transition=p,gt=c,(gt&6)===0&&Zs()}}function wv(){fr=Sl.current,Rt(Sl)}function fa(a,c){a.finishedWork=null,a.finishedLanes=0;var p=a.timeoutHandle;if(p!==-1&&(a.timeoutHandle=-1,b3(p)),en!==null)for(p=en.return;p!==null;){var v=p;switch(Ng(v),v.tag){case 1:v=v.type.childContextTypes,v!=null&&Ph();break;case 3:xl(),Rt(Qn),Rt(In),$g();break;case 5:Vg(v);break;case 4:xl();break;case 13:Rt(Ut);break;case 19:Rt(Ut);break;case 10:Og(v.type._context);break;case 22:case 23:wv()}p=p.return}if(mn=a,en=a=ao(a.current,null),Sn=fr=c,cn=0,gu=null,pv=Jh=da=0,er=vu=null,la!==null){for(c=0;c<la.length;c++)if(p=la[c],v=p.interleaved,v!==null){p.interleaved=null;var b=v.next,S=p.pending;if(S!==null){var N=S.next;S.next=b,v.next=N}p.pending=v}la=null}return a}function EC(a,c){do{var p=en;try{if(jg(),Uh.current=$h,Bh){for(var v=Bt.memoizedState;v!==null;){var b=v.queue;b!==null&&(b.pending=null),v=v.next}Bh=!1}if(ua=0,pn=ln=Bt=null,uu=!1,du=0,fv.current=null,p===null||p.return===null){cn=1,gu=c,en=null;break}e:{var S=a,N=p.return,B=p,q=c;if(c=Sn,B.flags|=32768,q!==null&&typeof q=="object"&&typeof q.then=="function"){var ne=q,pe=B,ge=pe.tag;if((pe.mode&1)===0&&(ge===0||ge===11||ge===15)){var fe=pe.alternate;fe?(pe.updateQueue=fe.updateQueue,pe.memoizedState=fe.memoizedState,pe.lanes=fe.lanes):(pe.updateQueue=null,pe.memoizedState=null)}var Ie=QS(N);if(Ie!==null){Ie.flags&=-257,XS(Ie,N,B,S,c),Ie.mode&1&&JS(S,ne,c),c=Ie,q=ne;var Me=c.updateQueue;if(Me===null){var Oe=new Set;Oe.add(q),c.updateQueue=Oe}else Me.add(q);break e}else{if((c&1)===0){JS(S,ne,c),kv();break e}q=Error(n(426))}}else if(Ot&&B.mode&1){var Jt=QS(N);if(Jt!==null){(Jt.flags&65536)===0&&(Jt.flags|=256),XS(Jt,N,B,S,c),Mg(wl(q,B));break e}}S=q=wl(q,B),cn!==4&&(cn=2),vu===null?vu=[S]:vu.push(S),S=N;do{switch(S.tag){case 3:S.flags|=65536,c&=-c,S.lanes|=c;var J=KS(S,q,c);wS(S,J);break e;case 1:B=q;var G=S.type,ee=S.stateNode;if((S.flags&128)===0&&(typeof G.getDerivedStateFromError=="function"||ee!==null&&typeof ee.componentDidCatch=="function"&&(ro===null||!ro.has(ee)))){S.flags|=65536,c&=-c,S.lanes|=c;var xe=YS(S,B,c);wS(S,xe);break e}}S=S.return}while(S!==null)}IC(p)}catch(Fe){c=Fe,en===p&&p!==null&&(en=p=p.return);continue}break}while(!0)}function PC(){var a=Yh.current;return Yh.current=$h,a===null?$h:a}function kv(){(cn===0||cn===3||cn===2)&&(cn=4),mn===null||(da&268435455)===0&&(Jh&268435455)===0||oo(mn,Sn)}function nf(a,c){var p=gt;gt|=2;var v=PC();(mn!==a||Sn!==c)&&(cs=null,fa(a,c));do try{W3();break}catch(b){EC(a,b)}while(!0);if(jg(),gt=p,Yh.current=v,en!==null)throw Error(n(261));return mn=null,Sn=0,cn}function W3(){for(;en!==null;)_C(en)}function H3(){for(;en!==null&&!gF();)_C(en)}function _C(a){var c=RC(a.alternate,a,fr);a.memoizedProps=a.pendingProps,c===null?IC(a):en=c,fv.current=null}function IC(a){var c=a;do{var p=c.alternate;if(a=c.return,(c.flags&32768)===0){if(p=L3(p,c,fr),p!==null){en=p;return}}else{if(p=F3(p,c),p!==null){p.flags&=32767,en=p;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{cn=6,en=null;return}}if(c=c.sibling,c!==null){en=c;return}en=c=a}while(c!==null);cn===0&&(cn=5)}function pa(a,c,p){var v=St,b=Rr.transition;try{Rr.transition=null,St=1,q3(a,c,p,v)}finally{Rr.transition=b,St=v}return null}function q3(a,c,p,v){do Tl();while(io!==null);if((gt&6)!==0)throw Error(n(327));p=a.finishedWork;var b=a.finishedLanes;if(p===null)return null;if(a.finishedWork=null,a.finishedLanes=0,p===a.current)throw Error(n(177));a.callbackNode=null,a.callbackPriority=0;var S=p.lanes|p.childLanes;if(EF(a,S),a===mn&&(en=mn=null,Sn=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||Xh||(Xh=!0,MC(oh,function(){return Tl(),null})),S=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||S){S=Rr.transition,Rr.transition=null;var N=St;St=1;var B=gt;gt|=4,fv.current=null,B3(a,p),bC(p,a),h3(kg),fh=!!wg,kg=wg=null,a.current=p,V3(p),vF(),gt=B,St=N,Rr.transition=S}else a.current=p;if(Xh&&(Xh=!1,io=a,Zh=b),S=a.pendingLanes,S===0&&(ro=null),xF(p.stateNode),tr(a,Yt()),c!==null)for(v=a.onRecoverableError,p=0;p<c.length;p++)b=c[p],v(b.value,{componentStack:b.stack,digest:b.digest});if(Qh)throw Qh=!1,a=gv,gv=null,a;return(Zh&1)!==0&&a.tag!==0&&Tl(),S=a.pendingLanes,(S&1)!==0?a===vv?yu++:(yu=0,vv=a):yu=0,Zs(),null}function Tl(){if(io!==null){var a=vk(Zh),c=Rr.transition,p=St;try{if(Rr.transition=null,St=16>a?16:a,io===null)var v=!1;else{if(a=io,io=null,Zh=0,(gt&6)!==0)throw Error(n(331));var b=gt;for(gt|=4,Ae=a.current;Ae!==null;){var S=Ae,N=S.child;if((Ae.flags&16)!==0){var B=S.deletions;if(B!==null){for(var q=0;q<B.length;q++){var ne=B[q];for(Ae=ne;Ae!==null;){var pe=Ae;switch(pe.tag){case 0:case 11:case 15:mu(8,pe,S)}var ge=pe.child;if(ge!==null)ge.return=pe,Ae=ge;else for(;Ae!==null;){pe=Ae;var fe=pe.sibling,Ie=pe.return;if(pC(pe),pe===ne){Ae=null;break}if(fe!==null){fe.return=Ie,Ae=fe;break}Ae=Ie}}}var Me=S.alternate;if(Me!==null){var Oe=Me.child;if(Oe!==null){Me.child=null;do{var Jt=Oe.sibling;Oe.sibling=null,Oe=Jt}while(Oe!==null)}}Ae=S}}if((S.subtreeFlags&2064)!==0&&N!==null)N.return=S,Ae=N;else e:for(;Ae!==null;){if(S=Ae,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:mu(9,S,S.return)}var J=S.sibling;if(J!==null){J.return=S.return,Ae=J;break e}Ae=S.return}}var G=a.current;for(Ae=G;Ae!==null;){N=Ae;var ee=N.child;if((N.subtreeFlags&2064)!==0&&ee!==null)ee.return=N,Ae=ee;else e:for(N=G;Ae!==null;){if(B=Ae,(B.flags&2048)!==0)try{switch(B.tag){case 0:case 11:case 15:Kh(9,B)}}catch(Fe){zt(B,B.return,Fe)}if(B===N){Ae=null;break e}var xe=B.sibling;if(xe!==null){xe.return=B.return,Ae=xe;break e}Ae=B.return}}if(gt=b,Zs(),ki&&typeof ki.onPostCommitFiberRoot=="function")try{ki.onPostCommitFiberRoot(ah,a)}catch{}v=!0}return v}finally{St=p,Rr.transition=c}}return!1}function NC(a,c,p){c=wl(p,c),c=KS(a,c,1),a=to(a,c,1),c=Bn(),a!==null&&(zc(a,1,c),tr(a,c))}function zt(a,c,p){if(a.tag===3)NC(a,a,p);else for(;c!==null;){if(c.tag===3){NC(c,a,p);break}else if(c.tag===1){var v=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(ro===null||!ro.has(v))){a=wl(p,a),a=YS(c,a,1),c=to(c,a,1),a=Bn(),c!==null&&(zc(c,1,a),tr(c,a));break}}c=c.return}}function G3(a,c,p){var v=a.pingCache;v!==null&&v.delete(c),c=Bn(),a.pingedLanes|=a.suspendedLanes&p,mn===a&&(Sn&p)===p&&(cn===4||cn===3&&(Sn&130023424)===Sn&&500>Yt()-mv?fa(a,0):pv|=p),tr(a,c)}function AC(a,c){c===0&&((a.mode&1)===0?c=1:(c=ch,ch<<=1,(ch&130023424)===0&&(ch=4194304)));var p=Bn();a=os(a,c),a!==null&&(zc(a,c,p),tr(a,p))}function K3(a){var c=a.memoizedState,p=0;c!==null&&(p=c.retryLane),AC(a,p)}function Y3(a,c){var p=0;switch(a.tag){case 13:var v=a.stateNode,b=a.memoizedState;b!==null&&(p=b.retryLane);break;case 19:v=a.stateNode;break;default:throw Error(n(314))}v!==null&&v.delete(c),AC(a,p)}var RC;RC=function(a,c,p){if(a!==null)if(a.memoizedProps!==c.pendingProps||Qn.current)Zn=!0;else{if((a.lanes&p)===0&&(c.flags&128)===0)return Zn=!1,O3(a,c,p);Zn=(a.flags&131072)!==0}else Zn=!1,Ot&&(c.flags&1048576)!==0&&dS(c,Ah,c.index);switch(c.lanes=0,c.tag){case 2:var v=c.type;qh(a,c),a=c.pendingProps;var b=fl(c,In.current);bl(c,p),b=qg(null,c,v,a,b,p);var S=Gg();return c.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Xn(v)?(S=!0,_h(c)):S=!1,c.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,Ug(c),b.updater=Wh,c.stateNode=b,b._reactInternals=c,Zg(c,v,a,p),c=rv(null,c,v,!0,S,p)):(c.tag=0,Ot&&S&&Ig(c),Un(null,c,b,p),c=c.child),c;case 16:v=c.elementType;e:{switch(qh(a,c),a=c.pendingProps,b=v._init,v=b(v._payload),c.type=v,b=c.tag=Q3(v),a=Jr(v,a),b){case 0:c=nv(null,c,v,a,p);break e;case 1:c=iC(null,c,v,a,p);break e;case 11:c=ZS(null,c,v,a,p);break e;case 14:c=eC(null,c,v,Jr(v.type,a),p);break e}throw Error(n(306,v,""))}return c;case 0:return v=c.type,b=c.pendingProps,b=c.elementType===v?b:Jr(v,b),nv(a,c,v,b,p);case 1:return v=c.type,b=c.pendingProps,b=c.elementType===v?b:Jr(v,b),iC(a,c,v,b,p);case 3:e:{if(sC(c),a===null)throw Error(n(387));v=c.pendingProps,S=c.memoizedState,b=S.element,xS(a,c),Lh(c,v,null,p);var N=c.memoizedState;if(v=N.element,S.isDehydrated)if(S={element:v,isDehydrated:!1,cache:N.cache,pendingSuspenseBoundaries:N.pendingSuspenseBoundaries,transitions:N.transitions},c.updateQueue.baseState=S,c.memoizedState=S,c.flags&256){b=wl(Error(n(423)),c),c=oC(a,c,v,p,b);break e}else if(v!==b){b=wl(Error(n(424)),c),c=oC(a,c,v,p,b);break e}else for(hr=Js(c.stateNode.containerInfo.firstChild),dr=c,Ot=!0,Yr=null,p=yS(c,null,v,p),c.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(gl(),v===b){c=ls(a,c,p);break e}Un(a,c,v,p)}c=c.child}return c;case 5:return SS(c),a===null&&Rg(c),v=c.type,b=c.pendingProps,S=a!==null?a.memoizedProps:null,N=b.children,Sg(v,b)?N=null:S!==null&&Sg(v,S)&&(c.flags|=32),rC(a,c),Un(a,c,N,p),c.child;case 6:return a===null&&Rg(c),null;case 13:return aC(a,c,p);case 4:return Bg(c,c.stateNode.containerInfo),v=c.pendingProps,a===null?c.child=vl(c,null,v,p):Un(a,c,v,p),c.child;case 11:return v=c.type,b=c.pendingProps,b=c.elementType===v?b:Jr(v,b),ZS(a,c,v,b,p);case 7:return Un(a,c,c.pendingProps,p),c.child;case 8:return Un(a,c,c.pendingProps.children,p),c.child;case 12:return Un(a,c,c.pendingProps.children,p),c.child;case 10:e:{if(v=c.type._context,b=c.pendingProps,S=c.memoizedProps,N=b.value,_t(Dh,v._currentValue),v._currentValue=N,S!==null)if(Kr(S.value,N)){if(S.children===b.children&&!Qn.current){c=ls(a,c,p);break e}}else for(S=c.child,S!==null&&(S.return=c);S!==null;){var B=S.dependencies;if(B!==null){N=S.child;for(var q=B.firstContext;q!==null;){if(q.context===v){if(S.tag===1){q=as(-1,p&-p),q.tag=2;var ne=S.updateQueue;if(ne!==null){ne=ne.shared;var pe=ne.pending;pe===null?q.next=q:(q.next=pe.next,pe.next=q),ne.pending=q}}S.lanes|=p,q=S.alternate,q!==null&&(q.lanes|=p),Lg(S.return,p,c),B.lanes|=p;break}q=q.next}}else if(S.tag===10)N=S.type===c.type?null:S.child;else if(S.tag===18){if(N=S.return,N===null)throw Error(n(341));N.lanes|=p,B=N.alternate,B!==null&&(B.lanes|=p),Lg(N,p,c),N=S.sibling}else N=S.child;if(N!==null)N.return=S;else for(N=S;N!==null;){if(N===c){N=null;break}if(S=N.sibling,S!==null){S.return=N.return,N=S;break}N=N.return}S=N}Un(a,c,b.children,p),c=c.child}return c;case 9:return b=c.type,v=c.pendingProps.children,bl(c,p),b=Nr(b),v=v(b),c.flags|=1,Un(a,c,v,p),c.child;case 14:return v=c.type,b=Jr(v,c.pendingProps),b=Jr(v.type,b),eC(a,c,v,b,p);case 15:return tC(a,c,c.type,c.pendingProps,p);case 17:return v=c.type,b=c.pendingProps,b=c.elementType===v?b:Jr(v,b),qh(a,c),c.tag=1,Xn(v)?(a=!0,_h(c)):a=!1,bl(c,p),qS(c,v,b),Zg(c,v,b,p),rv(null,c,v,!0,a,p);case 19:return cC(a,c,p);case 22:return nC(a,c,p)}throw Error(n(156,c.tag))};function MC(a,c){return hk(a,c)}function J3(a,c,p,v){this.tag=a,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mr(a,c,p,v){return new J3(a,c,p,v)}function Sv(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Q3(a){if(typeof a=="function")return Sv(a)?1:0;if(a!=null){if(a=a.$$typeof,a===F)return 11;if(a===K)return 14}return 2}function ao(a,c){var p=a.alternate;return p===null?(p=Mr(a.tag,c,a.key,a.mode),p.elementType=a.elementType,p.type=a.type,p.stateNode=a.stateNode,p.alternate=a,a.alternate=p):(p.pendingProps=c,p.type=a.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=a.flags&14680064,p.childLanes=a.childLanes,p.lanes=a.lanes,p.child=a.child,p.memoizedProps=a.memoizedProps,p.memoizedState=a.memoizedState,p.updateQueue=a.updateQueue,c=a.dependencies,p.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},p.sibling=a.sibling,p.index=a.index,p.ref=a.ref,p}function rf(a,c,p,v,b,S){var N=2;if(v=a,typeof a=="function")Sv(a)&&(N=1);else if(typeof a=="string")N=5;else e:switch(a){case L:return ma(p.children,b,S,c);case R:N=8,b|=8;break;case j:return a=Mr(12,p,c,b|2),a.elementType=j,a.lanes=S,a;case W:return a=Mr(13,p,c,b),a.elementType=W,a.lanes=S,a;case Y:return a=Mr(19,p,c,b),a.elementType=Y,a.lanes=S,a;case se:return sf(p,b,S,c);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case U:N=10;break e;case z:N=9;break e;case F:N=11;break e;case K:N=14;break e;case X:N=16,v=null;break e}throw Error(n(130,a==null?a:typeof a,""))}return c=Mr(N,p,c,b),c.elementType=a,c.type=v,c.lanes=S,c}function ma(a,c,p,v){return a=Mr(7,a,v,c),a.lanes=p,a}function sf(a,c,p,v){return a=Mr(22,a,v,c),a.elementType=se,a.lanes=p,a.stateNode={isHidden:!1},a}function Cv(a,c,p){return a=Mr(6,a,null,c),a.lanes=p,a}function Tv(a,c,p){return c=Mr(4,a.children!==null?a.children:[],a.key,c),c.lanes=p,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}function X3(a,c,p,v,b){this.tag=c,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xm(0),this.expirationTimes=Xm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xm(0),this.identifierPrefix=v,this.onRecoverableError=b,this.mutableSourceEagerHydrationData=null}function Ev(a,c,p,v,b,S,N,B,q){return a=new X3(a,c,p,B,q),c===1?(c=1,S===!0&&(c|=8)):c=0,S=Mr(3,null,null,c),a.current=S,S.stateNode=a,S.memoizedState={element:v,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ug(S),a}function Z3(a,c,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A,key:v==null?null:""+v,children:a,containerInfo:c,implementation:p}}function DC(a){if(!a)return Xs;a=a._reactInternals;e:{if(wi(a)!==a||a.tag!==1)throw Error(n(170));var c=a;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Xn(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(n(171))}if(a.tag===1){var p=a.type;if(Xn(p))return lS(a,p,c)}return c}function jC(a,c,p,v,b,S,N,B,q){return a=Ev(p,v,!0,a,b,S,N,B,q),a.context=DC(null),p=a.current,v=Bn(),b=so(p),S=as(v,b),S.callback=c??null,to(p,S,b),a.current.lanes=b,zc(a,b,v),tr(a,v),a}function of(a,c,p,v){var b=c.current,S=Bn(),N=so(b);return p=DC(p),c.context===null?c.context=p:c.pendingContext=p,c=as(S,N),c.payload={element:a},v=v===void 0?null:v,v!==null&&(c.callback=v),a=to(b,c,N),a!==null&&(Zr(a,b,N,S),Oh(a,b,N)),N}function af(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function OC(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var p=a.retryLane;a.retryLane=p!==0&&p<c?p:c}}function Pv(a,c){OC(a,c),(a=a.alternate)&&OC(a,c)}function eU(){return null}var LC=typeof reportError=="function"?reportError:function(a){console.error(a)};function _v(a){this._internalRoot=a}lf.prototype.render=_v.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(n(409));of(a,c,null,null)},lf.prototype.unmount=_v.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;ha(function(){of(null,a,null,null)}),c[ns]=null}};function lf(a){this._internalRoot=a}lf.prototype.unstable_scheduleHydration=function(a){if(a){var c=xk();a={blockedOn:null,target:a,priority:c};for(var p=0;p<Gs.length&&c!==0&&c<Gs[p].priority;p++);Gs.splice(p,0,a),p===0&&Sk(a)}};function Iv(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function cf(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function FC(){}function tU(a,c,p,v,b){if(b){if(typeof v=="function"){var S=v;v=function(){var ne=af(N);S.call(ne)}}var N=jC(c,v,a,0,null,!1,!1,"",FC);return a._reactRootContainer=N,a[ns]=N.current,nu(a.nodeType===8?a.parentNode:a),ha(),N}for(;b=a.lastChild;)a.removeChild(b);if(typeof v=="function"){var B=v;v=function(){var ne=af(q);B.call(ne)}}var q=Ev(a,0,!1,null,null,!1,!1,"",FC);return a._reactRootContainer=q,a[ns]=q.current,nu(a.nodeType===8?a.parentNode:a),ha(function(){of(c,q,p,v)}),q}function uf(a,c,p,v,b){var S=p._reactRootContainer;if(S){var N=S;if(typeof b=="function"){var B=b;b=function(){var q=af(N);B.call(q)}}of(c,N,a,b)}else N=tU(p,c,a,b,v);return af(N)}yk=function(a){switch(a.tag){case 3:var c=a.stateNode;if(c.current.memoizedState.isDehydrated){var p=Vc(c.pendingLanes);p!==0&&(Zm(c,p|1),tr(c,Yt()),(gt&6)===0&&(Cl=Yt()+500,Zs()))}break;case 13:ha(function(){var v=os(a,1);if(v!==null){var b=Bn();Zr(v,a,1,b)}}),Pv(a,1)}},eg=function(a){if(a.tag===13){var c=os(a,134217728);if(c!==null){var p=Bn();Zr(c,a,134217728,p)}Pv(a,134217728)}},bk=function(a){if(a.tag===13){var c=so(a),p=os(a,c);if(p!==null){var v=Bn();Zr(p,a,c,v)}Pv(a,c)}},xk=function(){return St},wk=function(a,c){var p=St;try{return St=a,c()}finally{St=p}},Vs=function(a,c,p){switch(c){case"input":if(Pn(a,p),c=p.name,p.type==="radio"&&c!=null){for(p=a;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<p.length;c++){var v=p[c];if(v!==a&&v.form===a.form){var b=Eh(v);if(!b)throw Error(n(90));Je(v),Pn(v,b)}}}break;case"textarea":zr(a,p);break;case"select":c=p.value,c!=null&&_n(a,!!p.multiple,c,!1)}},Ze=xv,mt=ha;var nU={usingClientEntryPoint:!1,Events:[su,dl,Eh,le,Re,xv]},bu={findFiberByHostInstance:ia,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rU={bundleType:bu.bundleType,version:bu.version,rendererPackageName:bu.rendererPackageName,rendererConfig:bu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=$s(a),a===null?null:a.stateNode},findFiberByHostInstance:bu.findFiberByHostInstance||eU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var df=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!df.isDisabled&&df.supportsFiber)try{ah=df.inject(rU),ki=df}catch{}}return nr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nU,nr.createPortal=function(a,c){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Iv(c))throw Error(n(200));return Z3(a,c,null,p)},nr.createRoot=function(a,c){if(!Iv(a))throw Error(n(299));var p=!1,v="",b=LC;return c!=null&&(c.unstable_strictMode===!0&&(p=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onRecoverableError!==void 0&&(b=c.onRecoverableError)),c=Ev(a,1,!1,null,null,p,!1,v,b),a[ns]=c.current,nu(a.nodeType===8?a.parentNode:a),new _v(c)},nr.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=$s(c),a=a===null?null:a.stateNode,a},nr.flushSync=function(a){return ha(a)},nr.hydrate=function(a,c,p){if(!cf(c))throw Error(n(200));return uf(null,a,c,!0,p)},nr.hydrateRoot=function(a,c,p){if(!Iv(a))throw Error(n(405));var v=p!=null&&p.hydratedSources||null,b=!1,S="",N=LC;if(p!=null&&(p.unstable_strictMode===!0&&(b=!0),p.identifierPrefix!==void 0&&(S=p.identifierPrefix),p.onRecoverableError!==void 0&&(N=p.onRecoverableError)),c=jC(c,null,a,1,p??null,b,!1,S,N),a[ns]=c.current,nu(a),v)for(a=0;a<v.length;a++)p=v[a],b=p._getVersion,b=b(p._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[p,b]:c.mutableSourceEagerHydrationData.push(p,b);return new lf(c)},nr.render=function(a,c,p){if(!cf(c))throw Error(n(200));return uf(null,a,c,!1,p)},nr.unmountComponentAtNode=function(a){if(!cf(a))throw Error(n(40));return a._reactRootContainer?(ha(function(){uf(null,null,a,!1,function(){a._reactRootContainer=null,a[ns]=null})}),!0):!1},nr.unstable_batchedUpdates=xv,nr.unstable_renderSubtreeIntoContainer=function(a,c,p,v){if(!cf(p))throw Error(n(200));if(a==null||a._reactInternals===void 0)throw Error(n(38));return uf(a,c,p,!1,v)},nr.version="18.3.1-next-f1338f8080-20240426",nr}var GC;function nI(){if(GC)return Mv.exports;GC=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Mv.exports=dU(),Mv.exports}var KC;function hU(){if(KC)return ff;KC=1;var t=nI();return ff.createRoot=t.createRoot,ff.hydrateRoot=t.hydrateRoot,ff}var fU=hU();const pU=jd(fU),mU=20,gU=5e3,No={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"};let Ov=0;function vU(){return Ov=(Ov+1)%Number.MAX_VALUE,Ov.toString()}const YC=new Map,pf=new Map,JC=t=>{const e=YC.get(t);e&&(clearTimeout(e),YC.delete(t))},yU=(t,e)=>{switch(e.type){case No.ADD_TOAST:return{...t,toasts:[e.toast,...t.toasts].slice(0,mU)};case No.UPDATE_TOAST:return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case No.DISMISS_TOAST:{const{toastId:n}=e;return n?(JC(n),{...t,toasts:t.toasts.filter(r=>r.id!==n)}):(t.toasts.forEach(r=>{JC(r.id)}),{...t,toasts:[]})}case No.REMOVE_TOAST:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Lf=[];let Ff={toasts:[]};function Uf(t){Ff=yU(Ff,t),Lf.forEach(e=>{e(Ff)})}function bU({duration:t=gU,...e}){const n=vU(),r=s=>Uf({type:No.UPDATE_TOAST,toast:{...s,id:n}}),i=()=>{const s=pf.get(n);s&&(clearTimeout(s),pf.delete(n)),Uf({type:No.DISMISS_TOAST,toastId:n})};if(Uf({type:No.ADD_TOAST,toast:{...e,id:n,open:!0,onOpenChange:s=>{s||i()}}}),t&&t>0){const s=setTimeout(()=>{pf.delete(n),i()},t);pf.set(n,s)}return{id:n,dismiss:i,update:r}}function rI(){const[t,e]=w.useState(Ff);return w.useEffect(()=>(Lf.push(e),()=>{const n=Lf.indexOf(e);n>-1&&Lf.splice(n,1)}),[t]),{...t,toast:bU,dismiss:n=>Uf({type:No.DISMISS_TOAST,toastId:n})}}function iI(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=iI(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function sI(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=iI(t))&&(r&&(r+=" "),r+=e);return r}const QC=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,XC=sI,$b=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return XC(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(d=>{const f=n==null?void 0:n[d],m=s==null?void 0:s[d];if(f===null)return null;const g=QC(f)||QC(m);return i[d][g]}),l=n&&Object.entries(n).reduce((d,f)=>{let[m,g]=f;return g===void 0||(d[m]=g),d},{}),u=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,f)=>{let{class:m,className:g,...y}=f;return Object.entries(y).every(C=>{let[x,k]=C;return Array.isArray(k)?k.includes({...s,...l}[x]):{...s,...l}[x]===k})?[...d,m,g]:d},[]);return XC(t,o,u,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xU=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),oI=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kU=w.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...l},u)=>w.createElement("svg",{ref:u,...wU,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:oI("lucide",i),...l},[...o.map(([d,f])=>w.createElement(d,f)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=(t,e)=>{const n=w.forwardRef(({className:r,...i},s)=>w.createElement(kU,{ref:s,iconNode:e,className:oI(`lucide-${xU(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SU=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],CU=$e("ArrowDownRight",SU);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TU=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Pc=$e("ArrowLeft",TU);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EU=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],_c=$e("ArrowRight",EU);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PU=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],ZC=$e("ArrowUpRight",PU);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _U=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],IU=$e("BrainCircuit",_U);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NU=[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]],AU=$e("Bug",NU);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RU=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],MU=$e("Calendar",RU);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DU=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],zu=$e("ChartColumn",DU);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jU=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Mo=$e("Check",jU);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OU=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],vc=$e("ChevronDown",OU);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LU=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],aI=$e("ChevronRight",LU);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FU=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],dp=$e("ChevronUp",FU);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],tm=$e("CircleAlert",UU);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BU=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],yc=$e("CircleCheckBig",BU);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],lI=$e("CircleX",VU);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$U=$e("Circle",zU);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Ps=$e("Clock",WU);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HU=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],qU=$e("Code",HU);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GU=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],cI=$e("Copy",GU);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KU=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],YU=$e("CreditCard",KU);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JU=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],QU=$e("Download",JU);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XU=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ZU=$e("ExternalLink",XU);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],uI=$e("Eye",e4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],hp=$e("FileText",t4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],r4=$e("Filter",n4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],$u=$e("Link",i4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],dI=$e("LoaderCircle",s4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],hI=$e("Lock",o4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],l4=$e("LogOut",a4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Wb=$e("Mail",c4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],jl=$e("MessageSquare",u4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Qy=$e("Pencil",d4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]],f4=$e("PhoneOff",h4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],fI=$e("Phone",p4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],pI=$e("Play",m4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Xy=$e("Plus",g4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],y4=$e("RotateCcw",v4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],x4=$e("Search",b4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],k4=$e("Send",w4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],C4=$e("Share2",S4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],E4=$e("Sparkles",T4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],_4=$e("Star",P4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],N4=$e("Timer",I4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Zy=$e("Trash2",A4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],eT=$e("TrendingDown",R4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],D4=$e("TriangleAlert",M4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],O4=$e("Undo",j4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],F4=$e("User",L4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],tT=$e("Users",U4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],fi=$e("X",B4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],z4=$e("Zap",V4),Hb="-",$4=t=>{const e=H4(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(Hb);return l[0]===""&&l.length!==1&&l.shift(),mI(l,e)||W4(o)},getConflictingClassGroupIds:(o,l)=>{const u=n[o]||[];return l&&r[o]?[...u,...r[o]]:u}}},mI=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?mI(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(Hb);return(o=e.validators.find(({validator:l})=>l(s)))==null?void 0:o.classGroupId},nT=/^\[(.+)\]$/,W4=t=>{if(nT.test(t)){const e=nT.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},H4=t=>{const{theme:e,classGroups:n}=t,r={nextPart:new Map,validators:[]};for(const i in n)e0(n[i],r,i,e);return r},e0=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:rT(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(q4(i)){e0(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{e0(o,rT(e,s),n,r)})})},rT=(t,e)=>{let n=t;return e.split(Hb).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},q4=t=>t.isThemeGetter,G4=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},t0="!",n0=":",K4=n0.length,Y4=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=i=>{const s=[];let o=0,l=0,u=0,d;for(let C=0;C<i.length;C++){let x=i[C];if(o===0&&l===0){if(x===n0){s.push(i.slice(u,C)),u=C+K4;continue}if(x==="/"){d=C;continue}}x==="["?o++:x==="]"?o--:x==="("?l++:x===")"&&l--}const f=s.length===0?i:i.substring(u),m=J4(f),g=m!==f,y=d&&d>u?d-u:void 0;return{modifiers:s,hasImportantModifier:g,baseClassName:m,maybePostfixModifierPosition:y}};if(e){const i=e+n0,s=r;r=o=>o.startsWith(i)?s(o.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(n){const i=r;r=s=>n({className:s,parseClassName:i})}return r},J4=t=>t.endsWith(t0)?t.substring(0,t.length-1):t.startsWith(t0)?t.substring(1):t,Q4=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let s=[];return r.forEach(o=>{o[0]==="["||e[o]?(i.push(...s.sort(),o),s=[]):s.push(o)}),i.push(...s.sort()),i}},X4=t=>({cache:G4(t.cacheSize),parseClassName:Y4(t),sortModifiers:Q4(t),...$4(t)}),Z4=/\s+/,e5=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:s}=e,o=[],l=t.trim().split(Z4);let u="";for(let d=l.length-1;d>=0;d-=1){const f=l[d],{isExternal:m,modifiers:g,hasImportantModifier:y,baseClassName:C,maybePostfixModifierPosition:x}=n(f);if(m){u=f+(u.length>0?" "+u:u);continue}let k=!!x,T=r(k?C.substring(0,x):C);if(!T){if(!k){u=f+(u.length>0?" "+u:u);continue}if(T=r(C),!T){u=f+(u.length>0?" "+u:u);continue}k=!1}const _=s(g).join(":"),P=y?_+t0:_,E=P+T;if(o.includes(E))continue;o.push(E);const I=i(T,k);for(let A=0;A<I.length;++A){const L=I[A];o.push(P+L)}u=f+(u.length>0?" "+u:u)}return u};function t5(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=gI(e))&&(r&&(r+=" "),r+=n);return r}const gI=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=gI(t[r]))&&(n&&(n+=" "),n+=e);return n};function n5(t,...e){let n,r,i,s=o;function o(u){const d=e.reduce((f,m)=>m(f),t());return n=X4(d),r=n.cache.get,i=n.cache.set,s=l,l(u)}function l(u){const d=r(u);if(d)return d;const f=e5(u,n);return i(u,f),f}return function(){return s(t5.apply(null,arguments))}}const un=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},vI=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,yI=/^\((?:(\w[\w-]*):)?(.+)\)$/i,r5=/^\d+\/\d+$/,i5=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,s5=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,o5=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,a5=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,l5=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,El=t=>r5.test(t),it=t=>!!t&&!Number.isNaN(Number(t)),co=t=>!!t&&Number.isInteger(Number(t)),Lv=t=>t.endsWith("%")&&it(t.slice(0,-1)),us=t=>i5.test(t),c5=()=>!0,u5=t=>s5.test(t)&&!o5.test(t),bI=()=>!1,d5=t=>a5.test(t),h5=t=>l5.test(t),f5=t=>!De(t)&&!je(t),p5=t=>Ic(t,kI,bI),De=t=>vI.test(t),ga=t=>Ic(t,SI,u5),Fv=t=>Ic(t,b5,it),iT=t=>Ic(t,xI,bI),m5=t=>Ic(t,wI,h5),mf=t=>Ic(t,CI,d5),je=t=>yI.test(t),wu=t=>Nc(t,SI),g5=t=>Nc(t,x5),sT=t=>Nc(t,xI),v5=t=>Nc(t,kI),y5=t=>Nc(t,wI),gf=t=>Nc(t,CI,!0),Ic=(t,e,n)=>{const r=vI.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},Nc=(t,e,n=!1)=>{const r=yI.exec(t);return r?r[1]?e(r[1]):n:!1},xI=t=>t==="position"||t==="percentage",wI=t=>t==="image"||t==="url",kI=t=>t==="length"||t==="size"||t==="bg-size",SI=t=>t==="length",b5=t=>t==="number",x5=t=>t==="family-name",CI=t=>t==="shadow",w5=()=>{const t=un("color"),e=un("font"),n=un("text"),r=un("font-weight"),i=un("tracking"),s=un("leading"),o=un("breakpoint"),l=un("container"),u=un("spacing"),d=un("radius"),f=un("shadow"),m=un("inset-shadow"),g=un("text-shadow"),y=un("drop-shadow"),C=un("blur"),x=un("perspective"),k=un("aspect"),T=un("ease"),_=un("animate"),P=()=>["auto","avoid","all","avoid-page","page","left","right","column"],E=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],I=()=>[...E(),je,De],A=()=>["auto","hidden","clip","visible","scroll"],L=()=>["auto","contain","none"],R=()=>[je,De,u],j=()=>[El,"full","auto",...R()],U=()=>[co,"none","subgrid",je,De],z=()=>["auto",{span:["full",co,je,De]},co,je,De],F=()=>[co,"auto",je,De],W=()=>["auto","min","max","fr",je,De],Y=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],K=()=>["start","end","center","stretch","center-safe","end-safe"],X=()=>["auto",...R()],se=()=>[El,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...R()],H=()=>[t,je,De],te=()=>[...E(),sT,iT,{position:[je,De]}],D=()=>["no-repeat",{repeat:["","x","y","space","round"]}],$=()=>["auto","cover","contain",v5,p5,{size:[je,De]}],re=()=>[Lv,wu,ga],O=()=>["","none","full",d,je,De],ve=()=>["",it,wu,ga],oe=()=>["solid","dashed","dotted","double"],ce=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ie=()=>[it,Lv,sT,iT],Se=()=>["","none",C,je,De],Ce=()=>["none",it,je,De],Le=()=>["none",it,je,De],qe=()=>[it,je,De],Je=()=>[El,"full",...R()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[us],breakpoint:[us],color:[c5],container:[us],"drop-shadow":[us],ease:["in","out","in-out"],font:[f5],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[us],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[us],shadow:[us],spacing:["px",it],text:[us],"text-shadow":[us],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",El,De,je,k]}],container:["container"],columns:[{columns:[it,De,je,l]}],"break-after":[{"break-after":P()}],"break-before":[{"break-before":P()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:I()}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:L()}],"overscroll-x":[{"overscroll-x":L()}],"overscroll-y":[{"overscroll-y":L()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:j()}],"inset-x":[{"inset-x":j()}],"inset-y":[{"inset-y":j()}],start:[{start:j()}],end:[{end:j()}],top:[{top:j()}],right:[{right:j()}],bottom:[{bottom:j()}],left:[{left:j()}],visibility:["visible","invisible","collapse"],z:[{z:[co,"auto",je,De]}],basis:[{basis:[El,"full","auto",l,...R()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[it,El,"auto","initial","none",De]}],grow:[{grow:["",it,je,De]}],shrink:[{shrink:["",it,je,De]}],order:[{order:[co,"first","last","none",je,De]}],"grid-cols":[{"grid-cols":U()}],"col-start-end":[{col:z()}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":U()}],"row-start-end":[{row:z()}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":W()}],"auto-rows":[{"auto-rows":W()}],gap:[{gap:R()}],"gap-x":[{"gap-x":R()}],"gap-y":[{"gap-y":R()}],"justify-content":[{justify:[...Y(),"normal"]}],"justify-items":[{"justify-items":[...K(),"normal"]}],"justify-self":[{"justify-self":["auto",...K()]}],"align-content":[{content:["normal",...Y()]}],"align-items":[{items:[...K(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...K(),{baseline:["","last"]}]}],"place-content":[{"place-content":Y()}],"place-items":[{"place-items":[...K(),"baseline"]}],"place-self":[{"place-self":["auto",...K()]}],p:[{p:R()}],px:[{px:R()}],py:[{py:R()}],ps:[{ps:R()}],pe:[{pe:R()}],pt:[{pt:R()}],pr:[{pr:R()}],pb:[{pb:R()}],pl:[{pl:R()}],m:[{m:X()}],mx:[{mx:X()}],my:[{my:X()}],ms:[{ms:X()}],me:[{me:X()}],mt:[{mt:X()}],mr:[{mr:X()}],mb:[{mb:X()}],ml:[{ml:X()}],"space-x":[{"space-x":R()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":R()}],"space-y-reverse":["space-y-reverse"],size:[{size:se()}],w:[{w:[l,"screen",...se()]}],"min-w":[{"min-w":[l,"screen","none",...se()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...se()]}],h:[{h:["screen","lh",...se()]}],"min-h":[{"min-h":["screen","lh","none",...se()]}],"max-h":[{"max-h":["screen","lh",...se()]}],"font-size":[{text:["base",n,wu,ga]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,je,Fv]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Lv,De]}],"font-family":[{font:[g5,De,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,je,De]}],"line-clamp":[{"line-clamp":[it,"none",je,Fv]}],leading:[{leading:[s,...R()]}],"list-image":[{"list-image":["none",je,De]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",je,De]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:H()}],"text-color":[{text:H()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...oe(),"wavy"]}],"text-decoration-thickness":[{decoration:[it,"from-font","auto",je,ga]}],"text-decoration-color":[{decoration:H()}],"underline-offset":[{"underline-offset":[it,"auto",je,De]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",je,De]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",je,De]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:te()}],"bg-repeat":[{bg:D()}],"bg-size":[{bg:$()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},co,je,De],radial:["",je,De],conic:[co,je,De]},y5,m5]}],"bg-color":[{bg:H()}],"gradient-from-pos":[{from:re()}],"gradient-via-pos":[{via:re()}],"gradient-to-pos":[{to:re()}],"gradient-from":[{from:H()}],"gradient-via":[{via:H()}],"gradient-to":[{to:H()}],rounded:[{rounded:O()}],"rounded-s":[{"rounded-s":O()}],"rounded-e":[{"rounded-e":O()}],"rounded-t":[{"rounded-t":O()}],"rounded-r":[{"rounded-r":O()}],"rounded-b":[{"rounded-b":O()}],"rounded-l":[{"rounded-l":O()}],"rounded-ss":[{"rounded-ss":O()}],"rounded-se":[{"rounded-se":O()}],"rounded-ee":[{"rounded-ee":O()}],"rounded-es":[{"rounded-es":O()}],"rounded-tl":[{"rounded-tl":O()}],"rounded-tr":[{"rounded-tr":O()}],"rounded-br":[{"rounded-br":O()}],"rounded-bl":[{"rounded-bl":O()}],"border-w":[{border:ve()}],"border-w-x":[{"border-x":ve()}],"border-w-y":[{"border-y":ve()}],"border-w-s":[{"border-s":ve()}],"border-w-e":[{"border-e":ve()}],"border-w-t":[{"border-t":ve()}],"border-w-r":[{"border-r":ve()}],"border-w-b":[{"border-b":ve()}],"border-w-l":[{"border-l":ve()}],"divide-x":[{"divide-x":ve()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ve()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...oe(),"hidden","none"]}],"divide-style":[{divide:[...oe(),"hidden","none"]}],"border-color":[{border:H()}],"border-color-x":[{"border-x":H()}],"border-color-y":[{"border-y":H()}],"border-color-s":[{"border-s":H()}],"border-color-e":[{"border-e":H()}],"border-color-t":[{"border-t":H()}],"border-color-r":[{"border-r":H()}],"border-color-b":[{"border-b":H()}],"border-color-l":[{"border-l":H()}],"divide-color":[{divide:H()}],"outline-style":[{outline:[...oe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[it,je,De]}],"outline-w":[{outline:["",it,wu,ga]}],"outline-color":[{outline:H()}],shadow:[{shadow:["","none",f,gf,mf]}],"shadow-color":[{shadow:H()}],"inset-shadow":[{"inset-shadow":["none",m,gf,mf]}],"inset-shadow-color":[{"inset-shadow":H()}],"ring-w":[{ring:ve()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:H()}],"ring-offset-w":[{"ring-offset":[it,ga]}],"ring-offset-color":[{"ring-offset":H()}],"inset-ring-w":[{"inset-ring":ve()}],"inset-ring-color":[{"inset-ring":H()}],"text-shadow":[{"text-shadow":["none",g,gf,mf]}],"text-shadow-color":[{"text-shadow":H()}],opacity:[{opacity:[it,je,De]}],"mix-blend":[{"mix-blend":[...ce(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ce()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[it]}],"mask-image-linear-from-pos":[{"mask-linear-from":ie()}],"mask-image-linear-to-pos":[{"mask-linear-to":ie()}],"mask-image-linear-from-color":[{"mask-linear-from":H()}],"mask-image-linear-to-color":[{"mask-linear-to":H()}],"mask-image-t-from-pos":[{"mask-t-from":ie()}],"mask-image-t-to-pos":[{"mask-t-to":ie()}],"mask-image-t-from-color":[{"mask-t-from":H()}],"mask-image-t-to-color":[{"mask-t-to":H()}],"mask-image-r-from-pos":[{"mask-r-from":ie()}],"mask-image-r-to-pos":[{"mask-r-to":ie()}],"mask-image-r-from-color":[{"mask-r-from":H()}],"mask-image-r-to-color":[{"mask-r-to":H()}],"mask-image-b-from-pos":[{"mask-b-from":ie()}],"mask-image-b-to-pos":[{"mask-b-to":ie()}],"mask-image-b-from-color":[{"mask-b-from":H()}],"mask-image-b-to-color":[{"mask-b-to":H()}],"mask-image-l-from-pos":[{"mask-l-from":ie()}],"mask-image-l-to-pos":[{"mask-l-to":ie()}],"mask-image-l-from-color":[{"mask-l-from":H()}],"mask-image-l-to-color":[{"mask-l-to":H()}],"mask-image-x-from-pos":[{"mask-x-from":ie()}],"mask-image-x-to-pos":[{"mask-x-to":ie()}],"mask-image-x-from-color":[{"mask-x-from":H()}],"mask-image-x-to-color":[{"mask-x-to":H()}],"mask-image-y-from-pos":[{"mask-y-from":ie()}],"mask-image-y-to-pos":[{"mask-y-to":ie()}],"mask-image-y-from-color":[{"mask-y-from":H()}],"mask-image-y-to-color":[{"mask-y-to":H()}],"mask-image-radial":[{"mask-radial":[je,De]}],"mask-image-radial-from-pos":[{"mask-radial-from":ie()}],"mask-image-radial-to-pos":[{"mask-radial-to":ie()}],"mask-image-radial-from-color":[{"mask-radial-from":H()}],"mask-image-radial-to-color":[{"mask-radial-to":H()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":E()}],"mask-image-conic-pos":[{"mask-conic":[it]}],"mask-image-conic-from-pos":[{"mask-conic-from":ie()}],"mask-image-conic-to-pos":[{"mask-conic-to":ie()}],"mask-image-conic-from-color":[{"mask-conic-from":H()}],"mask-image-conic-to-color":[{"mask-conic-to":H()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:te()}],"mask-repeat":[{mask:D()}],"mask-size":[{mask:$()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",je,De]}],filter:[{filter:["","none",je,De]}],blur:[{blur:Se()}],brightness:[{brightness:[it,je,De]}],contrast:[{contrast:[it,je,De]}],"drop-shadow":[{"drop-shadow":["","none",y,gf,mf]}],"drop-shadow-color":[{"drop-shadow":H()}],grayscale:[{grayscale:["",it,je,De]}],"hue-rotate":[{"hue-rotate":[it,je,De]}],invert:[{invert:["",it,je,De]}],saturate:[{saturate:[it,je,De]}],sepia:[{sepia:["",it,je,De]}],"backdrop-filter":[{"backdrop-filter":["","none",je,De]}],"backdrop-blur":[{"backdrop-blur":Se()}],"backdrop-brightness":[{"backdrop-brightness":[it,je,De]}],"backdrop-contrast":[{"backdrop-contrast":[it,je,De]}],"backdrop-grayscale":[{"backdrop-grayscale":["",it,je,De]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[it,je,De]}],"backdrop-invert":[{"backdrop-invert":["",it,je,De]}],"backdrop-opacity":[{"backdrop-opacity":[it,je,De]}],"backdrop-saturate":[{"backdrop-saturate":[it,je,De]}],"backdrop-sepia":[{"backdrop-sepia":["",it,je,De]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":R()}],"border-spacing-x":[{"border-spacing-x":R()}],"border-spacing-y":[{"border-spacing-y":R()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",je,De]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[it,"initial",je,De]}],ease:[{ease:["linear","initial",T,je,De]}],delay:[{delay:[it,je,De]}],animate:[{animate:["none",_,je,De]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,je,De]}],"perspective-origin":[{"perspective-origin":I()}],rotate:[{rotate:Ce()}],"rotate-x":[{"rotate-x":Ce()}],"rotate-y":[{"rotate-y":Ce()}],"rotate-z":[{"rotate-z":Ce()}],scale:[{scale:Le()}],"scale-x":[{"scale-x":Le()}],"scale-y":[{"scale-y":Le()}],"scale-z":[{"scale-z":Le()}],"scale-3d":["scale-3d"],skew:[{skew:qe()}],"skew-x":[{"skew-x":qe()}],"skew-y":[{"skew-y":qe()}],transform:[{transform:[je,De,"","none","gpu","cpu"]}],"transform-origin":[{origin:I()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Je()}],"translate-x":[{"translate-x":Je()}],"translate-y":[{"translate-y":Je()}],"translate-z":[{"translate-z":Je()}],"translate-none":["translate-none"],accent:[{accent:H()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:H()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",je,De]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",je,De]}],fill:[{fill:["none",...H()]}],"stroke-w":[{stroke:[it,wu,ga,Fv]}],stroke:[{stroke:["none",...H()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},TI=n5(w5);function et(...t){return TI(sI(t))}const EI=w.forwardRef(({...t},e)=>h.jsx("div",{ref:e,className:"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",...t}));EI.displayName="ToastProvider";const PI=w.forwardRef(({...t},e)=>h.jsx("div",{ref:e,className:"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",...t}));PI.displayName="ToastViewport";const k5=$b("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),_I=w.forwardRef(({className:t,variant:e,...n},r)=>h.jsx("div",{ref:r,className:et(k5({variant:e}),t),...n}));_I.displayName="Toast";const S5=w.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,className:et("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));S5.displayName="ToastAction";const II=w.forwardRef(({className:t,...e},n)=>h.jsx("button",{ref:n,className:et("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:h.jsx(fi,{className:"h-4 w-4"})}));II.displayName="ToastClose";const NI=w.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,className:et("text-sm font-semibold",t),...e}));NI.displayName="ToastTitle";const AI=w.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,className:et("text-sm opacity-90",t),...e}));AI.displayName="ToastDescription";function C5(){const{toasts:t,dismiss:e}=rI();return h.jsxs(EI,{children:[t.map(function({id:n,title:r,description:i,action:s,onOpenChange:o,...l}){return h.jsxs(_I,{...l,children:[h.jsxs("div",{className:"grid gap-1",children:[r&&h.jsx(NI,{children:r}),i&&h.jsx(AI,{children:i})]}),s,h.jsx(II,{onClick:u=>{u.preventDefault(),u.stopPropagation(),e(n)}})]},n)}),h.jsx(PI,{})]})}var nm=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},T5={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Co,Bb,G_,E5=(G_=class{constructor(){pt(this,Co,T5);pt(this,Bb,!1)}setTimeoutProvider(t){Qe(this,Co,t)}setTimeout(t,e){return ae(this,Co).setTimeout(t,e)}clearTimeout(t){ae(this,Co).clearTimeout(t)}setInterval(t,e){return ae(this,Co).setInterval(t,e)}clearInterval(t){ae(this,Co).clearInterval(t)}},Co=new WeakMap,Bb=new WeakMap,G_),r0=new E5;function P5(t){setTimeout(t,0)}var rm=typeof window>"u"||"Deno"in globalThis;function ri(){}function _5(t,e){return typeof t=="function"?t(e):t}function I5(t){return typeof t=="number"&&t>=0&&t!==1/0}function N5(t,e){return Math.max(t+(e||0)-Date.now(),0)}function i0(t,e){return typeof t=="function"?t(e):t}function A5(t,e){return typeof t=="function"?t(e):t}function oT(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:l}=t;if(o){if(r){if(e.queryHash!==qb(o,e.options))return!1}else if(!cd(e.queryKey,o))return!1}if(n!=="all"){const u=e.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||i&&i!==e.state.fetchStatus||s&&!s(e))}function aT(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(ld(e.options.mutationKey)!==ld(s))return!1}else if(!cd(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function qb(t,e){return((e==null?void 0:e.queryKeyHashFn)||ld)(t)}function ld(t){return JSON.stringify(t,(e,n)=>s0(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function cd(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>cd(t[n],e[n])):!1}var R5=Object.prototype.hasOwnProperty;function RI(t,e){if(t===e)return t;const n=lT(t)&&lT(e);if(!n&&!(s0(t)&&s0(e)))return e;const i=(n?t:Object.keys(t)).length,s=n?e:Object.keys(e),o=s.length,l=n?new Array(o):{};let u=0;for(let d=0;d<o;d++){const f=n?d:s[d],m=t[f],g=e[f];if(m===g){l[f]=m,(n?d<i:R5.call(t,f))&&u++;continue}if(m===null||g===null||typeof m!="object"||typeof g!="object"){l[f]=g;continue}const y=RI(m,g);l[f]=y,y===m&&u++}return i===o&&u===i?t:l}function lT(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function s0(t){if(!cT(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!cT(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function cT(t){return Object.prototype.toString.call(t)==="[object Object]"}function M5(t){return new Promise(e=>{r0.setTimeout(e,t)})}function D5(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?RI(t,e):e}function j5(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function O5(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Gb=Symbol();function MI(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Gb?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Ta,To,cc,K_,L5=(K_=class extends nm{constructor(){super();pt(this,Ta);pt(this,To);pt(this,cc);Qe(this,cc,e=>{if(!rm&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){ae(this,To)||this.setEventListener(ae(this,cc))}onUnsubscribe(){var e;this.hasListeners()||((e=ae(this,To))==null||e.call(this),Qe(this,To,void 0))}setEventListener(e){var n;Qe(this,cc,e),(n=ae(this,To))==null||n.call(this),Qe(this,To,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){ae(this,Ta)!==e&&(Qe(this,Ta,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof ae(this,Ta)=="boolean"?ae(this,Ta):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ta=new WeakMap,To=new WeakMap,cc=new WeakMap,K_),DI=new L5;function F5(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}var U5=P5;function B5(){let t=[],e=0,n=l=>{l()},r=l=>{l()},i=U5;const s=l=>{e?t.push(l):i(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&i(()=>{r(()=>{l.forEach(u=>{n(u)})})})};return{batch:l=>{let u;e++;try{u=l()}finally{e--,e||o()}return u},batchCalls:l=>(...u)=>{s(()=>{l(...u)})},schedule:s,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{i=l}}}var $n=B5(),uc,Eo,dc,Y_,V5=(Y_=class extends nm{constructor(){super();pt(this,uc,!0);pt(this,Eo);pt(this,dc);Qe(this,dc,e=>{if(!rm&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){ae(this,Eo)||this.setEventListener(ae(this,dc))}onUnsubscribe(){var e;this.hasListeners()||((e=ae(this,Eo))==null||e.call(this),Qe(this,Eo,void 0))}setEventListener(e){var n;Qe(this,dc,e),(n=ae(this,Eo))==null||n.call(this),Qe(this,Eo,e(this.setOnline.bind(this)))}setOnline(e){ae(this,uc)!==e&&(Qe(this,uc,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return ae(this,uc)}},uc=new WeakMap,Eo=new WeakMap,dc=new WeakMap,Y_),fp=new V5;function z5(t){return Math.min(1e3*2**t,3e4)}function jI(t){return(t??"online")==="online"?fp.isOnline():!0}var o0=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function OI(t){let e=!1,n=0,r;const i=F5(),s=()=>i.status!=="pending",o=x=>{var k;if(!s()){const T=new o0(x);g(T),(k=t.onCancel)==null||k.call(t,T)}},l=()=>{e=!0},u=()=>{e=!1},d=()=>DI.isFocused()&&(t.networkMode==="always"||fp.isOnline())&&t.canRun(),f=()=>jI(t.networkMode)&&t.canRun(),m=x=>{s()||(r==null||r(),i.resolve(x))},g=x=>{s()||(r==null||r(),i.reject(x))},y=()=>new Promise(x=>{var k;r=T=>{(s()||d())&&x(T)},(k=t.onPause)==null||k.call(t)}).then(()=>{var x;r=void 0,s()||(x=t.onContinue)==null||x.call(t)}),C=()=>{if(s())return;let x;const k=n===0?t.initialPromise:void 0;try{x=k??t.fn()}catch(T){x=Promise.reject(T)}Promise.resolve(x).then(m).catch(T=>{var A;if(s())return;const _=t.retry??(rm?0:3),P=t.retryDelay??z5,E=typeof P=="function"?P(n,T):P,I=_===!0||typeof _=="number"&&n<_||typeof _=="function"&&_(n,T);if(e||!I){g(T);return}n++,(A=t.onFail)==null||A.call(t,n,T),M5(E).then(()=>d()?void 0:y()).then(()=>{e?g(T):C()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(r==null||r(),i),cancelRetry:l,continueRetry:u,canStart:f,start:()=>(f()?C():y().then(C),i)}}var Ea,J_,LI=(J_=class{constructor(){pt(this,Ea)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),I5(this.gcTime)&&Qe(this,Ea,r0.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(rm?1/0:300*1e3))}clearGcTimeout(){ae(this,Ea)&&(r0.clearTimeout(ae(this,Ea)),Qe(this,Ea,void 0))}},Ea=new WeakMap,J_),Pa,hc,Fr,_a,vn,Rd,Ia,ii,ds,Q_,$5=(Q_=class extends LI{constructor(e){super();pt(this,ii);pt(this,Pa);pt(this,hc);pt(this,Fr);pt(this,_a);pt(this,vn);pt(this,Rd);pt(this,Ia);Qe(this,Ia,!1),Qe(this,Rd,e.defaultOptions),this.setOptions(e.options),this.observers=[],Qe(this,_a,e.client),Qe(this,Fr,ae(this,_a).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Qe(this,Pa,uT(this.options)),this.state=e.state??ae(this,Pa),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=ae(this,vn))==null?void 0:e.promise}setOptions(e){if(this.options={...ae(this,Rd),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=uT(this.options);n.data!==void 0&&(this.setData(n.data,{updatedAt:n.dataUpdatedAt,manual:!0}),Qe(this,Pa,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ae(this,Fr).remove(this)}setData(e,n){const r=D5(this.state.data,e,this.options);return Mn(this,ii,ds).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){Mn(this,ii,ds).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,i;const n=(r=ae(this,vn))==null?void 0:r.promise;return(i=ae(this,vn))==null||i.cancel(e),n?n.then(ri).catch(ri):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ae(this,Pa))}isActive(){return this.observers.some(e=>A5(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Gb||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>i0(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!N5(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=ae(this,vn))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=ae(this,vn))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),ae(this,Fr).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(ae(this,vn)&&(ae(this,Ia)?ae(this,vn).cancel({revert:!0}):ae(this,vn).cancelRetry()),this.scheduleGc()),ae(this,Fr).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Mn(this,ii,ds).call(this,{type:"invalidate"})}async fetch(e,n){var u,d,f,m,g,y,C,x,k,T,_,P;if(this.state.fetchStatus!=="idle"&&((u=ae(this,vn))==null?void 0:u.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(ae(this,vn))return ae(this,vn).continueRetry(),ae(this,vn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const E=this.observers.find(I=>I.options.queryFn);E&&this.setOptions(E.options)}const r=new AbortController,i=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(Qe(this,Ia,!0),r.signal)})},s=()=>{const E=MI(this.options,n),A=(()=>{const L={client:ae(this,_a),queryKey:this.queryKey,meta:this.meta};return i(L),L})();return Qe(this,Ia,!1),this.options.persister?this.options.persister(E,A,this):E(A)},l=(()=>{const E={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:ae(this,_a),state:this.state,fetchFn:s};return i(E),E})();(d=this.options.behavior)==null||d.onFetch(l,this),Qe(this,hc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&Mn(this,ii,ds).call(this,{type:"fetch",meta:(m=l.fetchOptions)==null?void 0:m.meta}),Qe(this,vn,OI({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:E=>{E instanceof o0&&E.revert&&this.setState({...ae(this,hc),fetchStatus:"idle"}),r.abort()},onFail:(E,I)=>{Mn(this,ii,ds).call(this,{type:"failed",failureCount:E,error:I})},onPause:()=>{Mn(this,ii,ds).call(this,{type:"pause"})},onContinue:()=>{Mn(this,ii,ds).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const E=await ae(this,vn).start();if(E===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(E),(y=(g=ae(this,Fr).config).onSuccess)==null||y.call(g,E,this),(x=(C=ae(this,Fr).config).onSettled)==null||x.call(C,E,this.state.error,this),E}catch(E){if(E instanceof o0){if(E.silent)return ae(this,vn).promise;if(E.revert){if(this.state.data===void 0)throw E;return this.state.data}}throw Mn(this,ii,ds).call(this,{type:"error",error:E}),(T=(k=ae(this,Fr).config).onError)==null||T.call(k,E,this),(P=(_=ae(this,Fr).config).onSettled)==null||P.call(_,this.state.data,E,this),E}finally{this.scheduleGc()}}},Pa=new WeakMap,hc=new WeakMap,Fr=new WeakMap,_a=new WeakMap,vn=new WeakMap,Rd=new WeakMap,Ia=new WeakMap,ii=new WeakSet,ds=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...W5(r.data,this.options),fetchMeta:e.meta??null};case"success":const i={...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Qe(this,hc,e.manual?i:void 0),i;case"error":const s=e.error;return{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),$n.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),ae(this,Fr).notify({query:this,type:"updated",action:e})})},Q_);function W5(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:jI(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function uT(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function dT(t){return{onFetch:(e,n)=>{var f,m,g,y,C;const r=e.options,i=(g=(m=(f=e.fetchOptions)==null?void 0:f.meta)==null?void 0:m.fetchMore)==null?void 0:g.direction,s=((y=e.state.data)==null?void 0:y.pages)||[],o=((C=e.state.data)==null?void 0:C.pageParams)||[];let l={pages:[],pageParams:[]},u=0;const d=async()=>{let x=!1;const k=P=>{Object.defineProperty(P,"signal",{enumerable:!0,get:()=>(e.signal.aborted?x=!0:e.signal.addEventListener("abort",()=>{x=!0}),e.signal)})},T=MI(e.options,e.fetchOptions),_=async(P,E,I)=>{if(x)return Promise.reject();if(E==null&&P.pages.length)return Promise.resolve(P);const L=(()=>{const z={client:e.client,queryKey:e.queryKey,pageParam:E,direction:I?"backward":"forward",meta:e.options.meta};return k(z),z})(),R=await T(L),{maxPages:j}=e.options,U=I?O5:j5;return{pages:U(P.pages,R,j),pageParams:U(P.pageParams,E,j)}};if(i&&s.length){const P=i==="backward",E=P?H5:hT,I={pages:s,pageParams:o},A=E(r,I);l=await _(I,A,P)}else{const P=t??s.length;do{const E=u===0?o[0]??r.initialPageParam:hT(r,l);if(u>0&&E==null)break;l=await _(l,E),u++}while(u<P)}return l};e.options.persister?e.fetchFn=()=>{var x,k;return(k=(x=e.options).persister)==null?void 0:k.call(x,d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=d}}}function hT(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function H5(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Md,Ri,Vn,Na,Mi,mo,X_,q5=(X_=class extends LI{constructor(e){super();pt(this,Mi);pt(this,Md);pt(this,Ri);pt(this,Vn);pt(this,Na);Qe(this,Md,e.client),this.mutationId=e.mutationId,Qe(this,Vn,e.mutationCache),Qe(this,Ri,[]),this.state=e.state||G5(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){ae(this,Ri).includes(e)||(ae(this,Ri).push(e),this.clearGcTimeout(),ae(this,Vn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Qe(this,Ri,ae(this,Ri).filter(n=>n!==e)),this.scheduleGc(),ae(this,Vn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){ae(this,Ri).length||(this.state.status==="pending"?this.scheduleGc():ae(this,Vn).remove(this))}continue(){var e;return((e=ae(this,Na))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,l,u,d,f,m,g,y,C,x,k,T,_,P,E,I,A,L,R,j;const n=()=>{Mn(this,Mi,mo).call(this,{type:"continue"})},r={client:ae(this,Md),meta:this.options.meta,mutationKey:this.options.mutationKey};Qe(this,Na,OI({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(U,z)=>{Mn(this,Mi,mo).call(this,{type:"failed",failureCount:U,error:z})},onPause:()=>{Mn(this,Mi,mo).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ae(this,Vn).canRun(this)}));const i=this.state.status==="pending",s=!ae(this,Na).canStart();try{if(i)n();else{Mn(this,Mi,mo).call(this,{type:"pending",variables:e,isPaused:s}),await((l=(o=ae(this,Vn).config).onMutate)==null?void 0:l.call(o,e,this,r));const z=await((d=(u=this.options).onMutate)==null?void 0:d.call(u,e,r));z!==this.state.context&&Mn(this,Mi,mo).call(this,{type:"pending",context:z,variables:e,isPaused:s})}const U=await ae(this,Na).start();return await((m=(f=ae(this,Vn).config).onSuccess)==null?void 0:m.call(f,U,e,this.state.context,this,r)),await((y=(g=this.options).onSuccess)==null?void 0:y.call(g,U,e,this.state.context,r)),await((x=(C=ae(this,Vn).config).onSettled)==null?void 0:x.call(C,U,null,this.state.variables,this.state.context,this,r)),await((T=(k=this.options).onSettled)==null?void 0:T.call(k,U,null,e,this.state.context,r)),Mn(this,Mi,mo).call(this,{type:"success",data:U}),U}catch(U){try{throw await((P=(_=ae(this,Vn).config).onError)==null?void 0:P.call(_,U,e,this.state.context,this,r)),await((I=(E=this.options).onError)==null?void 0:I.call(E,U,e,this.state.context,r)),await((L=(A=ae(this,Vn).config).onSettled)==null?void 0:L.call(A,void 0,U,this.state.variables,this.state.context,this,r)),await((j=(R=this.options).onSettled)==null?void 0:j.call(R,void 0,U,e,this.state.context,r)),U}finally{Mn(this,Mi,mo).call(this,{type:"error",error:U})}}finally{ae(this,Vn).runNext(this)}}},Md=new WeakMap,Ri=new WeakMap,Vn=new WeakMap,Na=new WeakMap,Mi=new WeakSet,mo=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),$n.batch(()=>{ae(this,Ri).forEach(r=>{r.onMutationUpdate(e)}),ae(this,Vn).notify({mutation:this,type:"updated",action:e})})},X_);function G5(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ms,si,Dd,Z_,K5=(Z_=class extends nm{constructor(e={}){super();pt(this,ms);pt(this,si);pt(this,Dd);this.config=e,Qe(this,ms,new Set),Qe(this,si,new Map),Qe(this,Dd,0)}build(e,n,r){const i=new q5({client:e,mutationCache:this,mutationId:++hf(this,Dd)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){ae(this,ms).add(e);const n=vf(e);if(typeof n=="string"){const r=ae(this,si).get(n);r?r.push(e):ae(this,si).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(ae(this,ms).delete(e)){const n=vf(e);if(typeof n=="string"){const r=ae(this,si).get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&ae(this,si).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=vf(e);if(typeof n=="string"){const r=ae(this,si).get(n),i=r==null?void 0:r.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const n=vf(e);if(typeof n=="string"){const i=(r=ae(this,si).get(n))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){$n.batch(()=>{ae(this,ms).forEach(e=>{this.notify({type:"removed",mutation:e})}),ae(this,ms).clear(),ae(this,si).clear()})}getAll(){return Array.from(ae(this,ms))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>aT(n,r))}findAll(e={}){return this.getAll().filter(n=>aT(e,n))}notify(e){$n.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return $n.batch(()=>Promise.all(e.map(n=>n.continue().catch(ri))))}},ms=new WeakMap,si=new WeakMap,Dd=new WeakMap,Z_);function vf(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Di,eI,Y5=(eI=class extends nm{constructor(e={}){super();pt(this,Di);this.config=e,Qe(this,Di,new Map)}build(e,n,r){const i=n.queryKey,s=n.queryHash??qb(i,n);let o=this.get(s);return o||(o=new $5({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){ae(this,Di).has(e.queryHash)||(ae(this,Di).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=ae(this,Di).get(e.queryHash);n&&(e.destroy(),n===e&&ae(this,Di).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){$n.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return ae(this,Di).get(e)}getAll(){return[...ae(this,Di).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>oT(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>oT(e,r)):n}notify(e){$n.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){$n.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){$n.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Di=new WeakMap,eI),$t,Po,_o,fc,pc,Io,mc,gc,tI,J5=(tI=class{constructor(t={}){pt(this,$t);pt(this,Po);pt(this,_o);pt(this,fc);pt(this,pc);pt(this,Io);pt(this,mc);pt(this,gc);Qe(this,$t,t.queryCache||new Y5),Qe(this,Po,t.mutationCache||new K5),Qe(this,_o,t.defaultOptions||{}),Qe(this,fc,new Map),Qe(this,pc,new Map),Qe(this,Io,0)}mount(){hf(this,Io)._++,ae(this,Io)===1&&(Qe(this,mc,DI.subscribe(async t=>{t&&(await this.resumePausedMutations(),ae(this,$t).onFocus())})),Qe(this,gc,fp.subscribe(async t=>{t&&(await this.resumePausedMutations(),ae(this,$t).onOnline())})))}unmount(){var t,e;hf(this,Io)._--,ae(this,Io)===0&&((t=ae(this,mc))==null||t.call(this),Qe(this,mc,void 0),(e=ae(this,gc))==null||e.call(this),Qe(this,gc,void 0))}isFetching(t){return ae(this,$t).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return ae(this,Po).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=ae(this,$t).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=ae(this,$t).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(i0(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return ae(this,$t).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=ae(this,$t).get(r.queryHash),s=i==null?void 0:i.state.data,o=_5(e,s);if(o!==void 0)return ae(this,$t).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return $n.batch(()=>ae(this,$t).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=ae(this,$t).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=ae(this,$t);$n.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=ae(this,$t);return $n.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=$n.batch(()=>ae(this,$t).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(ri).catch(ri)}invalidateQueries(t,e={}){return $n.batch(()=>(ae(this,$t).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=$n.batch(()=>ae(this,$t).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(ri)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(ri)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=ae(this,$t).build(this,e);return n.isStaleByTime(i0(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ri).catch(ri)}fetchInfiniteQuery(t){return t.behavior=dT(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ri).catch(ri)}ensureInfiniteQueryData(t){return t.behavior=dT(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return fp.isOnline()?ae(this,Po).resumePausedMutations():Promise.resolve()}getQueryCache(){return ae(this,$t)}getMutationCache(){return ae(this,Po)}getDefaultOptions(){return ae(this,_o)}setDefaultOptions(t){Qe(this,_o,t)}setQueryDefaults(t,e){ae(this,fc).set(ld(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...ae(this,fc).values()],n={};return e.forEach(r=>{cd(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){ae(this,pc).set(ld(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...ae(this,pc).values()],n={};return e.forEach(r=>{cd(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...ae(this,_o).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=qb(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Gb&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...ae(this,_o).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){ae(this,$t).clear(),ae(this,Po).clear()}},$t=new WeakMap,Po=new WeakMap,_o=new WeakMap,fc=new WeakMap,pc=new WeakMap,Io=new WeakMap,mc=new WeakMap,gc=new WeakMap,tI),Q5=w.createContext(void 0),X5=({client:t,children:e})=>(w.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),h.jsx(Q5.Provider,{value:t,children:e}));const Z5=new J5({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}});function e6(){const[t,e]=w.useState(!1),n=w.useRef(!1),[r,i]=w.useState(!1),s=w.useRef(!1),[o,l]=w.useState(!1),u=w.useRef(!1),d=w.useRef([]),f=w.useRef([]),m=w.useRef([]),g=w.useRef(null),y=(R=!1)=>{const j=document.createElement("div");return j.style.position="absolute",j.style.pointerEvents="none",j.style.transition="all 0.1s ease-in-out",j.style.zIndex="9999",R?j.style.border="2px solid #2563EB":(j.style.border="2px solid #95a5fc",j.style.backgroundColor="rgba(99, 102, 241, 0.05)"),j},C=(R,j,U=!1)=>{if(!j||!n.current)return;j.offsetWidth;const z=j.getBoundingClientRect();R.style.top=`${z.top+window.scrollY}px`,R.style.left=`${z.left+window.scrollX}px`,R.style.width=`${z.width}px`,R.style.height=`${z.height}px`;let F=R.querySelector("div");F||(F=document.createElement("div"),F.textContent=j.tagName.toLowerCase(),F.style.position="absolute",F.style.top="-27px",F.style.left="-2px",F.style.padding="2px 8px",F.style.fontSize="11px",F.style.fontWeight=U?"500":"400",F.style.color=U?"#ffffff":"#526cff",F.style.backgroundColor=U?"#526cff":"#DBEAFE",F.style.borderRadius="3px",F.style.boxShadow="none",F.style.minWidth="24px",F.style.textAlign="center",R.appendChild(F))},x=R=>{if(!R)return[];const j=[...document.querySelectorAll(`[data-source-location="${R}"]`)];return j.length>0?j:[...document.querySelectorAll(`[data-visual-selector-id="${R}"]`)]},k=()=>{d.current.forEach(R=>{R&&R.parentNode&&R.remove()}),d.current=[],m.current=[]},T=R=>{if(!n.current||s.current)return;if(u.current){k();return}if(R.target.tagName.toLowerCase()==="path"){k();return}const j=R.target.closest("[data-source-location], [data-visual-selector-id]");if(!j){k();return}const U=j.dataset.sourceLocation||j.dataset.visualSelectorId;if(j.dataset.sourceLocation,g.current===U){k();return}const z=x(U);k(),z.forEach(F=>{const W=y(!1);document.body.appendChild(W),d.current.push(W),C(W,F)}),m.current=z},_=()=>{s.current||k()},P=R=>{var K;if(!n.current)return;if(u.current){R.preventDefault(),R.stopPropagation(),R.stopImmediatePropagation(),window.parent.postMessage({type:"close-dropdowns"},"*");return}if(R.target.tagName.toLowerCase()==="path")return;R.preventDefault(),R.stopPropagation(),R.stopImmediatePropagation();const j=R.target.closest("[data-source-location], [data-visual-selector-id]");if(!j)return;const U=j.dataset.sourceLocation||j.dataset.visualSelectorId;j.dataset.sourceLocation,f.current.forEach(X=>{X&&X.parentNode&&X.remove()}),f.current=[],x(U).forEach(X=>{const se=y(!0);document.body.appendChild(se),f.current.push(se),C(se,X,!0)}),g.current=U,k();const F=j.getBoundingClientRect(),W={top:F.top,left:F.left,right:F.right,bottom:F.bottom,width:F.width,height:F.height,centerX:F.left+F.width/2,centerY:F.top+F.height/2},Y={type:"element-selected",tagName:j.tagName,classes:((K=j.className)==null?void 0:K.baseVal)||j.className||"",visualSelectorId:U,content:j.innerText,dataSourceLocation:j.dataset.sourceLocation,isDynamicContent:j.dataset.dynamicContent==="true",linenumber:j.dataset.linenumber,filename:j.dataset.filename,position:W};window.parent.postMessage(Y,"*")},E=()=>{f.current.forEach(R=>{R&&R.parentNode&&R.remove()}),f.current=[],g.current=null},I=(R,j,U=!1)=>{const z=x(R);z.length!==0&&(z.forEach(F=>{var W;if(U)F.className=j;else{const Y=((W=F.className)==null?void 0:W.baseVal)||F.className||"";F.className=TI(Y,j)}}),setTimeout(()=>{var F,W;g.current===R&&f.current.forEach((Y,K)=>{K<z.length&&C(Y,z[K])}),m.current.length>0&&((W=(F=m.current[0])==null?void 0:F.dataset)==null?void 0:W.visualSelectorId)===R&&d.current.forEach((K,X)=>{X<m.current.length&&C(K,m.current[X])})},50))},A=(R,j)=>{const U=x(R);U.length!==0&&(U.forEach(z=>{z.innerText=j}),setTimeout(()=>{g.current===R&&f.current.forEach((z,F)=>{F<U.length&&C(z,U[F])})},50))},L=R=>{e(R),n.current=R,R?(document.body.style.cursor="crosshair",document.addEventListener("mouseover",T),document.addEventListener("mouseout",_),document.addEventListener("click",P,!0)):(k(),f.current.forEach(j=>{j&&j.parentNode&&j.remove()}),f.current=[],m.current=[],g.current=null,document.body.style.cursor="default",document.removeEventListener("mouseover",T),document.removeEventListener("mouseout",_),document.removeEventListener("click",P,!0))};return w.useEffect(()=>{document.querySelectorAll("[data-linenumber]:not([data-visual-selector-id])").forEach((z,F)=>{const W=`visual-id-${z.dataset.filename}-${z.dataset.linenumber}-${F}`;z.dataset.visualSelectorId=W});const j=()=>{if(g.current){const z=x(g.current);if(z.length>0){const W=z[0].getBoundingClientRect(),Y=window.innerHeight,K=window.innerWidth,X=W.top<Y&&W.bottom>0&&W.left<K&&W.right>0,se={top:W.top,left:W.left,right:W.right,bottom:W.bottom,width:W.width,height:W.height,centerX:W.left+W.width/2,centerY:W.top+W.height/2};window.parent.postMessage({type:"element-position-update",position:se,isInViewport:X,visualSelectorId:g.current},"*")}}},U=z=>{const F=z.data;switch(F.type){case"toggle-visual-edit-mode":L(F.data.enabled);break;case"update-classes":F.data&&F.data.classes!==void 0?I(F.data.visualSelectorId,F.data.classes,F.data.replace||!1):console.warn("[Agent] Invalid update-classes message:",F);break;case"unselect-element":E();break;case"refresh-page":window.location.reload();break;case"update-content":F.data&&F.data.content!==void 0?A(F.data.visualSelectorId,F.data.content):console.warn("[Agent] Invalid update-content message:",F);break;case"request-element-position":if(g.current){const W=x(g.current);if(W.length>0){const K=W[0].getBoundingClientRect(),X=window.innerHeight,se=window.innerWidth,H=K.top<X&&K.bottom>0&&K.left<se&&K.right>0,te={top:K.top,left:K.left,right:K.right,bottom:K.bottom,width:K.width,height:K.height,centerX:K.left+K.width/2,centerY:K.top+K.height/2};window.parent.postMessage({type:"element-position-update",position:te,isInViewport:H,visualSelectorId:g.current},"*")}}break;case"popover-drag-state":F.data&&F.data.isDragging!==void 0&&(i(F.data.isDragging),s.current=F.data.isDragging,F.data.isDragging&&k());break;case"dropdown-state":F.data&&F.data.isOpen!==void 0&&(l(F.data.isOpen),u.current=F.data.isOpen,F.data.isOpen&&k());break}};return window.addEventListener("message",U),window.addEventListener("scroll",j,!0),document.addEventListener("scroll",j,!0),window.parent.postMessage({type:"visual-edit-agent-ready"},"*"),()=>{window.removeEventListener("message",U),window.removeEventListener("scroll",j,!0),document.removeEventListener("scroll",j,!0),document.removeEventListener("mouseover",T),document.removeEventListener("mouseout",_),document.removeEventListener("click",P,!0),k(),f.current.forEach(z=>{z&&z.parentNode&&z.remove()})}},[]),w.useEffect(()=>{n.current=t},[t]),w.useEffect(()=>{s.current=r},[r]),w.useEffect(()=>{u.current=o},[o]),w.useEffect(()=>{const R=()=>{if(g.current){const U=x(g.current);f.current.forEach((z,F)=>{F<U.length&&C(z,U[F])})}m.current.length>0&&d.current.forEach((U,z)=>{z<m.current.length&&C(U,m.current[z])})},j=new MutationObserver(U=>{U.some(F=>{const W=K=>{if(K.nodeType===Node.ELEMENT_NODE){if(K.dataset&&K.dataset.visualSelectorId)return!0;for(let X=0;X<K.children.length;X++)if(W(K.children[X]))return!0}return!1};return F.type==="attributes"&&(F.attributeName==="style"||F.attributeName==="class"||F.attributeName==="width"||F.attributeName==="height")&&W(F.target)})&&setTimeout(R,50)});return j.observe(document.body,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["style","class","width","height"]}),window.addEventListener("resize",R),window.addEventListener("scroll",R),()=>{window.removeEventListener("resize",R),window.removeEventListener("scroll",R),j.disconnect()}},[]),null}var Od=nI();const t6=jd(Od);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ud(){return ud=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ud.apply(this,arguments)}var Ao;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ao||(Ao={}));const fT="popstate";function n6(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:l}=r.location;return a0("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:pp(i)}return i6(e,n,null,t)}function rn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function FI(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function r6(){return Math.random().toString(36).substr(2,8)}function pT(t,e){return{usr:t.state,key:t.key,idx:e}}function a0(t,e,n,r){return n===void 0&&(n=null),ud({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ac(e):e,{state:n,key:e&&e.key||r||r6()})}function pp(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ac(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function i6(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=Ao.Pop,u=null,d=f();d==null&&(d=0,o.replaceState(ud({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function m(){l=Ao.Pop;let k=f(),T=k==null?null:k-d;d=k,u&&u({action:l,location:x.location,delta:T})}function g(k,T){l=Ao.Push;let _=a0(x.location,k,T);d=f()+1;let P=pT(_,d),E=x.createHref(_);try{o.pushState(P,"",E)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;i.location.assign(E)}s&&u&&u({action:l,location:x.location,delta:1})}function y(k,T){l=Ao.Replace;let _=a0(x.location,k,T);d=f();let P=pT(_,d),E=x.createHref(_);o.replaceState(P,"",E),s&&u&&u({action:l,location:x.location,delta:0})}function C(k){let T=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof k=="string"?k:pp(k);return _=_.replace(/ $/,"%20"),rn(T,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,T)}let x={get action(){return l},get location(){return t(i,o)},listen(k){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(fT,m),u=k,()=>{i.removeEventListener(fT,m),u=null}},createHref(k){return e(i,k)},createURL:C,encodeLocation(k){let T=C(k);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:g,replace:y,go(k){return o.go(k)}};return x}var mT;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(mT||(mT={}));function s6(t,e,n){return n===void 0&&(n="/"),o6(t,e,n)}function o6(t,e,n,r){let i=typeof e=="string"?Ac(e):e,s=Kb(i.pathname||"/",n);if(s==null)return null;let o=UI(t);a6(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=b6(s);l=g6(o[u],d)}return l}function UI(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let u={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(rn(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=Do([r,u.relativePath]),f=n.concat(u);s.children&&s.children.length>0&&(rn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),UI(s.children,e,f,d)),!(s.path==null&&!s.index)&&e.push({path:d,score:p6(d,s.index),routesMeta:f})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let u of BI(s.path))i(s,o,u)}),e}function BI(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=BI(r.join("/")),l=[];return l.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function a6(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:m6(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const l6=/^:[\w-]+$/,c6=3,u6=2,d6=1,h6=10,f6=-2,gT=t=>t==="*";function p6(t,e){let n=t.split("/"),r=n.length;return n.some(gT)&&(r+=f6),e&&(r+=u6),n.filter(i=>!gT(i)).reduce((i,s)=>i+(l6.test(s)?c6:s===""?d6:h6),r)}function m6(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function g6(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,f=s==="/"?e:e.slice(s.length)||"/",m=v6({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:Do([s,m.pathname]),pathnameBase:S6(Do([s,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(s=Do([s,m.pathnameBase]))}return o}function v6(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=y6(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((d,f,m)=>{let{paramName:g,isOptional:y}=f;if(g==="*"){let x=l[m]||"";o=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const C=l[m];return y&&!C?d[g]=void 0:d[g]=(C||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:o,pattern:t}}function y6(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),FI(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function b6(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return FI(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Kb(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function x6(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Ac(t):t;return{pathname:n?n.startsWith("/")?n:w6(n,e):e,search:C6(r),hash:T6(i)}}function w6(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Uv(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function k6(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function VI(t,e){let n=k6(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function zI(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Ac(t):(i=ud({},t),rn(!i.pathname||!i.pathname.includes("?"),Uv("?","pathname","search",i)),rn(!i.pathname||!i.pathname.includes("#"),Uv("#","pathname","hash",i)),rn(!i.search||!i.search.includes("#"),Uv("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;i.pathname=g.join("/")}l=m>=0?e[m]:"/"}let u=x6(i,l),d=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const Do=t=>t.join("/").replace(/\/\/+/g,"/"),S6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),C6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,T6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function E6(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const $I=["post","put","patch","delete"];new Set($I);const P6=["get",...$I];new Set(P6);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dd(){return dd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dd.apply(this,arguments)}const Yb=w.createContext(null),_6=w.createContext(null),Ha=w.createContext(null),im=w.createContext(null),qa=w.createContext({outlet:null,matches:[],isDataRoute:!1}),WI=w.createContext(null);function I6(t,e){let{relative:n}=e===void 0?{}:e;Ld()||rn(!1);let{basename:r,navigator:i}=w.useContext(Ha),{hash:s,pathname:o,search:l}=qI(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Do([r,o])),i.createHref({pathname:u,search:l,hash:s})}function Ld(){return w.useContext(im)!=null}function Ga(){return Ld()||rn(!1),w.useContext(im).location}function HI(t){w.useContext(Ha).static||w.useLayoutEffect(t)}function Os(){let{isDataRoute:t}=w.useContext(qa);return t?z6():N6()}function N6(){Ld()||rn(!1);let t=w.useContext(Yb),{basename:e,future:n,navigator:r}=w.useContext(Ha),{matches:i}=w.useContext(qa),{pathname:s}=Ga(),o=JSON.stringify(VI(i,n.v7_relativeSplatPath)),l=w.useRef(!1);return HI(()=>{l.current=!0}),w.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let m=zI(d,JSON.parse(o),s,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Do([e,m.pathname])),(f.replace?r.replace:r.push)(m,f.state,f)},[e,r,o,s,t])}function qI(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=w.useContext(Ha),{matches:i}=w.useContext(qa),{pathname:s}=Ga(),o=JSON.stringify(VI(i,r.v7_relativeSplatPath));return w.useMemo(()=>zI(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function A6(t,e){return R6(t,e)}function R6(t,e,n,r){Ld()||rn(!1);let{navigator:i}=w.useContext(Ha),{matches:s}=w.useContext(qa),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=Ga(),f;if(e){var m;let k=typeof e=="string"?Ac(e):e;u==="/"||(m=k.pathname)!=null&&m.startsWith(u)||rn(!1),f=k}else f=d;let g=f.pathname||"/",y=g;if(u!=="/"){let k=u.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(k.length).join("/")}let C=s6(t,{pathname:y}),x=L6(C&&C.map(k=>Object.assign({},k,{params:Object.assign({},l,k.params),pathname:Do([u,i.encodeLocation?i.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?u:Do([u,i.encodeLocation?i.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),s,n,r);return e&&x?w.createElement(im.Provider,{value:{location:dd({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Ao.Pop}},x):x}function M6(){let t=V6(),e=E6(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),n?w.createElement("pre",{style:i},n):null,null)}const D6=w.createElement(M6,null);class j6 extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?w.createElement(qa.Provider,{value:this.props.routeContext},w.createElement(WI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function O6(t){let{routeContext:e,match:n,children:r}=t,i=w.useContext(Yb);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(qa.Provider,{value:e},r)}function L6(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let f=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);f>=0||rn(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let m=o[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:g,errors:y}=n,C=m.route.loader&&g[m.route.id]===void 0&&(!y||y[m.route.id]===void 0);if(m.route.lazy||C){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,m,g)=>{let y,C=!1,x=null,k=null;n&&(y=l&&m.route.id?l[m.route.id]:void 0,x=m.route.errorElement||D6,u&&(d<0&&g===0?($6("route-fallback"),C=!0,k=null):d===g&&(C=!0,k=m.route.hydrateFallbackElement||null)));let T=e.concat(o.slice(0,g+1)),_=()=>{let P;return y?P=x:C?P=k:m.route.Component?P=w.createElement(m.route.Component,null):m.route.element?P=m.route.element:P=f,w.createElement(O6,{match:m,routeContext:{outlet:f,matches:T,isDataRoute:n!=null},children:P})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?w.createElement(j6,{location:n.location,revalidation:n.revalidation,component:x,error:y,children:_(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):_()},null)}var GI=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(GI||{}),KI=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(KI||{});function F6(t){let e=w.useContext(Yb);return e||rn(!1),e}function U6(t){let e=w.useContext(_6);return e||rn(!1),e}function B6(t){let e=w.useContext(qa);return e||rn(!1),e}function YI(t){let e=B6(),n=e.matches[e.matches.length-1];return n.route.id||rn(!1),n.route.id}function V6(){var t;let e=w.useContext(WI),n=U6(),r=YI();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function z6(){let{router:t}=F6(GI.UseNavigateStable),e=YI(KI.UseNavigateStable),n=w.useRef(!1);return HI(()=>{n.current=!0}),w.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,dd({fromRouteId:e},s)))},[t,e])}const vT={};function $6(t,e,n){vT[t]||(vT[t]=!0)}function W6(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Dl(t){rn(!1)}function H6(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Ao.Pop,navigator:s,static:o=!1,future:l}=t;Ld()&&rn(!1);let u=e.replace(/^\/*/,"/"),d=w.useMemo(()=>({basename:u,navigator:s,static:o,future:dd({v7_relativeSplatPath:!1},l)}),[u,l,s,o]);typeof r=="string"&&(r=Ac(r));let{pathname:f="/",search:m="",hash:g="",state:y=null,key:C="default"}=r,x=w.useMemo(()=>{let k=Kb(f,u);return k==null?null:{location:{pathname:k,search:m,hash:g,state:y,key:C},navigationType:i}},[u,f,m,g,y,C,i]);return x==null?null:w.createElement(Ha.Provider,{value:d},w.createElement(im.Provider,{children:n,value:x}))}function q6(t){let{children:e,location:n}=t;return A6(l0(e),n)}new Promise(()=>{});function l0(t,e){e===void 0&&(e=[]);let n=[];return w.Children.forEach(t,(r,i)=>{if(!w.isValidElement(r))return;let s=[...e,i];if(r.type===w.Fragment){n.push.apply(n,l0(r.props.children,s));return}r.type!==Dl&&rn(!1),!r.props.index||!r.props.children||rn(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=l0(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function c0(){return c0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c0.apply(this,arguments)}function G6(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function K6(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Y6(t,e){return t.button===0&&(!e||e==="_self")&&!K6(t)}function u0(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function J6(t,e){let n=u0(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}const Q6=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],X6="6";try{window.__reactRouterVersion=X6}catch{}const Z6="startTransition",yT=zb[Z6];function eB(t){let{basename:e,children:n,future:r,window:i}=t,s=w.useRef();s.current==null&&(s.current=n6({window:i,v5Compat:!0}));let o=s.current,[l,u]=w.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=w.useCallback(m=>{d&&yT?yT(()=>u(m)):u(m)},[u,d]);return w.useLayoutEffect(()=>o.listen(f),[o,f]),w.useEffect(()=>W6(r),[r]),w.createElement(H6,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const tB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gr=w.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:l,target:u,to:d,preventScrollReset:f,viewTransition:m}=e,g=G6(e,Q6),{basename:y}=w.useContext(Ha),C,x=!1;if(typeof d=="string"&&nB.test(d)&&(C=d,tB))try{let P=new URL(window.location.href),E=d.startsWith("//")?new URL(P.protocol+d):new URL(d),I=Kb(E.pathname,y);E.origin===P.origin&&I!=null?d=I+E.search+E.hash:x=!0}catch{}let k=I6(d,{relative:i}),T=rB(d,{replace:o,state:l,target:u,preventScrollReset:f,relative:i,viewTransition:m});function _(P){r&&r(P),P.defaultPrevented||T(P)}return w.createElement("a",c0({},g,{href:C||k,onClick:x||s?r:_,ref:n,target:u}))});var bT;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(bT||(bT={}));var xT;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(xT||(xT={}));function rB(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:l}=e===void 0?{}:e,u=Os(),d=Ga(),f=qI(t,{relative:o});return w.useCallback(m=>{if(Y6(m,n)){m.preventDefault();let g=r!==void 0?r:pp(d)===pp(f);u(t,{replace:g,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[d,u,f,r,i,n,t,s,o,l])}function Fd(t){let e=w.useRef(u0(t)),n=w.useRef(!1),r=Ga(),i=w.useMemo(()=>J6(r.search,n.current?null:e.current),[r.search]),s=Os(),o=w.useCallback((l,u)=>{const d=u0(typeof l=="function"?l(i):l);n.current=!0,s("?"+d,u)},[s,i]);return[i,o]}const sm=w.createContext(null);function Jb(t){const e=w.useRef(null);return e.current===null&&(e.current=t()),e.current}const Qb=w.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class iB extends w.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function sB({children:t,isPresent:e}){const n=w.useId(),r=w.useRef(null),i=w.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=w.useContext(Qb);return w.useInsertionEffect(()=>{const{width:o,height:l,top:u,left:d}=i.current;if(e||!r.current||!o||!l)return;r.current.dataset.motionPopId=n;const f=document.createElement("style");return s&&(f.nonce=s),document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${l}px !important;
            top: ${u}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[e]),h.jsx(iB,{isPresent:e,childRef:r,sizeRef:i,children:w.cloneElement(t,{ref:r})})}const oB=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const l=Jb(aB),u=w.useId(),d=w.useCallback(m=>{l.set(m,!0);for(const g of l.values())if(!g)return;r&&r()},[l,r]),f=w.useMemo(()=>({id:u,initial:e,isPresent:n,custom:i,onExitComplete:d,register:m=>(l.set(m,!1),()=>l.delete(m))}),s?[Math.random(),d]:[n,d]);return w.useMemo(()=>{l.forEach((m,g)=>l.set(g,!1))},[n]),w.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),o==="popLayout"&&(t=h.jsx(sB,{isPresent:n,children:t})),h.jsx(sm.Provider,{value:f,children:t})};function aB(){return new Map}const Xb=w.createContext({}),br=t=>t;let JI=br;function Zb(t){let e;return()=>(e===void 0&&(e=t()),e)}const bc=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Ss=t=>t*1e3,Cs=t=>t/1e3,yf=t=>t.key||"";function wT(t){const e=[];return w.Children.forEach(t,n=>{w.isValidElement(n)&&e.push(n)}),e}const ex=typeof window<"u",QI=ex?w.useLayoutEffect:w.useEffect,Bo=({children:t,exitBeforeEnter:e,custom:n,initial:r=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const l=w.useMemo(()=>wT(t),[t]),u=l.map(yf),d=w.useRef(!0),f=w.useRef(l),m=Jb(()=>new Map),[g,y]=w.useState(l),[C,x]=w.useState(l);QI(()=>{d.current=!1,f.current=l;for(let _=0;_<C.length;_++){const P=yf(C[_]);u.includes(P)?m.delete(P):m.get(P)!==!0&&m.set(P,!1)}},[C,u.length,u.join("-")]);const k=[];if(l!==g){let _=[...l];for(let P=0;P<C.length;P++){const E=C[P],I=yf(E);u.includes(I)||(_.splice(P,0,E),k.push(E))}o==="wait"&&k.length&&(_=k),x(wT(_)),y(l);return}const{forceRender:T}=w.useContext(Xb);return h.jsx(h.Fragment,{children:C.map(_=>{const P=yf(_),E=l===C||u.includes(P),I=()=>{if(m.has(P))m.set(P,!0);else return;let A=!0;m.forEach(L=>{L||(A=!1)}),A&&(T==null||T(),x(f.current),i&&i())};return h.jsx(oB,{isPresent:E,initial:!d.current||r?void 0:!1,custom:E?void 0:n,presenceAffectsLayout:s,mode:o,onExitComplete:E?void 0:I,children:_},P)})})},lB={useManualTiming:!1};function cB(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(d){s.has(d)&&(u.schedule(d),t()),d(o)}const u={schedule:(d,f=!1,m=!1)=>{const y=m&&r?e:n;return f&&s.add(d),y.has(d)||y.add(d),d},cancel:d=>{n.delete(d),s.delete(d)},process:d=>{if(o=d,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(l),e.clear(),r=!1,i&&(i=!1,u.process(d))}};return u}const bf=["read","resolveKeyframes","update","preRender","render","postRender"],uB=40;function XI(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=bf.reduce((T,_)=>(T[_]=cB(s),T),{}),{read:l,resolveKeyframes:u,update:d,preRender:f,render:m,postRender:g}=o,y=()=>{const T=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(T-i.timestamp,uB),1),i.timestamp=T,i.isProcessing=!0,l.process(i),u.process(i),d.process(i),f.process(i),m.process(i),g.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(y))},C=()=>{n=!0,r=!0,i.isProcessing||t(y)};return{schedule:bf.reduce((T,_)=>{const P=o[_];return T[_]=(E,I=!1,A=!1)=>(n||C(),P.schedule(E,I,A)),T},{}),cancel:T=>{for(let _=0;_<bf.length;_++)o[bf[_]].cancel(T)},state:i,steps:o}}const{schedule:Dt,cancel:Vo,state:Cn,steps:Bv}=XI(typeof requestAnimationFrame<"u"?requestAnimationFrame:br,!0),ZI=w.createContext({strict:!1}),kT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},xc={};for(const t in kT)xc[t]={isEnabled:e=>kT[t].some(n=>!!e[n])};function dB(t){for(const e in t)xc[e]={...xc[e],...t[e]}}const hB=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function mp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||hB.has(t)}let eN=t=>!mp(t);function fB(t){t&&(eN=e=>e.startsWith("on")?!mp(e):t(e))}try{fB(require("@emotion/is-prop-valid").default)}catch{}function pB(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(eN(i)||n===!0&&mp(i)||!e&&!mp(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function mB(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const om=w.createContext({});function hd(t){return typeof t=="string"||Array.isArray(t)}function am(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const tx=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],nx=["initial",...tx];function lm(t){return am(t.animate)||nx.some(e=>hd(t[e]))}function tN(t){return!!(lm(t)||t.variants)}function gB(t,e){if(lm(t)){const{initial:n,animate:r}=t;return{initial:n===!1||hd(n)?n:void 0,animate:hd(r)?r:void 0}}return t.inherit!==!1?e:{}}function vB(t){const{initial:e,animate:n}=gB(t,w.useContext(om));return w.useMemo(()=>({initial:e,animate:n}),[ST(e),ST(n)])}function ST(t){return Array.isArray(t)?t.join(" "):t}const yB=Symbol.for("motionComponentSymbol");function Ol(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function bB(t,e,n){return w.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Ol(n)&&(n.current=r))},[e])}const rx=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),xB="framerAppearId",nN="data-"+rx(xB),{schedule:ix}=XI(queueMicrotask,!1),rN=w.createContext({});function wB(t,e,n,r,i){var s,o;const{visualElement:l}=w.useContext(om),u=w.useContext(ZI),d=w.useContext(sm),f=w.useContext(Qb).reducedMotion,m=w.useRef(null);r=r||u.renderer,!m.current&&r&&(m.current=r(t,{visualState:e,parent:l,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:f}));const g=m.current,y=w.useContext(rN);g&&!g.projection&&i&&(g.type==="html"||g.type==="svg")&&kB(m.current,n,i,y);const C=w.useRef(!1);w.useInsertionEffect(()=>{g&&C.current&&g.update(n,d)});const x=n[nN],k=w.useRef(!!x&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,x))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,x)));return QI(()=>{g&&(C.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),ix.render(g.render),k.current&&g.animationState&&g.animationState.animateChanges())}),w.useEffect(()=>{g&&(!k.current&&g.animationState&&g.animationState.animateChanges(),k.current&&(queueMicrotask(()=>{var T;(T=window.MotionHandoffMarkAsComplete)===null||T===void 0||T.call(window,x)}),k.current=!1))}),g}function kB(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:l,layoutScroll:u,layoutRoot:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:iN(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||l&&Ol(l),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:u,layoutRoot:d})}function iN(t){if(t)return t.options.allowProjection!==!1?t.projection:iN(t.parent)}function SB({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var s,o;t&&dB(t);function l(d,f){let m;const g={...w.useContext(Qb),...d,layoutId:CB(d)},{isStatic:y}=g,C=vB(d),x=r(d,y);if(!y&&ex){TB();const k=EB(g);m=k.MeasureLayout,C.visualElement=wB(i,x,g,e,k.ProjectionNode)}return h.jsxs(om.Provider,{value:C,children:[m&&C.visualElement?h.jsx(m,{visualElement:C.visualElement,...g}):null,n(i,d,bB(x,C.visualElement,f),x,y,C.visualElement)]})}l.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const u=w.forwardRef(l);return u[yB]=i,u}function CB({layoutId:t}){const e=w.useContext(Xb).id;return e&&t!==void 0?e+"-"+t:t}function TB(t,e){w.useContext(ZI).strict}function EB(t){const{drag:e,layout:n}=xc;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const PB=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function sx(t){return typeof t!="string"||t.includes("-")?!1:!!(PB.indexOf(t)>-1||/[A-Z]/u.test(t))}function sN(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const oN=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function aN(t,e,n,r){sN(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(oN.has(i)?i:rx(i),e.attrs[i])}const jn=t=>!!(t&&t.getVelocity),gp={};function _B(t){Object.assign(gp,t)}const Ud=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ka=new Set(Ud);function lN(t,{layout:e,layoutId:n}){return Ka.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!gp[t]||t==="opacity")}function ox(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(jn(i[o])||e.style&&jn(e.style[o])||lN(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function cN(t,e,n){const r=ox(t,e,n);for(const i in t)if(jn(t[i])||jn(e[i])){const s=Ud.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function CT(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function ax(t,e,n,r){if(typeof e=="function"){const[i,s]=CT(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=CT(r);e=e(n!==void 0?n:t.custom,i,s)}return e}const d0=t=>Array.isArray(t),IB=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),NB=t=>d0(t)?t[t.length-1]||0:t;function Bf(t){const e=jn(t)?t.get():t;return IB(e)?e.toValue():e}function AB({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,s){const o={latestValues:RB(r,i,s,t),renderState:e()};return n&&(o.mount=l=>n(r,l,o)),o}const uN=t=>(e,n)=>{const r=w.useContext(om),i=w.useContext(sm),s=()=>AB(t,e,r,i);return n?s():Jb(s)};function RB(t,e,n,r){const i={},s=r(t,{});for(const g in s)i[g]=Bf(s[g]);let{initial:o,animate:l}=t;const u=lm(t),d=tN(t);e&&d&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let f=n?n.initial===!1:!1;f=f||o===!1;const m=f?l:o;if(m&&typeof m!="boolean"&&!am(m)){const g=Array.isArray(m)?m:[m];for(let y=0;y<g.length;y++){const C=ax(t,g[y]);if(C){const{transitionEnd:x,transition:k,...T}=C;for(const _ in T){let P=T[_];if(Array.isArray(P)){const E=f?P.length-1:0;P=P[E]}P!==null&&(i[_]=P)}for(const _ in x)i[_]=x[_]}}}return i}const lx=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),dN=()=>({...lx(),attrs:{}}),hN=(t,e)=>e&&typeof t=="number"?e.transform(t):t,_s=(t,e,n)=>n>e?e:n<t?t:n,Rc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},fd={...Rc,transform:t=>_s(0,1,t)},xf={...Rc,default:1},Bd=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),go=Bd("deg"),Fi=Bd("%"),We=Bd("px"),MB=Bd("vh"),DB=Bd("vw"),TT={...Fi,parse:t=>Fi.parse(t)/100,transform:t=>Fi.transform(t*100)},jB={borderWidth:We,borderTopWidth:We,borderRightWidth:We,borderBottomWidth:We,borderLeftWidth:We,borderRadius:We,radius:We,borderTopLeftRadius:We,borderTopRightRadius:We,borderBottomRightRadius:We,borderBottomLeftRadius:We,width:We,maxWidth:We,height:We,maxHeight:We,top:We,right:We,bottom:We,left:We,padding:We,paddingTop:We,paddingRight:We,paddingBottom:We,paddingLeft:We,margin:We,marginTop:We,marginRight:We,marginBottom:We,marginLeft:We,backgroundPositionX:We,backgroundPositionY:We},OB={rotate:go,rotateX:go,rotateY:go,rotateZ:go,scale:xf,scaleX:xf,scaleY:xf,scaleZ:xf,skew:go,skewX:go,skewY:go,distance:We,translateX:We,translateY:We,translateZ:We,x:We,y:We,z:We,perspective:We,transformPerspective:We,opacity:fd,originX:TT,originY:TT,originZ:We},ET={...Rc,transform:Math.round},cx={...jB,...OB,zIndex:ET,size:We,fillOpacity:fd,strokeOpacity:fd,numOctaves:ET},LB={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},FB=Ud.length;function UB(t,e,n){let r="",i=!0;for(let s=0;s<FB;s++){const o=Ud[s],l=t[o];if(l===void 0)continue;let u=!0;if(typeof l=="number"?u=l===(o.startsWith("scale")?1:0):u=parseFloat(l)===0,!u||n){const d=hN(l,cx[o]);if(!u){i=!1;const f=LB[o]||o;r+=`${f}(${d}) `}n&&(e[o]=d)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}const fN=t=>e=>typeof e=="string"&&e.startsWith(t),pN=fN("--"),BB=fN("var(--"),ux=t=>BB(t)?VB.test(t.split("/*")[0].trim()):!1,VB=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function dx(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,l=!1;for(const u in e){const d=e[u];if(Ka.has(u)){o=!0;continue}else if(pN(u)){i[u]=d;continue}else{const f=hN(d,cx[u]);u.startsWith("origin")?(l=!0,s[u]=f):r[u]=f}}if(e.transform||(o||n?r.transform=UB(e,t.transform,n):r.transform&&(r.transform="none")),l){const{originX:u="50%",originY:d="50%",originZ:f=0}=s;r.transformOrigin=`${u} ${d} ${f}`}}function PT(t,e,n){return typeof t=="string"?t:We.transform(e+n*t)}function zB(t,e,n){const r=PT(e,t.x,t.width),i=PT(n,t.y,t.height);return`${r} ${i}`}const $B={offset:"stroke-dashoffset",array:"stroke-dasharray"},WB={offset:"strokeDashoffset",array:"strokeDasharray"};function HB(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?$B:WB;t[s.offset]=We.transform(-r);const o=We.transform(e),l=We.transform(n);t[s.array]=`${o} ${l}`}function hx(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:l=1,pathOffset:u=0,...d},f,m){if(dx(t,d,m),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:y,dimensions:C}=t;g.transform&&(C&&(y.transform=g.transform),delete g.transform),C&&(i!==void 0||s!==void 0||y.transform)&&(y.transformOrigin=zB(C,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(g.x=e),n!==void 0&&(g.y=n),r!==void 0&&(g.scale=r),o!==void 0&&HB(g,o,l,u,!1)}const fx=t=>typeof t=="string"&&t.toLowerCase()==="svg",qB={useVisualState:uN({scrapeMotionValuesFromProps:cN,createRenderState:dN,onMount:(t,e,{renderState:n,latestValues:r})=>{Dt.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Dt.render(()=>{hx(n,r,fx(e.tagName),t.transformTemplate),aN(e,n)})}})},GB={useVisualState:uN({scrapeMotionValuesFromProps:ox,createRenderState:lx})};function mN(t,e,n){for(const r in e)!jn(e[r])&&!lN(r,n)&&(t[r]=e[r])}function KB({transformTemplate:t},e){return w.useMemo(()=>{const n=lx();return dx(n,e,t),Object.assign({},n.vars,n.style)},[e])}function YB(t,e){const n=t.style||{},r={};return mN(r,n,t),Object.assign(r,KB(t,e)),r}function JB(t,e){const n={},r=YB(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function QB(t,e,n,r){const i=w.useMemo(()=>{const s=dN();return hx(s,e,fx(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};mN(s,t.style,t),i.style={...s,...i.style}}return i}function XB(t=!1){return(n,r,i,{latestValues:s},o)=>{const u=(sx(n)?QB:JB)(r,s,o,n),d=pB(r,typeof n=="string",t),f=n!==w.Fragment?{...d,...u,ref:i}:{},{children:m}=r,g=w.useMemo(()=>jn(m)?m.get():m,[m]);return w.createElement(n,{...f,children:g})}}function ZB(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...sx(r)?qB:GB,preloadedFeatures:t,useRender:XB(i),createVisualElement:e,Component:r};return SB(o)}}function gN(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function cm(t,e,n){const r=t.getProps();return ax(r,e,n!==void 0?n:r.custom,t)}const eV=Zb(()=>window.ScrollTimeline!==void 0);class tV{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(eV()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class nV extends tV{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function px(t,e){return t?t[e]||t.default||t:void 0}const h0=2e4;function vN(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<h0;)e+=n,r=t.next(e);return e>=h0?1/0:e}function mx(t){return typeof t=="function"}function _T(t,e){t.timeline=e,t.onfinish=null}const gx=t=>Array.isArray(t)&&typeof t[0]=="number",rV={linearEasing:void 0};function iV(t,e){const n=Zb(t);return()=>{var r;return(r=rV[e])!==null&&r!==void 0?r:n()}}const vp=iV(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),yN=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(bc(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function bN(t){return!!(typeof t=="function"&&vp()||!t||typeof t=="string"&&(t in f0||vp())||gx(t)||Array.isArray(t)&&t.every(bN))}const Mu=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,f0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Mu([0,.65,.55,1]),circOut:Mu([.55,0,1,.45]),backIn:Mu([.31,.01,.66,-.59]),backOut:Mu([.33,1.53,.69,.99])};function xN(t,e){if(t)return typeof t=="function"&&vp()?yN(t,e):gx(t)?Mu(t):Array.isArray(t)?t.map(n=>xN(n,e)||f0.easeOut):f0[t]}const ti={x:!1,y:!1};function wN(){return ti.x||ti.y}function sV(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function kN(t,e){const n=sV(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function IT(t){return e=>{e.pointerType==="touch"||wN()||t(e)}}function oV(t,e,n={}){const[r,i,s]=kN(t,n),o=IT(l=>{const{target:u}=l,d=e(l);if(typeof d!="function"||!u)return;const f=IT(m=>{d(m),u.removeEventListener("pointerleave",f)});u.addEventListener("pointerleave",f,i)});return r.forEach(l=>{l.addEventListener("pointerenter",o,i)}),s}const SN=(t,e)=>e?t===e?!0:SN(t,e.parentElement):!1,vx=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,aV=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function lV(t){return aV.has(t.tagName)||t.tabIndex!==-1}const Du=new WeakSet;function NT(t){return e=>{e.key==="Enter"&&t(e)}}function Vv(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const cV=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=NT(()=>{if(Du.has(n))return;Vv(n,"down");const i=NT(()=>{Vv(n,"up")}),s=()=>Vv(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function AT(t){return vx(t)&&!wN()}function uV(t,e,n={}){const[r,i,s]=kN(t,n),o=l=>{const u=l.currentTarget;if(!AT(l)||Du.has(u))return;Du.add(u);const d=e(l),f=(y,C)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",g),!(!AT(y)||!Du.has(u))&&(Du.delete(u),typeof d=="function"&&d(y,{success:C}))},m=y=>{f(y,n.useGlobalTarget||SN(u,y.target))},g=y=>{f(y,!1)};window.addEventListener("pointerup",m,i),window.addEventListener("pointercancel",g,i)};return r.forEach(l=>{!lV(l)&&l.getAttribute("tabindex")===null&&(l.tabIndex=0),(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,i),l.addEventListener("focus",d=>cV(d,i),i)}),s}function dV(t){return t==="x"||t==="y"?ti[t]?null:(ti[t]=!0,()=>{ti[t]=!1}):ti.x||ti.y?null:(ti.x=ti.y=!0,()=>{ti.x=ti.y=!1})}let Vf;function hV(){Vf=void 0}const Ui={now:()=>(Vf===void 0&&Ui.set(Cn.isProcessing||lB.useManualTiming?Cn.timestamp:performance.now()),Vf),set:t=>{Vf=t,queueMicrotask(hV)}};function yx(t,e){t.indexOf(e)===-1&&t.push(e)}function bx(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class xx{constructor(){this.subscriptions=[]}add(e){return yx(this.subscriptions,e),()=>bx(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function CN(t,e){return e?t*(1e3/e):0}const RT=30,fV=t=>!isNaN(parseFloat(t));class pV{constructor(e,n={}){this.version="11.16.4",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=Ui.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Ui.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=fV(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new xx);const r=this.events[e].add(n);return e==="change"?()=>{r(),Dt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ui.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>RT)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,RT);return CN(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function pd(t,e){return new pV(t,e)}function mV(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,pd(n))}function gV(t,e){const n=cm(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const l=NB(s[o]);mV(t,o,l)}}function vV(t){return!!(jn(t)&&t.add)}function p0(t,e){const n=t.getValue("willChange");if(vV(n))return n.add(e)}function TN(t){return t.props[nN]}const EN=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,yV=1e-7,bV=12;function xV(t,e,n,r,i){let s,o,l=0;do o=e+(n-e)/2,s=EN(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>yV&&++l<bV);return o}function Vd(t,e,n,r){if(t===e&&n===r)return br;const i=s=>xV(s,0,1,t,n);return s=>s===0||s===1?s:EN(i(s),e,r)}const PN=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,_N=t=>e=>1-t(1-e),IN=Vd(.33,1.53,.69,.99),wx=_N(IN),NN=PN(wx),AN=t=>(t*=2)<1?.5*wx(t):.5*(2-Math.pow(2,-10*(t-1))),kx=t=>1-Math.sin(Math.acos(t)),RN=_N(kx),MN=PN(kx),DN=t=>/^0[^.\s]+$/u.test(t);function wV(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||DN(t):!0}const jN=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),kV=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function SV(t){const e=kV.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function ON(t,e,n=1){const[r,i]=SV(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return jN(o)?parseFloat(o):o}return ux(i)?ON(i,e,n+1):i}const CV=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),MT=t=>t===Rc||t===We,DT=(t,e)=>parseFloat(t.split(", ")[e]),jT=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return DT(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?DT(s[1],t):0}},TV=new Set(["x","y","z"]),EV=Ud.filter(t=>!TV.has(t));function PV(t){const e=[];return EV.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const wc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:jT(4,13),y:jT(5,14)};wc.translateX=wc.x;wc.translateY=wc.y;const LN=t=>e=>e.test(t),_V={test:t=>t==="auto",parse:t=>t},FN=[Rc,We,Fi,go,DB,MB,_V],OT=t=>FN.find(LN(t)),Aa=new Set;let m0=!1,g0=!1;function UN(){if(g0){const t=Array.from(Aa).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=PV(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var l;(l=r.getValue(s))===null||l===void 0||l.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}g0=!1,m0=!1,Aa.forEach(t=>t.complete()),Aa.clear()}function BN(){Aa.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(g0=!0)})}function IV(){BN(),UN()}class Sx{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Aa.add(this),m0||(m0=!0,Dt.read(BN),Dt.resolveKeyframes(UN))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const u=r.readValue(n,l);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=l),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Aa.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Aa.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Wu=t=>Math.round(t*1e5)/1e5,Cx=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function NV(t){return t==null}const AV=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Tx=(t,e)=>n=>!!(typeof n=="string"&&AV.test(n)&&n.startsWith(t)||e&&!NV(n)&&Object.prototype.hasOwnProperty.call(n,e)),VN=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,l]=r.match(Cx);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},RV=t=>_s(0,255,t),zv={...Rc,transform:t=>Math.round(RV(t))},Sa={test:Tx("rgb","red"),parse:VN("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+zv.transform(t)+", "+zv.transform(e)+", "+zv.transform(n)+", "+Wu(fd.transform(r))+")"};function MV(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const v0={test:Tx("#"),parse:MV,transform:Sa.transform},Ll={test:Tx("hsl","hue"),parse:VN("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Fi.transform(Wu(e))+", "+Fi.transform(Wu(n))+", "+Wu(fd.transform(r))+")"},Dn={test:t=>Sa.test(t)||v0.test(t)||Ll.test(t),parse:t=>Sa.test(t)?Sa.parse(t):Ll.test(t)?Ll.parse(t):v0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Sa.transform(t):Ll.transform(t)},DV=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function jV(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Cx))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(DV))===null||n===void 0?void 0:n.length)||0)>0}const zN="number",$N="color",OV="var",LV="var(",LT="${}",FV=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function md(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const l=e.replace(FV,u=>(Dn.test(u)?(r.color.push(s),i.push($N),n.push(Dn.parse(u))):u.startsWith(LV)?(r.var.push(s),i.push(OV),n.push(u)):(r.number.push(s),i.push(zN),n.push(parseFloat(u))),++s,LT)).split(LT);return{values:n,split:l,indexes:r,types:i}}function WN(t){return md(t).values}function HN(t){const{split:e,types:n}=md(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const l=n[o];l===zN?s+=Wu(i[o]):l===$N?s+=Dn.transform(i[o]):s+=i[o]}return s}}const UV=t=>typeof t=="number"?0:t;function BV(t){const e=WN(t);return HN(t)(e.map(UV))}const zo={test:jV,parse:WN,createTransformer:HN,getAnimatableNone:BV},VV=new Set(["brightness","contrast","saturate","opacity"]);function zV(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Cx)||[];if(!r)return t;const i=n.replace(r,"");let s=VV.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const $V=/\b([a-z-]*)\(.*?\)/gu,y0={...zo,getAnimatableNone:t=>{const e=t.match($V);return e?e.map(zV).join(" "):t}},WV={...cx,color:Dn,backgroundColor:Dn,outlineColor:Dn,fill:Dn,stroke:Dn,borderColor:Dn,borderTopColor:Dn,borderRightColor:Dn,borderBottomColor:Dn,borderLeftColor:Dn,filter:y0,WebkitFilter:y0},Ex=t=>WV[t];function qN(t,e){let n=Ex(t);return n!==y0&&(n=zo),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const HV=new Set(["auto","none","0"]);function qV(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!HV.has(s)&&md(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=qN(n,i)}class GN extends Sx{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let d=e[u];if(typeof d=="string"&&(d=d.trim(),ux(d))){const f=ON(d,n.current);f!==void 0&&(e[u]=f),u===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!CV.has(r)||e.length!==2)return;const[i,s]=e,o=OT(i),l=OT(s);if(o!==l)if(MT(o)&&MT(l))for(let u=0;u<e.length;u++){const d=e[u];typeof d=="string"&&(e[u]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)wV(e[i])&&r.push(i);r.length&&qV(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=wc[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,l=i[o];i[o]=wc[r](n.measureViewportBox(),window.getComputedStyle(n.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([u,d])=>{n.getValue(u).set(d)}),this.resolveNoneKeyframes()}}const FT=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(zo.test(t)||t==="0")&&!t.startsWith("url("));function GV(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function KV(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=FT(i,e),l=FT(s,e);return!o||!l?!1:GV(t)||(n==="spring"||mx(n))&&r}const YV=t=>t!==null;function um(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(YV),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const JV=40;class KN{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Ui.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>JV?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&IV(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Ui.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:l,onUpdate:u,isGenerator:d}=this.options;if(!d&&!KV(e,r,i,s))if(o)this.options.duration=0;else{u==null||u(um(e,this.options,n)),l==null||l(),this.resolveFinishedPromise();return}const f=this.initPlayback(e,n);f!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...f},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Vt=(t,e,n)=>t+(e-t)*n;function $v(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function QV({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const l=n<.5?n*(1+e):n+e-n*e,u=2*n-l;i=$v(u,l,t+1/3),s=$v(u,l,t),o=$v(u,l,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function yp(t,e){return n=>n>0?e:t}const Wv=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},XV=[v0,Sa,Ll],ZV=t=>XV.find(e=>e.test(t));function UT(t){const e=ZV(t);if(!e)return!1;let n=e.parse(t);return e===Ll&&(n=QV(n)),n}const BT=(t,e)=>{const n=UT(t),r=UT(e);if(!n||!r)return yp(t,e);const i={...n};return s=>(i.red=Wv(n.red,r.red,s),i.green=Wv(n.green,r.green,s),i.blue=Wv(n.blue,r.blue,s),i.alpha=Vt(n.alpha,r.alpha,s),Sa.transform(i))},e8=(t,e)=>n=>e(t(n)),zd=(...t)=>t.reduce(e8),b0=new Set(["none","hidden"]);function t8(t,e){return b0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function n8(t,e){return n=>Vt(t,e,n)}function Px(t){return typeof t=="number"?n8:typeof t=="string"?ux(t)?yp:Dn.test(t)?BT:s8:Array.isArray(t)?YN:typeof t=="object"?Dn.test(t)?BT:r8:yp}function YN(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>Px(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function r8(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=Px(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function i8(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],l=t.indexes[o][i[o]],u=(n=t.values[l])!==null&&n!==void 0?n:0;r[s]=u,i[o]++}return r}const s8=(t,e)=>{const n=zo.createTransformer(e),r=md(t),i=md(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?b0.has(t)&&!i.values.length||b0.has(e)&&!r.values.length?t8(t,e):zd(YN(i8(r,i),i.values),n):yp(t,e)};function JN(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Vt(t,e,n):Px(t)(t,e)}const o8=5;function QN(t,e,n){const r=Math.max(e-o8,0);return CN(n-t(r),e-r)}const Wt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Hv=.001;function a8({duration:t=Wt.duration,bounce:e=Wt.bounce,velocity:n=Wt.velocity,mass:r=Wt.mass}){let i,s,o=1-e;o=_s(Wt.minDamping,Wt.maxDamping,o),t=_s(Wt.minDuration,Wt.maxDuration,Cs(t)),o<1?(i=d=>{const f=d*o,m=f*t,g=f-n,y=x0(d,o),C=Math.exp(-m);return Hv-g/y*C},s=d=>{const m=d*o*t,g=m*n+n,y=Math.pow(o,2)*Math.pow(d,2)*t,C=Math.exp(-m),x=x0(Math.pow(d,2),o);return(-i(d)+Hv>0?-1:1)*((g-y)*C)/x}):(i=d=>{const f=Math.exp(-d*t),m=(d-n)*t+1;return-Hv+f*m},s=d=>{const f=Math.exp(-d*t),m=(n-d)*(t*t);return f*m});const l=5/t,u=c8(i,s,l);if(t=Ss(t),isNaN(u))return{stiffness:Wt.stiffness,damping:Wt.damping,duration:t};{const d=Math.pow(u,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:t}}}const l8=12;function c8(t,e,n){let r=n;for(let i=1;i<l8;i++)r=r-t(r)/e(r);return r}function x0(t,e){return t*Math.sqrt(1-e*e)}const u8=["duration","bounce"],d8=["stiffness","damping","mass"];function VT(t,e){return e.some(n=>t[n]!==void 0)}function h8(t){let e={velocity:Wt.velocity,stiffness:Wt.stiffness,damping:Wt.damping,mass:Wt.mass,isResolvedFromDuration:!1,...t};if(!VT(t,d8)&&VT(t,u8))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*_s(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Wt.mass,stiffness:i,damping:s}}else{const n=a8(t);e={...e,...n,mass:Wt.mass},e.isResolvedFromDuration=!0}return e}function XN(t=Wt.visualDuration,e=Wt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:s},{stiffness:u,damping:d,mass:f,duration:m,velocity:g,isResolvedFromDuration:y}=h8({...n,velocity:-Cs(n.velocity||0)}),C=g||0,x=d/(2*Math.sqrt(u*f)),k=o-s,T=Cs(Math.sqrt(u/f)),_=Math.abs(k)<5;r||(r=_?Wt.restSpeed.granular:Wt.restSpeed.default),i||(i=_?Wt.restDelta.granular:Wt.restDelta.default);let P;if(x<1){const I=x0(T,x);P=A=>{const L=Math.exp(-x*T*A);return o-L*((C+x*T*k)/I*Math.sin(I*A)+k*Math.cos(I*A))}}else if(x===1)P=I=>o-Math.exp(-T*I)*(k+(C+T*k)*I);else{const I=T*Math.sqrt(x*x-1);P=A=>{const L=Math.exp(-x*T*A),R=Math.min(I*A,300);return o-L*((C+x*T*k)*Math.sinh(R)+I*k*Math.cosh(R))/I}}const E={calculatedDuration:y&&m||null,next:I=>{const A=P(I);if(y)l.done=I>=m;else{let L=0;x<1&&(L=I===0?Ss(C):QN(P,I,A));const R=Math.abs(L)<=r,j=Math.abs(o-A)<=i;l.done=R&&j}return l.value=l.done?o:A,l},toString:()=>{const I=Math.min(vN(E),h0),A=yN(L=>E.next(I*L).value,I,30);return I+"ms "+A}};return E}function zT({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:u,restDelta:d=.5,restSpeed:f}){const m=t[0],g={done:!1,value:m},y=R=>l!==void 0&&R<l||u!==void 0&&R>u,C=R=>l===void 0?u:u===void 0||Math.abs(l-R)<Math.abs(u-R)?l:u;let x=n*e;const k=m+x,T=o===void 0?k:o(k);T!==k&&(x=T-m);const _=R=>-x*Math.exp(-R/r),P=R=>T+_(R),E=R=>{const j=_(R),U=P(R);g.done=Math.abs(j)<=d,g.value=g.done?T:U};let I,A;const L=R=>{y(g.value)&&(I=R,A=XN({keyframes:[g.value,C(g.value)],velocity:QN(P,R,g.value),damping:i,stiffness:s,restDelta:d,restSpeed:f}))};return L(0),{calculatedDuration:null,next:R=>{let j=!1;return!A&&I===void 0&&(j=!0,E(R),L(R)),I!==void 0&&R>=I?A.next(R-I):(!j&&E(R),g)}}}const f8=Vd(.42,0,1,1),p8=Vd(0,0,.58,1),ZN=Vd(.42,0,.58,1),m8=t=>Array.isArray(t)&&typeof t[0]!="number",g8={linear:br,easeIn:f8,easeInOut:ZN,easeOut:p8,circIn:kx,circInOut:MN,circOut:RN,backIn:wx,backInOut:NN,backOut:IN,anticipate:AN},$T=t=>{if(gx(t)){JI(t.length===4);const[e,n,r,i]=t;return Vd(e,n,r,i)}else if(typeof t=="string")return g8[t];return t};function v8(t,e,n){const r=[],i=n||JN,s=t.length-1;for(let o=0;o<s;o++){let l=i(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||br:e;l=zd(u,l)}r.push(l)}return r}function y8(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(JI(s===e.length),s===1)return()=>e[0];if(s===2&&t[0]===t[1])return()=>e[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=v8(e,r,i),l=o.length,u=d=>{let f=0;if(l>1)for(;f<t.length-2&&!(d<t[f+1]);f++);const m=bc(t[f],t[f+1],d);return o[f](m)};return n?d=>u(_s(t[0],t[s-1],d)):u}function b8(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=bc(0,e,r);t.push(Vt(n,1,i))}}function x8(t){const e=[0];return b8(e,t.length-1),e}function w8(t,e){return t.map(n=>n*e)}function k8(t,e){return t.map(()=>e||ZN).splice(0,t.length-1)}function bp({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=m8(r)?r.map($T):$T(r),s={done:!1,value:e[0]},o=w8(n&&n.length===e.length?n:x8(e),t),l=y8(o,e,{ease:Array.isArray(i)?i:k8(e,i)});return{calculatedDuration:t,next:u=>(s.value=l(u),s.done=u>=t,s)}}const S8=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Dt.update(e,!0),stop:()=>Vo(e),now:()=>Cn.isProcessing?Cn.timestamp:Ui.now()}},C8={decay:zT,inertia:zT,tween:bp,keyframes:bp,spring:XN},T8=t=>t/100;class _x extends KN{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||Sx,l=(u,d)=>this.onKeyframesResolved(u,d);this.resolver=new o(s,l,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,l=mx(n)?n:C8[n]||bp;let u,d;l!==bp&&typeof e[0]!="number"&&(u=zd(T8,JN(e[0],e[1])),e=[0,100]);const f=l({...this.options,keyframes:e});s==="mirror"&&(d=l({...this.options,keyframes:[...e].reverse(),velocity:-o})),f.calculatedDuration===null&&(f.calculatedDuration=vN(f));const{calculatedDuration:m}=f,g=m+i,y=g*(r+1)-i;return{generator:f,mirroredGenerator:d,mapPercentToKeyframes:u,calculatedDuration:m,resolvedDuration:g,totalDuration:y}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:R}=this.options;return{done:!0,value:R[R.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:l,keyframes:u,calculatedDuration:d,totalDuration:f,resolvedDuration:m}=r;if(this.startTime===null)return s.next(0);const{delay:g,repeat:y,repeatType:C,repeatDelay:x,onUpdate:k}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-f/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const T=this.currentTime-g*(this.speed>=0?1:-1),_=this.speed>=0?T<0:T>f;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=f);let P=this.currentTime,E=s;if(y){const R=Math.min(this.currentTime,f)/m;let j=Math.floor(R),U=R%1;!U&&R>=1&&(U=1),U===1&&j--,j=Math.min(j,y+1),!!(j%2)&&(C==="reverse"?(U=1-U,x&&(U-=x/m)):C==="mirror"&&(E=o)),P=_s(0,1,U)*m}const I=_?{done:!1,value:u[0]}:E.next(P);l&&(I.value=l(I.value));let{done:A}=I;!_&&d!==null&&(A=this.speed>=0?this.currentTime>=f:this.currentTime<=0);const L=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&A);return L&&i!==void 0&&(I.value=um(u,this.options,i)),k&&k(I.value),L&&this.finish(),I}get duration(){const{resolved:e}=this;return e?Cs(e.calculatedDuration):0}get time(){return Cs(this.currentTime)}set time(e){e=Ss(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Cs(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=S8,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const E8=new Set(["opacity","clipPath","filter","transform"]);function P8(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:l="easeInOut",times:u}={}){const d={[e]:n};u&&(d.offset=u);const f=xN(l,i);return Array.isArray(f)&&(d.easing=f),t.animate(d,{delay:r,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const _8=Zb(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),xp=10,I8=2e4;function N8(t){return mx(t.type)||t.type==="spring"||!bN(t.ease)}function A8(t,e){const n=new _x({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<I8;)r=n.sample(s),i.push(r.value),s+=xp;return{times:void 0,keyframes:i,duration:s-xp,ease:"linear"}}const eA={anticipate:AN,backInOut:NN,circInOut:MN};function R8(t){return t in eA}class WT extends KN{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new GN(s,(o,l)=>this.onKeyframesResolved(o,l),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){var r;let{duration:i=300,times:s,ease:o,type:l,motionValue:u,name:d,startTime:f}=this.options;if(!(!((r=u.owner)===null||r===void 0)&&r.current))return!1;if(typeof o=="string"&&vp()&&R8(o)&&(o=eA[o]),N8(this.options)){const{onComplete:g,onUpdate:y,motionValue:C,element:x,...k}=this.options,T=A8(e,k);e=T.keyframes,e.length===1&&(e[1]=e[0]),i=T.duration,s=T.times,o=T.ease,l="keyframes"}const m=P8(u.owner.current,d,e,{...this.options,duration:i,times:s,ease:o});return m.startTime=f??this.calcStartTime(),this.pendingTimeline?(_T(m,this.pendingTimeline),this.pendingTimeline=void 0):m.onfinish=()=>{const{onComplete:g}=this.options;u.set(um(e,this.options,n)),g&&g(),this.cancel(),this.resolveFinishedPromise()},{animation:m,duration:i,times:s,type:l,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Cs(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Cs(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Ss(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return br;const{animation:r}=n;_T(r,e)}return br}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:l}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:f,onComplete:m,element:g,...y}=this.options,C=new _x({...y,keyframes:r,duration:i,type:s,ease:o,times:l,isGenerator:!0}),x=Ss(this.time);d.setWithVelocity(C.sample(x-xp).value,C.sample(x).value,xp)}const{onStop:u}=this.options;u&&u(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:l}=e;return _8()&&r&&E8.has(r)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!i&&s!=="mirror"&&o!==0&&l!=="inertia"}}const M8={type:"spring",stiffness:500,damping:25,restSpeed:10},D8=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),j8={type:"keyframes",duration:.8},O8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},L8=(t,{keyframes:e})=>e.length>2?j8:Ka.has(t)?t.startsWith("scale")?D8(e[1]):M8:O8;function F8({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:l,from:u,elapsed:d,...f}){return!!Object.keys(f).length}const Ix=(t,e,n,r={},i,s)=>o=>{const l=px(r,t)||{},u=l.delay||r.delay||0;let{elapsed:d=0}=r;d=d-Ss(u);let f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-d,onUpdate:g=>{e.set(g),l.onUpdate&&l.onUpdate(g)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:s?void 0:i};F8(l)||(f={...f,...L8(t,f)}),f.duration&&(f.duration=Ss(f.duration)),f.repeatDelay&&(f.repeatDelay=Ss(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let m=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(f.duration=0,f.delay===0&&(m=!0)),m&&!s&&e.get()!==void 0){const g=um(f.keyframes,l);if(g!==void 0)return Dt.update(()=>{f.onUpdate(g),f.onComplete()}),new nV([])}return!s&&WT.supports(f)?new WT(f):new _x(f)};function U8({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function tA(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:l,...u}=e;r&&(o=r);const d=[],f=i&&t.animationState&&t.animationState.getState()[i];for(const m in u){const g=t.getValue(m,(s=t.latestValues[m])!==null&&s!==void 0?s:null),y=u[m];if(y===void 0||f&&U8(f,m))continue;const C={delay:n,...px(o||{},m)};let x=!1;if(window.MotionHandoffAnimation){const T=TN(t);if(T){const _=window.MotionHandoffAnimation(T,m,Dt);_!==null&&(C.startTime=_,x=!0)}}p0(t,m),g.start(Ix(m,g,y,t.shouldReduceMotion&&Ka.has(m)?{type:!1}:C,t,x));const k=g.animation;k&&d.push(k)}return l&&Promise.all(d).then(()=>{Dt.update(()=>{l&&gV(t,l)})}),d}function w0(t,e,n={}){var r;const i=cm(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(tA(t,i,n)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:f=0,staggerChildren:m,staggerDirection:g}=s;return B8(t,e,f+d,m,g,n)}:()=>Promise.resolve(),{when:u}=s;if(u){const[d,f]=u==="beforeChildren"?[o,l]:[l,o];return d().then(()=>f())}else return Promise.all([o(),l(n.delay)])}function B8(t,e,n=0,r=0,i=1,s){const o=[],l=(t.variantChildren.size-1)*r,u=i===1?(d=0)=>d*r:(d=0)=>l-d*r;return Array.from(t.variantChildren).sort(V8).forEach((d,f)=>{d.notify("AnimationStart",e),o.push(w0(d,e,{...s,delay:n+u(f)}).then(()=>d.notify("AnimationComplete",e)))}),Promise.all(o)}function V8(t,e){return t.sortNodePosition(e)}function z8(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>w0(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=w0(t,e,n);else{const i=typeof e=="function"?cm(t,e,n.custom):e;r=Promise.all(tA(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const $8=nx.length;function nA(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?nA(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<$8;n++){const r=nx[n],i=t.props[r];(hd(i)||i===!1)&&(e[r]=i)}return e}const W8=[...tx].reverse(),H8=tx.length;function q8(t){return e=>Promise.all(e.map(({animation:n,options:r})=>z8(t,n,r)))}function G8(t){let e=q8(t),n=HT(),r=!0;const i=u=>(d,f)=>{var m;const g=cm(t,f,u==="exit"?(m=t.presenceContext)===null||m===void 0?void 0:m.custom:void 0);if(g){const{transition:y,transitionEnd:C,...x}=g;d={...d,...x,...C}}return d};function s(u){e=u(t)}function o(u){const{props:d}=t,f=nA(t.parent)||{},m=[],g=new Set;let y={},C=1/0;for(let k=0;k<H8;k++){const T=W8[k],_=n[T],P=d[T]!==void 0?d[T]:f[T],E=hd(P),I=T===u?_.isActive:null;I===!1&&(C=k);let A=P===f[T]&&P!==d[T]&&E;if(A&&r&&t.manuallyAnimateOnMount&&(A=!1),_.protectedKeys={...y},!_.isActive&&I===null||!P&&!_.prevProp||am(P)||typeof P=="boolean")continue;const L=K8(_.prevProp,P);let R=L||T===u&&_.isActive&&!A&&E||k>C&&E,j=!1;const U=Array.isArray(P)?P:[P];let z=U.reduce(i(T),{});I===!1&&(z={});const{prevResolvedValues:F={}}=_,W={...F,...z},Y=se=>{R=!0,g.has(se)&&(j=!0,g.delete(se)),_.needsAnimating[se]=!0;const H=t.getValue(se);H&&(H.liveStyle=!1)};for(const se in W){const H=z[se],te=F[se];if(y.hasOwnProperty(se))continue;let D=!1;d0(H)&&d0(te)?D=!gN(H,te):D=H!==te,D?H!=null?Y(se):g.add(se):H!==void 0&&g.has(se)?Y(se):_.protectedKeys[se]=!0}_.prevProp=P,_.prevResolvedValues=z,_.isActive&&(y={...y,...z}),r&&t.blockInitialAnimation&&(R=!1),R&&(!(A&&L)||j)&&m.push(...U.map(se=>({animation:se,options:{type:T}})))}if(g.size){const k={};g.forEach(T=>{const _=t.getBaseTarget(T),P=t.getValue(T);P&&(P.liveStyle=!0),k[T]=_??null}),m.push({animation:k})}let x=!!m.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(m):Promise.resolve()}function l(u,d){var f;if(n[u].isActive===d)return Promise.resolve();(f=t.variantChildren)===null||f===void 0||f.forEach(g=>{var y;return(y=g.animationState)===null||y===void 0?void 0:y.setActive(u,d)}),n[u].isActive=d;const m=o(u);for(const g in n)n[g].protectedKeys={};return m}return{animateChanges:o,setActive:l,setAnimateFunction:s,getState:()=>n,reset:()=>{n=HT(),r=!0}}}function K8(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!gN(e,t):!1}function va(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function HT(){return{animate:va(!0),whileInView:va(),whileHover:va(),whileTap:va(),whileDrag:va(),whileFocus:va(),exit:va()}}class Ko{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Y8 extends Ko{constructor(e){super(e),e.animationState||(e.animationState=G8(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();am(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let J8=0;class Q8 extends Ko{constructor(){super(...arguments),this.id=J8++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const X8={animation:{Feature:Y8},exit:{Feature:Q8}};function gd(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function $d(t){return{point:{x:t.pageX,y:t.pageY}}}const Z8=t=>e=>vx(e)&&t(e,$d(e));function Hu(t,e,n,r){return gd(t,e,Z8(n),r)}const qT=(t,e)=>Math.abs(t-e);function ez(t,e){const n=qT(t.x,e.x),r=qT(t.y,e.y);return Math.sqrt(n**2+r**2)}class rA{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Gv(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,y=ez(m.offset,{x:0,y:0})>=3;if(!g&&!y)return;const{point:C}=m,{timestamp:x}=Cn;this.history.push({...C,timestamp:x});const{onStart:k,onMove:T}=this.handlers;g||(k&&k(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,m)},this.handlePointerMove=(m,g)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=qv(g,this.transformPagePoint),Dt.update(this.updatePoint,!0)},this.handlePointerUp=(m,g)=>{this.end();const{onEnd:y,onSessionEnd:C,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=Gv(m.type==="pointercancel"?this.lastMoveEventInfo:qv(g,this.transformPagePoint),this.history);this.startEvent&&y&&y(m,k),C&&C(m,k)},!vx(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=$d(e),l=qv(o,this.transformPagePoint),{point:u}=l,{timestamp:d}=Cn;this.history=[{...u,timestamp:d}];const{onSessionStart:f}=n;f&&f(e,Gv(l,this.history)),this.removeListeners=zd(Hu(this.contextWindow,"pointermove",this.handlePointerMove),Hu(this.contextWindow,"pointerup",this.handlePointerUp),Hu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Vo(this.updatePoint)}}function qv(t,e){return e?{point:e(t.point)}:t}function GT(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Gv({point:t},e){return{point:t,delta:GT(t,iA(e)),offset:GT(t,tz(e)),velocity:nz(e,.1)}}function tz(t){return t[0]}function iA(t){return t[t.length-1]}function nz(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=iA(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Ss(e)));)n--;if(!r)return{x:0,y:0};const s=Cs(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const sA=1e-4,rz=1-sA,iz=1+sA,oA=.01,sz=0-oA,oz=0+oA;function kr(t){return t.max-t.min}function az(t,e,n){return Math.abs(t-e)<=n}function KT(t,e,n,r=.5){t.origin=r,t.originPoint=Vt(e.min,e.max,t.origin),t.scale=kr(n)/kr(e),t.translate=Vt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=rz&&t.scale<=iz||isNaN(t.scale))&&(t.scale=1),(t.translate>=sz&&t.translate<=oz||isNaN(t.translate))&&(t.translate=0)}function qu(t,e,n,r){KT(t.x,e.x,n.x,r?r.originX:void 0),KT(t.y,e.y,n.y,r?r.originY:void 0)}function YT(t,e,n){t.min=n.min+e.min,t.max=t.min+kr(e)}function lz(t,e,n){YT(t.x,e.x,n.x),YT(t.y,e.y,n.y)}function JT(t,e,n){t.min=e.min-n.min,t.max=t.min+kr(e)}function Gu(t,e,n){JT(t.x,e.x,n.x),JT(t.y,e.y,n.y)}function cz(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Vt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Vt(n,t,r.max):Math.min(t,n)),t}function QT(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function uz(t,{top:e,left:n,bottom:r,right:i}){return{x:QT(t.x,n,i),y:QT(t.y,e,r)}}function XT(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function dz(t,e){return{x:XT(t.x,e.x),y:XT(t.y,e.y)}}function hz(t,e){let n=.5;const r=kr(t),i=kr(e);return i>r?n=bc(e.min,e.max-r,t.min):r>i&&(n=bc(t.min,t.max-i,e.min)),_s(0,1,n)}function fz(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const k0=.35;function pz(t=k0){return t===!1?t=0:t===!0&&(t=k0),{x:ZT(t,"left","right"),y:ZT(t,"top","bottom")}}function ZT(t,e,n){return{min:e1(t,e),max:e1(t,n)}}function e1(t,e){return typeof t=="number"?t:t[e]||0}const t1=()=>({translate:0,scale:1,origin:0,originPoint:0}),Fl=()=>({x:t1(),y:t1()}),n1=()=>({min:0,max:0}),Qt=()=>({x:n1(),y:n1()});function jr(t){return[t("x"),t("y")]}function aA({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function mz({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function gz(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Kv(t){return t===void 0||t===1}function S0({scale:t,scaleX:e,scaleY:n}){return!Kv(t)||!Kv(e)||!Kv(n)}function ya(t){return S0(t)||lA(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function lA(t){return r1(t.x)||r1(t.y)}function r1(t){return t&&t!=="0%"}function wp(t,e,n){const r=t-n,i=e*r;return n+i}function i1(t,e,n,r,i){return i!==void 0&&(t=wp(t,i,r)),wp(t,n,r)+e}function C0(t,e=0,n=1,r,i){t.min=i1(t.min,e,n,r,i),t.max=i1(t.max,e,n,r,i)}function cA(t,{x:e,y:n}){C0(t.x,e.translate,e.scale,e.originPoint),C0(t.y,n.translate,n.scale,n.originPoint)}const s1=.999999999999,o1=1.0000000000001;function vz(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let l=0;l<i;l++){s=n[l],o=s.projectionDelta;const{visualElement:u}=s.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Bl(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,cA(t,o)),r&&ya(s.latestValues)&&Bl(t,s.latestValues))}e.x<o1&&e.x>s1&&(e.x=1),e.y<o1&&e.y>s1&&(e.y=1)}function Ul(t,e){t.min=t.min+e,t.max=t.max+e}function a1(t,e,n,r,i=.5){const s=Vt(t.min,t.max,i);C0(t,e,n,s,r)}function Bl(t,e){a1(t.x,e.x,e.scaleX,e.scale,e.originX),a1(t.y,e.y,e.scaleY,e.scale,e.originY)}function uA(t,e){return aA(gz(t.getBoundingClientRect(),e))}function yz(t,e,n){const r=uA(t,n),{scroll:i}=e;return i&&(Ul(r.x,i.offset.x),Ul(r.y,i.offset.y)),r}const dA=({current:t})=>t?t.ownerDocument.defaultView:null,bz=new WeakMap;class xz{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Qt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor($d(f).point)},s=(f,m)=>{const{drag:g,dragPropagation:y,onDragStart:C}=this.getProps();if(g&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=dV(g),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),jr(k=>{let T=this.getAxisMotionValue(k).get()||0;if(Fi.test(T)){const{projection:_}=this.visualElement;if(_&&_.layout){const P=_.layout.layoutBox[k];P&&(T=kr(P)*(parseFloat(T)/100))}}this.originPoint[k]=T}),C&&Dt.postRender(()=>C(f,m)),p0(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(f,m)=>{const{dragPropagation:g,dragDirectionLock:y,onDirectionLock:C,onDrag:x}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:k}=m;if(y&&this.currentDirection===null){this.currentDirection=wz(k),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",m.point,k),this.updateAxis("y",m.point,k),this.visualElement.render(),x&&x(f,m)},l=(f,m)=>this.stop(f,m),u=()=>jr(f=>{var m;return this.getAnimationState(f)==="paused"&&((m=this.getAxisMotionValue(f).animation)===null||m===void 0?void 0:m.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new rA(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:dA(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Dt.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!wf(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=cz(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Ol(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=uz(i.layoutBox,n):this.constraints=!1,this.elastic=pz(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&jr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=fz(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ol(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=yz(r,i.root,this.visualElement.getTransformPagePoint());let o=dz(i.layout.layoutBox,s);if(n){const l=n(mz(o));this.hasMutatedConstraints=!!l,l&&(o=aA(l))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),u=this.constraints||{},d=jr(f=>{if(!wf(f,n,this.currentDirection))return;let m=u&&u[f]||{};o&&(m={min:0,max:0});const g=i?200:1e6,y=i?40:1e7,C={type:"inertia",velocity:r?e[f]:0,bounceStiffness:g,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...s,...m};return this.startAxisValueAnimation(f,C)});return Promise.all(d).then(l)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return p0(this.visualElement,e),r.start(Ix(e,r,0,n,this.visualElement,!1))}stopAnimation(){jr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){jr(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){jr(n=>{const{drag:r}=this.getProps();if(!wf(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[n];s.set(e[n]-Vt(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ol(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};jr(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const u=l.get();i[o]=hz({min:u,max:u},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),jr(o=>{if(!wf(o,e,null))return;const l=this.getAxisMotionValue(o),{min:u,max:d}=this.constraints[o];l.set(Vt(u,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;bz.set(this.visualElement,this);const e=this.visualElement.current,n=Hu(e,"pointerdown",u=>{const{drag:d,dragListener:f=!0}=this.getProps();d&&f&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();Ol(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Dt.read(r);const o=gd(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(jr(f=>{const m=this.getAxisMotionValue(f);m&&(this.originPoint[f]+=u[f].translate,m.set(m.get()+u[f].translate))}),this.visualElement.render())}));return()=>{o(),n(),s(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=k0,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:l}}}function wf(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function wz(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class kz extends Ko{constructor(e){super(e),this.removeGroupControls=br,this.removeListeners=br,this.controls=new xz(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||br}unmount(){this.removeGroupControls(),this.removeListeners()}}const l1=t=>(e,n)=>{t&&Dt.postRender(()=>t(e,n))};class Sz extends Ko{constructor(){super(...arguments),this.removePointerDownListener=br}onPointerDown(e){this.session=new rA(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:dA(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:l1(e),onStart:l1(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Dt.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Hu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function Cz(){const t=w.useContext(sm);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=w.useId();w.useEffect(()=>r(i),[]);const s=w.useCallback(()=>n&&n(i),[i,n]);return!e&&n?[!1,s]:[!0]}const zf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function c1(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ku={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(We.test(t))t=parseFloat(t);else return t;const n=c1(t,e.target.x),r=c1(t,e.target.y);return`${n}% ${r}%`}},Tz={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=zo.parse(t);if(i.length>5)return r;const s=zo.createTransformer(t),o=typeof i[0]!="number"?1:0,l=n.x.scale*e.x,u=n.y.scale*e.y;i[0+o]/=l,i[1+o]/=u;const d=Vt(l,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),s(i)}};class Ez extends w.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;_B(Pz),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),zf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Dt.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ix.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function hA(t){const[e,n]=Cz(),r=w.useContext(Xb);return h.jsx(Ez,{...t,layoutGroup:r,switchLayoutGroup:w.useContext(rN),isPresent:e,safeToRemove:n})}const Pz={borderRadius:{...ku,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ku,borderTopRightRadius:ku,borderBottomLeftRadius:ku,borderBottomRightRadius:ku,boxShadow:Tz};function _z(t,e,n){const r=jn(t)?t:pd(t);return r.start(Ix("",r,e,n)),r.animation}function Iz(t){return t instanceof SVGElement&&t.tagName!=="svg"}const Nz=(t,e)=>t.depth-e.depth;class Az{constructor(){this.children=[],this.isDirty=!1}add(e){yx(this.children,e),this.isDirty=!0}remove(e){bx(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Nz),this.isDirty=!1,this.children.forEach(e)}}function Rz(t,e){const n=Ui.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(Vo(r),t(s-e))};return Dt.read(r,!0),()=>Vo(r)}const fA=["TopLeft","TopRight","BottomLeft","BottomRight"],Mz=fA.length,u1=t=>typeof t=="string"?parseFloat(t):t,d1=t=>typeof t=="number"||We.test(t);function Dz(t,e,n,r,i,s){i?(t.opacity=Vt(0,n.opacity!==void 0?n.opacity:1,jz(r)),t.opacityExit=Vt(e.opacity!==void 0?e.opacity:1,0,Oz(r))):s&&(t.opacity=Vt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<Mz;o++){const l=`border${fA[o]}Radius`;let u=h1(e,l),d=h1(n,l);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||d1(u)===d1(d)?(t[l]=Math.max(Vt(u1(u),u1(d),r),0),(Fi.test(d)||Fi.test(u))&&(t[l]+="%")):t[l]=d}(e.rotate||n.rotate)&&(t.rotate=Vt(e.rotate||0,n.rotate||0,r))}function h1(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const jz=pA(0,.5,RN),Oz=pA(.5,.95,br);function pA(t,e,n){return r=>r<t?0:r>e?1:n(bc(t,e,r))}function f1(t,e){t.min=e.min,t.max=e.max}function Dr(t,e){f1(t.x,e.x),f1(t.y,e.y)}function p1(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function m1(t,e,n,r,i){return t-=e,t=wp(t,1/n,r),i!==void 0&&(t=wp(t,1/i,r)),t}function Lz(t,e=0,n=1,r=.5,i,s=t,o=t){if(Fi.test(e)&&(e=parseFloat(e),e=Vt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=Vt(s.min,s.max,r);t===s&&(l-=e),t.min=m1(t.min,e,n,l,i),t.max=m1(t.max,e,n,l,i)}function g1(t,e,[n,r,i],s,o){Lz(t,e[n],e[r],e[i],e.scale,s,o)}const Fz=["x","scaleX","originX"],Uz=["y","scaleY","originY"];function v1(t,e,n,r){g1(t.x,e,Fz,n?n.x:void 0,r?r.x:void 0),g1(t.y,e,Uz,n?n.y:void 0,r?r.y:void 0)}function y1(t){return t.translate===0&&t.scale===1}function mA(t){return y1(t.x)&&y1(t.y)}function b1(t,e){return t.min===e.min&&t.max===e.max}function Bz(t,e){return b1(t.x,e.x)&&b1(t.y,e.y)}function x1(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function gA(t,e){return x1(t.x,e.x)&&x1(t.y,e.y)}function w1(t){return kr(t.x)/kr(t.y)}function k1(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Vz{constructor(){this.members=[]}add(e){yx(this.members,e),e.scheduleRender()}remove(e){if(bx(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function zz(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:f,rotateX:m,rotateY:g,skewX:y,skewY:C}=n;d&&(r=`perspective(${d}px) ${r}`),f&&(r+=`rotate(${f}deg) `),m&&(r+=`rotateX(${m}deg) `),g&&(r+=`rotateY(${g}deg) `),y&&(r+=`skewX(${y}deg) `),C&&(r+=`skewY(${C}deg) `)}const l=t.x.scale*e.x,u=t.y.scale*e.y;return(l!==1||u!==1)&&(r+=`scale(${l}, ${u})`),r||"none"}const ba={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},ju=typeof window<"u"&&window.MotionDebug!==void 0,Yv=["","X","Y","Z"],$z={visibility:"hidden"},S1=1e3;let Wz=0;function Jv(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function vA(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=TN(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Dt,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&vA(r)}function yA({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},l=e==null?void 0:e()){this.id=Wz++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ju&&(ba.totalNodes=ba.resolvedTargetDeltas=ba.recalculatedProjection=0),this.nodes.forEach(Gz),this.nodes.forEach(Xz),this.nodes.forEach(Zz),this.nodes.forEach(Kz),ju&&window.MotionDebug.record(ba)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new Az)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new xx),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const u=this.eventHandlers.get(o);u&&u.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Iz(o),this.instance=o;const{layoutId:u,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(d||u)&&(this.isLayoutDirty=!0),t){let m;const g=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=Rz(g,250),zf.hasAnimatedSinceResize&&(zf.hasAnimatedSinceResize=!1,this.nodes.forEach(T1))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||d)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:g,hasRelativeTargetChanged:y,layout:C})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||f.getDefaultTransition()||i$,{onLayoutAnimationStart:k,onLayoutAnimationComplete:T}=f.getProps(),_=!this.targetLayout||!gA(this.targetLayout,C)||y,P=!g&&y;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||P||g&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(m,P);const E={...px(x,"layout"),onPlay:k,onComplete:T};(f.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else g||T1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=C})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Vo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(e$),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&vA(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const m=this.path[f];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:u}=this.options;if(l===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(C1);return}this.isUpdating||this.nodes.forEach(Jz),this.isUpdating=!1,this.nodes.forEach(Qz),this.nodes.forEach(Hz),this.nodes.forEach(qz),this.clearAllSnapshots();const l=Ui.now();Cn.delta=_s(0,1e3/60,l-Cn.timestamp),Cn.timestamp=l,Cn.isProcessing=!0,Bv.update.process(Cn),Bv.preRender.process(Cn),Bv.render.process(Cn),Cn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ix.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Yz),this.sharedNodes.forEach(t$)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Dt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Dt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Qt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!mA(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,f=d!==this.prevTransformTemplateValue;o&&(l||ya(this.latestValues)||f)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let u=this.removeElementScroll(l);return o&&(u=this.removeTransform(u)),s$(u),{animationId:this.root.animationId,measuredBox:l,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:l}=this.options;if(!l)return Qt();const u=l.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(o$))){const{scroll:f}=this.root;f&&(Ul(u.x,f.offset.x),Ul(u.y,f.offset.y))}return u}removeElementScroll(o){var l;const u=Qt();if(Dr(u,o),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return u;for(let d=0;d<this.path.length;d++){const f=this.path[d],{scroll:m,options:g}=f;f!==this.root&&m&&g.layoutScroll&&(m.wasRoot&&Dr(u,o),Ul(u.x,m.offset.x),Ul(u.y,m.offset.y))}return u}applyTransform(o,l=!1){const u=Qt();Dr(u,o);for(let d=0;d<this.path.length;d++){const f=this.path[d];!l&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Bl(u,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),ya(f.latestValues)&&Bl(u,f.latestValues)}return ya(this.latestValues)&&Bl(u,this.latestValues),u}removeTransform(o){const l=Qt();Dr(l,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!ya(d.latestValues))continue;S0(d.latestValues)&&d.updateSnapshot();const f=Qt(),m=d.measurePageBox();Dr(f,m),v1(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,f)}return ya(this.latestValues)&&v1(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Cn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==u;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:g}=this.options;if(!(!this.layout||!(m||g))){if(this.resolvedRelativeTargetAt=Cn.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Qt(),this.relativeTargetOrigin=Qt(),Gu(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),Dr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Qt(),this.targetWithTransforms=Qt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),lz(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Dr(this.target,this.layout.layoutBox),cA(this.target,this.targetDelta)):Dr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Qt(),this.relativeTargetOrigin=Qt(),Gu(this.relativeTargetOrigin,this.target,y.target),Dr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ju&&ba.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||S0(this.parent.latestValues)||lA(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),u=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(d=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Cn.timestamp&&(d=!1),d)return;const{layout:f,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||m))return;Dr(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,y=this.treeScale.y;vz(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Qt());const{target:C}=l;if(!C){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(p1(this.prevProjectionDelta.x,this.projectionDelta.x),p1(this.prevProjectionDelta.y,this.projectionDelta.y)),qu(this.projectionDelta,this.layoutCorrected,C,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==y||!k1(this.projectionDelta.x,this.prevProjectionDelta.x)||!k1(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",C)),ju&&ba.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),o){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Fl(),this.projectionDelta=Fl(),this.projectionDeltaWithTransform=Fl()}setAnimationOrigin(o,l=!1){const u=this.snapshot,d=u?u.latestValues:{},f={...this.latestValues},m=Fl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const g=Qt(),y=u?u.source:void 0,C=this.layout?this.layout.source:void 0,x=y!==C,k=this.getStack(),T=!k||k.members.length<=1,_=!!(x&&!T&&this.options.crossfade===!0&&!this.path.some(r$));this.animationProgress=0;let P;this.mixTargetDelta=E=>{const I=E/1e3;E1(m.x,o.x,I),E1(m.y,o.y,I),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Gu(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),n$(this.relativeTarget,this.relativeTargetOrigin,g,I),P&&Bz(this.relativeTarget,P)&&(this.isProjectionDirty=!1),P||(P=Qt()),Dr(P,this.relativeTarget)),x&&(this.animationValues=f,Dz(f,d,this.latestValues,I,_,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=I},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Vo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Dt.update(()=>{zf.hasAnimatedSinceResize=!0,this.currentAnimation=_z(0,S1,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(S1),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:u,layout:d,latestValues:f}=o;if(!(!l||!u||!d)){if(this!==o&&this.layout&&d&&bA(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||Qt();const m=kr(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+m;const g=kr(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+g}Dr(l,u),Bl(l,f),qu(this.projectionDeltaWithTransform,this.layoutCorrected,l,f)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Vz),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(l=!0),!l)return;const d={};u.z&&Jv("z",o,d,this.animationValues);for(let f=0;f<Yv.length;f++)Jv(`rotate${Yv[f]}`,o,d,this.animationValues),Jv(`skew${Yv[f]}`,o,d,this.animationValues);o.render();for(const f in d)o.setStaticValue(f,d[f]),this.animationValues&&(this.animationValues[f]=d[f]);o.scheduleRender()}getProjectionStyles(o){var l,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return $z;const d={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=Bf(o==null?void 0:o.pointerEvents)||"",d.transform=f?f(this.latestValues,""):"none",d;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=Bf(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!ya(this.latestValues)&&(x.transform=f?f({},""):"none",this.hasProjected=!1),x}const g=m.animationValues||m.latestValues;this.applyTransformsToTarget(),d.transform=zz(this.projectionDeltaWithTransform,this.treeScale,g),f&&(d.transform=f(g,d.transform));const{x:y,y:C}=this.projectionDelta;d.transformOrigin=`${y.origin*100}% ${C.origin*100}% 0`,m.animationValues?d.opacity=m===this?(u=(l=g.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:d.opacity=m===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const x in gp){if(g[x]===void 0)continue;const{correct:k,applyTo:T}=gp[x],_=d.transform==="none"?g[x]:k(g[x],m);if(T){const P=T.length;for(let E=0;E<P;E++)d[T[E]]=_}else d[x]=_}return this.options.layoutId&&(d.pointerEvents=m===this?Bf(o==null?void 0:o.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(C1),this.root.sharedNodes.clear()}}}function Hz(t){t.updateLayout()}function qz(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?jr(m=>{const g=o?n.measuredBox[m]:n.layoutBox[m],y=kr(g);g.min=r[m].min,g.max=g.min+y}):bA(s,n.layoutBox,r)&&jr(m=>{const g=o?n.measuredBox[m]:n.layoutBox[m],y=kr(r[m]);g.max=g.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[m].max=t.relativeTarget[m].min+y)});const l=Fl();qu(l,r,n.layoutBox);const u=Fl();o?qu(u,t.applyTransform(i,!0),n.measuredBox):qu(u,r,n.layoutBox);const d=!mA(l);let f=!1;if(!t.resumeFrom){const m=t.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:g,layout:y}=m;if(g&&y){const C=Qt();Gu(C,n.layoutBox,g.layoutBox);const x=Qt();Gu(x,r,y.layoutBox),gA(C,x)||(f=!0),m.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=C,t.relativeParent=m)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:u,layoutDelta:l,hasLayoutChanged:d,hasRelativeTargetChanged:f})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Gz(t){ju&&ba.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Kz(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Yz(t){t.clearSnapshot()}function C1(t){t.clearMeasurements()}function Jz(t){t.isLayoutDirty=!1}function Qz(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function T1(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Xz(t){t.resolveTargetDelta()}function Zz(t){t.calcProjection()}function e$(t){t.resetSkewAndRotation()}function t$(t){t.removeLeadSnapshot()}function E1(t,e,n){t.translate=Vt(e.translate,0,n),t.scale=Vt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function P1(t,e,n,r){t.min=Vt(e.min,n.min,r),t.max=Vt(e.max,n.max,r)}function n$(t,e,n,r){P1(t.x,e.x,n.x,r),P1(t.y,e.y,n.y,r)}function r$(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const i$={duration:.45,ease:[.4,0,.1,1]},_1=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),I1=_1("applewebkit/")&&!_1("chrome/")?Math.round:br;function N1(t){t.min=I1(t.min),t.max=I1(t.max)}function s$(t){N1(t.x),N1(t.y)}function bA(t,e,n){return t==="position"||t==="preserve-aspect"&&!az(w1(e),w1(n),.2)}function o$(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const a$=yA({attachResizeListener:(t,e)=>gd(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Qv={current:void 0},xA=yA({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Qv.current){const t=new a$({});t.mount(window),t.setOptions({layoutScroll:!0}),Qv.current=t}return Qv.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),l$={pan:{Feature:Sz},drag:{Feature:kz,ProjectionNode:xA,MeasureLayout:hA}};function A1(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Dt.postRender(()=>s(e,$d(e)))}class c$ extends Ko{mount(){const{current:e}=this.node;e&&(this.unmount=oV(e,n=>(A1(this.node,n,"Start"),r=>A1(this.node,r,"End"))))}unmount(){}}class u$ extends Ko{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=zd(gd(this.node.current,"focus",()=>this.onFocus()),gd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function R1(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Dt.postRender(()=>s(e,$d(e)))}class d$ extends Ko{mount(){const{current:e}=this.node;e&&(this.unmount=uV(e,n=>(R1(this.node,n,"Start"),(r,{success:i})=>R1(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const T0=new WeakMap,Xv=new WeakMap,h$=t=>{const e=T0.get(t.target);e&&e(t)},f$=t=>{t.forEach(h$)};function p$({root:t,...e}){const n=t||document;Xv.has(n)||Xv.set(n,{});const r=Xv.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(f$,{root:t,...e})),r[i]}function m$(t,e,n){const r=p$(e);return T0.set(t,n),r.observe(t),()=>{T0.delete(t),r.unobserve(t)}}const g$={some:0,all:1};class v$ extends Ko{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:g$[i]},l=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,s&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:f,onViewportLeave:m}=this.node.getProps(),g=d?f:m;g&&g(u)};return m$(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(y$(e,n))&&this.startObserver()}unmount(){}}function y$({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const b$={inView:{Feature:v$},tap:{Feature:d$},focus:{Feature:u$},hover:{Feature:c$}},x$={layout:{ProjectionNode:xA,MeasureLayout:hA}},E0={current:null},wA={current:!1};function w$(){if(wA.current=!0,!!ex)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>E0.current=t.matches;t.addListener(e),e()}else E0.current=!1}function k$(t,e,n){for(const r in e){const i=e[r],s=n[r];if(jn(i))t.addValue(r,i);else if(jn(s))t.addValue(r,pd(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,pd(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const M1=new WeakMap,S$=[...FN,Dn,zo],C$=t=>S$.find(LN(t)),D1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class T${scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Sx,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Ui.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,Dt.render(this.render,!1,!0))};const{latestValues:u,renderState:d}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=lm(n),this.isVariantNode=tN(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in m){const y=m[g];u[g]!==void 0&&jn(y)&&y.set(u[g],!1)}}mount(e){this.current=e,M1.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),wA.current||w$(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:E0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){M1.delete(this.current),this.projection&&this.projection.unmount(),Vo(this.notifyUpdate),Vo(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Ka.has(e),i=n.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&Dt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in xc){const n=xc[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Qt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<D1.length;r++){const i=D1[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=k$(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=pd(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(jN(i)||DN(i))?i=parseFloat(i):!C$(i)&&zo.test(n)&&(i=qN(e,n)),this.setBaseTarget(e,jn(i)?i.get():i)),jn(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=ax(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!jn(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new xx),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class kA extends T${constructor(){super(...arguments),this.KeyframeResolver=GN}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;jn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function E$(t){return window.getComputedStyle(t)}class P$ extends kA{constructor(){super(...arguments),this.type="html",this.renderInstance=sN}readValueFromInstance(e,n){if(Ka.has(n)){const r=Ex(n);return r&&r.default||0}else{const r=E$(e),i=(pN(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return uA(e,n)}build(e,n,r){dx(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return ox(e,n,r)}}class _$ extends kA{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Qt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ka.has(n)){const r=Ex(n);return r&&r.default||0}return n=oN.has(n)?n:rx(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return cN(e,n,r)}build(e,n,r){hx(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){aN(e,n,r,i)}mount(e){this.isSVGTag=fx(e.tagName),super.mount(e)}}const I$=(t,e)=>sx(t)?new _$(e):new P$(e,{allowProjection:t!==w.Fragment}),N$=ZB({...X8,...b$,...l$,...x$},I$),_e=mB(N$);function j1(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function dm(...t){return e=>{let n=!1;const r=t.map(i=>{const s=j1(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():j1(t[i],null)}}}}function wt(...t){return w.useCallback(dm(...t),t)}function Ra(t){const e=R$(t),n=w.forwardRef((r,i)=>{const{children:s,...o}=r,l=w.Children.toArray(s),u=l.find(D$);if(u){const d=u.props.children,f=l.map(m=>m===u?w.Children.count(d)>1?w.Children.only(null):w.isValidElement(d)?d.props.children:null:m);return h.jsx(e,{...o,ref:i,children:w.isValidElement(d)?w.cloneElement(d,void 0,f):null})}return h.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}var A$=Ra("Slot");function R$(t){const e=w.forwardRef((n,r)=>{const{children:i,...s}=n;if(w.isValidElement(i)){const o=O$(i),l=j$(s,i.props);return i.type!==w.Fragment&&(l.ref=r?dm(r,o):o),w.cloneElement(i,l)}return w.Children.count(i)>1?w.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var SA=Symbol("radix.slottable");function M$(t){const e=({children:n})=>h.jsx(h.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=SA,e}function D$(t){return w.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===SA}function j$(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...l)=>{const u=s(...l);return i(...l),u}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function O$(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}const Nx=$b("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Ee=w.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const o=r?A$:"button";return h.jsx(o,{className:et(Nx({variant:e,size:n,className:t})),ref:s,...i})});Ee.displayName="Button";const Is=w.forwardRef(({className:t,...e},n)=>h.jsx("textarea",{className:et("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));Is.displayName="Textarea";const xn=w.forwardRef(({className:t,type:e,...n},r)=>h.jsx("input",{type:e,className:et("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));xn.displayName="Input";function Be(t){return"/"+t}const L$=[{label:"Frontend intern (React)",value:"We're hiring a frontend intern proficient in React to build responsive user interfaces and collaborate with our design team on new features..."},{label:"Backend intern (Node)",value:"We're looking for a backend intern who knows Node.js and PostgreSQL to build internal APIs and data pipelines. They'll work on performance and reliability..."},{label:"Full stack MERN + Langchain",value:"We're seeking a full-stack MERN developer skilled in MongoDB, Express, React, and Node.js, with experience in Langchain to build end-to-end web applications with AI capabilities..."}];function CA({onSelect:t,selectedPreset:e}){return h.jsx("div",{className:"flex flex-wrap gap-2",children:L$.map((n,r)=>h.jsx(_e.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>t(n.value),className:`px-4 py-2 text-sm rounded-full border transition-all duration-200 ${e===n.value?"bg-[#1E3A8A] text-white border-[#1E3A8A]":"bg-white text-gray-600 border-gray-200 hover:border-[#1E3A8A] hover:text-[#1E3A8A]"}`,children:n.label},r))})}const F$="https://bridge-assessements.onrender.com",Ls=`${F$}/api`;async function hm(t,e,n,r){const i=n!==void 0,s={...r};return i&&(s["Content-Type"]="application/json"),await fetch(e,{method:t,headers:s,body:i?JSON.stringify(n):void 0})}async function fm(t){if(t.ok)return;let e=`${t.status.toString()} ${t.statusText}`;try{const n=await t.text();n&&(e+=": "+n)}catch{}throw new Error(e)}async function Ya(t,e={}){const n=await hm("GET",`${Ls}${t}`,void 0,e);return await fm(n),n}async function Fs(t,e,n={}){const r=await hm("POST",`${Ls}${t}`,e,n);return await fm(r),r}async function TA(t,e,n={}){const r=await hm("PATCH",`${Ls}${t}`,e,n);return await fm(r),r}async function EA(t,e={},n){const r=await hm("DELETE",`${Ls}${t}`,n,e);return await fm(r),r}function Kt(t){return t instanceof Error?{success:!1,error:t.message}:typeof t=="string"?{success:!1,error:t}:{success:!1,error:`Unknown error: ${String(t)}`}}const U$=()=>{};var O1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},B$=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},_A={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,f=s>>2,m=(s&3)<<4|l>>4;let g=(l&15)<<2|d>>6,y=d&63;u||(y=64,o||(g=64)),r.push(n[f],n[m],n[g],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(PA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):B$(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||d==null||m==null)throw new V$;const g=s<<2|l>>4;if(r.push(g),d!==64){const y=l<<4&240|d>>2;if(r.push(y),m!==64){const C=d<<6&192|m;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class V$ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const z$=function(t){const e=PA(t);return _A.encodeByteArray(e,!0)},IA=function(t){return z$(t).replace(/\./g,"")},NA=function(t){try{return _A.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $$(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W$=()=>$$().__FIREBASE_DEFAULTS__,H$=()=>{if(typeof process>"u"||typeof O1>"u")return;const t=O1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},q$=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&NA(t[1]);return e&&JSON.parse(e)},Ax=()=>{try{return U$()||W$()||H$()||q$()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},G$=t=>{var e,n;return(n=(e=Ax())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},AA=()=>{var t;return(t=Ax())==null?void 0:t.config},RA=t=>{var e;return(e=Ax())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K${constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Y$(t){return(await fetch(t,{credentials:"include"})).ok}const Ku={};function J$(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ku))Ku[e]?t.emulator.push(e):t.prod.push(e);return t}function Q$(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let L1=!1;function X$(t,e){if(typeof window>"u"||typeof document>"u"||!pm(window.location.host)||Ku[t]===e||Ku[t]||L1)return;Ku[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",s=J$().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{L1=!0,o()},g}function f(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=Q$(r),y=n("text"),C=document.getElementById(y)||document.createElement("span"),x=n("learnmore"),k=document.getElementById(x)||document.createElement("a"),T=n("preprendIcon"),_=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const P=g.element;l(P),f(k,x);const E=d();u(_,T),P.append(_,C,k,E),document.body.appendChild(P)}s?(C.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Z$(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gn())}function e7(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function MA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function t7(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function n7(){const t=Gn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function DA(){try{return typeof indexedDB=="object"}catch{return!1}}function jA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}function r7(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i7="FirebaseError";class Qi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=i7,Object.setPrototypeOf(this,Qi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ja.prototype.create)}}class Ja{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?s7(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Qi(i,l,r)}}function s7(t,e){return t.replace(o7,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const o7=/\{\$([^}]+)}/g;function a7(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ma(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(F1(s)&&F1(o)){if(!Ma(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function F1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ou(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Lu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function l7(t,e){const n=new c7(t,e);return n.subscribe.bind(n)}class c7{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");u7(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Zv),i.error===void 0&&(i.error=Zv),i.complete===void 0&&(i.complete=Zv);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function u7(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Zv(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d7=1e3,h7=2,f7=14400*1e3,p7=.5;function U1(t,e=d7,n=h7){const r=e*Math.pow(n,t),i=Math.round(p7*r*(Math.random()-.5)*2);return Math.min(f7,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(t){return t&&t._delegate?t._delegate:t}class Hi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m7{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new K$;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(v7(e))try{this.getOrInitializeService({instanceIdentifier:xa})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=xa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xa){return this.instances.has(e)}getOptions(e=xa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:g7(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=xa){return this.component?this.component.multipleInstances?e:xa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function g7(t){return t===xa?void 0:t}function v7(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y7{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new m7(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Pt||(Pt={}));const b7={debug:Pt.DEBUG,verbose:Pt.VERBOSE,info:Pt.INFO,warn:Pt.WARN,error:Pt.ERROR,silent:Pt.SILENT},x7=Pt.INFO,w7={[Pt.DEBUG]:"log",[Pt.VERBOSE]:"log",[Pt.INFO]:"info",[Pt.WARN]:"warn",[Pt.ERROR]:"error"},k7=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=w7[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Rx{constructor(e){this.name=e,this._logLevel=x7,this._logHandler=k7,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?b7[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pt.DEBUG,...e),this._logHandler(this,Pt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pt.VERBOSE,...e),this._logHandler(this,Pt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pt.INFO,...e),this._logHandler(this,Pt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pt.WARN,...e),this._logHandler(this,Pt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pt.ERROR,...e),this._logHandler(this,Pt.ERROR,...e)}}const S7=(t,e)=>e.some(n=>t instanceof n);let B1,V1;function C7(){return B1||(B1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function T7(){return V1||(V1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const OA=new WeakMap,P0=new WeakMap,LA=new WeakMap,ey=new WeakMap,Mx=new WeakMap;function E7(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(jo(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&OA.set(n,t)}).catch(()=>{}),Mx.set(e,t),e}function P7(t){if(P0.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});P0.set(t,e)}let _0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return P0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||LA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return jo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function _7(t){_0=t(_0)}function I7(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ty(this),e,...n);return LA.set(r,e.sort?e.sort():[e]),jo(r)}:T7().includes(t)?function(...e){return t.apply(ty(this),e),jo(OA.get(this))}:function(...e){return jo(t.apply(ty(this),e))}}function N7(t){return typeof t=="function"?I7(t):(t instanceof IDBTransaction&&P7(t),S7(t,C7())?new Proxy(t,_0):t)}function jo(t){if(t instanceof IDBRequest)return E7(t);if(ey.has(t))return ey.get(t);const e=N7(t);return e!==t&&(ey.set(t,e),Mx.set(e,t)),e}const ty=t=>Mx.get(t);function FA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=jo(o);return r&&o.addEventListener("upgradeneeded",u=>{r(jo(o.result),u.oldVersion,u.newVersion,jo(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const A7=["get","getKey","getAll","getAllKeys","count"],R7=["put","add","delete","clear"],ny=new Map;function z1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ny.get(e))return ny.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=R7.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||A7.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),i&&u.done]))[0]};return ny.set(e,s),s}_7(t=>({...t,get:(e,n,r)=>z1(e,n)||t.get(e,n,r),has:(e,n)=>!!z1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M7{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(D7(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function D7(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const I0="@firebase/app",$1="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns=new Rx("@firebase/app"),j7="@firebase/app-compat",O7="@firebase/analytics-compat",L7="@firebase/analytics",F7="@firebase/app-check-compat",U7="@firebase/app-check",B7="@firebase/auth",V7="@firebase/auth-compat",z7="@firebase/database",$7="@firebase/data-connect",W7="@firebase/database-compat",H7="@firebase/functions",q7="@firebase/functions-compat",G7="@firebase/installations",K7="@firebase/installations-compat",Y7="@firebase/messaging",J7="@firebase/messaging-compat",Q7="@firebase/performance",X7="@firebase/performance-compat",Z7="@firebase/remote-config",e9="@firebase/remote-config-compat",t9="@firebase/storage",n9="@firebase/storage-compat",r9="@firebase/firestore",i9="@firebase/ai",s9="@firebase/firestore-compat",o9="firebase",a9="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0="[DEFAULT]",l9={[I0]:"fire-core",[j7]:"fire-core-compat",[L7]:"fire-analytics",[O7]:"fire-analytics-compat",[U7]:"fire-app-check",[F7]:"fire-app-check-compat",[B7]:"fire-auth",[V7]:"fire-auth-compat",[z7]:"fire-rtdb",[$7]:"fire-data-connect",[W7]:"fire-rtdb-compat",[H7]:"fire-fn",[q7]:"fire-fn-compat",[G7]:"fire-iid",[K7]:"fire-iid-compat",[Y7]:"fire-fcm",[J7]:"fire-fcm-compat",[Q7]:"fire-perf",[X7]:"fire-perf-compat",[Z7]:"fire-rc",[e9]:"fire-rc-compat",[t9]:"fire-gcs",[n9]:"fire-gcs-compat",[r9]:"fire-fst",[s9]:"fire-fst-compat",[i9]:"fire-vertex","fire-js":"fire-js",[o9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp=new Map,c9=new Map,A0=new Map;function W1(t,e){try{t.container.addComponent(e)}catch(n){Ns.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function As(t){const e=t.name;if(A0.has(e))return Ns.debug(`There were multiple attempts to register component ${e}.`),!1;A0.set(e,t);for(const n of kp.values())W1(n,t);for(const n of c9.values())W1(n,t);return!0}function Mc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ai(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Oo=new Ja("app","Firebase",u9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d9{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Hi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Oo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd=a9;function UA(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:N0,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Oo.create("bad-app-name",{appName:String(i)});if(n||(n=AA()),!n)throw Oo.create("no-options");const s=kp.get(i);if(s){if(Ma(n,s.options)&&Ma(r,s.config))return s;throw Oo.create("duplicate-app",{appName:i})}const o=new y7(i);for(const u of A0.values())o.addComponent(u);const l=new d9(n,r,o);return kp.set(i,l),l}function BA(t=N0){const e=kp.get(t);if(!e&&t===N0&&AA())return UA();if(!e)throw Oo.create("no-app",{appName:t});return e}function Bi(t,e,n){let r=l9[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ns.warn(o.join(" "));return}As(new Hi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h9="firebase-heartbeat-database",f9=1,vd="firebase-heartbeat-store";let ry=null;function VA(){return ry||(ry=FA(h9,f9,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(vd)}catch(n){console.warn(n)}}}}).catch(t=>{throw Oo.create("idb-open",{originalErrorMessage:t.message})})),ry}async function p9(t){try{const n=(await VA()).transaction(vd),r=await n.objectStore(vd).get(zA(t));return await n.done,r}catch(e){if(e instanceof Qi)Ns.warn(e.message);else{const n=Oo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ns.warn(n.message)}}}async function H1(t,e){try{const r=(await VA()).transaction(vd,"readwrite");await r.objectStore(vd).put(e,zA(t)),await r.done}catch(n){if(n instanceof Qi)Ns.warn(n.message);else{const r=Oo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ns.warn(r.message)}}}function zA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m9=1024,g9=30;class v9{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new b9(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=q1();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>g9){const o=x9(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ns.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=q1(),{heartbeatsToSend:r,unsentEntries:i}=y9(this._heartbeatsCache.heartbeats),s=IA(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Ns.warn(n),""}}}function q1(){return new Date().toISOString().substring(0,10)}function y9(t,e=m9){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),G1(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),G1(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class b9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return DA()?jA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await p9(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return H1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return H1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function G1(t){return IA(JSON.stringify({version:2,heartbeats:t})).length}function x9(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w9(t){As(new Hi("platform-logger",e=>new M7(e),"PRIVATE")),As(new Hi("heartbeat",e=>new v9(e),"PRIVATE")),Bi(I0,$1,t),Bi(I0,$1,"esm2020"),Bi("fire-js","")}w9("");var k9="firebase",S9="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bi(k9,S9,"app");const $A="@firebase/installations",Dx="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA=1e4,HA=`w:${Dx}`,qA="FIS_v2",C9="https://firebaseinstallations.googleapis.com/v1",T9=3600*1e3,E9="installations",P9="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _9={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Da=new Ja(E9,P9,_9);function GA(t){return t instanceof Qi&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA({projectId:t}){return`${C9}/projects/${t}/installations`}function YA(t){return{token:t.token,requestStatus:2,expiresIn:N9(t.expiresIn),creationTime:Date.now()}}async function JA(t,e){const r=(await e.json()).error;return Da.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function QA({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function I9(t,{refreshToken:e}){const n=QA(t);return n.append("Authorization",A9(e)),n}async function XA(t){const e=await t();return e.status>=500&&e.status<600?t():e}function N9(t){return Number(t.replace("s","000"))}function A9(t){return`${qA} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R9({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=KA(t),i=QA(t),s=e.getImmediate({optional:!0});if(s){const d=await s.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const o={fid:n,authVersion:qA,appId:t.appId,sdkVersion:HA},l={method:"POST",headers:i,body:JSON.stringify(o)},u=await XA(()=>fetch(r,l));if(u.ok){const d=await u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:YA(d.authToken)}}else throw await JA("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M9(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D9=/^[cdef][\w-]{21}$/,R0="";function j9(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=O9(t);return D9.test(n)?n:R0}catch{return R0}}function O9(t){return M9(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mm(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR=new Map;function tR(t,e){const n=mm(t);nR(n,e),L9(n,e)}function nR(t,e){const n=eR.get(t);if(n)for(const r of n)r(e)}function L9(t,e){const n=F9();n&&n.postMessage({key:t,fid:e}),U9()}let Ca=null;function F9(){return!Ca&&"BroadcastChannel"in self&&(Ca=new BroadcastChannel("[Firebase] FID Change"),Ca.onmessage=t=>{nR(t.data.key,t.data.fid)}),Ca}function U9(){eR.size===0&&Ca&&(Ca.close(),Ca=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B9="firebase-installations-database",V9=1,ja="firebase-installations-store";let iy=null;function jx(){return iy||(iy=FA(B9,V9,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ja)}}})),iy}async function Sp(t,e){const n=mm(t),i=(await jx()).transaction(ja,"readwrite"),s=i.objectStore(ja),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&tR(t,e.fid),e}async function rR(t){const e=mm(t),r=(await jx()).transaction(ja,"readwrite");await r.objectStore(ja).delete(e),await r.done}async function gm(t,e){const n=mm(t),i=(await jx()).transaction(ja,"readwrite"),s=i.objectStore(ja),o=await s.get(n),l=e(o);return l===void 0?await s.delete(n):await s.put(l,n),await i.done,l&&(!o||o.fid!==l.fid)&&tR(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ox(t){let e;const n=await gm(t.appConfig,r=>{const i=z9(r),s=$9(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===R0?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function z9(t){const e=t||{fid:j9(),registrationStatus:0};return iR(e)}function $9(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Da.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=W9(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:H9(t)}:{installationEntry:e}}async function W9(t,e){try{const n=await R9(t,e);return Sp(t.appConfig,n)}catch(n){throw GA(n)&&n.customData.serverCode===409?await rR(t.appConfig):await Sp(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function H9(t){let e=await K1(t.appConfig);for(;e.registrationStatus===1;)await ZA(100),e=await K1(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Ox(t);return r||n}return e}function K1(t){return gm(t,e=>{if(!e)throw Da.create("installation-not-found");return iR(e)})}function iR(t){return q9(t)?{fid:t.fid,registrationStatus:0}:t}function q9(t){return t.registrationStatus===1&&t.registrationTime+WA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G9({appConfig:t,heartbeatServiceProvider:e},n){const r=K9(t,n),i=I9(t,n),s=e.getImmediate({optional:!0});if(s){const d=await s.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const o={installation:{sdkVersion:HA,appId:t.appId}},l={method:"POST",headers:i,body:JSON.stringify(o)},u=await XA(()=>fetch(r,l));if(u.ok){const d=await u.json();return YA(d)}else throw await JA("Generate Auth Token",u)}function K9(t,{fid:e}){return`${KA(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lx(t,e=!1){let n;const r=await gm(t.appConfig,s=>{if(!sR(s))throw Da.create("not-registered");const o=s.authToken;if(!e&&Q9(o))return s;if(o.requestStatus===1)return n=Y9(t,e),s;{if(!navigator.onLine)throw Da.create("app-offline");const l=Z9(s);return n=J9(t,l),l}});return n?await n:r.authToken}async function Y9(t,e){let n=await Y1(t.appConfig);for(;n.authToken.requestStatus===1;)await ZA(100),n=await Y1(t.appConfig);const r=n.authToken;return r.requestStatus===0?Lx(t,e):r}function Y1(t){return gm(t,e=>{if(!sR(e))throw Da.create("not-registered");const n=e.authToken;return eW(n)?{...e,authToken:{requestStatus:0}}:e})}async function J9(t,e){try{const n=await G9(t,e),r={...e,authToken:n};return await Sp(t.appConfig,r),n}catch(n){if(GA(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await rR(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Sp(t.appConfig,r)}throw n}}function sR(t){return t!==void 0&&t.registrationStatus===2}function Q9(t){return t.requestStatus===2&&!X9(t)}function X9(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+T9}function Z9(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function eW(t){return t.requestStatus===1&&t.requestTime+WA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tW(t){const e=t,{installationEntry:n,registrationPromise:r}=await Ox(e);return r?r.catch(console.error):Lx(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nW(t,e=!1){const n=t;return await rW(n),(await Lx(n,e)).token}async function rW(t){const{registrationPromise:e}=await Ox(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iW(t){if(!t||!t.options)throw sy("App Configuration");if(!t.name)throw sy("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw sy(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function sy(t){return Da.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR="installations",sW="installations-internal",oW=t=>{const e=t.getProvider("app").getImmediate(),n=iW(e),r=Mc(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},aW=t=>{const e=t.getProvider("app").getImmediate(),n=Mc(e,oR).getImmediate();return{getId:()=>tW(n),getToken:i=>nW(n,i)}};function lW(){As(new Hi(oR,oW,"PUBLIC")),As(new Hi(sW,aW,"PRIVATE"))}lW();Bi($A,Dx);Bi($A,Dx,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cp="analytics",cW="firebase_id",uW="origin",dW=60*1e3,hW="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Fx="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn=new Rx("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fW={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},xr=new Ja("analytics","Analytics",fW);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pW(t){if(!t.startsWith(Fx)){const e=xr.create("invalid-gtag-resource",{gtagURL:t});return Hn.warn(e.message),""}return t}function aR(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function mW(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function gW(t,e){const n=mW("firebase-js-sdk-policy",{createScriptURL:pW}),r=document.createElement("script"),i=`${Fx}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function vW(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function yW(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const u=(await aR(n)).find(d=>d.measurementId===i);u&&await e[u.appId]}}catch(l){Hn.error(l)}t("config",i,s)}async function bW(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const l=await aR(n);for(const u of o){const d=l.find(m=>m.measurementId===u),f=d&&e[d.appId];if(f)s.push(f);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){Hn.error(s)}}function xW(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[l,u]=o;await bW(t,e,n,l,u)}else if(s==="config"){const[l,u]=o;await yW(t,e,n,r,l,u)}else if(s==="consent"){const[l,u]=o;t("consent",l,u)}else if(s==="get"){const[l,u,d]=o;t("get",l,u,d)}else if(s==="set"){const[l]=o;t("set",l)}else t(s,...o)}catch(l){Hn.error(l)}}return i}function wW(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=xW(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function kW(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Fx)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SW=30,CW=1e3;class TW{constructor(e={},n=CW){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const lR=new TW;function EW(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function PW(t){var o;const{appId:e,apiKey:n}=t,r={method:"GET",headers:EW(n)},i=hW.replace("{app-id}",e),s=await fetch(i,r);if(s.status!==200&&s.status!==304){let l="";try{const u=await s.json();(o=u.error)!=null&&o.message&&(l=u.error.message)}catch{}throw xr.create("config-fetch-failed",{httpStatus:s.status,responseMessage:l})}return s.json()}async function _W(t,e=lR,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw xr.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw xr.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new AW;return setTimeout(async()=>{l.abort()},dW),cR({appId:r,apiKey:i,measurementId:s},o,l,e)}async function cR(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=lR){var l;const{appId:s,measurementId:o}=t;try{await IW(r,e)}catch(u){if(o)return Hn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:s,measurementId:o};throw u}try{const u=await PW(t);return i.deleteThrottleMetadata(s),u}catch(u){const d=u;if(!NW(d)){if(i.deleteThrottleMetadata(s),o)return Hn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:s,measurementId:o};throw u}const f=Number((l=d==null?void 0:d.customData)==null?void 0:l.httpStatus)===503?U1(n,i.intervalMillis,SW):U1(n,i.intervalMillis),m={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return i.setThrottleMetadata(s,m),Hn.debug(`Calling attemptFetch again in ${f} millis`),cR(t,m,r,i)}}function IW(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(xr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function NW(t){if(!(t instanceof Qi)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class AW{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function RW(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o={...r,send_to:s};t("event",n,o)}}async function MW(t,e,n,r){if(r&&r.global){const i={};for(const s of Object.keys(n))i[`user_properties.${s}`]=n[s];return t("set",i),Promise.resolve()}else{const i=await e;t("config",i,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DW(){if(DA())try{await jA()}catch(t){return Hn.warn(xr.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Hn.warn(xr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function jW(t,e,n,r,i,s,o){const l=_W(t);l.then(g=>{n[g.measurementId]=g.appId,t.options.measurementId&&g.measurementId!==t.options.measurementId&&Hn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>Hn.error(g)),e.push(l);const u=DW().then(g=>{if(g)return r.getId()}),[d,f]=await Promise.all([l,u]);kW(s)||gW(s,d.measurementId),i("js",new Date);const m=(o==null?void 0:o.config)??{};return m[uW]="firebase",m.update=!0,f!=null&&(m[cW]=f),i("config",d.measurementId,m),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OW{constructor(e){this.app=e}_delete(){return delete Hl[this.app.options.appId],Promise.resolve()}}let Hl={},J1=[];const Q1={};let oy="dataLayer",LW="gtag",X1,Ux,Z1=!1;function FW(){const t=[];if(MA()&&t.push("This is a browser extension environment."),r7()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=xr.create("invalid-analytics-context",{errorInfo:e});Hn.warn(n.message)}}function UW(t,e,n){FW();const r=t.options.appId;if(!r)throw xr.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Hn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw xr.create("no-api-key");if(Hl[r]!=null)throw xr.create("already-exists",{id:r});if(!Z1){vW(oy);const{wrappedGtag:s,gtagCore:o}=wW(Hl,J1,Q1,oy,LW);Ux=s,X1=o,Z1=!0}return Hl[r]=jW(t,J1,Q1,e,X1,oy,n),new OW(t)}function BW(t=BA()){t=Sr(t);const e=Mc(t,Cp);return e.isInitialized()?e.getImmediate():VW(t)}function VW(t,e={}){const n=Mc(t,Cp);if(n.isInitialized()){const i=n.getImmediate();if(Ma(e,n.getOptions()))return i;throw xr.create("already-initialized")}return n.initialize({options:e})}function zW(t,e,n){t=Sr(t),MW(Ux,Hl[t.app.options.appId],e,n).catch(r=>Hn.error(r))}function $W(t,e,n,r){t=Sr(t),RW(Ux,Hl[t.app.options.appId],e,n,r).catch(i=>Hn.error(i))}const eE="@firebase/analytics",tE="0.10.19";function WW(){As(new Hi(Cp,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return UW(r,i,n)},"PUBLIC")),As(new Hi("analytics-internal",t,"PRIVATE")),Bi(eE,tE),Bi(eE,tE,"esm2020");function t(e){try{const n=e.getProvider(Cp).getImmediate();return{logEvent:(r,i,s)=>$W(n,r,i,s),setUserProperties:(r,i)=>zW(n,r,i)}}catch(n){throw xr.create("interop-component-reg-failed",{reason:n})}}}WW();function uR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const HW=uR,dR=new Ja("auth","Firebase",uR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp=new Rx("@firebase/auth");function qW(t,...e){Tp.logLevel<=Pt.WARN&&Tp.warn(`Auth (${Hd}): ${t}`,...e)}function $f(t,...e){Tp.logLevel<=Pt.ERROR&&Tp.error(`Auth (${Hd}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(t,...e){throw Bx(t,...e)}function Vi(t,...e){return Bx(t,...e)}function hR(t,e,n){const r={...HW(),[e]:n};return new Ja("auth","Firebase",r).create(e,{appName:t.name})}function Ts(t){return hR(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Bx(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return dR.create(t,...e)}function He(t,e,...n){if(!t)throw Bx(e,...n)}function xs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw $f(e),new Error(e)}function Rs(t,e){t||xs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function GW(){return nE()==="http:"||nE()==="https:"}function nE(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KW(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(GW()||MA()||"connection"in navigator)?navigator.onLine:!0}function YW(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,n){this.shortDelay=e,this.longDelay=n,Rs(n>e,"Short delay should be less than long delay!"),this.isMobile=Z$()||t7()}get(){return KW()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(t,e){Rs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JW={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QW=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],XW=new qd(3e4,6e4);function Yo(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Jo(t,e,n,r,i={}){return pR(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=Wd({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...s};return e7()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&pm(t.emulatorConfig.host)&&(d.credentials="include"),fR.fetch()(await mR(t,t.config.apiHost,n,l),d)})}async function pR(t,e,n){t._canInitEmulator=!1;const r={...JW,...e};try{const i=new eH(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw kf(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw kf(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw kf(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw kf(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw hR(t,f,d);pi(t,f)}}catch(i){if(i instanceof Qi)throw i;pi(t,"network-request-failed",{message:String(i)})}}async function Gd(t,e,n,r,i={}){const s=await Jo(t,e,n,r,i);return"mfaPendingCredential"in s&&pi(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function mR(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?Vx(t.config,i):`${t.config.apiScheme}://${i}`;return QW.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function ZW(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class eH{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Vi(this.auth,"network-request-failed")),XW.get())})}}function kf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Vi(t,e,r);return i.customData._tokenResponse=n,i}function rE(t){return t!==void 0&&t.enterprise!==void 0}class tH{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return ZW(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function nH(t,e){return Jo(t,"GET","/v2/recaptchaConfig",Yo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rH(t,e){return Jo(t,"POST","/v1/accounts:delete",e)}async function Ep(t,e){return Jo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function iH(t,e=!1){const n=Sr(t),r=await n.getIdToken(e),i=zx(r);He(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Yu(ay(i.auth_time)),issuedAtTime:Yu(ay(i.iat)),expirationTime:Yu(ay(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function ay(t){return Number(t)*1e3}function zx(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return $f("JWT malformed, contained fewer than 3 sections"),null;try{const i=NA(n);return i?JSON.parse(i):($f("Failed to decode base64 JWT payload"),null)}catch(i){return $f("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function iE(t){const e=zx(t);return He(e,"internal-error"),He(typeof e.exp<"u","internal-error"),He(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Qi&&sH(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function sH({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oH{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yu(this.lastLoginAt),this.creationTime=Yu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pp(t){var m;const e=t.auth,n=await t.getIdToken(),r=await yd(t,Ep(e,{idToken:n}));He(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(m=i.providerUserInfo)!=null&&m.length?gR(i.providerUserInfo):[],o=lH(t.providerData,s),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),d=l?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new D0(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function aH(t){const e=Sr(t);await Pp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function lH(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function gR(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cH(t,e){const n=await pR(t,{},async()=>{const r=Wd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await mR(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:r};return t.emulatorConfig&&pm(t.emulatorConfig.host)&&(u.credentials="include"),fR.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function uH(t,e){return Jo(t,"POST","/v2/accounts:revokeToken",Yo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){He(e.idToken,"internal-error"),He(typeof e.idToken<"u","internal-error"),He(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){He(e.length!==0,"internal-error");const n=iE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(He(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await cH(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new ql;return r&&(He(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(He(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(He(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ql,this.toJSON())}_performRefresh(){return xs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(t,e){He(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class di{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new oH(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new D0(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await yd(this,this.stsTokenManager.getToken(this.auth,e));return He(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return iH(this,e)}reload(){return aH(this)}_assign(e){this!==e&&(He(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new di({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){He(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Pp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ai(this.auth.app))return Promise.reject(Ts(this.auth));const e=await this.getIdToken();return await yd(this,rH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:m,emailVerified:g,isAnonymous:y,providerData:C,stsTokenManager:x}=n;He(m&&x,e,"internal-error");const k=ql.fromJSON(this.name,x);He(typeof m=="string",e,"internal-error"),uo(r,e.name),uo(i,e.name),He(typeof g=="boolean",e,"internal-error"),He(typeof y=="boolean",e,"internal-error"),uo(s,e.name),uo(o,e.name),uo(l,e.name),uo(u,e.name),uo(d,e.name),uo(f,e.name);const T=new di({uid:m,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:y,photoURL:o,phoneNumber:s,tenantId:l,stsTokenManager:k,createdAt:d,lastLoginAt:f});return C&&Array.isArray(C)&&(T.providerData=C.map(_=>({..._}))),u&&(T._redirectEventId=u),T}static async _fromIdTokenResponse(e,n,r=!1){const i=new ql;i.updateFromServerResponse(n);const s=new di({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Pp(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];He(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?gR(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new ql;l.updateFromIdToken(r);const u=new di({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new D0(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=new Map;function ws(t){Rs(t instanceof Function,"Expected a class definition");let e=sE.get(t);return e?(Rs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,sE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}vR.type="NONE";const oE=vR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(t,e,n){return`firebase:${t}:${e}:${n}`}class Gl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Wf(this.userKey,i.apiKey,s),this.fullPersistenceKey=Wf("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ep(this.auth,{idToken:e}).catch(()=>{});return n?di._fromGetAccountInfoResponse(this.auth,n,e):null}return di._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Gl(ws(oE),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=i[0]||ws(oE);const o=Wf(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const f=await d._get(o);if(f){let m;if(typeof f=="string"){const g=await Ep(e,{idToken:f}).catch(()=>{});if(!g)break;m=await di._fromGetAccountInfoResponse(e,g,f)}else m=di._fromJSON(e,f);d!==s&&(l=m),s=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Gl(s,e,r):(s=u[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new Gl(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(SR(e))return"Blackberry";if(CR(e))return"Webos";if(bR(e))return"Safari";if((e.includes("chrome/")||xR(e))&&!e.includes("edge/"))return"Chrome";if(kR(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function yR(t=Gn()){return/firefox\//i.test(t)}function bR(t=Gn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xR(t=Gn()){return/crios\//i.test(t)}function wR(t=Gn()){return/iemobile/i.test(t)}function kR(t=Gn()){return/android/i.test(t)}function SR(t=Gn()){return/blackberry/i.test(t)}function CR(t=Gn()){return/webos/i.test(t)}function $x(t=Gn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function dH(t=Gn()){var e;return $x(t)&&!!((e=window.navigator)!=null&&e.standalone)}function hH(){return n7()&&document.documentMode===10}function TR(t=Gn()){return $x(t)||kR(t)||CR(t)||SR(t)||/windows phone/i.test(t)||wR(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(t,e=[]){let n;switch(t){case"Browser":n=aE(Gn());break;case"Worker":n=`${aE(Gn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Hd}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fH{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,l)=>{try{const u=e(s);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pH(t,e={}){return Jo(t,"GET","/v2/passwordPolicy",Yo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mH=6;class gH{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??mH,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vH{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lE(this),this.idTokenSubscription=new lE(this),this.beforeStateQueue=new fH(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ws(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Gl.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ep(this,{idToken:e}),r=await di._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(ai(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return He(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Pp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=YW()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ai(this.app))return Promise.reject(Ts(this));const n=e?Sr(e):null;return n&&He(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&He(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ai(this.app)?Promise.reject(Ts(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ai(this.app)?Promise.reject(Ts(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ws(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await pH(this),n=new gH(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ja("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await uH(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ws(e)||this._popupRedirectResolver;He(n,this,"argument-error"),this.redirectPersistenceManager=await Gl.create(this,[ws(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(He(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return He(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ER(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(ai(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&qW(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Qa(t){return Sr(t)}let lE=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=l7(n=>this.observer=n)}get next(){return He(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yH(t){vm=t}function PR(t){return vm.loadJS(t)}function bH(){return vm.recaptchaEnterpriseScript}function xH(){return vm.gapiScript}function wH(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class kH{constructor(){this.enterprise=new SH}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class SH{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const CH="recaptcha-enterprise",_R="NO_RECAPTCHA";class TH{constructor(e){this.type=CH,this.auth=Qa(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{nH(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new tH(u);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,o(d.siteKey)}}).catch(u=>{l(u)})})}function i(s,o,l){const u=window.grecaptcha;rE(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(d=>{o(d)}).catch(()=>{o(_R)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new kH().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(l=>{if(!n&&rE(window.grecaptcha))i(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=bH();u.length!==0&&(u+=l),PR(u).then(()=>{i(l,s,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function cE(t,e,n,r=!1,i=!1){const s=new TH(t);let o;if(i)o=_R;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function j0(t,e,n,r,i){var s;if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await cE(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await cE(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EH(t,e){const n=Mc(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Ma(s,e??{}))return i;pi(i,"already-initialized")}return n.initialize({options:e})}function PH(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ws);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function _H(t,e,n){const r=Qa(t);He(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=IR(e),{host:o,port:l}=IH(e),u=l===null?"":`:${l}`,d={url:`${s}//${o}${u}/`},f=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){He(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),He(Ma(d,r.config.emulator)&&Ma(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,pm(o)?(Y$(`${s}//${o}${u}`),X$("Auth",!0)):NH()}function IR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function IH(t){const e=IR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:uE(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:uE(o)}}}function uE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function NH(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return xs("not implemented")}_getIdTokenResponse(e){return xs("not implemented")}_linkToIdToken(e,n){return xs("not implemented")}_getReauthenticationResolver(e){return xs("not implemented")}}async function AH(t,e){return Jo(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RH(t,e){return Gd(t,"POST","/v1/accounts:signInWithPassword",Yo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MH(t,e){return Gd(t,"POST","/v1/accounts:signInWithEmailLink",Yo(t,e))}async function DH(t,e){return Gd(t,"POST","/v1/accounts:signInWithEmailLink",Yo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd extends Wx{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new bd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new bd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return j0(e,n,"signInWithPassword",RH);case"emailLink":return MH(e,{email:this._email,oobCode:this._password});default:pi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return j0(e,r,"signUpPassword",AH);case"emailLink":return DH(e,{idToken:n,email:this._email,oobCode:this._password});default:pi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kl(t,e){return Gd(t,"POST","/v1/accounts:signInWithIdp",Yo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jH="http://localhost";class Oa extends Wx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Oa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):pi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new Oa(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Kl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Kl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Kl(e,n)}buildRequest(){const e={requestUri:jH,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Wd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OH(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function LH(t){const e=Ou(Lu(t)).link,n=e?Ou(Lu(e)).deep_link_id:null,r=Ou(Lu(t)).deep_link_id;return(r?Ou(Lu(r)).link:null)||r||n||e||t}class Hx{constructor(e){const n=Ou(Lu(e)),r=n.apiKey??null,i=n.oobCode??null,s=OH(n.mode??null);He(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=LH(e);try{return new Hx(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(){this.providerId=Dc.PROVIDER_ID}static credential(e,n){return bd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Hx.parseLink(n);return He(r,"argument-error"),bd._fromEmailAndCode(e,r.code,r.tenantId)}}Dc.PROVIDER_ID="password";Dc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Dc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd extends NR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo extends Kd{constructor(){super("facebook.com")}static credential(e){return Oa._fromParams({providerId:bo.PROVIDER_ID,signInMethod:bo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bo.credentialFromTaggedObject(e)}static credentialFromError(e){return bo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bo.credential(e.oauthAccessToken)}catch{return null}}}bo.FACEBOOK_SIGN_IN_METHOD="facebook.com";bo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo extends Kd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Oa._fromParams({providerId:xo.PROVIDER_ID,signInMethod:xo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return xo.credentialFromTaggedObject(e)}static credentialFromError(e){return xo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return xo.credential(n,r)}catch{return null}}}xo.GOOGLE_SIGN_IN_METHOD="google.com";xo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo extends Kd{constructor(){super("github.com")}static credential(e){return Oa._fromParams({providerId:wo.PROVIDER_ID,signInMethod:wo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wo.credentialFromTaggedObject(e)}static credentialFromError(e){return wo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wo.credential(e.oauthAccessToken)}catch{return null}}}wo.GITHUB_SIGN_IN_METHOD="github.com";wo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko extends Kd{constructor(){super("twitter.com")}static credential(e,n){return Oa._fromParams({providerId:ko.PROVIDER_ID,signInMethod:ko.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ko.credentialFromTaggedObject(e)}static credentialFromError(e){return ko.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ko.credential(n,r)}catch{return null}}}ko.TWITTER_SIGN_IN_METHOD="twitter.com";ko.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FH(t,e){return Gd(t,"POST","/v1/accounts:signUp",Yo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await di._fromIdTokenResponse(e,r,i),o=dE(r);return new La({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=dE(r);return new La({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function dE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p extends Qi{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,_p.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new _p(e,n,r,i)}}function AR(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?_p._fromErrorAndOperation(t,s,e,r):s})}async function UH(t,e,n=!1){const r=await yd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return La._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BH(t,e,n=!1){const{auth:r}=t;if(ai(r.app))return Promise.reject(Ts(r));const i="reauthenticate";try{const s=await yd(t,AR(r,i,e,t),n);He(s.idToken,r,"internal-error");const o=zx(s.idToken);He(o,r,"internal-error");const{sub:l}=o;return He(t.uid===l,r,"user-mismatch"),La._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&pi(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RR(t,e,n=!1){if(ai(t.app))return Promise.reject(Ts(t));const r="signIn",i=await AR(t,r,e),s=await La._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function VH(t,e){return RR(Qa(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MR(t){const e=Qa(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function zH(t,e,n){if(ai(t.app))return Promise.reject(Ts(t));const r=Qa(t),o=await j0(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",FH).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&MR(t),u}),l=await La._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function $H(t,e,n){return ai(t.app)?Promise.reject(Ts(t)):VH(Sr(t),Dc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&MR(t),r})}function WH(t,e,n,r){return Sr(t).onIdTokenChanged(e,n,r)}function HH(t,e,n){return Sr(t).beforeAuthStateChanged(e,n)}function Xa(t,e,n,r){return Sr(t).onAuthStateChanged(e,n,r)}function hE(t){return Sr(t).signOut()}async function qH(t){return Sr(t).delete()}const Ip="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ip,"1"),this.storage.removeItem(Ip),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GH=1e3,KH=10;class jR extends DR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=TR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);hH()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,KH):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},GH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}jR.type="LOCAL";const YH=jR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR extends DR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}OR.type="SESSION";const LR=OR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JH(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new ym(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async d=>d(n.origin,s)),u=await JH(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ym.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QH{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,u)=>{const d=qx("",20);i.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(g.data.response);break;default:clearTimeout(f),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(){return window}function XH(t){zi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(){return typeof zi().WorkerGlobalScope<"u"&&typeof zi().importScripts=="function"}async function ZH(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eq(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function tq(){return FR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR="firebaseLocalStorageDb",nq=1,Np="firebaseLocalStorage",BR="fbase_key";class Yd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function bm(t,e){return t.transaction([Np],e?"readwrite":"readonly").objectStore(Np)}function rq(){const t=indexedDB.deleteDatabase(UR);return new Yd(t).toPromise()}function O0(){const t=indexedDB.open(UR,nq);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Np,{keyPath:BR})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Np)?e(r):(r.close(),await rq(),e(await O0()))})})}async function fE(t,e,n){const r=bm(t,!0).put({[BR]:e,value:n});return new Yd(r).toPromise()}async function iq(t,e){const n=bm(t,!1).get(e),r=await new Yd(n).toPromise();return r===void 0?null:r.value}function pE(t,e){const n=bm(t,!0).delete(e);return new Yd(n).toPromise()}const sq=800,oq=3;class VR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await O0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>oq)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return FR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ym._getInstance(tq()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await ZH(),!this.activeServiceWorker)return;this.sender=new QH(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||eq()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await O0();return await fE(e,Ip,"1"),await pE(e,Ip),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>fE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>iq(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>pE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=bm(i,!1).getAll();return new Yd(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),sq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}VR.type="LOCAL";const aq=VR;new qd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lq(t,e){return e?ws(e):(He(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx extends Wx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Kl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Kl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Kl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function cq(t){return RR(t.auth,new Gx(t),t.bypassAuthState)}function uq(t){const{auth:e,user:n}=t;return He(n,e,"internal-error"),BH(n,new Gx(t),t.bypassAuthState)}async function dq(t){const{auth:e,user:n}=t;return He(n,e,"internal-error"),UH(n,new Gx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cq;case"linkViaPopup":case"linkViaRedirect":return dq;case"reauthViaPopup":case"reauthViaRedirect":return uq;default:pi(this.auth,"internal-error")}}resolve(e){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hq=new qd(2e3,1e4);class Vl extends zR{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Vl.currentPopupAction&&Vl.currentPopupAction.cancel(),Vl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return He(e,this.auth,"internal-error"),e}async onExecution(){Rs(this.filter.length===1,"Popup operations only handle one event");const e=qx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Vi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Vi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hq.get())};e()}}Vl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fq="pendingRedirect",Hf=new Map;class pq extends zR{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Hf.get(this.auth._key());if(!e){try{const r=await mq(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Hf.set(this.auth._key(),e)}return this.bypassAuthState||Hf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mq(t,e){const n=yq(e),r=vq(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function gq(t,e){Hf.set(t._key(),e)}function vq(t){return ws(t._redirectPersistence)}function yq(t){return Wf(fq,t.config.apiKey,t.name)}async function bq(t,e,n=!1){if(ai(t.app))return Promise.reject(Ts(t));const r=Qa(t),i=lq(r,e),o=await new pq(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xq=600*1e3;class wq{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!kq(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!$R(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Vi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xq&&this.cachedEventUids.clear(),this.cachedEventUids.has(mE(e))}saveEventToCache(e){this.cachedEventUids.add(mE(e)),this.lastProcessedEventTime=Date.now()}}function mE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function $R({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function kq(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $R(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sq(t,e={}){return Jo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Tq=/^https?/;async function Eq(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Sq(t);for(const n of e)try{if(Pq(n))return}catch{}pi(t,"unauthorized-domain")}function Pq(t){const e=M0(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Tq.test(n))return!1;if(Cq.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _q=new qd(3e4,6e4);function gE(){const t=zi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Iq(t){return new Promise((e,n)=>{var i,s,o;function r(){gE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gE(),n(Vi(t,"network-request-failed"))},timeout:_q.get()})}if((s=(i=zi().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=zi().gapi)!=null&&o.load)r();else{const l=wH("iframefcb");return zi()[l]=()=>{gapi.load?r():n(Vi(t,"network-request-failed"))},PR(`${xH()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw qf=null,e})}let qf=null;function Nq(t){return qf=qf||Iq(t),qf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aq=new qd(5e3,15e3),Rq="__/auth/iframe",Mq="emulator/auth/iframe",Dq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Oq(t){const e=t.config;He(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Vx(e,Mq):`https://${t.config.authDomain}/${Rq}`,r={apiKey:e.apiKey,appName:t.name,v:Hd},i=jq.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Wd(r).slice(1)}`}async function Lq(t){const e=await Nq(t),n=zi().gapi;return He(n,t,"internal-error"),e.open({where:document.body,url:Oq(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Dq,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Vi(t,"network-request-failed"),l=zi().setTimeout(()=>{s(o)},Aq.get());function u(){zi().clearTimeout(l),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Uq=500,Bq=600,Vq="_blank",zq="http://localhost";class vE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $q(t,e,n,r=Uq,i=Bq){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u={...Fq,width:r.toString(),height:i.toString(),top:s,left:o},d=Gn().toLowerCase();n&&(l=xR(d)?Vq:n),yR(d)&&(e=e||zq,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[y,C])=>`${g}${y}=${C},`,"");if(dH(d)&&l!=="_self")return Wq(e||"",l),new vE(null);const m=window.open(e||"",l,f);He(m,t,"popup-blocked");try{m.focus()}catch{}return new vE(m)}function Wq(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hq="__/auth/handler",qq="emulator/auth/handler",Gq=encodeURIComponent("fac");async function yE(t,e,n,r,i,s){He(t.config.authDomain,t,"auth-domain-config-required"),He(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Hd,eventId:i};if(e instanceof NR){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",a7(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))o[f]=m}if(e instanceof Kd){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await t._getAppCheckToken(),d=u?`#${Gq}=${encodeURIComponent(u)}`:"";return`${Kq(t)}?${Wd(l).slice(1)}${d}`}function Kq({config:t}){return t.emulator?Vx(t,qq):`https://${t.authDomain}/${Hq}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly="webStorageSupport";class Yq{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=LR,this._completeRedirectFn=bq,this._overrideRedirectResult=gq}async _openPopup(e,n,r,i){var o;Rs((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await yE(e,n,r,M0(),i);return $q(e,s,qx())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await yE(e,n,r,M0(),i);return XH(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Rs(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Lq(e),r=new wq(e);return n.register("authEvent",i=>(He(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ly,{type:ly},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[ly];s!==void 0&&n(!!s),pi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Eq(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return TR()||bR()||$x()}}const Jq=Yq;var bE="@firebase/auth",xE="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qq{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){He(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xq(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Zq(t){As(new Hi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;He(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ER(t)},d=new vH(r,i,s,u);return PH(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),As(new Hi("auth-internal",e=>{const n=Qa(e.getProvider("auth").getImmediate());return(r=>new Qq(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Bi(bE,xE,Xq(t)),Bi(bE,xE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eG=300,tG=RA("authIdTokenMaxAge")||eG;let wE=null;const nG=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>tG)return;const i=n==null?void 0:n.token;wE!==i&&(wE=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function rG(t=BA()){const e=Mc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=EH(t,{popupRedirectResolver:Jq,persistence:[aq,YH,LR]}),r=RA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=nG(s.toString());HH(n,o,()=>o(n.currentUser)),WH(n,l=>o(l))}}const i=G$("auth");return i&&_H(n,`http://${i}`),n}function iG(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}yH({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Vi("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",iG().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Zq("Browser");const sG={apiKey:"AIzaSyCjMiRlX0HERCvA4qv0o1MO7fM5mzkdkCo",authDomain:"bridge-assessments.firebaseapp.com",projectId:"bridge-assessments",storageBucket:"bridge-assessments.firebasestorage.app",messagingSenderId:"558749763922",appId:"1:558749763922:web:678d119fd722d9f4a1128b",measurementId:"G-QY8DBN3LVF"},WR=UA(sG);let oG=null;try{typeof window<"u"&&(oG=BW(WR))}catch(t){console.warn("Firebase Analytics initialization failed:",t)}const st=rG(WR);async function aG(t,e){try{let n=e;if(!n){const o=st.currentUser;if(!o)return{success:!1,error:"No user is currently signed in"};n=await o.getIdToken()}const r={title:t.title,description:t.description,timeLimit:t.timeLimit},i=await fetch(`${Ls}/assessments`,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify(r)}),s=await i.json();return i.status===403&&s.error==="SUBSCRIPTION_LIMIT_REACHED"?{success:!1,error:"SUBSCRIPTION_LIMIT_REACHED"}:i.ok?s&&s._id?{success:!0,data:s}:s.success&&s.data?{success:!0,data:s.data}:{success:!1,error:s.error||"Failed to create assessment"}:{success:!1,error:s.error||`Failed to create assessment (${i.status})`}}catch(n){return Kt(n)}}async function lG(){try{const t=st.currentUser;if(!t)return console.error(" [getAssessments] No user is currently signed in"),{success:!1,error:"No user is currently signed in"};console.log(" [getAssessments] Getting ID token for user:",t.email);const e=await t.getIdToken();console.log(" [getAssessments] Got token, making request to /assessments");const n=await Ya("/assessments",{Authorization:`Bearer ${e}`});console.log(" [getAssessments] Response status:",n.status);const r=await n.json();return console.log(" [getAssessments] Response data:",r),console.log(" [getAssessments] Data type:",Array.isArray(r)?"array":typeof r),console.log(" [getAssessments] Data length:",Array.isArray(r)?r.length:"not an array"),{success:!0,data:Array.isArray(r)?r:[]}}catch(t){return console.error(" [getAssessments] Error:",t),Kt(t)}}async function HR(t,e){try{let n=e;if(!n){const s=st.currentUser;if(!s)return{success:!1,error:"No user is currently signed in"};n=await s.getIdToken()}return{success:!0,data:await(await Ya(`/assessments/${t}`,{Authorization:`Bearer ${n}`})).json()}}catch(n){return Kt(n)}}async function cG(t,e,n){try{let r=n;if(!r){const l=st.currentUser;if(!l)return{success:!1,error:"No user is currently signed in"};r=await l.getIdToken()}const i={};e.title!==void 0&&(i.title=e.title),e.description!==void 0&&(i.description=e.description),e.timeLimit!==void 0&&(i.timeLimit=e.timeLimit),e.numInterviewQuestions!==void 0&&(i.numInterviewQuestions=e.numInterviewQuestions),e.starterFilesGitHubLink!==void 0&&(i.starterFilesGitHubLink=e.starterFilesGitHubLink),e.interviewerCustomInstructions!==void 0&&(i.interviewerCustomInstructions=e.interviewerCustomInstructions),e.isSmartInterviewerEnabled!==void 0&&(i.isSmartInterviewerEnabled=e.isSmartInterviewerEnabled);const o=await(await TA(`/assessments/${t}`,i,{Authorization:`Bearer ${r}`})).json();return o&&o._id?{success:!0,data:o}:o.success&&o.data?{success:!0,data:o.data}:{success:!1,error:o.error||"Failed to update assessment"}}catch(r){return Kt(r)}}async function uG(t){try{const e=st.currentUser;if(!e)return{success:!1,error:"No user is currently signed in"};const n=await e.getIdToken(),i=await(await EA(`/assessments/${t}`,{Authorization:`Bearer ${n}`})).json();return i&&i.message?{success:!0,data:i}:i.success&&i.data?{success:!0,data:i.data}:{success:!1,error:i.error||"Failed to delete assessment"}}catch(e){return Kt(e)}}async function dG(t,e){var n,r,i;try{let s=e;if(!s){const u=st.currentUser;if(!u)return{success:!1,error:"No user is currently signed in"};s=await u.getIdToken()}console.log(" [generateAssessmentData] Calling backend to generate assessment data"),console.log("   Job description length:",t.length,"characters");const o=await fetch(`${Ls}/assessments/generate`,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({description:t})});console.log(" [generateAssessmentData] Response status:",o.status);let l;try{l=await o.json()}catch(u){if(o.status===403)return{success:!1,error:"SUBSCRIPTION_LIMIT_REACHED"};throw u}return o.status===403?(console.log(" [generateAssessmentData] 403 response detected:",l),(l==null?void 0:l.error)==="SUBSCRIPTION_LIMIT_REACHED"||(n=l==null?void 0:l.message)!=null&&n.includes("free tier limit")||(r=l==null?void 0:l.message)!=null&&r.includes("limit")||JSON.stringify(l||{}).includes("SUBSCRIPTION_LIMIT_REACHED")?(console.log(" [generateAssessmentData] Detected subscription limit error, returning early"),{success:!1,error:"SUBSCRIPTION_LIMIT_REACHED"}):(console.warn(" [generateAssessmentData] 403 response but couldn't parse error format, assuming subscription limit"),{success:!1,error:"SUBSCRIPTION_LIMIT_REACHED"})):(console.log(" [generateAssessmentData] Response data:",{hasTitle:!!l.title,hasDescription:!!l.description,descriptionLength:(i=l.description)==null?void 0:i.length,hasTimeLimit:!!l.timeLimit,fullResult:l}),o.ok?l&&l.title&&l.description&&l.timeLimit?(console.log(" [generateAssessmentData] Successfully generated:",{title:l.title,descriptionLength:l.description.length,timeLimit:l.timeLimit}),{success:!0,data:l}):(console.error(" [generateAssessmentData] Invalid response format - missing fields:",{hasTitle:!!l.title,hasDescription:!!l.description,hasTimeLimit:!!l.timeLimit,result:l}),{success:!1,error:l.error||"Failed to generate assessment data - missing required fields"}):o.status===403?{success:!1,error:"SUBSCRIPTION_LIMIT_REACHED"}:{success:!1,error:(l==null?void 0:l.error)||(l==null?void 0:l.message)||`Failed to generate assessment data (${o.status})`})}catch(s){return Kt(s)}}async function hG(t,e,n){try{let r=n;if(!r){const o=st.currentUser;if(!o)return{success:!1,error:"No user is currently signed in"};r=await o.getIdToken()}console.log(" [chatWithAssessment] Sending chat message:",{assessmentId:t,message:e.message.substring(0,50)+"..."});const i=await Fs(`/assessments/${t}/chat`,e,{Authorization:`Bearer ${r}`});console.log(" [chatWithAssessment] Response status:",i.status);const s=await i.json();return s&&s.updates&&s.changedSections?(console.log(" [chatWithAssessment] Chat successful:",{changedSections:s.changedSections,responseMessage:s.responseMessage}),{success:!0,data:s}):(console.error(" [chatWithAssessment] Invalid response format:",s),{success:!1,error:s.error||"Failed to process chat message"})}catch(r){return Kt(r)}}function fG(){const[t,e]=w.useState("ai"),[n,r]=w.useState(""),[i,s]=w.useState(""),[o,l]=w.useState(""),[u,d]=w.useState(60),[f,m]=w.useState(""),[g,y]=w.useState(!1),[C,x]=w.useState(""),[k,T]=w.useState(null),[_,P]=w.useState(!1);w.useEffect(()=>{const R=Xa(st,j=>{if(console.log(" [CreateAssessment] Auth state changed, user:",j==null?void 0:j.email),T(j),P(!0),!j){console.warn(" [CreateAssessment] No user found, redirecting to landing"),window.location.href="/";return}const U=localStorage.getItem("pending_creation_mode");(U==="ai"||U==="manual")&&(console.log(" [CreateAssessment] Found pending creation mode:",U),e(U),localStorage.removeItem("pending_creation_mode"));const z=localStorage.getItem("pending_job_description");z&&(console.log(" [CreateAssessment] Found pending job description, auto-filling..."),r(z),localStorage.removeItem("pending_job_description"));const F=localStorage.getItem("pending_manual_title"),W=localStorage.getItem("pending_manual_description"),Y=localStorage.getItem("pending_manual_timeLimit"),K=localStorage.getItem("pending_starter_files_link");if(F&&(s(F),localStorage.removeItem("pending_manual_title")),W&&(l(W),localStorage.removeItem("pending_manual_description")),Y){const X=parseInt(Y,10);!isNaN(X)&&X>0&&d(X),localStorage.removeItem("pending_manual_timeLimit")}K&&(m(K),localStorage.removeItem("pending_starter_files_link"))});return()=>R()},[]);const E="Looking for a backend intern with Node + Postgres experience to build internal APIs",I=async()=>{if(!k||!_){x("Please wait for authentication to complete");return}y(!0),x("");try{const R=await k.getIdToken();let j;if(t==="ai"){if(!n.trim()){x("Please enter a job description"),y(!1);return}console.log(" [CreateAssessment] Generating assessment data with AI...");const F=await dG(n.trim(),R);if(!F.success){const X="error"in F?F.error:"Failed to generate assessment data";console.log(" [CreateAssessment] Generate error:",X,F);const se=String(X).toLowerCase(),H=JSON.stringify(F||{}).toLowerCase();if(X==="SUBSCRIPTION_LIMIT_REACHED"||se.includes("subscription_limit_reached")||se.includes("free tier limit")||se.includes("limit")||se.includes("403")||H.includes("subscription_limit_reached")||H.includes("free tier limit")){x("You've reached the free tier limit of 1 assessment. Upgrade to create unlimited assessments."),y(!1),window.confirm(`You've reached the free tier limit of 1 assessment.

Upgrade to create unlimited assessments.

Would you like to view subscription plans?`)&&(window.location.href=Be("Subscription"));return}console.error(" [CreateAssessment] Generation error:",X);const D=X.length>200?"Failed to generate assessment. Please try again.":X;x(D),y(!1);return}const{title:W,description:Y,timeLimit:K}=F.data;j={title:W,description:Y,timeLimit:K}}else{if(!i.trim()){x("Please enter an assessment title"),y(!1);return}if(!o.trim()){x("Please enter an assessment description"),y(!1);return}if(u<1||u>10080){x("Time limit must be between 1 and 10080 minutes (1 week)"),y(!1);return}console.log(" [CreateAssessment] Creating assessment manually..."),j={title:i.trim(),description:o.trim(),timeLimit:u}}t==="manual"&&f.trim()&&(j.starterFilesGitHubLink=f.trim());const U=await aG(j,R);if(!U.success){const F="error"in U?U.error:"Failed to create assessment";if(F==="SUBSCRIPTION_LIMIT_REACHED"||F.includes("limit")){x("You've reached the free tier limit of 1 assessment. Upgrade to create unlimited assessments."),y(!1),window.confirm(`You've reached the free tier limit of 1 assessment.

Upgrade to create unlimited assessments.

Would you like to view subscription plans?`)&&(window.location.href=Be("Subscription"));return}console.error(" [CreateAssessment] Error:",F),x(F),y(!1);return}console.log(" [CreateAssessment] Assessment created successfully:",U.data),localStorage.removeItem("pending_job_description"),localStorage.removeItem("pending_creation_mode"),localStorage.removeItem("pending_manual_title"),localStorage.removeItem("pending_manual_description"),localStorage.removeItem("pending_manual_timeLimit"),localStorage.removeItem("pending_starter_files_link");const z=U.data._id;window.location.href=Be("AssessmentEditor")+`?id=${z}`}catch(R){console.error(" [CreateAssessment] Unexpected error:",R);const j=R instanceof Error?R.message:String(R),U=j.toLowerCase();if(U.includes("subscription_limit_reached")||U.includes("free tier limit")||U.includes("403")||U.includes("limit")||U.includes("403")&&U.includes("subscription")){x("You've reached the free tier limit of 1 assessment. Upgrade to create unlimited assessments."),y(!1),window.confirm(`You've reached the free tier limit of 1 assessment.

Upgrade to create unlimited assessments.

Would you like to view subscription plans?`)&&(window.location.href=Be("Subscription"));return}const z=j.length>200?"An unexpected error occurred. Please try again.":j;x(z),y(!1)}},A=R=>{R.key==="Enter"&&!R.shiftKey&&(R.preventDefault(),I())},L=R=>{r(R)};return h.jsx("div",{className:"min-h-screen bg-gradient-to-b from-[#dbeafe] via-[#eff6ff] to-white",children:h.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-16 md:py-24",children:[h.jsx(_e.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.5},className:"mb-8",children:h.jsxs(gr,{to:Be("Home"),className:"inline-flex items-center gap-2 text-sm text-gray-600 hover:text-[#1E3A8A] transition-colors",children:[h.jsx(Pc,{className:"w-4 h-4"}),"Back to Assessments"]})}),h.jsxs(_e.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[h.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-4 tracking-tight",children:["Describe the role. ",h.jsx("br",{})," Bridge builds the evaluation pipeline."]}),h.jsx("p",{className:"text-lg text-gray-500 max-w-2xl mx-auto leading-relaxed",children:t==="ai"?"Drop in a job description, Bridge creates the take-home project, generates AI interview questions, and scores submissions for you.":"Create your own assessment by providing the title, description, and time limit."})]}),h.jsxs(_e.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5,delay:.15},className:"flex justify-center mb-8 gap-4",children:[h.jsx("button",{onClick:()=>e("ai"),className:`px-6 py-3 rounded-xl font-medium transition-all ${t==="ai"?"bg-[#1E3A8A] text-white shadow-md":"bg-white text-gray-700 border border-gray-200 hover:border-[#1E3A8A]/30"}`,children:"Generate with AI"}),h.jsx("button",{onClick:()=>e("manual"),className:`px-6 py-3 rounded-xl font-medium transition-all ${t==="manual"?"bg-[#1E3A8A] text-white shadow-md":"bg-white text-gray-700 border border-gray-200 hover:border-[#1E3A8A]/30"}`,children:"Create Manually"})]}),h.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"bg-white rounded-2xl shadow-[0_4px_40px_rgba(0,0,0,0.06)] border border-gray-100 overflow-hidden",children:[h.jsxs("div",{className:"p-6 md:p-8",children:[h.jsx(Bo,{mode:"wait",children:t==="ai"?h.jsxs(_e.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},children:[h.jsx("div",{className:"mb-5",children:h.jsx(CA,{onSelect:L,selectedPreset:n})}),h.jsx("div",{className:"relative",children:h.jsx(Is,{value:n,onChange:R=>r(R.target.value),onKeyDown:A,placeholder:E,className:"w-full min-h-[180px] text-base md:text-lg leading-relaxed resize-none border-0 focus-visible:ring-0 focus-visible:ring-offset-0 placeholder:text-gray-400 p-0"})}),h.jsxs("p",{className:"text-sm text-gray-400 mt-4",children:["Press"," ",h.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-gray-500 font-mono text-xs",children:"Enter"})," ","to generate "," ",h.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-gray-500 font-mono text-xs",children:"Shift+Enter"})," ","for new line"]})]},"ai-mode"):h.jsxs(_e.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"space-y-5",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assessment Title"}),h.jsx(xn,{type:"text",value:i,onChange:R=>s(R.target.value),placeholder:"e.g., Backend API Development Assessment",className:"w-full"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assessment Description"}),h.jsx(Is,{value:o,onChange:R=>l(R.target.value),placeholder:"Describe the take-home project, requirements, and what you're looking for in the candidate's submission...",className:"w-full min-h-[200px] text-base leading-relaxed"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Limit (minutes)"}),h.jsx(xn,{type:"number",value:u,onChange:R=>{const j=parseInt(R.target.value,10);!isNaN(j)&&j>0&&d(j)},min:"1",max:"10080",className:"w-full"}),h.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Enter time limit in minutes (1-10080, max 1 week)"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Starter Files GitHub Link (Optional)"}),h.jsx(xn,{type:"url",value:f,onChange:R=>m(R.target.value),placeholder:"https://github.com/username/repo",className:"w-full"}),h.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Provide a GitHub repository link with starter files and instructions. Candidates will have access to this link when they start the assessment."})]})]},"manual-mode")}),C&&h.jsxs(_e.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-start gap-2 p-4 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700 mt-4",children:[h.jsx(tm,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("p",{className:"font-medium mb-1",children:C}),C.includes("free tier limit")&&h.jsx(gr,{to:Be("Subscription"),className:"text-red-800 hover:text-red-900 underline font-medium",children:"Upgrade to create unlimited assessments "})]})]})]}),h.jsx("div",{className:"px-6 md:px-8 py-4 bg-gray-50/50 border-t border-gray-100 flex justify-end",children:h.jsx(Ee,{onClick:I,disabled:g||!_||!k||t==="ai"&&!n.trim()||t==="manual"&&(!i.trim()||!o.trim()||u<1),className:"bg-[#FFFF00] hover:bg-[#faed00] text-[#1E3A8A] px-6 py-2.5 h-auto rounded-xl font-semibold transition-all duration-200 disabled:opacity-50 shadow-sm",children:h.jsx(Bo,{mode:"wait",children:g?h.jsxs(_e.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex items-center gap-2",children:[h.jsx("span",{children:"Generating"}),h.jsxs("span",{className:"flex gap-0.5",children:[h.jsx(_e.span,{animate:{opacity:[.2,1,.2]},transition:{duration:1.2,repeat:1/0,delay:0},children:"."}),h.jsx(_e.span,{animate:{opacity:[.2,1,.2]},transition:{duration:1.2,repeat:1/0,delay:.2},children:"."}),h.jsx(_e.span,{animate:{opacity:[.2,1,.2]},transition:{duration:1.2,repeat:1/0,delay:.4},children:"."})]})]},"loading"):h.jsxs(_e.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex items-center gap-2",children:[t==="ai"?"Generate with AI":"Create Assessment",h.jsx(_c,{className:"w-4 h-4"})]},"default")})})})]})]})})}function pG(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const mG=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,gG=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,vG={};function kE(t,e){return(vG.jsx?gG:mG).test(t)}const yG=/[ \t\n\f\r]/g;function bG(t){return typeof t=="object"?t.type==="text"?SE(t.value):!1:SE(t)}function SE(t){return t.replace(yG,"")===""}class Jd{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}Jd.prototype.normal={};Jd.prototype.property={};Jd.prototype.space=void 0;function qR(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new Jd(n,r,e)}function L0(t){return t.toLowerCase()}class lr{constructor(e,n){this.attribute=n,this.property=e}}lr.prototype.attribute="";lr.prototype.booleanish=!1;lr.prototype.boolean=!1;lr.prototype.commaOrSpaceSeparated=!1;lr.prototype.commaSeparated=!1;lr.prototype.defined=!1;lr.prototype.mustUseProperty=!1;lr.prototype.number=!1;lr.prototype.overloadedBoolean=!1;lr.prototype.property="";lr.prototype.spaceSeparated=!1;lr.prototype.space=void 0;let xG=0;const tt=Za(),tn=Za(),F0=Za(),ye=Za(),It=Za(),Yl=Za(),pr=Za();function Za(){return 2**++xG}const U0=Object.freeze(Object.defineProperty({__proto__:null,boolean:tt,booleanish:tn,commaOrSpaceSeparated:pr,commaSeparated:Yl,number:ye,overloadedBoolean:F0,spaceSeparated:It},Symbol.toStringTag,{value:"Module"})),cy=Object.keys(U0);class Kx extends lr{constructor(e,n,r,i){let s=-1;if(super(e,n),CE(this,"space",i),typeof r=="number")for(;++s<cy.length;){const o=cy[s];CE(this,cy[s],(r&U0[o])===U0[o])}}}Kx.prototype.defined=!0;function CE(t,e,n){n&&(t[e]=n)}function jc(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new Kx(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[L0(r)]=r,n[L0(s.attribute)]=r}return new Jd(e,n,t.space)}const GR=jc({properties:{ariaActiveDescendant:null,ariaAtomic:tn,ariaAutoComplete:null,ariaBusy:tn,ariaChecked:tn,ariaColCount:ye,ariaColIndex:ye,ariaColSpan:ye,ariaControls:It,ariaCurrent:null,ariaDescribedBy:It,ariaDetails:null,ariaDisabled:tn,ariaDropEffect:It,ariaErrorMessage:null,ariaExpanded:tn,ariaFlowTo:It,ariaGrabbed:tn,ariaHasPopup:null,ariaHidden:tn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:It,ariaLevel:ye,ariaLive:null,ariaModal:tn,ariaMultiLine:tn,ariaMultiSelectable:tn,ariaOrientation:null,ariaOwns:It,ariaPlaceholder:null,ariaPosInSet:ye,ariaPressed:tn,ariaReadOnly:tn,ariaRelevant:null,ariaRequired:tn,ariaRoleDescription:It,ariaRowCount:ye,ariaRowIndex:ye,ariaRowSpan:ye,ariaSelected:tn,ariaSetSize:ye,ariaSort:null,ariaValueMax:ye,ariaValueMin:ye,ariaValueNow:ye,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function KR(t,e){return e in t?t[e]:e}function YR(t,e){return KR(t,e.toLowerCase())}const wG=jc({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Yl,acceptCharset:It,accessKey:It,action:null,allow:null,allowFullScreen:tt,allowPaymentRequest:tt,allowUserMedia:tt,alt:null,as:null,async:tt,autoCapitalize:null,autoComplete:It,autoFocus:tt,autoPlay:tt,blocking:It,capture:null,charSet:null,checked:tt,cite:null,className:It,cols:ye,colSpan:null,content:null,contentEditable:tn,controls:tt,controlsList:It,coords:ye|Yl,crossOrigin:null,data:null,dateTime:null,decoding:null,default:tt,defer:tt,dir:null,dirName:null,disabled:tt,download:F0,draggable:tn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:tt,formTarget:null,headers:It,height:ye,hidden:F0,high:ye,href:null,hrefLang:null,htmlFor:It,httpEquiv:It,id:null,imageSizes:null,imageSrcSet:null,inert:tt,inputMode:null,integrity:null,is:null,isMap:tt,itemId:null,itemProp:It,itemRef:It,itemScope:tt,itemType:It,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:tt,low:ye,manifest:null,max:null,maxLength:ye,media:null,method:null,min:null,minLength:ye,multiple:tt,muted:tt,name:null,nonce:null,noModule:tt,noValidate:tt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:tt,optimum:ye,pattern:null,ping:It,placeholder:null,playsInline:tt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:tt,referrerPolicy:null,rel:It,required:tt,reversed:tt,rows:ye,rowSpan:ye,sandbox:It,scope:null,scoped:tt,seamless:tt,selected:tt,shadowRootClonable:tt,shadowRootDelegatesFocus:tt,shadowRootMode:null,shape:null,size:ye,sizes:null,slot:null,span:ye,spellCheck:tn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ye,step:null,style:null,tabIndex:ye,target:null,title:null,translate:null,type:null,typeMustMatch:tt,useMap:null,value:tn,width:ye,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:It,axis:null,background:null,bgColor:null,border:ye,borderColor:null,bottomMargin:ye,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:tt,declare:tt,event:null,face:null,frame:null,frameBorder:null,hSpace:ye,leftMargin:ye,link:null,longDesc:null,lowSrc:null,marginHeight:ye,marginWidth:ye,noResize:tt,noHref:tt,noShade:tt,noWrap:tt,object:null,profile:null,prompt:null,rev:null,rightMargin:ye,rules:null,scheme:null,scrolling:tn,standby:null,summary:null,text:null,topMargin:ye,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ye,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:tt,disableRemotePlayback:tt,prefix:null,property:null,results:ye,security:null,unselectable:null},space:"html",transform:YR}),kG=jc({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:pr,accentHeight:ye,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ye,amplitude:ye,arabicForm:null,ascent:ye,attributeName:null,attributeType:null,azimuth:ye,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ye,by:null,calcMode:null,capHeight:ye,className:It,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ye,diffuseConstant:ye,direction:null,display:null,dur:null,divisor:ye,dominantBaseline:null,download:tt,dx:null,dy:null,edgeMode:null,editable:null,elevation:ye,enableBackground:null,end:null,event:null,exponent:ye,externalResourcesRequired:null,fill:null,fillOpacity:ye,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Yl,g2:Yl,glyphName:Yl,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ye,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ye,horizOriginX:ye,horizOriginY:ye,id:null,ideographic:ye,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ye,k:ye,k1:ye,k2:ye,k3:ye,k4:ye,kernelMatrix:pr,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ye,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ye,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ye,overlineThickness:ye,paintOrder:null,panose1:null,path:null,pathLength:ye,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:It,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ye,pointsAtY:ye,pointsAtZ:ye,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:pr,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:pr,rev:pr,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:pr,requiredFeatures:pr,requiredFonts:pr,requiredFormats:pr,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ye,specularExponent:ye,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ye,strikethroughThickness:ye,string:null,stroke:null,strokeDashArray:pr,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ye,strokeOpacity:ye,strokeWidth:null,style:null,surfaceScale:ye,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:pr,tabIndex:ye,tableValues:null,target:null,targetX:ye,targetY:ye,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:pr,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ye,underlineThickness:ye,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ye,values:null,vAlphabetic:ye,vMathematical:ye,vectorEffect:null,vHanging:ye,vIdeographic:ye,version:null,vertAdvY:ye,vertOriginX:ye,vertOriginY:ye,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ye,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:KR}),JR=jc({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),QR=jc({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:YR}),XR=jc({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),SG={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},CG=/[A-Z]/g,TE=/-[a-z]/g,TG=/^data[-\w.:]+$/i;function EG(t,e){const n=L0(e);let r=e,i=lr;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&TG.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(TE,_G);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!TE.test(s)){let o=s.replace(CG,PG);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=Kx}return new i(r,e)}function PG(t){return"-"+t.toLowerCase()}function _G(t){return t.charAt(1).toUpperCase()}const IG=qR([GR,wG,JR,QR,XR],"html"),Yx=qR([GR,kG,JR,QR,XR],"svg");function NG(t){return t.join(" ").trim()}var Pl={},uy,EE;function AG(){if(EE)return uy;EE=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,l=/^\s+|\s+$/g,u=`
`,d="/",f="*",m="",g="comment",y="declaration";uy=function(x,k){if(typeof x!="string")throw new TypeError("First argument must be a string");if(!x)return[];k=k||{};var T=1,_=1;function P(W){var Y=W.match(e);Y&&(T+=Y.length);var K=W.lastIndexOf(u);_=~K?W.length-K:_+W.length}function E(){var W={line:T,column:_};return function(Y){return Y.position=new I(W),R(),Y}}function I(W){this.start=W,this.end={line:T,column:_},this.source=k.source}I.prototype.content=x;function A(W){var Y=new Error(k.source+":"+T+":"+_+": "+W);if(Y.reason=W,Y.filename=k.source,Y.line=T,Y.column=_,Y.source=x,!k.silent)throw Y}function L(W){var Y=W.exec(x);if(Y){var K=Y[0];return P(K),x=x.slice(K.length),Y}}function R(){L(n)}function j(W){var Y;for(W=W||[];Y=U();)Y!==!1&&W.push(Y);return W}function U(){var W=E();if(!(d!=x.charAt(0)||f!=x.charAt(1))){for(var Y=2;m!=x.charAt(Y)&&(f!=x.charAt(Y)||d!=x.charAt(Y+1));)++Y;if(Y+=2,m===x.charAt(Y-1))return A("End of comment missing");var K=x.slice(2,Y-2);return _+=2,P(K),x=x.slice(Y),_+=2,W({type:g,comment:K})}}function z(){var W=E(),Y=L(r);if(Y){if(U(),!L(i))return A("property missing ':'");var K=L(s),X=W({type:y,property:C(Y[0].replace(t,m)),value:K?C(K[0].replace(t,m)):m});return L(o),X}}function F(){var W=[];j(W);for(var Y;Y=z();)Y!==!1&&(W.push(Y),j(W));return W}return R(),F()};function C(x){return x?x.replace(l,m):m}return uy}var PE;function RG(){if(PE)return Pl;PE=1;var t=Pl&&Pl.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Pl,"__esModule",{value:!0}),Pl.default=n;var e=t(AG());function n(r,i){var s=null;if(!r||typeof r!="string")return s;var o=(0,e.default)(r),l=typeof i=="function";return o.forEach(function(u){if(u.type==="declaration"){var d=u.property,f=u.value;l?i(d,f,u):f&&(s=s||{},s[d]=f)}}),s}return Pl}var Su={},_E;function MG(){if(_E)return Su;_E=1,Object.defineProperty(Su,"__esModule",{value:!0}),Su.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,s=function(d){return!d||n.test(d)||t.test(d)},o=function(d,f){return f.toUpperCase()},l=function(d,f){return"".concat(f,"-")},u=function(d,f){return f===void 0&&(f={}),s(d)?d:(d=d.toLowerCase(),f.reactCompat?d=d.replace(i,l):d=d.replace(r,l),d.replace(e,o))};return Su.camelCase=u,Su}var Cu,IE;function DG(){if(IE)return Cu;IE=1;var t=Cu&&Cu.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},e=t(RG()),n=MG();function r(i,s){var o={};return!i||typeof i!="string"||(0,e.default)(i,function(l,u){l&&u&&(o[(0,n.camelCase)(l,s)]=u)}),o}return r.default=r,Cu=r,Cu}var jG=DG();const OG=jd(jG),ZR=eM("end"),Jx=eM("start");function eM(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function LG(t){const e=Jx(t),n=ZR(t);if(e&&n)return{start:e,end:n}}function Ju(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?NE(t.position):"start"in t||"end"in t?NE(t):"line"in t||"column"in t?B0(t):""}function B0(t){return AE(t&&t.line)+":"+AE(t&&t.column)}function NE(t){return B0(t&&t.start)+"-"+B0(t&&t.end)}function AE(t){return t&&typeof t=="number"?t:1}class Ln extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const l=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=l?l.line:void 0,this.name=Ju(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Ln.prototype.file="";Ln.prototype.name="";Ln.prototype.reason="";Ln.prototype.message="";Ln.prototype.stack="";Ln.prototype.column=void 0;Ln.prototype.line=void 0;Ln.prototype.ancestors=void 0;Ln.prototype.cause=void 0;Ln.prototype.fatal=void 0;Ln.prototype.place=void 0;Ln.prototype.ruleId=void 0;Ln.prototype.source=void 0;const Qx={}.hasOwnProperty,FG=new Map,UG=/[A-Z]/g,BG=new Set(["table","tbody","thead","tfoot","tr"]),VG=new Set(["td","th"]),tM="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function zG(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=JG(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=YG(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?Yx:IG,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=nM(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function nM(t,e,n){if(e.type==="element")return $G(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return WG(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return qG(t,e,n);if(e.type==="mdxjsEsm")return HG(t,e);if(e.type==="root")return GG(t,e,n);if(e.type==="text")return KG(t,e)}function $G(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Yx,t.schema=i),t.ancestors.push(e);const s=iM(t,e.tagName,!1),o=QG(t,e);let l=Zx(t,e);return BG.has(e.tagName)&&(l=l.filter(function(u){return typeof u=="string"?!bG(u):!0})),rM(t,o,s,e),Xx(o,l),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function WG(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}xd(t,e.position)}function HG(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);xd(t,e.position)}function qG(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=Yx,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:iM(t,e.name,!0),o=XG(t,e),l=Zx(t,e);return rM(t,o,s,e),Xx(o,l),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function GG(t,e,n){const r={};return Xx(r,Zx(t,e)),t.create(e,t.Fragment,r,n)}function KG(t,e){return e.value}function rM(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function Xx(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function YG(t,e,n){return r;function r(i,s,o,l){const d=Array.isArray(o.children)?n:e;return l?d(s,o,l):d(s,o)}}function JG(t,e){return n;function n(r,i,s,o){const l=Array.isArray(s.children),u=Jx(r);return e(i,s,o,l,{columnNumber:u?u.column-1:void 0,fileName:t,lineNumber:u?u.line:void 0},void 0)}}function QG(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&Qx.call(e.properties,i)){const s=ZG(t,i,e.properties[i]);if(s){const[o,l]=s;t.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&VG.has(e.tagName)?r=l:n[o]=l}}if(r){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function XG(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const l=o.properties[0];l.type,Object.assign(n,t.evaluater.evaluateExpression(l.argument))}else xd(t,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const l=r.value.data.estree.body[0];l.type,s=t.evaluater.evaluateExpression(l.expression)}else xd(t,e.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function Zx(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:FG;for(;++r<e.children.length;){const s=e.children[r];let o;if(t.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const d=i.get(u)||0;o=u+"-"+d,i.set(u,d+1)}}const l=nM(t,s,o);l!==void 0&&n.push(l)}return n}function ZG(t,e,n){const r=EG(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?pG(n):NG(n)),r.property==="style"){let i=typeof n=="object"?n:eK(t,String(n));return t.stylePropertyNameCase==="css"&&(i=tK(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?SG[r.property]||r.property:r.attribute,n]}}function eK(t,e){try{return OG(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new Ln("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=tM+"#cannot-parse-style-attribute",i}}function iM(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const l=kE(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(s&&l.type==="Literal"),optional:!1}:l}r=o}else r=kE(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return Qx.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);xd(t)}function xd(t,e){const n=new Ln("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=tM+"#cannot-handle-mdx-estrees-without-createevaluater",n}function tK(t){const e={};let n;for(n in t)Qx.call(t,n)&&(e[nK(n)]=t[n]);return e}function nK(t){let e=t.replace(UG,rK);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function rK(t){return"-"+t.toLowerCase()}const dy={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},iK={};function sK(t,e){const n=iK,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return sM(t,r,i)}function sM(t,e,n){if(oK(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return RE(t.children,e,n)}return Array.isArray(t)?RE(t,e,n):""}function RE(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=sM(t[i],e,n);return r.join("")}function oK(t){return!!(t&&typeof t=="object")}const ME=document.createElement("i");function ew(t){const e="&"+t+";";ME.innerHTML=e;const n=ME.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function qi(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function Ur(t,e){return t.length>0?(qi(t,t.length,0,e),t):e}const DE={}.hasOwnProperty;function aK(t){const e={};let n=-1;for(;++n<t.length;)lK(e,t[n]);return e}function lK(t,e){let n;for(n in e){const i=(DE.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){DE.call(i,o)||(i[o]=[]);const l=s[o];cK(i[o],Array.isArray(l)?l:l?[l]:[])}}}function cK(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);qi(t,0,0,r)}function oM(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Jl(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const ji=Qo(/[A-Za-z]/),vr=Qo(/[\dA-Za-z]/),uK=Qo(/[#-'*+\--9=?A-Z^-~]/);function V0(t){return t!==null&&(t<32||t===127)}const z0=Qo(/\d/),dK=Qo(/[\dA-Fa-f]/),hK=Qo(/[!-/:-@[-`{-~]/);function Ye(t){return t!==null&&t<-2}function or(t){return t!==null&&(t<0||t===32)}function xt(t){return t===-2||t===-1||t===32}const fK=Qo(new RegExp("\\p{P}|\\p{S}","u")),pK=Qo(/\s/);function Qo(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Oc(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&vr(t.charCodeAt(n+1))&&vr(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const l=t.charCodeAt(n+1);s<56320&&l>56319&&l<57344?(o=String.fromCharCode(s,l),i=1):o=""}else o=String.fromCharCode(s);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function Nt(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return xt(u)?(t.enter(n),l(u)):e(u)}function l(u){return xt(u)&&s++<i?(t.consume(u),l):(t.exit(n),e(u))}}const mK={tokenize:gK};function gK(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(l){if(l===null){t.consume(l);return}return t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),Nt(t,e,"linePrefix")}function i(l){return t.enter("paragraph"),s(l)}function s(l){const u=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(l)}function o(l){if(l===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(l);return}return Ye(l)?(t.consume(l),t.exit("chunkText"),s):(t.consume(l),o)}}const vK={tokenize:yK},jE={tokenize:bK};function yK(t){const e=this,n=[];let r=0,i,s,o;return l;function l(P){if(r<n.length){const E=n[r];return e.containerState=E[1],t.attempt(E[0].continuation,u,d)(P)}return d(P)}function u(P){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&_();const E=e.events.length;let I=E,A;for(;I--;)if(e.events[I][0]==="exit"&&e.events[I][1].type==="chunkFlow"){A=e.events[I][1].end;break}T(r);let L=E;for(;L<e.events.length;)e.events[L][1].end={...A},L++;return qi(e.events,I+1,0,e.events.slice(E)),e.events.length=L,d(P)}return l(P)}function d(P){if(r===n.length){if(!i)return g(P);if(i.currentConstruct&&i.currentConstruct.concrete)return C(P);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(jE,f,m)(P)}function f(P){return i&&_(),T(r),g(P)}function m(P){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,C(P)}function g(P){return e.containerState={},t.attempt(jE,y,C)(P)}function y(P){return r++,n.push([e.currentConstruct,e.containerState]),g(P)}function C(P){if(P===null){i&&_(),T(0),t.consume(P);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),x(P)}function x(P){if(P===null){k(t.exit("chunkFlow"),!0),T(0),t.consume(P);return}return Ye(P)?(t.consume(P),k(t.exit("chunkFlow")),r=0,e.interrupt=void 0,l):(t.consume(P),x)}function k(P,E){const I=e.sliceStream(P);if(E&&I.push(null),P.previous=s,s&&(s.next=P),s=P,i.defineSkip(P.start),i.write(I),e.parser.lazy[P.start.line]){let A=i.events.length;for(;A--;)if(i.events[A][1].start.offset<o&&(!i.events[A][1].end||i.events[A][1].end.offset>o))return;const L=e.events.length;let R=L,j,U;for(;R--;)if(e.events[R][0]==="exit"&&e.events[R][1].type==="chunkFlow"){if(j){U=e.events[R][1].end;break}j=!0}for(T(r),A=L;A<e.events.length;)e.events[A][1].end={...U},A++;qi(e.events,R+1,0,e.events.slice(L)),e.events.length=A}}function T(P){let E=n.length;for(;E-- >P;){const I=n[E];e.containerState=I[1],I[0].exit.call(e,t)}n.length=P}function _(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function bK(t,e,n){return Nt(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function OE(t){if(t===null||or(t)||pK(t))return 1;if(fK(t))return 2}function tw(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const $0={name:"attention",resolveAll:xK,tokenize:wK};function xK(t,e){let n=-1,r,i,s,o,l,u,d,f;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;u=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const m={...t[r][1].end},g={...t[n][1].start};LE(m,-u),LE(g,u),o={type:u>1?"strongSequence":"emphasisSequence",start:m,end:{...t[r][1].end}},l={type:u>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:g},s={type:u>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:u>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},t[r][1].end={...o.start},t[n][1].start={...l.end},d=[],t[r][1].end.offset-t[r][1].start.offset&&(d=Ur(d,[["enter",t[r][1],e],["exit",t[r][1],e]])),d=Ur(d,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),d=Ur(d,tw(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),d=Ur(d,[["exit",s,e],["enter",l,e],["exit",l,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(f=2,d=Ur(d,[["enter",t[n][1],e],["exit",t[n][1],e]])):f=0,qi(t,r-1,n-r+3,d),n=r+d.length-f-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function wK(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=OE(r);let s;return o;function o(u){return s=u,t.enter("attentionSequence"),l(u)}function l(u){if(u===s)return t.consume(u),l;const d=t.exit("attentionSequence"),f=OE(u),m=!f||f===2&&i||n.includes(u),g=!i||i===2&&f||n.includes(r);return d._open=!!(s===42?m:m&&(i||!g)),d._close=!!(s===42?g:g&&(f||!m)),e(u)}}function LE(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const kK={name:"autolink",tokenize:SK};function SK(t,e,n){let r=0;return i;function i(y){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(y){return ji(y)?(t.consume(y),o):y===64?n(y):d(y)}function o(y){return y===43||y===45||y===46||vr(y)?(r=1,l(y)):d(y)}function l(y){return y===58?(t.consume(y),r=0,u):(y===43||y===45||y===46||vr(y))&&r++<32?(t.consume(y),l):(r=0,d(y))}function u(y){return y===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),e):y===null||y===32||y===60||V0(y)?n(y):(t.consume(y),u)}function d(y){return y===64?(t.consume(y),f):uK(y)?(t.consume(y),d):n(y)}function f(y){return vr(y)?m(y):n(y)}function m(y){return y===46?(t.consume(y),r=0,f):y===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),e):g(y)}function g(y){if((y===45||vr(y))&&r++<63){const C=y===45?g:m;return t.consume(y),C}return n(y)}}const xm={partial:!0,tokenize:CK};function CK(t,e,n){return r;function r(s){return xt(s)?Nt(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||Ye(s)?e(s):n(s)}}const aM={continuation:{tokenize:EK},exit:PK,name:"blockQuote",tokenize:TK};function TK(t,e,n){const r=this;return i;function i(o){if(o===62){const l=r.containerState;return l.open||(t.enter("blockQuote",{_container:!0}),l.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return xt(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function EK(t,e,n){const r=this;return i;function i(o){return xt(o)?Nt(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(aM,e,n)(o)}}function PK(t){t.exit("blockQuote")}const lM={name:"characterEscape",tokenize:_K};function _K(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return hK(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const cM={name:"characterReference",tokenize:IK};function IK(t,e,n){const r=this;let i=0,s,o;return l;function l(m){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(m),t.exit("characterReferenceMarker"),u}function u(m){return m===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(m),t.exit("characterReferenceMarkerNumeric"),d):(t.enter("characterReferenceValue"),s=31,o=vr,f(m))}function d(m){return m===88||m===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(m),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=dK,f):(t.enter("characterReferenceValue"),s=7,o=z0,f(m))}function f(m){if(m===59&&i){const g=t.exit("characterReferenceValue");return o===vr&&!ew(r.sliceSerialize(g))?n(m):(t.enter("characterReferenceMarker"),t.consume(m),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(m)&&i++<s?(t.consume(m),f):n(m)}}const FE={partial:!0,tokenize:AK},UE={concrete:!0,name:"codeFenced",tokenize:NK};function NK(t,e,n){const r=this,i={partial:!0,tokenize:I};let s=0,o=0,l;return u;function u(A){return d(A)}function d(A){const L=r.events[r.events.length-1];return s=L&&L[1].type==="linePrefix"?L[2].sliceSerialize(L[1],!0).length:0,l=A,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),f(A)}function f(A){return A===l?(o++,t.consume(A),f):o<3?n(A):(t.exit("codeFencedFenceSequence"),xt(A)?Nt(t,m,"whitespace")(A):m(A))}function m(A){return A===null||Ye(A)?(t.exit("codeFencedFence"),r.interrupt?e(A):t.check(FE,x,E)(A)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),g(A))}function g(A){return A===null||Ye(A)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),m(A)):xt(A)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Nt(t,y,"whitespace")(A)):A===96&&A===l?n(A):(t.consume(A),g)}function y(A){return A===null||Ye(A)?m(A):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),C(A))}function C(A){return A===null||Ye(A)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),m(A)):A===96&&A===l?n(A):(t.consume(A),C)}function x(A){return t.attempt(i,E,k)(A)}function k(A){return t.enter("lineEnding"),t.consume(A),t.exit("lineEnding"),T}function T(A){return s>0&&xt(A)?Nt(t,_,"linePrefix",s+1)(A):_(A)}function _(A){return A===null||Ye(A)?t.check(FE,x,E)(A):(t.enter("codeFlowValue"),P(A))}function P(A){return A===null||Ye(A)?(t.exit("codeFlowValue"),_(A)):(t.consume(A),P)}function E(A){return t.exit("codeFenced"),e(A)}function I(A,L,R){let j=0;return U;function U(K){return A.enter("lineEnding"),A.consume(K),A.exit("lineEnding"),z}function z(K){return A.enter("codeFencedFence"),xt(K)?Nt(A,F,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(K):F(K)}function F(K){return K===l?(A.enter("codeFencedFenceSequence"),W(K)):R(K)}function W(K){return K===l?(j++,A.consume(K),W):j>=o?(A.exit("codeFencedFenceSequence"),xt(K)?Nt(A,Y,"whitespace")(K):Y(K)):R(K)}function Y(K){return K===null||Ye(K)?(A.exit("codeFencedFence"),L(K)):R(K)}}}function AK(t,e,n){const r=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const hy={name:"codeIndented",tokenize:MK},RK={partial:!0,tokenize:DK};function MK(t,e,n){const r=this;return i;function i(d){return t.enter("codeIndented"),Nt(t,s,"linePrefix",5)(d)}function s(d){const f=r.events[r.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?o(d):n(d)}function o(d){return d===null?u(d):Ye(d)?t.attempt(RK,o,u)(d):(t.enter("codeFlowValue"),l(d))}function l(d){return d===null||Ye(d)?(t.exit("codeFlowValue"),o(d)):(t.consume(d),l)}function u(d){return t.exit("codeIndented"),e(d)}}function DK(t,e,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Ye(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):Nt(t,s,"linePrefix",5)(o)}function s(o){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(o):Ye(o)?i(o):n(o)}}const jK={name:"codeText",previous:LK,resolve:OK,tokenize:FK};function OK(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function LK(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function FK(t,e,n){let r=0,i,s;return o;function o(m){return t.enter("codeText"),t.enter("codeTextSequence"),l(m)}function l(m){return m===96?(t.consume(m),r++,l):(t.exit("codeTextSequence"),u(m))}function u(m){return m===null?n(m):m===32?(t.enter("space"),t.consume(m),t.exit("space"),u):m===96?(s=t.enter("codeTextSequence"),i=0,f(m)):Ye(m)?(t.enter("lineEnding"),t.consume(m),t.exit("lineEnding"),u):(t.enter("codeTextData"),d(m))}function d(m){return m===null||m===32||m===96||Ye(m)?(t.exit("codeTextData"),u(m)):(t.consume(m),d)}function f(m){return m===96?(t.consume(m),i++,f):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(m)):(s.type="codeTextData",d(m))}}class UK{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Tu(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Tu(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Tu(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Tu(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Tu(this.left,n.reverse())}}}function Tu(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function uM(t){const e={};let n=-1,r,i,s,o,l,u,d;const f=new UK(t);for(;++n<f.length;){for(;n in e;)n=e[n];if(r=f.get(n),n&&r[1].type==="chunkFlow"&&f.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,BK(f,n)),n=e[n],d=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=f.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(f.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...f.get(i)[1].start},l=f.slice(i,n),l.unshift(r),f.splice(i,n-i+1,l))}}return qi(t,0,Number.POSITIVE_INFINITY,f.slice(0)),!d}function BK(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,u=[],d={};let f,m,g=-1,y=n,C=0,x=0;const k=[x];for(;y;){for(;t.get(++i)[1]!==y;);s.push(i),y._tokenizer||(f=r.sliceStream(y),y.next||f.push(null),m&&o.defineSkip(y.start),y._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(f),y._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),m=y,y=y.next}for(y=n;++g<l.length;)l[g][0]==="exit"&&l[g-1][0]==="enter"&&l[g][1].type===l[g-1][1].type&&l[g][1].start.line!==l[g][1].end.line&&(x=g+1,k.push(x),y._tokenizer=void 0,y.previous=void 0,y=y.next);for(o.events=[],y?(y._tokenizer=void 0,y.previous=void 0):k.pop(),g=k.length;g--;){const T=l.slice(k[g],k[g+1]),_=s.pop();u.push([_,_+T.length-1]),t.splice(_,2,T)}for(u.reverse(),g=-1;++g<u.length;)d[C+u[g][0]]=C+u[g][1],C+=u[g][1]-u[g][0]-1;return d}const VK={resolve:$K,tokenize:WK},zK={partial:!0,tokenize:HK};function $K(t){return uM(t),t}function WK(t,e){let n;return r;function r(l){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(l)}function i(l){return l===null?s(l):Ye(l)?t.check(zK,o,s)(l):(t.consume(l),i)}function s(l){return t.exit("chunkContent"),t.exit("content"),e(l)}function o(l){return t.consume(l),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function HK(t,e,n){const r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),Nt(t,s,"linePrefix")}function s(o){if(o===null||Ye(o))return n(o);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function dM(t,e,n,r,i,s,o,l,u){const d=u||Number.POSITIVE_INFINITY;let f=0;return m;function m(T){return T===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(T),t.exit(s),g):T===null||T===32||T===41||V0(T)?n(T):(t.enter(r),t.enter(o),t.enter(l),t.enter("chunkString",{contentType:"string"}),x(T))}function g(T){return T===62?(t.enter(s),t.consume(T),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(l),t.enter("chunkString",{contentType:"string"}),y(T))}function y(T){return T===62?(t.exit("chunkString"),t.exit(l),g(T)):T===null||T===60||Ye(T)?n(T):(t.consume(T),T===92?C:y)}function C(T){return T===60||T===62||T===92?(t.consume(T),y):y(T)}function x(T){return!f&&(T===null||T===41||or(T))?(t.exit("chunkString"),t.exit(l),t.exit(o),t.exit(r),e(T)):f<d&&T===40?(t.consume(T),f++,x):T===41?(t.consume(T),f--,x):T===null||T===32||T===40||V0(T)?n(T):(t.consume(T),T===92?k:x)}function k(T){return T===40||T===41||T===92?(t.consume(T),x):x(T)}}function hM(t,e,n,r,i,s){const o=this;let l=0,u;return d;function d(y){return t.enter(r),t.enter(i),t.consume(y),t.exit(i),t.enter(s),f}function f(y){return l>999||y===null||y===91||y===93&&!u||y===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(y):y===93?(t.exit(s),t.enter(i),t.consume(y),t.exit(i),t.exit(r),e):Ye(y)?(t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),f):(t.enter("chunkString",{contentType:"string"}),m(y))}function m(y){return y===null||y===91||y===93||Ye(y)||l++>999?(t.exit("chunkString"),f(y)):(t.consume(y),u||(u=!xt(y)),y===92?g:m)}function g(y){return y===91||y===92||y===93?(t.consume(y),l++,m):m(y)}}function fM(t,e,n,r,i,s){let o;return l;function l(g){return g===34||g===39||g===40?(t.enter(r),t.enter(i),t.consume(g),t.exit(i),o=g===40?41:g,u):n(g)}function u(g){return g===o?(t.enter(i),t.consume(g),t.exit(i),t.exit(r),e):(t.enter(s),d(g))}function d(g){return g===o?(t.exit(s),u(o)):g===null?n(g):Ye(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),Nt(t,d,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===o||g===null||Ye(g)?(t.exit("chunkString"),d(g)):(t.consume(g),g===92?m:f)}function m(g){return g===o||g===92?(t.consume(g),f):f(g)}}function Qu(t,e){let n;return r;function r(i){return Ye(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):xt(i)?Nt(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const qK={name:"definition",tokenize:KK},GK={partial:!0,tokenize:YK};function KK(t,e,n){const r=this;let i;return s;function s(y){return t.enter("definition"),o(y)}function o(y){return hM.call(r,t,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(y)}function l(y){return i=Jl(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),y===58?(t.enter("definitionMarker"),t.consume(y),t.exit("definitionMarker"),u):n(y)}function u(y){return or(y)?Qu(t,d)(y):d(y)}function d(y){return dM(t,f,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(y)}function f(y){return t.attempt(GK,m,m)(y)}function m(y){return xt(y)?Nt(t,g,"whitespace")(y):g(y)}function g(y){return y===null||Ye(y)?(t.exit("definition"),r.parser.defined.push(i),e(y)):n(y)}}function YK(t,e,n){return r;function r(l){return or(l)?Qu(t,i)(l):n(l)}function i(l){return fM(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function s(l){return xt(l)?Nt(t,o,"whitespace")(l):o(l)}function o(l){return l===null||Ye(l)?e(l):n(l)}}const JK={name:"hardBreakEscape",tokenize:QK};function QK(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return Ye(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const XK={name:"headingAtx",resolve:ZK,tokenize:eY};function ZK(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},qi(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function eY(t,e,n){let r=0;return i;function i(f){return t.enter("atxHeading"),s(f)}function s(f){return t.enter("atxHeadingSequence"),o(f)}function o(f){return f===35&&r++<6?(t.consume(f),o):f===null||or(f)?(t.exit("atxHeadingSequence"),l(f)):n(f)}function l(f){return f===35?(t.enter("atxHeadingSequence"),u(f)):f===null||Ye(f)?(t.exit("atxHeading"),e(f)):xt(f)?Nt(t,l,"whitespace")(f):(t.enter("atxHeadingText"),d(f))}function u(f){return f===35?(t.consume(f),u):(t.exit("atxHeadingSequence"),l(f))}function d(f){return f===null||f===35||or(f)?(t.exit("atxHeadingText"),l(f)):(t.consume(f),d)}}const tY=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],BE=["pre","script","style","textarea"],nY={concrete:!0,name:"htmlFlow",resolveTo:sY,tokenize:oY},rY={partial:!0,tokenize:lY},iY={partial:!0,tokenize:aY};function sY(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function oY(t,e,n){const r=this;let i,s,o,l,u;return d;function d(O){return f(O)}function f(O){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(O),m}function m(O){return O===33?(t.consume(O),g):O===47?(t.consume(O),s=!0,x):O===63?(t.consume(O),i=3,r.interrupt?e:D):ji(O)?(t.consume(O),o=String.fromCharCode(O),k):n(O)}function g(O){return O===45?(t.consume(O),i=2,y):O===91?(t.consume(O),i=5,l=0,C):ji(O)?(t.consume(O),i=4,r.interrupt?e:D):n(O)}function y(O){return O===45?(t.consume(O),r.interrupt?e:D):n(O)}function C(O){const ve="CDATA[";return O===ve.charCodeAt(l++)?(t.consume(O),l===ve.length?r.interrupt?e:F:C):n(O)}function x(O){return ji(O)?(t.consume(O),o=String.fromCharCode(O),k):n(O)}function k(O){if(O===null||O===47||O===62||or(O)){const ve=O===47,oe=o.toLowerCase();return!ve&&!s&&BE.includes(oe)?(i=1,r.interrupt?e(O):F(O)):tY.includes(o.toLowerCase())?(i=6,ve?(t.consume(O),T):r.interrupt?e(O):F(O)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(O):s?_(O):P(O))}return O===45||vr(O)?(t.consume(O),o+=String.fromCharCode(O),k):n(O)}function T(O){return O===62?(t.consume(O),r.interrupt?e:F):n(O)}function _(O){return xt(O)?(t.consume(O),_):U(O)}function P(O){return O===47?(t.consume(O),U):O===58||O===95||ji(O)?(t.consume(O),E):xt(O)?(t.consume(O),P):U(O)}function E(O){return O===45||O===46||O===58||O===95||vr(O)?(t.consume(O),E):I(O)}function I(O){return O===61?(t.consume(O),A):xt(O)?(t.consume(O),I):P(O)}function A(O){return O===null||O===60||O===61||O===62||O===96?n(O):O===34||O===39?(t.consume(O),u=O,L):xt(O)?(t.consume(O),A):R(O)}function L(O){return O===u?(t.consume(O),u=null,j):O===null||Ye(O)?n(O):(t.consume(O),L)}function R(O){return O===null||O===34||O===39||O===47||O===60||O===61||O===62||O===96||or(O)?I(O):(t.consume(O),R)}function j(O){return O===47||O===62||xt(O)?P(O):n(O)}function U(O){return O===62?(t.consume(O),z):n(O)}function z(O){return O===null||Ye(O)?F(O):xt(O)?(t.consume(O),z):n(O)}function F(O){return O===45&&i===2?(t.consume(O),X):O===60&&i===1?(t.consume(O),se):O===62&&i===4?(t.consume(O),$):O===63&&i===3?(t.consume(O),D):O===93&&i===5?(t.consume(O),te):Ye(O)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(rY,re,W)(O)):O===null||Ye(O)?(t.exit("htmlFlowData"),W(O)):(t.consume(O),F)}function W(O){return t.check(iY,Y,re)(O)}function Y(O){return t.enter("lineEnding"),t.consume(O),t.exit("lineEnding"),K}function K(O){return O===null||Ye(O)?W(O):(t.enter("htmlFlowData"),F(O))}function X(O){return O===45?(t.consume(O),D):F(O)}function se(O){return O===47?(t.consume(O),o="",H):F(O)}function H(O){if(O===62){const ve=o.toLowerCase();return BE.includes(ve)?(t.consume(O),$):F(O)}return ji(O)&&o.length<8?(t.consume(O),o+=String.fromCharCode(O),H):F(O)}function te(O){return O===93?(t.consume(O),D):F(O)}function D(O){return O===62?(t.consume(O),$):O===45&&i===2?(t.consume(O),D):F(O)}function $(O){return O===null||Ye(O)?(t.exit("htmlFlowData"),re(O)):(t.consume(O),$)}function re(O){return t.exit("htmlFlow"),e(O)}}function aY(t,e,n){const r=this;return i;function i(o){return Ye(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function lY(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(xm,e,n)}}const cY={name:"htmlText",tokenize:uY};function uY(t,e,n){const r=this;let i,s,o;return l;function l(D){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(D),u}function u(D){return D===33?(t.consume(D),d):D===47?(t.consume(D),I):D===63?(t.consume(D),P):ji(D)?(t.consume(D),R):n(D)}function d(D){return D===45?(t.consume(D),f):D===91?(t.consume(D),s=0,C):ji(D)?(t.consume(D),_):n(D)}function f(D){return D===45?(t.consume(D),y):n(D)}function m(D){return D===null?n(D):D===45?(t.consume(D),g):Ye(D)?(o=m,se(D)):(t.consume(D),m)}function g(D){return D===45?(t.consume(D),y):m(D)}function y(D){return D===62?X(D):D===45?g(D):m(D)}function C(D){const $="CDATA[";return D===$.charCodeAt(s++)?(t.consume(D),s===$.length?x:C):n(D)}function x(D){return D===null?n(D):D===93?(t.consume(D),k):Ye(D)?(o=x,se(D)):(t.consume(D),x)}function k(D){return D===93?(t.consume(D),T):x(D)}function T(D){return D===62?X(D):D===93?(t.consume(D),T):x(D)}function _(D){return D===null||D===62?X(D):Ye(D)?(o=_,se(D)):(t.consume(D),_)}function P(D){return D===null?n(D):D===63?(t.consume(D),E):Ye(D)?(o=P,se(D)):(t.consume(D),P)}function E(D){return D===62?X(D):P(D)}function I(D){return ji(D)?(t.consume(D),A):n(D)}function A(D){return D===45||vr(D)?(t.consume(D),A):L(D)}function L(D){return Ye(D)?(o=L,se(D)):xt(D)?(t.consume(D),L):X(D)}function R(D){return D===45||vr(D)?(t.consume(D),R):D===47||D===62||or(D)?j(D):n(D)}function j(D){return D===47?(t.consume(D),X):D===58||D===95||ji(D)?(t.consume(D),U):Ye(D)?(o=j,se(D)):xt(D)?(t.consume(D),j):X(D)}function U(D){return D===45||D===46||D===58||D===95||vr(D)?(t.consume(D),U):z(D)}function z(D){return D===61?(t.consume(D),F):Ye(D)?(o=z,se(D)):xt(D)?(t.consume(D),z):j(D)}function F(D){return D===null||D===60||D===61||D===62||D===96?n(D):D===34||D===39?(t.consume(D),i=D,W):Ye(D)?(o=F,se(D)):xt(D)?(t.consume(D),F):(t.consume(D),Y)}function W(D){return D===i?(t.consume(D),i=void 0,K):D===null?n(D):Ye(D)?(o=W,se(D)):(t.consume(D),W)}function Y(D){return D===null||D===34||D===39||D===60||D===61||D===96?n(D):D===47||D===62||or(D)?j(D):(t.consume(D),Y)}function K(D){return D===47||D===62||or(D)?j(D):n(D)}function X(D){return D===62?(t.consume(D),t.exit("htmlTextData"),t.exit("htmlText"),e):n(D)}function se(D){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(D),t.exit("lineEnding"),H}function H(D){return xt(D)?Nt(t,te,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(D):te(D)}function te(D){return t.enter("htmlTextData"),o(D)}}const nw={name:"labelEnd",resolveAll:pY,resolveTo:mY,tokenize:gY},dY={tokenize:vY},hY={tokenize:yY},fY={tokenize:bY};function pY(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&qi(t,0,t.length,n),t}function mY(t,e){let n=t.length,r=0,i,s,o,l;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},d={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},f={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[o-2][1].start}};return l=[["enter",u,e],["enter",d,e]],l=Ur(l,t.slice(s+1,s+r+3)),l=Ur(l,[["enter",f,e]]),l=Ur(l,tw(e.parser.constructs.insideSpan.null,t.slice(s+r+4,o-3),e)),l=Ur(l,[["exit",f,e],t[o-2],t[o-1],["exit",d,e]]),l=Ur(l,t.slice(o+1)),l=Ur(l,[["exit",u,e]]),qi(t,s,t.length,l),t}function gY(t,e,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return l;function l(g){return s?s._inactive?m(g):(o=r.parser.defined.includes(Jl(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(g),t.exit("labelMarker"),t.exit("labelEnd"),u):n(g)}function u(g){return g===40?t.attempt(dY,f,o?f:m)(g):g===91?t.attempt(hY,f,o?d:m)(g):o?f(g):m(g)}function d(g){return t.attempt(fY,f,m)(g)}function f(g){return e(g)}function m(g){return s._balanced=!0,n(g)}}function vY(t,e,n){return r;function r(m){return t.enter("resource"),t.enter("resourceMarker"),t.consume(m),t.exit("resourceMarker"),i}function i(m){return or(m)?Qu(t,s)(m):s(m)}function s(m){return m===41?f(m):dM(t,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(m)}function o(m){return or(m)?Qu(t,u)(m):f(m)}function l(m){return n(m)}function u(m){return m===34||m===39||m===40?fM(t,d,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(m):f(m)}function d(m){return or(m)?Qu(t,f)(m):f(m)}function f(m){return m===41?(t.enter("resourceMarker"),t.consume(m),t.exit("resourceMarker"),t.exit("resource"),e):n(m)}}function yY(t,e,n){const r=this;return i;function i(l){return hM.call(r,t,s,o,"reference","referenceMarker","referenceString")(l)}function s(l){return r.parser.defined.includes(Jl(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(l):n(l)}function o(l){return n(l)}}function bY(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const xY={name:"labelStartImage",resolveAll:nw.resolveAll,tokenize:wY};function wY(t,e,n){const r=this;return i;function i(l){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(l),t.exit("labelImageMarker"),s}function s(l){return l===91?(t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):e(l)}}const kY={name:"labelStartLink",resolveAll:nw.resolveAll,tokenize:SY};function SY(t,e,n){const r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const fy={name:"lineEnding",tokenize:CY};function CY(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),Nt(t,e,"linePrefix")}}const Gf={name:"thematicBreak",tokenize:TY};function TY(t,e,n){let r=0,i;return s;function s(d){return t.enter("thematicBreak"),o(d)}function o(d){return i=d,l(d)}function l(d){return d===i?(t.enter("thematicBreakSequence"),u(d)):r>=3&&(d===null||Ye(d))?(t.exit("thematicBreak"),e(d)):n(d)}function u(d){return d===i?(t.consume(d),r++,u):(t.exit("thematicBreakSequence"),xt(d)?Nt(t,l,"whitespace")(d):l(d))}}const rr={continuation:{tokenize:IY},exit:AY,name:"list",tokenize:_Y},EY={partial:!0,tokenize:RY},PY={partial:!0,tokenize:NY};function _Y(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return l;function l(y){const C=r.containerState.type||(y===42||y===43||y===45?"listUnordered":"listOrdered");if(C==="listUnordered"?!r.containerState.marker||y===r.containerState.marker:z0(y)){if(r.containerState.type||(r.containerState.type=C,t.enter(C,{_container:!0})),C==="listUnordered")return t.enter("listItemPrefix"),y===42||y===45?t.check(Gf,n,d)(y):d(y);if(!r.interrupt||y===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),u(y)}return n(y)}function u(y){return z0(y)&&++o<10?(t.consume(y),u):(!r.interrupt||o<2)&&(r.containerState.marker?y===r.containerState.marker:y===41||y===46)?(t.exit("listItemValue"),d(y)):n(y)}function d(y){return t.enter("listItemMarker"),t.consume(y),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||y,t.check(xm,r.interrupt?n:f,t.attempt(EY,g,m))}function f(y){return r.containerState.initialBlankLine=!0,s++,g(y)}function m(y){return xt(y)?(t.enter("listItemPrefixWhitespace"),t.consume(y),t.exit("listItemPrefixWhitespace"),g):n(y)}function g(y){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(y)}}function IY(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(xm,i,s);function i(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Nt(t,e,"listItemIndent",r.containerState.size+1)(l)}function s(l){return r.containerState.furtherBlankLines||!xt(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(PY,e,o)(l))}function o(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,Nt(t,t.attempt(rr,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function NY(t,e,n){const r=this;return Nt(t,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):n(s)}}function AY(t){t.exit(this.containerState.type)}function RY(t,e,n){const r=this;return Nt(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!xt(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const VE={name:"setextUnderline",resolveTo:MY,tokenize:DY};function MY(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function DY(t,e,n){const r=this;let i;return s;function s(d){let f=r.events.length,m;for(;f--;)if(r.events[f][1].type!=="lineEnding"&&r.events[f][1].type!=="linePrefix"&&r.events[f][1].type!=="content"){m=r.events[f][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||m)?(t.enter("setextHeadingLine"),i=d,o(d)):n(d)}function o(d){return t.enter("setextHeadingLineSequence"),l(d)}function l(d){return d===i?(t.consume(d),l):(t.exit("setextHeadingLineSequence"),xt(d)?Nt(t,u,"lineSuffix")(d):u(d))}function u(d){return d===null||Ye(d)?(t.exit("setextHeadingLine"),e(d)):n(d)}}const jY={tokenize:OY};function OY(t){const e=this,n=t.attempt(xm,r,t.attempt(this.parser.constructs.flowInitial,i,Nt(t,t.attempt(this.parser.constructs.flow,i,t.attempt(VK,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const LY={resolveAll:mM()},FY=pM("string"),UY=pM("text");function pM(t){return{resolveAll:mM(t==="text"?BY:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,o,l);return o;function o(f){return d(f)?s(f):l(f)}function l(f){if(f===null){n.consume(f);return}return n.enter("data"),n.consume(f),u}function u(f){return d(f)?(n.exit("data"),s(f)):(n.consume(f),u)}function d(f){if(f===null)return!0;const m=i[f];let g=-1;if(m)for(;++g<m.length;){const y=m[g];if(!y.previous||y.previous.call(r,r.previous))return!0}return!1}}}function mM(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function BY(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,o=-1,l=0,u;for(;s--;){const d=i[s];if(typeof d=="string"){for(o=d.length;d.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(d===-2)u=!0,l++;else if(d!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(l=0),l){const d={type:n===t.length||u||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...d.start},r.start.offset===r.end.offset?Object.assign(r,d):(t.splice(n,0,["enter",d,e],["exit",d,e]),n+=2)}n++}return t}const VY={42:rr,43:rr,45:rr,48:rr,49:rr,50:rr,51:rr,52:rr,53:rr,54:rr,55:rr,56:rr,57:rr,62:aM},zY={91:qK},$Y={[-2]:hy,[-1]:hy,32:hy},WY={35:XK,42:Gf,45:[VE,Gf],60:nY,61:VE,95:Gf,96:UE,126:UE},HY={38:cM,92:lM},qY={[-5]:fy,[-4]:fy,[-3]:fy,33:xY,38:cM,42:$0,60:[kK,cY],91:kY,92:[JK,lM],93:nw,95:$0,96:jK},GY={null:[$0,LY]},KY={null:[42,95]},YY={null:[]},JY=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:KY,contentInitial:zY,disable:YY,document:VY,flow:WY,flowInitial:$Y,insideSpan:GY,string:HY,text:qY},Symbol.toStringTag,{value:"Module"}));function QY(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],l=[];const u={attempt:L(I),check:L(A),consume:_,enter:P,exit:E,interrupt:L(A,{interrupt:!0})},d={code:null,containerState:{},defineSkip:x,events:[],now:C,parser:t,previous:null,sliceSerialize:g,sliceStream:y,write:m};let f=e.tokenize.call(d,u);return e.resolveAll&&s.push(e),d;function m(z){return o=Ur(o,z),k(),o[o.length-1]!==null?[]:(R(e,0),d.events=tw(s,d.events,d),d.events)}function g(z,F){return ZY(y(z),F)}function y(z){return XY(o,z)}function C(){const{_bufferIndex:z,_index:F,line:W,column:Y,offset:K}=r;return{_bufferIndex:z,_index:F,line:W,column:Y,offset:K}}function x(z){i[z.line]=z.column,U()}function k(){let z;for(;r._index<o.length;){const F=o[r._index];if(typeof F=="string")for(z=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===z&&r._bufferIndex<F.length;)T(F.charCodeAt(r._bufferIndex));else T(F)}}function T(z){f=f(z)}function _(z){Ye(z)?(r.line++,r.column=1,r.offset+=z===-3?2:1,U()):z!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),d.previous=z}function P(z,F){const W=F||{};return W.type=z,W.start=C(),d.events.push(["enter",W,d]),l.push(W),W}function E(z){const F=l.pop();return F.end=C(),d.events.push(["exit",F,d]),F}function I(z,F){R(z,F.from)}function A(z,F){F.restore()}function L(z,F){return W;function W(Y,K,X){let se,H,te,D;return Array.isArray(Y)?re(Y):"tokenize"in Y?re([Y]):$(Y);function $(ce){return ie;function ie(Se){const Ce=Se!==null&&ce[Se],Le=Se!==null&&ce.null,qe=[...Array.isArray(Ce)?Ce:Ce?[Ce]:[],...Array.isArray(Le)?Le:Le?[Le]:[]];return re(qe)(Se)}}function re(ce){return se=ce,H=0,ce.length===0?X:O(ce[H])}function O(ce){return ie;function ie(Se){return D=j(),te=ce,ce.partial||(d.currentConstruct=ce),ce.name&&d.parser.constructs.disable.null.includes(ce.name)?oe():ce.tokenize.call(F?Object.assign(Object.create(d),F):d,u,ve,oe)(Se)}}function ve(ce){return z(te,D),K}function oe(ce){return D.restore(),++H<se.length?O(se[H]):X}}}function R(z,F){z.resolveAll&&!s.includes(z)&&s.push(z),z.resolve&&qi(d.events,F,d.events.length-F,z.resolve(d.events.slice(F),d)),z.resolveTo&&(d.events=z.resolveTo(d.events,d))}function j(){const z=C(),F=d.previous,W=d.currentConstruct,Y=d.events.length,K=Array.from(l);return{from:Y,restore:X};function X(){r=z,d.previous=F,d.currentConstruct=W,d.events.length=Y,l=K,U()}}function U(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function XY(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(r,s)];else{if(o=t.slice(n,i),r>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(r):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function ZY(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function eJ(t){const r={constructs:aK([JY,...(t||{}).extensions||[]]),content:i(mK),defined:[],document:i(vK),flow:i(jY),lazy:{},string:i(FY),text:i(UY)};return r;function i(s){return o;function o(l){return QY(r,s,l)}}}function tJ(t){for(;!uM(t););return t}const zE=/[\0\t\n\r]/g;function nJ(){let t=1,e="",n=!0,r;return i;function i(s,o,l){const u=[];let d,f,m,g,y;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),m=0,e="",n&&(s.charCodeAt(0)===65279&&m++,n=void 0);m<s.length;){if(zE.lastIndex=m,d=zE.exec(s),g=d&&d.index!==void 0?d.index:s.length,y=s.charCodeAt(g),!d){e=s.slice(m);break}if(y===10&&m===g&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),m<g&&(u.push(s.slice(m,g)),t+=g-m),y){case 0:{u.push(65533),t++;break}case 9:{for(f=Math.ceil(t/4)*4,u.push(-2);t++<f;)u.push(-1);break}case 10:{u.push(-4),t=1;break}default:r=!0,t=1}m=g+1}return l&&(r&&u.push(-5),e&&u.push(e),u.push(null)),u}}const rJ=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function iJ(t){return t.replace(rJ,sJ)}function sJ(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return oM(n.slice(s?2:1),s?16:10)}return ew(n)||t}const gM={}.hasOwnProperty;function oJ(t,e,n){return typeof e!="string"&&(n=e,e=void 0),aJ(n)(tJ(eJ(n).document().write(nJ()(t,e,!0))))}function aJ(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(on),autolinkProtocol:j,autolinkEmail:j,atxHeading:s(sn),blockQuote:s(Le),characterEscape:j,characterReference:j,codeFenced:s(qe),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(qe,o),codeText:s(Je,o),codeTextData:j,data:j,codeFlowValue:j,definition:s(jt),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Ct),hardBreakEscape:s(fn),hardBreakTrailing:s(fn),htmlFlow:s(Pn,o),htmlFlowData:j,htmlText:s(Pn,o),htmlTextData:j,image:s(cr),label:o,link:s(on),listItem:s(_n),listItemValue:g,listOrdered:s(Fn,m),listUnordered:s(Fn),paragraph:s(Cr),reference:O,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(sn),strong:s(Jn),thematicBreak:s(Tr)},exit:{atxHeading:u(),atxHeadingSequence:I,autolink:u(),autolinkEmail:Ce,autolinkProtocol:Se,blockQuote:u(),characterEscapeValue:U,characterReferenceMarkerHexadecimal:oe,characterReferenceMarkerNumeric:oe,characterReferenceValue:ce,characterReference:ie,codeFenced:u(k),codeFencedFence:x,codeFencedFenceInfo:y,codeFencedFenceMeta:C,codeFlowValue:U,codeIndented:u(T),codeText:u(K),codeTextData:U,data:U,definition:u(),definitionDestinationString:E,definitionLabelString:_,definitionTitleString:P,emphasis:u(),hardBreakEscape:u(F),hardBreakTrailing:u(F),htmlFlow:u(W),htmlFlowData:U,htmlText:u(Y),htmlTextData:U,image:u(se),label:te,labelText:H,lineEnding:z,link:u(X),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:ve,resourceDestinationString:D,resourceTitleString:$,resource:re,setextHeading:u(R),setextHeadingLineSequence:L,setextHeadingText:A,strong:u(),thematicBreak:u()}};vM(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(M){let Q={type:"root",children:[]};const de={stack:[Q],tokenStack:[],config:e,enter:l,exit:d,buffer:o,resume:f,data:n},be=[];let Pe=-1;for(;++Pe<M.length;)if(M[Pe][1].type==="listOrdered"||M[Pe][1].type==="listUnordered")if(M[Pe][0]==="enter")be.push(Pe);else{const Ne=be.pop();Pe=i(M,Ne,Pe)}for(Pe=-1;++Pe<M.length;){const Ne=e[M[Pe][0]];gM.call(Ne,M[Pe][1].type)&&Ne[M[Pe][1].type].call(Object.assign({sliceSerialize:M[Pe][2].sliceSerialize},de),M[Pe][1])}if(de.tokenStack.length>0){const Ne=de.tokenStack[de.tokenStack.length-1];(Ne[1]||$E).call(de,void 0,Ne[0])}for(Q.position={start:ho(M.length>0?M[0][1].start:{line:1,column:1,offset:0}),end:ho(M.length>0?M[M.length-2][1].end:{line:1,column:1,offset:0})},Pe=-1;++Pe<e.transforms.length;)Q=e.transforms[Pe](Q)||Q;return Q}function i(M,Q,de){let be=Q-1,Pe=-1,Ne=!1,ft,ot,Xe,kt;for(;++be<=de;){const at=M[be];switch(at[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{at[0]==="enter"?Pe++:Pe--,kt=void 0;break}case"lineEndingBlank":{at[0]==="enter"&&(ft&&!kt&&!Pe&&!Xe&&(Xe=be),kt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:kt=void 0}if(!Pe&&at[0]==="enter"&&at[1].type==="listItemPrefix"||Pe===-1&&at[0]==="exit"&&(at[1].type==="listUnordered"||at[1].type==="listOrdered")){if(ft){let Zt=be;for(ot=void 0;Zt--;){const rt=M[Zt];if(rt[1].type==="lineEnding"||rt[1].type==="lineEndingBlank"){if(rt[0]==="exit")continue;ot&&(M[ot][1].type="lineEndingBlank",Ne=!0),rt[1].type="lineEnding",ot=Zt}else if(!(rt[1].type==="linePrefix"||rt[1].type==="blockQuotePrefix"||rt[1].type==="blockQuotePrefixWhitespace"||rt[1].type==="blockQuoteMarker"||rt[1].type==="listItemIndent"))break}Xe&&(!ot||Xe<ot)&&(ft._spread=!0),ft.end=Object.assign({},ot?M[ot][1].start:at[1].end),M.splice(ot||be,0,["exit",ft,at[2]]),be++,de++}if(at[1].type==="listItemPrefix"){const Zt={type:"listItem",_spread:!1,start:Object.assign({},at[1].start),end:void 0};ft=Zt,M.splice(be,0,["enter",Zt,at[2]]),be++,de++,Xe=void 0,kt=!0}}}return M[Q][1]._spread=Ne,de}function s(M,Q){return de;function de(be){l.call(this,M(be),be),Q&&Q.call(this,be)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(M,Q,de){this.stack[this.stack.length-1].children.push(M),this.stack.push(M),this.tokenStack.push([Q,de||void 0]),M.position={start:ho(Q.start),end:void 0}}function u(M){return Q;function Q(de){M&&M.call(this,de),d.call(this,de)}}function d(M,Q){const de=this.stack.pop(),be=this.tokenStack.pop();if(be)be[0].type!==M.type&&(Q?Q.call(this,M,be[0]):(be[1]||$E).call(this,M,be[0]));else throw new Error("Cannot close `"+M.type+"` ("+Ju({start:M.start,end:M.end})+"): its not open");de.position.end=ho(M.end)}function f(){return sK(this.stack.pop())}function m(){this.data.expectingFirstListItemValue=!0}function g(M){if(this.data.expectingFirstListItemValue){const Q=this.stack[this.stack.length-2];Q.start=Number.parseInt(this.sliceSerialize(M),10),this.data.expectingFirstListItemValue=void 0}}function y(){const M=this.resume(),Q=this.stack[this.stack.length-1];Q.lang=M}function C(){const M=this.resume(),Q=this.stack[this.stack.length-1];Q.meta=M}function x(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function k(){const M=this.resume(),Q=this.stack[this.stack.length-1];Q.value=M.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function T(){const M=this.resume(),Q=this.stack[this.stack.length-1];Q.value=M.replace(/(\r?\n|\r)$/g,"")}function _(M){const Q=this.resume(),de=this.stack[this.stack.length-1];de.label=Q,de.identifier=Jl(this.sliceSerialize(M)).toLowerCase()}function P(){const M=this.resume(),Q=this.stack[this.stack.length-1];Q.title=M}function E(){const M=this.resume(),Q=this.stack[this.stack.length-1];Q.url=M}function I(M){const Q=this.stack[this.stack.length-1];if(!Q.depth){const de=this.sliceSerialize(M).length;Q.depth=de}}function A(){this.data.setextHeadingSlurpLineEnding=!0}function L(M){const Q=this.stack[this.stack.length-1];Q.depth=this.sliceSerialize(M).codePointAt(0)===61?1:2}function R(){this.data.setextHeadingSlurpLineEnding=void 0}function j(M){const de=this.stack[this.stack.length-1].children;let be=de[de.length-1];(!be||be.type!=="text")&&(be=zr(),be.position={start:ho(M.start),end:void 0},de.push(be)),this.stack.push(be)}function U(M){const Q=this.stack.pop();Q.value+=this.sliceSerialize(M),Q.position.end=ho(M.end)}function z(M){const Q=this.stack[this.stack.length-1];if(this.data.atHardBreak){const de=Q.children[Q.children.length-1];de.position.end=ho(M.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Q.type)&&(j.call(this,M),U.call(this,M))}function F(){this.data.atHardBreak=!0}function W(){const M=this.resume(),Q=this.stack[this.stack.length-1];Q.value=M}function Y(){const M=this.resume(),Q=this.stack[this.stack.length-1];Q.value=M}function K(){const M=this.resume(),Q=this.stack[this.stack.length-1];Q.value=M}function X(){const M=this.stack[this.stack.length-1];if(this.data.inReference){const Q=this.data.referenceType||"shortcut";M.type+="Reference",M.referenceType=Q,delete M.url,delete M.title}else delete M.identifier,delete M.label;this.data.referenceType=void 0}function se(){const M=this.stack[this.stack.length-1];if(this.data.inReference){const Q=this.data.referenceType||"shortcut";M.type+="Reference",M.referenceType=Q,delete M.url,delete M.title}else delete M.identifier,delete M.label;this.data.referenceType=void 0}function H(M){const Q=this.sliceSerialize(M),de=this.stack[this.stack.length-2];de.label=iJ(Q),de.identifier=Jl(Q).toLowerCase()}function te(){const M=this.stack[this.stack.length-1],Q=this.resume(),de=this.stack[this.stack.length-1];if(this.data.inReference=!0,de.type==="link"){const be=M.children;de.children=be}else de.alt=Q}function D(){const M=this.resume(),Q=this.stack[this.stack.length-1];Q.url=M}function $(){const M=this.resume(),Q=this.stack[this.stack.length-1];Q.title=M}function re(){this.data.inReference=void 0}function O(){this.data.referenceType="collapsed"}function ve(M){const Q=this.resume(),de=this.stack[this.stack.length-1];de.label=Q,de.identifier=Jl(this.sliceSerialize(M)).toLowerCase(),this.data.referenceType="full"}function oe(M){this.data.characterReferenceType=M.type}function ce(M){const Q=this.sliceSerialize(M),de=this.data.characterReferenceType;let be;de?(be=oM(Q,de==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):be=ew(Q);const Pe=this.stack[this.stack.length-1];Pe.value+=be}function ie(M){const Q=this.stack.pop();Q.position.end=ho(M.end)}function Se(M){U.call(this,M);const Q=this.stack[this.stack.length-1];Q.url=this.sliceSerialize(M)}function Ce(M){U.call(this,M);const Q=this.stack[this.stack.length-1];Q.url="mailto:"+this.sliceSerialize(M)}function Le(){return{type:"blockquote",children:[]}}function qe(){return{type:"code",lang:null,meta:null,value:""}}function Je(){return{type:"inlineCode",value:""}}function jt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ct(){return{type:"emphasis",children:[]}}function sn(){return{type:"heading",depth:0,children:[]}}function fn(){return{type:"break"}}function Pn(){return{type:"html",value:""}}function cr(){return{type:"image",title:null,url:"",alt:null}}function on(){return{type:"link",title:null,url:"",children:[]}}function Fn(M){return{type:"list",ordered:M.type==="listOrdered",start:null,spread:M._spread,children:[]}}function _n(M){return{type:"listItem",spread:M._spread,checked:null,children:[]}}function Cr(){return{type:"paragraph",children:[]}}function Jn(){return{type:"strong",children:[]}}function zr(){return{type:"text",value:""}}function Tr(){return{type:"thematicBreak"}}}function ho(t){return{line:t.line,column:t.column,offset:t.offset}}function vM(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?vM(t,r):lJ(t,r)}}function lJ(t,e){let n;for(n in e)if(gM.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function $E(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Ju({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Ju({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Ju({start:e.start,end:e.end})+") is still open")}function cJ(t){const e=this;e.parser=n;function n(r){return oJ(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function uJ(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function dJ(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function hJ(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function fJ(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function pJ(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function mJ(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=Oc(r.toLowerCase()),s=t.footnoteOrder.indexOf(r);let o,l=t.footnoteCounts.get(r);l===void 0?(l=0,t.footnoteOrder.push(r),o=t.footnoteOrder.length):o=s+1,l+=1,t.footnoteCounts.set(r,l);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,u);const d={type:"element",tagName:"sup",properties:{},children:[u]};return t.patch(e,d),t.applyData(e,d)}function gJ(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function vJ(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function yM(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function yJ(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return yM(t,e);const i={src:Oc(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function bJ(t,e){const n={src:Oc(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function xJ(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function wJ(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return yM(t,e);const i={href:Oc(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function kJ(t,e){const n={href:Oc(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function SJ(t,e,n){const r=t.all(e),i=n?CJ(n):bM(e),s={},o=[];if(typeof e.checked=="boolean"){const f=r[0];let m;f&&f.type==="element"&&f.tagName==="p"?m=f:(m={type:"element",tagName:"p",properties:{},children:[]},r.unshift(m)),m.children.length>0&&m.children.unshift({type:"text",value:" "}),m.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const f=r[l];(i||l!==0||f.type!=="element"||f.tagName!=="p")&&o.push({type:"text",value:`
`}),f.type==="element"&&f.tagName==="p"&&!i?o.push(...f.children):o.push(f)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,d),t.applyData(e,d)}function CJ(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=bM(n[r])}return e}function bM(t){const e=t.spread;return e??t.children.length>1}function TJ(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function EJ(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function PJ(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function _J(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function IJ(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},l=Jx(e.children[1]),u=ZR(e.children[e.children.length-1]);l&&u&&(o.position={start:l,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function NJ(t,e,n){const r=n?n.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,l=o?o.length:e.children.length;let u=-1;const d=[];for(;++u<l;){const m=e.children[u],g={},y=o?o[u]:void 0;y&&(g.align=y);let C={type:"element",tagName:s,properties:g,children:[]};m&&(C.children=t.all(m),t.patch(m,C),C=t.applyData(m,C)),d.push(C)}const f={type:"element",tagName:"tr",properties:{},children:t.wrap(d,!0)};return t.patch(e,f),t.applyData(e,f)}function AJ(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const WE=9,HE=32;function RJ(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const s=[];for(;r;)s.push(qE(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return s.push(qE(e.slice(i),i>0,!1)),s.join("")}function qE(t,e,n){let r=0,i=t.length;if(e){let s=t.codePointAt(r);for(;s===WE||s===HE;)r++,s=t.codePointAt(r)}if(n){let s=t.codePointAt(i-1);for(;s===WE||s===HE;)i--,s=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function MJ(t,e){const n={type:"text",value:RJ(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function DJ(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const jJ={blockquote:uJ,break:dJ,code:hJ,delete:fJ,emphasis:pJ,footnoteReference:mJ,heading:gJ,html:vJ,imageReference:yJ,image:bJ,inlineCode:xJ,linkReference:wJ,link:kJ,listItem:SJ,list:TJ,paragraph:EJ,root:PJ,strong:_J,table:IJ,tableCell:AJ,tableRow:NJ,text:MJ,thematicBreak:DJ,toml:Sf,yaml:Sf,definition:Sf,footnoteDefinition:Sf};function Sf(){}const xM=-1,wm=0,Xu=1,Ap=2,rw=3,iw=4,sw=5,ow=6,wM=7,kM=8,GE=typeof self=="object"?self:globalThis,OJ=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),r=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case wm:case xM:return n(o,i);case Xu:{const l=n([],i);for(const u of o)l.push(r(u));return l}case Ap:{const l=n({},i);for(const[u,d]of o)l[r(u)]=r(d);return l}case rw:return n(new Date(o),i);case iw:{const{source:l,flags:u}=o;return n(new RegExp(l,u),i)}case sw:{const l=n(new Map,i);for(const[u,d]of o)l.set(r(u),r(d));return l}case ow:{const l=n(new Set,i);for(const u of o)l.add(r(u));return l}case wM:{const{name:l,message:u}=o;return n(new GE[l](u),i)}case kM:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return n(new DataView(l),o)}}return n(new GE[s](o),i)};return r},KE=t=>OJ(new Map,t)(0),_l="",{toString:LJ}={},{keys:FJ}=Object,Eu=t=>{const e=typeof t;if(e!=="object"||!t)return[wm,e];const n=LJ.call(t).slice(8,-1);switch(n){case"Array":return[Xu,_l];case"Object":return[Ap,_l];case"Date":return[rw,_l];case"RegExp":return[iw,_l];case"Map":return[sw,_l];case"Set":return[ow,_l];case"DataView":return[Xu,n]}return n.includes("Array")?[Xu,n]:n.includes("Error")?[wM,n]:[Ap,n]},Cf=([t,e])=>t===wm&&(e==="function"||e==="symbol"),UJ=(t,e,n,r)=>{const i=(o,l)=>{const u=r.push(o)-1;return n.set(l,u),u},s=o=>{if(n.has(o))return n.get(o);let[l,u]=Eu(o);switch(l){case wm:{let f=o;switch(u){case"bigint":l=kM,f=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+u);f=null;break;case"undefined":return i([xM],o)}return i([l,f],o)}case Xu:{if(u){let g=o;return u==="DataView"?g=new Uint8Array(o.buffer):u==="ArrayBuffer"&&(g=new Uint8Array(o)),i([u,[...g]],o)}const f=[],m=i([l,f],o);for(const g of o)f.push(s(g));return m}case Ap:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const f=[],m=i([l,f],o);for(const g of FJ(o))(t||!Cf(Eu(o[g])))&&f.push([s(g),s(o[g])]);return m}case rw:return i([l,o.toISOString()],o);case iw:{const{source:f,flags:m}=o;return i([l,{source:f,flags:m}],o)}case sw:{const f=[],m=i([l,f],o);for(const[g,y]of o)(t||!(Cf(Eu(g))||Cf(Eu(y))))&&f.push([s(g),s(y)]);return m}case ow:{const f=[],m=i([l,f],o);for(const g of o)(t||!Cf(Eu(g)))&&f.push(s(g));return m}}const{message:d}=o;return i([l,{name:u,message:d}],o)};return s},YE=(t,{json:e,lossy:n}={})=>{const r=[];return UJ(!(e||n),!!e,new Map,r)(t),r},Rp=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?KE(YE(t,e)):structuredClone(t):(t,e)=>KE(YE(t,e));function BJ(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function VJ(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function zJ(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||BJ,r=t.options.footnoteBackLabel||VJ,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let u=-1;for(;++u<t.footnoteOrder.length;){const d=t.footnoteById.get(t.footnoteOrder[u]);if(!d)continue;const f=t.all(d),m=String(d.identifier).toUpperCase(),g=Oc(m.toLowerCase());let y=0;const C=[],x=t.footnoteCounts.get(m);for(;x!==void 0&&++y<=x;){C.length>0&&C.push({type:"text",value:" "});let _=typeof n=="string"?n:n(u,y);typeof _=="string"&&(_={type:"text",value:_}),C.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+g+(y>1?"-"+y:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,y),className:["data-footnote-backref"]},children:Array.isArray(_)?_:[_]})}const k=f[f.length-1];if(k&&k.type==="element"&&k.tagName==="p"){const _=k.children[k.children.length-1];_&&_.type==="text"?_.value+=" ":k.children.push({type:"text",value:" "}),k.children.push(...C)}else f.push(...C);const T={type:"element",tagName:"li",properties:{id:e+"fn-"+g},children:t.wrap(f,!0)};t.patch(d,T),l.push(T)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Rp(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(l,!0)},{type:"text",value:`
`}]}}const SM=(function(t){if(t==null)return qJ;if(typeof t=="function")return km(t);if(typeof t=="object")return Array.isArray(t)?$J(t):WJ(t);if(typeof t=="string")return HJ(t);throw new Error("Expected function, string, or object as test")});function $J(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=SM(t[n]);return km(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function WJ(t){const e=t;return km(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function HJ(t){return km(e);function e(n){return n&&n.type===t}}function km(t){return e;function e(n,r,i){return!!(GJ(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function qJ(){return!0}function GJ(t){return t!==null&&typeof t=="object"&&"type"in t}const CM=[],KJ=!0,JE=!1,YJ="skip";function JJ(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=SM(i),o=r?-1:1;l(t,void 0,[])();function l(u,d,f){const m=u&&typeof u=="object"?u:{};if(typeof m.type=="string"){const y=typeof m.tagName=="string"?m.tagName:typeof m.name=="string"?m.name:void 0;Object.defineProperty(g,"name",{value:"node ("+(u.type+(y?"<"+y+">":""))+")"})}return g;function g(){let y=CM,C,x,k;if((!e||s(u,d,f[f.length-1]||void 0))&&(y=QJ(n(u,f)),y[0]===JE))return y;if("children"in u&&u.children){const T=u;if(T.children&&y[0]!==YJ)for(x=(r?T.children.length:-1)+o,k=f.concat(T);x>-1&&x<T.children.length;){const _=T.children[x];if(C=l(_,x,k)(),C[0]===JE)return C;x=typeof C[1]=="number"?C[1]:x+o}}return y}}}function QJ(t){return Array.isArray(t)?t:typeof t=="number"?[KJ,t]:t==null?CM:[t]}function TM(t,e,n,r){let i,s,o;typeof e=="function"&&typeof n!="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=r),JJ(t,s,l,i);function l(u,d){const f=d[d.length-1],m=f?f.children.indexOf(u):void 0;return o(u,m,f)}}const W0={}.hasOwnProperty,XJ={};function ZJ(t,e){const n=e||XJ,r=new Map,i=new Map,s=new Map,o={...jJ,...n.handlers},l={all:d,applyData:tQ,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:eQ,wrap:rQ};return TM(t,function(f){if(f.type==="definition"||f.type==="footnoteDefinition"){const m=f.type==="definition"?r:i,g=String(f.identifier).toUpperCase();m.has(g)||m.set(g,f)}}),l;function u(f,m){const g=f.type,y=l.handlers[g];if(W0.call(l.handlers,g)&&y)return y(l,f,m);if(l.options.passThrough&&l.options.passThrough.includes(g)){if("children"in f){const{children:x,...k}=f,T=Rp(k);return T.children=l.all(f),T}return Rp(f)}return(l.options.unknownHandler||nQ)(l,f,m)}function d(f){const m=[];if("children"in f){const g=f.children;let y=-1;for(;++y<g.length;){const C=l.one(g[y],f);if(C){if(y&&g[y-1].type==="break"&&(!Array.isArray(C)&&C.type==="text"&&(C.value=QE(C.value)),!Array.isArray(C)&&C.type==="element")){const x=C.children[0];x&&x.type==="text"&&(x.value=QE(x.value))}Array.isArray(C)?m.push(...C):m.push(C)}}}return m}}function eQ(t,e){t.position&&(e.position=LG(t))}function tQ(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,Rp(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function nQ(t,e){const n=e.data||{},r="value"in e&&!(W0.call(n,"hProperties")||W0.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function rQ(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function QE(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function XE(t,e){const n=ZJ(t,e),r=n.one(t,void 0),i=zJ(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function iQ(t,e){return t&&"run"in t?async function(n,r){const i=XE(n,{file:r,...e});await t.run(i,r)}:function(n,r){return XE(n,{file:r,...t||e})}}function ZE(t){if(t)throw t}var py,eP;function sQ(){if(eP)return py;eP=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(d){return typeof Array.isArray=="function"?Array.isArray(d):e.call(d)==="[object Array]"},s=function(d){if(!d||e.call(d)!=="[object Object]")return!1;var f=t.call(d,"constructor"),m=d.constructor&&d.constructor.prototype&&t.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!f&&!m)return!1;var g;for(g in d);return typeof g>"u"||t.call(d,g)},o=function(d,f){n&&f.name==="__proto__"?n(d,f.name,{enumerable:!0,configurable:!0,value:f.newValue,writable:!0}):d[f.name]=f.newValue},l=function(d,f){if(f==="__proto__")if(t.call(d,f)){if(r)return r(d,f).value}else return;return d[f]};return py=function u(){var d,f,m,g,y,C,x=arguments[0],k=1,T=arguments.length,_=!1;for(typeof x=="boolean"&&(_=x,x=arguments[1]||{},k=2),(x==null||typeof x!="object"&&typeof x!="function")&&(x={});k<T;++k)if(d=arguments[k],d!=null)for(f in d)m=l(x,f),g=l(d,f),x!==g&&(_&&g&&(s(g)||(y=i(g)))?(y?(y=!1,C=m&&i(m)?m:[]):C=m&&s(m)?m:{},o(x,{name:f,newValue:u(_,C,g)})):typeof g<"u"&&o(x,{name:f,newValue:g}));return x},py}var oQ=sQ();const my=jd(oQ);function H0(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function aQ(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...i);function l(u,...d){const f=t[++s];let m=-1;if(u){o(u);return}for(;++m<i.length;)(d[m]===null||d[m]===void 0)&&(d[m]=i[m]);i=d,f?lQ(f,l)(...d):o(null,...d)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function lQ(t,e){let n;return r;function r(...o){const l=t.length>o.length;let u;l&&o.push(i);try{u=t.apply(this,o)}catch(d){const f=d;if(l&&n)throw f;return i(f)}l||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...l){n||(n=!0,e(o,...l))}function s(o){i(null,o)}}const _i={basename:cQ,dirname:uQ,extname:dQ,join:hQ,sep:"/"};function cQ(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Qd(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,l=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),l>-1&&(t.codePointAt(i)===e.codePointAt(l--)?l<0&&(r=i):(l=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function uQ(t){if(Qd(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function dQ(t){Qd(t);let e=t.length,n=-1,r=0,i=-1,s=0,o;for(;e--;){const l=t.codePointAt(e);if(l===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),l===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function hQ(...t){let e=-1,n;for(;++e<t.length;)Qd(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":fQ(n)}function fQ(t){Qd(t);const e=t.codePointAt(0)===47;let n=pQ(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function pQ(t,e){let n="",r=0,i=-1,s=0,o=-1,l,u;for(;++o<=t.length;){if(o<t.length)l=t.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else l===46&&s>-1?s++:s=-1}return n}function Qd(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const mQ={cwd:gQ};function gQ(){return"/"}function q0(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function vQ(t){if(typeof t=="string")t=new URL(t);else if(!q0(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return yQ(t)}function yQ(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const gy=["history","path","basename","stem","extname","dirname"];class EM{constructor(e){let n;e?q0(e)?n={path:e}:typeof e=="string"||bQ(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":mQ.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<gy.length;){const s=gy[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)gy.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?_i.basename(this.path):void 0}set basename(e){yy(e,"basename"),vy(e,"basename"),this.path=_i.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?_i.dirname(this.path):void 0}set dirname(e){tP(this.basename,"dirname"),this.path=_i.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?_i.extname(this.path):void 0}set extname(e){if(vy(e,"extname"),tP(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=_i.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){q0(e)&&(e=vQ(e)),yy(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?_i.basename(this.path,this.extname):void 0}set stem(e){yy(e,"stem"),vy(e,"stem"),this.path=_i.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new Ln(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function vy(t,e){if(t&&t.includes(_i.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+_i.sep+"`")}function yy(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function tP(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function bQ(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const xQ=(function(t){const r=this.constructor.prototype,i=r[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s}),wQ={}.hasOwnProperty;class aw extends xQ{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=aQ()}copy(){const e=new aw;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(my(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(wy("data",this.frozen),this.namespace[e]=n,this):wQ.call(this.namespace,e)&&this.namespace[e]||void 0:e?(wy("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Tf(e),r=this.parser||this.Parser;return by("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),by("process",this.parser||this.Parser),xy("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const l=Tf(e),u=r.parse(l);r.run(u,l,function(f,m,g){if(f||!m||!g)return d(f);const y=m,C=r.stringify(y,g);CQ(C)?g.value=C:g.result=C,d(f,g)});function d(f,m){f||!m?o(f):s?s(m):n(void 0,m)}}}processSync(e){let n=!1,r;return this.freeze(),by("processSync",this.parser||this.Parser),xy("processSync",this.compiler||this.Compiler),this.process(e,i),rP("processSync","process",n),r;function i(s,o){n=!0,ZE(s),r=o}}run(e,n,r){nP(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,l){const u=Tf(n);i.run(e,u,d);function d(f,m,g){const y=m||e;f?l(f):o?o(y):r(void 0,y,g)}}}runSync(e,n){let r=!1,i;return this.run(e,n,s),rP("runSync","run",r),i;function s(o,l){ZE(o),i=l,r=!0}}stringify(e,n){this.freeze();const r=Tf(n),i=this.compiler||this.Compiler;return xy("stringify",i),nP(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(wy("use",this.frozen),e!=null)if(typeof e=="function")u(e,n);else if(typeof e=="object")Array.isArray(e)?l(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(d){if(typeof d=="function")u(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[f,...m]=d;u(f,m)}else o(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function o(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(d.plugins),d.settings&&(i.settings=my(!0,i.settings,d.settings))}function l(d){let f=-1;if(d!=null)if(Array.isArray(d))for(;++f<d.length;){const m=d[f];s(m)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function u(d,f){let m=-1,g=-1;for(;++m<r.length;)if(r[m][0]===d){g=m;break}if(g===-1)r.push([d,...f]);else if(f.length>0){let[y,...C]=f;const x=r[g][1];H0(x)&&H0(y)&&(y=my(!0,x,y)),r[g]=[d,y,...C]}}}}const kQ=new aw().freeze();function by(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function xy(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function wy(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function nP(t){if(!H0(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function rP(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Tf(t){return SQ(t)?t:new EM(t)}function SQ(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function CQ(t){return typeof t=="string"||TQ(t)}function TQ(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const EQ="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",iP=[],sP={allowDangerousHtml:!0},PQ=/^(https?|ircs?|mailto|xmpp)$/i,_Q=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function PM(t){const e=IQ(t),n=NQ(t);return AQ(e.runSync(e.parse(n),n),t)}function IQ(t){const e=t.rehypePlugins||iP,n=t.remarkPlugins||iP,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...sP}:sP;return kQ().use(cJ).use(n).use(iQ,r).use(e)}function NQ(t){const e=t.children||"",n=new EM;return typeof e=="string"&&(n.value=e),n}function AQ(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,l=e.unwrapDisallowed,u=e.urlTransform||RQ;for(const f of _Q)Object.hasOwn(e,f.from)&&(""+f.from+(f.to?"use `"+f.to+"` instead":"remove it")+EQ+f.id,void 0);return e.className&&(t={type:"element",tagName:"div",properties:{className:e.className},children:t.type==="root"?t.children:[t]}),TM(t,d),zG(t,{Fragment:h.Fragment,components:i,ignoreInvalidStyle:!0,jsx:h.jsx,jsxs:h.jsxs,passKeys:!0,passNode:!0});function d(f,m,g){if(f.type==="raw"&&g&&typeof m=="number")return o?g.children.splice(m,1):g.children[m]={type:"text",value:f.value},m;if(f.type==="element"){let y;for(y in dy)if(Object.hasOwn(dy,y)&&Object.hasOwn(f.properties,y)){const C=f.properties[y],x=dy[y];(x===null||x.includes(f.tagName))&&(f.properties[y]=u(String(C||""),y,f))}}if(f.type==="element"){let y=n?!n.includes(f.tagName):s?s.includes(f.tagName):!1;if(!y&&r&&typeof m=="number"&&(y=!r(f,m,g)),y&&g&&typeof m=="number")return l&&f.children?g.children.splice(m,1,...f.children):g.children.splice(m,1),m}}}function RQ(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||PQ.test(t.slice(0,e))?t:""}function Ue(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function MQ(t,e){const n=w.createContext(e),r=s=>{const{children:o,...l}=s,u=w.useMemo(()=>l,Object.values(l));return h.jsx(n.Provider,{value:u,children:o})};r.displayName=t+"Provider";function i(s){const o=w.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,i]}function Xi(t,e=[]){let n=[];function r(s,o){const l=w.createContext(o),u=n.length;n=[...n,o];const d=m=>{var T;const{scope:g,children:y,...C}=m,x=((T=g==null?void 0:g[t])==null?void 0:T[u])||l,k=w.useMemo(()=>C,Object.values(C));return h.jsx(x.Provider,{value:k,children:y})};d.displayName=s+"Provider";function f(m,g){var x;const y=((x=g==null?void 0:g[t])==null?void 0:x[u])||l,C=w.useContext(y);if(C)return C;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${s}\``)}return[d,f]}const i=()=>{const s=n.map(o=>w.createContext(o));return function(l){const u=(l==null?void 0:l[t])||s;return w.useMemo(()=>({[`__scope${t}`]:{...l,[t]:u}}),[l,u])}};return i.scopeName=t,[r,DQ(i,...e)]}function DQ(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((l,{useScope:u,scopeName:d})=>{const m=u(s)[`__scope${d}`];return{...l,...m}},{});return w.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var On=globalThis!=null&&globalThis.document?w.useLayoutEffect:()=>{},jQ=zb[" useInsertionEffect ".trim().toString()]||On;function kc({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,o]=OQ({defaultProp:e,onChange:n}),l=t!==void 0,u=l?t:i;{const f=w.useRef(t!==void 0);w.useEffect(()=>{const m=f.current;m!==l&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,r])}const d=w.useCallback(f=>{var m;if(l){const g=LQ(f)?f(t):f;g!==t&&((m=o.current)==null||m.call(o,g))}else s(f)},[l,t,s,o]);return[u,d]}function OQ({defaultProp:t,onChange:e}){const[n,r]=w.useState(t),i=w.useRef(n),s=w.useRef(e);return jQ(()=>{s.current=e},[e]),w.useEffect(()=>{var o;i.current!==n&&((o=s.current)==null||o.call(s,n),i.current=n)},[n,i]),[n,r,s]}function LQ(t){return typeof t=="function"}function _M(t){const e=w.useRef({value:t,previous:t});return w.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}function IM(t){const[e,n]=w.useState(void 0);return On(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,l;if("borderBoxSize"in s){const u=s.borderBoxSize,d=Array.isArray(u)?u[0]:u;o=d.inlineSize,l=d.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var FQ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ut=FQ.reduce((t,e)=>{const n=Ra(`Primitive.${e}`),r=w.forwardRef((i,s)=>{const{asChild:o,...l}=i,u=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(u,{...l,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function NM(t,e){t&&Od.flushSync(()=>t.dispatchEvent(e))}var Sm="Switch",[UQ]=Xi(Sm),[BQ,VQ]=UQ(Sm),AM=w.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:s,required:o,disabled:l,value:u="on",onCheckedChange:d,form:f,...m}=t,[g,y]=w.useState(null),C=wt(e,P=>y(P)),x=w.useRef(!1),k=g?f||!!g.closest("form"):!0,[T,_]=kc({prop:i,defaultProp:s??!1,onChange:d,caller:Sm});return h.jsxs(BQ,{scope:n,checked:T,disabled:l,children:[h.jsx(ut.button,{type:"button",role:"switch","aria-checked":T,"aria-required":o,"data-state":jM(T),"data-disabled":l?"":void 0,disabled:l,value:u,...m,ref:C,onClick:Ue(t.onClick,P=>{_(E=>!E),k&&(x.current=P.isPropagationStopped(),x.current||P.stopPropagation())})}),k&&h.jsx(DM,{control:g,bubbles:!x.current,name:r,value:u,checked:T,required:o,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});AM.displayName=Sm;var RM="SwitchThumb",MM=w.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,i=VQ(RM,n);return h.jsx(ut.span,{"data-state":jM(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});MM.displayName=RM;var zQ="SwitchBubbleInput",DM=w.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...i},s)=>{const o=w.useRef(null),l=wt(o,s),u=_M(n),d=IM(e);return w.useEffect(()=>{const f=o.current;if(!f)return;const m=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(m,"checked").set;if(u!==n&&y){const C=new Event("click",{bubbles:r});y.call(f,n),f.dispatchEvent(C)}},[u,n,r]),h.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:l,style:{...i.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});DM.displayName=zQ;function jM(t){return t?"checked":"unchecked"}var OM=AM,$Q=MM;const LM=w.forwardRef(({className:t,...e},n)=>h.jsx(OM,{className:et("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:h.jsx($Q,{className:et("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));LM.displayName=OM.displayName;var WQ=zb[" useId ".trim().toString()]||(()=>{}),HQ=0;function Es(t){const[e,n]=w.useState(WQ());return On(()=>{n(r=>r??String(HQ++))},[t]),e?`radix-${e}`:""}function Gi(t){const e=w.useRef(t);return w.useEffect(()=>{e.current=t}),w.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function qQ(t,e=globalThis==null?void 0:globalThis.document){const n=Gi(t);w.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var GQ="DismissableLayer",G0="dismissableLayer.update",KQ="dismissableLayer.pointerDownOutside",YQ="dismissableLayer.focusOutside",oP,FM=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Cm=w.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:l,...u}=t,d=w.useContext(FM),[f,m]=w.useState(null),g=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=w.useState({}),C=wt(e,L=>m(L)),x=Array.from(d.layers),[k]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),T=x.indexOf(k),_=f?x.indexOf(f):-1,P=d.layersWithOutsidePointerEventsDisabled.size>0,E=_>=T,I=XQ(L=>{const R=L.target,j=[...d.branches].some(U=>U.contains(R));!E||j||(i==null||i(L),o==null||o(L),L.defaultPrevented||l==null||l())},g),A=ZQ(L=>{const R=L.target;[...d.branches].some(U=>U.contains(R))||(s==null||s(L),o==null||o(L),L.defaultPrevented||l==null||l())},g);return qQ(L=>{_===d.layers.size-1&&(r==null||r(L),!L.defaultPrevented&&l&&(L.preventDefault(),l()))},g),w.useEffect(()=>{if(f)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(oP=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(f)),d.layers.add(f),aP(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=oP)}},[f,g,n,d]),w.useEffect(()=>()=>{f&&(d.layers.delete(f),d.layersWithOutsidePointerEventsDisabled.delete(f),aP())},[f,d]),w.useEffect(()=>{const L=()=>y({});return document.addEventListener(G0,L),()=>document.removeEventListener(G0,L)},[]),h.jsx(ut.div,{...u,ref:C,style:{pointerEvents:P?E?"auto":"none":void 0,...t.style},onFocusCapture:Ue(t.onFocusCapture,A.onFocusCapture),onBlurCapture:Ue(t.onBlurCapture,A.onBlurCapture),onPointerDownCapture:Ue(t.onPointerDownCapture,I.onPointerDownCapture)})});Cm.displayName=GQ;var JQ="DismissableLayerBranch",QQ=w.forwardRef((t,e)=>{const n=w.useContext(FM),r=w.useRef(null),i=wt(e,r);return w.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),h.jsx(ut.div,{...t,ref:i})});QQ.displayName=JQ;function XQ(t,e=globalThis==null?void 0:globalThis.document){const n=Gi(t),r=w.useRef(!1),i=w.useRef(()=>{});return w.useEffect(()=>{const s=l=>{if(l.target&&!r.current){let u=function(){UM(KQ,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=u,e.addEventListener("click",i.current,{once:!0})):u()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function ZQ(t,e=globalThis==null?void 0:globalThis.document){const n=Gi(t),r=w.useRef(!1);return w.useEffect(()=>{const i=s=>{s.target&&!r.current&&UM(YQ,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function aP(){const t=new CustomEvent(G0);document.dispatchEvent(t)}function UM(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?NM(i,s):i.dispatchEvent(s)}var ky="focusScope.autoFocusOnMount",Sy="focusScope.autoFocusOnUnmount",lP={bubbles:!1,cancelable:!0},eX="FocusScope",Tm=w.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[l,u]=w.useState(null),d=Gi(i),f=Gi(s),m=w.useRef(null),g=wt(e,x=>u(x)),y=w.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;w.useEffect(()=>{if(r){let x=function(P){if(y.paused||!l)return;const E=P.target;l.contains(E)?m.current=E:vo(m.current,{select:!0})},k=function(P){if(y.paused||!l)return;const E=P.relatedTarget;E!==null&&(l.contains(E)||vo(m.current,{select:!0}))},T=function(P){if(document.activeElement===document.body)for(const I of P)I.removedNodes.length>0&&vo(l)};document.addEventListener("focusin",x),document.addEventListener("focusout",k);const _=new MutationObserver(T);return l&&_.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",k),_.disconnect()}}},[r,l,y.paused]),w.useEffect(()=>{if(l){uP.add(y);const x=document.activeElement;if(!l.contains(x)){const T=new CustomEvent(ky,lP);l.addEventListener(ky,d),l.dispatchEvent(T),T.defaultPrevented||(tX(oX(BM(l)),{select:!0}),document.activeElement===x&&vo(l))}return()=>{l.removeEventListener(ky,d),setTimeout(()=>{const T=new CustomEvent(Sy,lP);l.addEventListener(Sy,f),l.dispatchEvent(T),T.defaultPrevented||vo(x??document.body,{select:!0}),l.removeEventListener(Sy,f),uP.remove(y)},0)}}},[l,d,f,y]);const C=w.useCallback(x=>{if(!n&&!r||y.paused)return;const k=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,T=document.activeElement;if(k&&T){const _=x.currentTarget,[P,E]=nX(_);P&&E?!x.shiftKey&&T===E?(x.preventDefault(),n&&vo(P,{select:!0})):x.shiftKey&&T===P&&(x.preventDefault(),n&&vo(E,{select:!0})):T===_&&x.preventDefault()}},[n,r,y.paused]);return h.jsx(ut.div,{tabIndex:-1,...o,ref:g,onKeyDown:C})});Tm.displayName=eX;function tX(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(vo(r,{select:e}),document.activeElement!==n)return}function nX(t){const e=BM(t),n=cP(e,t),r=cP(e.reverse(),t);return[n,r]}function BM(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function cP(t,e){for(const n of t)if(!rX(n,{upTo:e}))return n}function rX(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function iX(t){return t instanceof HTMLInputElement&&"select"in t}function vo(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&iX(t)&&e&&t.select()}}var uP=sX();function sX(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=dP(t,e),t.unshift(e)},remove(e){var n;t=dP(t,e),(n=t[0])==null||n.resume()}}}function dP(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function oX(t){return t.filter(e=>e.tagName!=="A")}var aX="Portal",Em=w.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[i,s]=w.useState(!1);On(()=>s(!0),[]);const o=n||i&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?t6.createPortal(h.jsx(ut.div,{...r,ref:e}),o):null});Em.displayName=aX;function lX(t,e){return w.useReducer((n,r)=>e[n][r]??n,t)}var Xo=t=>{const{present:e,children:n}=t,r=cX(e),i=typeof n=="function"?n({present:r.isPresent}):w.Children.only(n),s=wt(r.ref,uX(i));return typeof n=="function"||r.isPresent?w.cloneElement(i,{ref:s}):null};Xo.displayName="Presence";function cX(t){const[e,n]=w.useState(),r=w.useRef(null),i=w.useRef(t),s=w.useRef("none"),o=t?"mounted":"unmounted",[l,u]=lX(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const d=Ef(r.current);s.current=l==="mounted"?d:"none"},[l]),On(()=>{const d=r.current,f=i.current;if(f!==t){const g=s.current,y=Ef(d);t?u("MOUNT"):y==="none"||(d==null?void 0:d.display)==="none"?u("UNMOUNT"):u(f&&g!==y?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,u]),On(()=>{if(e){let d;const f=e.ownerDocument.defaultView??window,m=y=>{const x=Ef(r.current).includes(CSS.escape(y.animationName));if(y.target===e&&x&&(u("ANIMATION_END"),!i.current)){const k=e.style.animationFillMode;e.style.animationFillMode="forwards",d=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=k)})}},g=y=>{y.target===e&&(s.current=Ef(r.current))};return e.addEventListener("animationstart",g),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{f.clearTimeout(d),e.removeEventListener("animationstart",g),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:w.useCallback(d=>{r.current=d?getComputedStyle(d):null,n(d)},[])}}function Ef(t){return(t==null?void 0:t.animationName)||"none"}function uX(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Cy=0;function lw(){w.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??hP()),document.body.insertAdjacentElement("beforeend",t[1]??hP()),Cy++,()=>{Cy===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Cy--}},[])}function hP(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Oi=function(){return Oi=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Oi.apply(this,arguments)};function VM(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function dX(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var Kf="right-scroll-bar-position",Yf="width-before-scroll-bar",hX="with-scroll-bars-hidden",fX="--removed-body-scroll-bar-size";function Ty(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function pX(t,e){var n=w.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var mX=typeof window<"u"?w.useLayoutEffect:w.useEffect,fP=new WeakMap;function gX(t,e){var n=pX(null,function(r){return t.forEach(function(i){return Ty(i,r)})});return mX(function(){var r=fP.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(l){s.has(l)||Ty(l,null)}),s.forEach(function(l){i.has(l)||Ty(l,o)})}fP.set(n,t)},[t]),n}function vX(t){return t}function yX(t,e){e===void 0&&(e=vX);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(l){return s(l)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(s),o=n}var u=function(){var f=o;o=[],f.forEach(s)},d=function(){return Promise.resolve().then(u)};d(),n={push:function(f){o.push(f),d()},filter:function(f){return o=o.filter(f),n}}}};return i}function bX(t){t===void 0&&(t={});var e=yX(null);return e.options=Oi({async:!0,ssr:!1},t),e}var zM=function(t){var e=t.sideCar,n=VM(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return w.createElement(r,Oi({},n))};zM.isSideCarExport=!0;function xX(t,e){return t.useMedium(e),zM}var $M=bX(),Ey=function(){},Pm=w.forwardRef(function(t,e){var n=w.useRef(null),r=w.useState({onScrollCapture:Ey,onWheelCapture:Ey,onTouchMoveCapture:Ey}),i=r[0],s=r[1],o=t.forwardProps,l=t.children,u=t.className,d=t.removeScrollBar,f=t.enabled,m=t.shards,g=t.sideCar,y=t.noRelative,C=t.noIsolation,x=t.inert,k=t.allowPinchZoom,T=t.as,_=T===void 0?"div":T,P=t.gapMode,E=VM(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),I=g,A=gX([n,e]),L=Oi(Oi({},E),i);return w.createElement(w.Fragment,null,f&&w.createElement(I,{sideCar:$M,removeScrollBar:d,shards:m,noRelative:y,noIsolation:C,inert:x,setCallbacks:s,allowPinchZoom:!!k,lockRef:n,gapMode:P}),o?w.cloneElement(w.Children.only(l),Oi(Oi({},L),{ref:A})):w.createElement(_,Oi({},L,{className:u,ref:A}),l))});Pm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Pm.classNames={fullWidth:Yf,zeroRight:Kf};var wX=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function kX(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=wX();return e&&t.setAttribute("nonce",e),t}function SX(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function CX(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var TX=function(){var t=0,e=null;return{add:function(n){t==0&&(e=kX())&&(SX(e,n),CX(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},EX=function(){var t=TX();return function(e,n){w.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},WM=function(){var t=EX(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},PX={left:0,top:0,right:0,gap:0},Py=function(t){return parseInt(t||"",10)||0},_X=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[Py(n),Py(r),Py(i)]},IX=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return PX;var e=_X(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},NX=WM(),Ql="data-scroll-locked",AX=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(hX,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Ql,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Kf,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Yf,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Kf," .").concat(Kf,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Yf," .").concat(Yf,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Ql,`] {
    `).concat(fX,": ").concat(l,`px;
  }
`)},pP=function(){var t=parseInt(document.body.getAttribute(Ql)||"0",10);return isFinite(t)?t:0},RX=function(){w.useEffect(function(){return document.body.setAttribute(Ql,(pP()+1).toString()),function(){var t=pP()-1;t<=0?document.body.removeAttribute(Ql):document.body.setAttribute(Ql,t.toString())}},[])},MX=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;RX();var s=w.useMemo(function(){return IX(i)},[i]);return w.createElement(NX,{styles:AX(s,!e,i,n?"":"!important")})},K0=!1;if(typeof window<"u")try{var Pf=Object.defineProperty({},"passive",{get:function(){return K0=!0,!0}});window.addEventListener("test",Pf,Pf),window.removeEventListener("test",Pf,Pf)}catch{K0=!1}var Il=K0?{passive:!1}:!1,DX=function(t){return t.tagName==="TEXTAREA"},HM=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!DX(t)&&n[e]==="visible")},jX=function(t){return HM(t,"overflowY")},OX=function(t){return HM(t,"overflowX")},mP=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=qM(t,r);if(i){var s=GM(t,r),o=s[1],l=s[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},LX=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},FX=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},qM=function(t,e){return t==="v"?jX(e):OX(e)},GM=function(t,e){return t==="v"?LX(e):FX(e)},UX=function(t,e){return t==="h"&&e==="rtl"?-1:1},BX=function(t,e,n,r,i){var s=UX(t,window.getComputedStyle(e).direction),o=s*r,l=n.target,u=e.contains(l),d=!1,f=o>0,m=0,g=0;do{if(!l)break;var y=GM(t,l),C=y[0],x=y[1],k=y[2],T=x-k-s*C;(C||T)&&qM(t,l)&&(m+=T,g+=C);var _=l.parentNode;l=_&&_.nodeType===Node.DOCUMENT_FRAGMENT_NODE?_.host:_}while(!u&&l!==document.body||u&&(e.contains(l)||e===l));return(f&&Math.abs(m)<1||!f&&Math.abs(g)<1)&&(d=!0),d},_f=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},gP=function(t){return[t.deltaX,t.deltaY]},vP=function(t){return t&&"current"in t?t.current:t},VX=function(t,e){return t[0]===e[0]&&t[1]===e[1]},zX=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},$X=0,Nl=[];function WX(t){var e=w.useRef([]),n=w.useRef([0,0]),r=w.useRef(),i=w.useState($X++)[0],s=w.useState(WM)[0],o=w.useRef(t);w.useEffect(function(){o.current=t},[t]),w.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var x=dX([t.lockRef.current],(t.shards||[]).map(vP),!0).filter(Boolean);return x.forEach(function(k){return k.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),x.forEach(function(k){return k.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var l=w.useCallback(function(x,k){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!o.current.allowPinchZoom;var T=_f(x),_=n.current,P="deltaX"in x?x.deltaX:_[0]-T[0],E="deltaY"in x?x.deltaY:_[1]-T[1],I,A=x.target,L=Math.abs(P)>Math.abs(E)?"h":"v";if("touches"in x&&L==="h"&&A.type==="range")return!1;var R=mP(L,A);if(!R)return!0;if(R?I=L:(I=L==="v"?"h":"v",R=mP(L,A)),!R)return!1;if(!r.current&&"changedTouches"in x&&(P||E)&&(r.current=I),!I)return!0;var j=r.current||I;return BX(j,k,x,j==="h"?P:E)},[]),u=w.useCallback(function(x){var k=x;if(!(!Nl.length||Nl[Nl.length-1]!==s)){var T="deltaY"in k?gP(k):_f(k),_=e.current.filter(function(I){return I.name===k.type&&(I.target===k.target||k.target===I.shadowParent)&&VX(I.delta,T)})[0];if(_&&_.should){k.cancelable&&k.preventDefault();return}if(!_){var P=(o.current.shards||[]).map(vP).filter(Boolean).filter(function(I){return I.contains(k.target)}),E=P.length>0?l(k,P[0]):!o.current.noIsolation;E&&k.cancelable&&k.preventDefault()}}},[]),d=w.useCallback(function(x,k,T,_){var P={name:x,delta:k,target:T,should:_,shadowParent:HX(T)};e.current.push(P),setTimeout(function(){e.current=e.current.filter(function(E){return E!==P})},1)},[]),f=w.useCallback(function(x){n.current=_f(x),r.current=void 0},[]),m=w.useCallback(function(x){d(x.type,gP(x),x.target,l(x,t.lockRef.current))},[]),g=w.useCallback(function(x){d(x.type,_f(x),x.target,l(x,t.lockRef.current))},[]);w.useEffect(function(){return Nl.push(s),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:g}),document.addEventListener("wheel",u,Il),document.addEventListener("touchmove",u,Il),document.addEventListener("touchstart",f,Il),function(){Nl=Nl.filter(function(x){return x!==s}),document.removeEventListener("wheel",u,Il),document.removeEventListener("touchmove",u,Il),document.removeEventListener("touchstart",f,Il)}},[]);var y=t.removeScrollBar,C=t.inert;return w.createElement(w.Fragment,null,C?w.createElement(s,{styles:zX(i)}):null,y?w.createElement(MX,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function HX(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const qX=xX($M,WX);var _m=w.forwardRef(function(t,e){return w.createElement(Pm,Oi({},t,{ref:e,sideCar:qX}))});_m.classNames=Pm.classNames;var GX=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Al=new WeakMap,If=new WeakMap,Nf={},_y=0,KM=function(t){return t&&(t.host||KM(t.parentNode))},KX=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=KM(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},YX=function(t,e,n,r){var i=KX(e,Array.isArray(t)?t:[t]);Nf[n]||(Nf[n]=new WeakMap);var s=Nf[n],o=[],l=new Set,u=new Set(i),d=function(m){!m||l.has(m)||(l.add(m),d(m.parentNode))};i.forEach(d);var f=function(m){!m||u.has(m)||Array.prototype.forEach.call(m.children,function(g){if(l.has(g))f(g);else try{var y=g.getAttribute(r),C=y!==null&&y!=="false",x=(Al.get(g)||0)+1,k=(s.get(g)||0)+1;Al.set(g,x),s.set(g,k),o.push(g),x===1&&C&&If.set(g,!0),k===1&&g.setAttribute(n,"true"),C||g.setAttribute(r,"true")}catch(T){console.error("aria-hidden: cannot operate on ",g,T)}})};return f(e),l.clear(),_y++,function(){o.forEach(function(m){var g=Al.get(m)-1,y=s.get(m)-1;Al.set(m,g),s.set(m,y),g||(If.has(m)||m.removeAttribute(r),If.delete(m)),y||m.removeAttribute(n)}),_y--,_y||(Al=new WeakMap,Al=new WeakMap,If=new WeakMap,Nf={})}},cw=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=GX(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),YX(r,i,n,"aria-hidden")):function(){return null}},Im="Dialog",[YM,JM]=Xi(Im),[JX,yi]=YM(Im),QM=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,l=w.useRef(null),u=w.useRef(null),[d,f]=kc({prop:r,defaultProp:i??!1,onChange:s,caller:Im});return h.jsx(JX,{scope:e,triggerRef:l,contentRef:u,contentId:Es(),titleId:Es(),descriptionId:Es(),open:d,onOpenChange:f,onOpenToggle:w.useCallback(()=>f(m=>!m),[f]),modal:o,children:n})};QM.displayName=Im;var XM="DialogTrigger",ZM=w.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=yi(XM,n),s=wt(e,i.triggerRef);return h.jsx(ut.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":hw(i.open),...r,ref:s,onClick:Ue(t.onClick,i.onOpenToggle)})});ZM.displayName=XM;var uw="DialogPortal",[QX,eD]=YM(uw,{forceMount:void 0}),tD=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=yi(uw,e);return h.jsx(QX,{scope:e,forceMount:n,children:w.Children.map(r,o=>h.jsx(Xo,{present:n||s.open,children:h.jsx(Em,{asChild:!0,container:i,children:o})}))})};tD.displayName=uw;var Mp="DialogOverlay",nD=w.forwardRef((t,e)=>{const n=eD(Mp,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=yi(Mp,t.__scopeDialog);return s.modal?h.jsx(Xo,{present:r||s.open,children:h.jsx(ZX,{...i,ref:e})}):null});nD.displayName=Mp;var XX=Ra("DialogOverlay.RemoveScroll"),ZX=w.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=yi(Mp,n);return h.jsx(_m,{as:XX,allowPinchZoom:!0,shards:[i.contentRef],children:h.jsx(ut.div,{"data-state":hw(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Fa="DialogContent",rD=w.forwardRef((t,e)=>{const n=eD(Fa,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=yi(Fa,t.__scopeDialog);return h.jsx(Xo,{present:r||s.open,children:s.modal?h.jsx(eZ,{...i,ref:e}):h.jsx(tZ,{...i,ref:e})})});rD.displayName=Fa;var eZ=w.forwardRef((t,e)=>{const n=yi(Fa,t.__scopeDialog),r=w.useRef(null),i=wt(e,n.contentRef,r);return w.useEffect(()=>{const s=r.current;if(s)return cw(s)},[]),h.jsx(iD,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ue(t.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ue(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&s.preventDefault()}),onFocusOutside:Ue(t.onFocusOutside,s=>s.preventDefault())})}),tZ=w.forwardRef((t,e)=>{const n=yi(Fa,t.__scopeDialog),r=w.useRef(!1),i=w.useRef(!1);return h.jsx(iD,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var u,d;(u=t.onInteractOutside)==null||u.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),iD=w.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,l=yi(Fa,n),u=w.useRef(null),d=wt(e,u);return lw(),h.jsxs(h.Fragment,{children:[h.jsx(Tm,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:h.jsx(Cm,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":hw(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),h.jsxs(h.Fragment,{children:[h.jsx(rZ,{titleId:l.titleId}),h.jsx(sZ,{contentRef:u,descriptionId:l.descriptionId})]})]})}),dw="DialogTitle",sD=w.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=yi(dw,n);return h.jsx(ut.h2,{id:i.titleId,...r,ref:e})});sD.displayName=dw;var oD="DialogDescription",aD=w.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=yi(oD,n);return h.jsx(ut.p,{id:i.descriptionId,...r,ref:e})});aD.displayName=oD;var lD="DialogClose",cD=w.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=yi(lD,n);return h.jsx(ut.button,{type:"button",...r,ref:e,onClick:Ue(t.onClick,()=>i.onOpenChange(!1))})});cD.displayName=lD;function hw(t){return t?"open":"closed"}var uD="DialogTitleWarning",[nZ,dD]=MQ(uD,{contentName:Fa,titleName:dw,docsSlug:"dialog"}),rZ=({titleId:t})=>{const e=dD(uD),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return w.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},iZ="DialogDescriptionWarning",sZ=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${dD(iZ).contentName}}.`;return w.useEffect(()=>{var s;const i=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},hD=QM,oZ=ZM,fD=tD,fw=nD,pw=rD,mw=sD,gw=aD,vw=cD;const Jf=hD,aZ=fD,pD=w.forwardRef(({className:t,...e},n)=>h.jsx(fw,{ref:n,className:et("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));pD.displayName=fw.displayName;const Zu=w.forwardRef(({className:t,children:e,...n},r)=>h.jsxs(aZ,{children:[h.jsx(pD,{}),h.jsxs(pw,{ref:r,className:et("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,h.jsxs(vw,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[h.jsx(fi,{className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Zu.displayName=pw.displayName;const ed=({className:t,...e})=>h.jsx("div",{className:et("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});ed.displayName="DialogHeader";const mD=({className:t,...e})=>h.jsx("div",{className:et("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});mD.displayName="DialogFooter";const td=w.forwardRef(({className:t,...e},n)=>h.jsx(mw,{ref:n,className:et("text-lg font-semibold leading-none tracking-tight",t),...e}));td.displayName=mw.displayName;const nd=w.forwardRef(({className:t,...e},n)=>h.jsx(gw,{ref:n,className:et("text-sm text-muted-foreground",t),...e}));nd.displayName=gw.displayName;async function gD(t,e){try{let n=e;if(!n){const s=st.currentUser;if(!s)return{success:!1,error:"No user is currently signed in"};n=await s.getIdToken()}const r=await fetch(`${Ls}/submissions/generate-link`,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify(t)}),i=await r.json();return r.status===403&&i.error==="SUBSCRIPTION_LIMIT_REACHED"?{success:!1,error:"SUBSCRIPTION_LIMIT_REACHED"}:r.ok?i&&i.token&&i.shareLink?{success:!0,data:i}:{success:!1,error:i.error||"Failed to generate share link"}:{success:!1,error:i.error||`Failed to generate share link (${r.status})`}}catch(n){return Kt(n)}}async function Xl(t){try{const n=await(await Ya(`/submissions/token/${t}`)).json();return n&&n._id?{success:!0,data:n}:{success:!1,error:n.error||"Failed to load submission"}}catch(e){return Kt(e)}}async function vD(t){try{const n=await(await Fs(`/submissions/token/${t}/start`,{})).json();return n&&n._id?{success:!0,data:n}:{success:!1,error:n.error||"Failed to start assessment"}}catch(e){return Kt(e)}}async function yD(t,e){try{const r=await(await Fs(`/submissions/token/${t}/submit`,{githubLink:e})).json();return r&&r._id?{success:!0,data:r}:{success:!1,error:r.error||"Failed to submit assessment"}}catch(n){return Kt(n)}}async function Y0(t,e){try{let n=e;if(!n){const s=st.currentUser;if(!s)return{success:!1,error:"No user is currently signed in"};n=await s.getIdToken()}const i=await(await Ya(`/submissions/assessments/${t}/submissions`,{Authorization:`Bearer ${n}`})).json();return Array.isArray(i)?{success:!0,data:i}:{success:!1,error:i.error||"Failed to load submissions"}}catch(n){return Kt(n)}}async function lZ(t,e,n){try{const r=n?`/submissions/${t}/interview-conversation-id?token=${n}`:`/submissions/${t}/interview-conversation-id`;return{success:!0,data:await(await TA(r,{conversationId:e})).json()}}catch(r){return Kt(r)}}async function bD(t,e){try{let n=e;if(!n){const s=st.currentUser;if(!s)return{success:!1,error:"No user is currently signed in"};n=await s.getIdToken()}const r=await EA(`/submissions/${t}`,{Authorization:`Bearer ${n}`}),i=await r.json();return r.ok?{success:!0,data:i}:{success:!1,error:i.error||"Failed to delete submission"}}catch(n){return Kt(n)}}async function xD(t,e){try{const r=await(await Fs(`/submissions/token/${t}/opt-out`,{reason:e})).json();return r&&r._id?{success:!0,data:r}:{success:!1,error:r.error||"Failed to opt out"}}catch(n){return Kt(n)}}async function wD(t,e){try{const n=new FormData;n.append("llmTrace",e);const i=await(await fetch(`${Ls}/submissions/token/${t}/upload-trace`,{method:"POST",body:n})).json();return i.sessionId?{success:!0,data:i}:{success:!1,error:i.error||"Failed to upload trace"}}catch(n){return Kt(n)}}const cZ=Object.freeze(Object.defineProperty({__proto__:null,deleteSubmission:bD,generateShareLink:gD,getSubmissionByToken:Xl,getSubmissionsForAssessment:Y0,optOutAssessment:xD,startAssessment:vD,submitAssessment:yD,updateInterviewConversationId:lZ,uploadLLMTrace:wD},Symbol.toStringTag,{value:"Module"}));function Af({title:t,icon:e,children:n,isActive:r,isHighlighted:i,onSelect:s,onAddToContext:o,isInContext:l,onEdit:u,editValue:d,type:f="default"}){const[m,g]=w.useState(!1),[y,C]=w.useState(""),x=w.useRef(null);w.useEffect(()=>{m&&x.current&&setTimeout(()=>{const E=x.current;E&&(E.style.height="auto",E.style.height=`${E.scrollHeight}px`)},0)},[m,y]);const k=E=>{E.stopPropagation(),C(d||""),g(!0)},T=E=>{C(E.target.value);const I=E.target;I.style.height="auto",I.style.height=`${I.scrollHeight}px`},_=async E=>{E.stopPropagation(),u&&await u(y),g(!1)},P=E=>{E.stopPropagation(),g(!1)};return h.jsxs(_e.div,{onClick:s,className:`bg-white rounded-xl border transition-all duration-200 cursor-pointer ${r?"border-[#1E3A8A] shadow-sm":"border-gray-200 hover:border-gray-300"} ${i?"ring-4 ring-yellow-400 ring-opacity-75 shadow-lg border-yellow-400":""}`,animate:i?{scale:[1,1.02,1]}:{},transition:{duration:.3},children:[h.jsxs("div",{className:"flex items-center justify-between px-5 py-3 border-b border-gray-100",children:[h.jsxs("div",{className:"flex items-center gap-2.5",children:[h.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-100 flex items-center justify-center",children:h.jsx(e,{className:"w-4 h-4 text-gray-600"})}),h.jsx("span",{className:"font-medium text-gray-900",children:t})]}),h.jsxs("div",{className:"flex items-center gap-1",children:[u&&h.jsxs(Ee,{variant:"ghost",size:"sm",onClick:m?P:k,className:"h-8 px-2.5 text-gray-500 hover:text-gray-700",children:[h.jsx(Qy,{className:"w-3.5 h-3.5 mr-1.5"}),m?"Cancel":"Edit"]}),h.jsxs(Ee,{variant:"ghost",size:"sm",onClick:E=>{E.stopPropagation(),o==null||o()},className:`h-8 px-2.5 ${l?"text-green-600 hover:text-green-700 hover:bg-green-50":"text-[#1E3A8A] hover:text-[#1E3A8A] hover:bg-blue-50"}`,children:[h.jsx(Xy,{className:`w-3.5 h-3.5 mr-1.5 ${l?"rotate-45":""} transition-transform`}),l?"Editable":"Restrict edits to this"]})]})]}),h.jsx("div",{className:"px-5 py-4",children:m?h.jsxs("div",{className:"space-y-3",children:[h.jsx(Is,{ref:x,value:y,onChange:T,onClick:E=>E.stopPropagation(),className:"min-h-[100px] text-gray-700 resize-none overflow-hidden",style:{height:"auto"}}),h.jsxs("div",{className:"flex justify-end gap-2",children:[h.jsx(Ee,{variant:"outline",size:"sm",onClick:P,children:"Cancel"}),h.jsx(Ee,{size:"sm",onClick:_,className:"bg-[#1E3A8A] hover:bg-[#152a66]",children:"Save"})]})]}):h.jsx("div",{onClick:E=>{E.stopPropagation(),u&&k(E)},className:"cursor-text hover:bg-gray-50 -mx-5 -my-4 px-5 py-4 rounded transition-colors",children:n})})]})}const uZ=["Make easier","Make harder","Shorten scope","Add frontend component","Add database component","Add test cases","Rewrite for interns","Generate follow-up questions"];function dZ({onSubmit:t,isLoading:e,contextSections:n=[],onRemoveContext:r,lastChange:i,responseMessage:s,model:o}){var C;const[l,u]=w.useState(""),[d,f]=w.useState([]);w.useEffect(()=>{s&&f(x=>{const k=x[x.length-1];return(k==null?void 0:k.role)==="assistant"?[...x.slice(0,-1),{role:"assistant",content:s}]:[...x,{role:"assistant",content:s}]})},[s]);const m=()=>{!l.trim()||e||(f(x=>[...x,{role:"user",content:l}]),t(l),u(""))},g=x=>{f(k=>[...k,{role:"user",content:x}]),t(x)},y=x=>{x.key==="Enter"&&!x.shiftKey&&(x.preventDefault(),m())};return h.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm h-fit sticky top-6",children:[h.jsxs("div",{className:"px-5 py-4 border-b border-gray-100",children:[h.jsx("div",{className:"flex items-center gap-2 mb-1",children:h.jsx("h3",{className:"font-semibold text-gray-900",children:"Bridge Assistant"})}),h.jsx("p",{className:"text-sm text-gray-500",children:"Tell Bridge how you'd like this assessment to change."}),h.jsxs("div",{className:"flex items-center gap-1.5 mt-2",children:[h.jsx(z4,{className:"w-3 h-3 text-green-500"}),h.jsxs("span",{className:"text-xs text-gray-400",children:["Model: ",o||"Bridge AI","  Responds in seconds"]})]})]}),h.jsx("div",{className:"px-5 py-4 border-b border-gray-100 max-h-[300px] overflow-y-auto",children:h.jsx("div",{className:"space-y-3",children:d.map((x,k)=>h.jsx("div",{className:`text-sm p-3 rounded-xl ${x.role==="assistant"?"bg-gray-50 text-gray-700":"bg-[#1E3A8A] text-white ml-4"}`,children:x.content},k))})}),n.length>0&&h.jsxs("div",{className:"px-5 py-3 border-b border-gray-100 bg-blue-50/50",children:[h.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Editing restricted to:"}),h.jsx("div",{className:"flex flex-wrap gap-1.5",children:n.map(x=>h.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs bg-white border border-[#1E3A8A]/20 text-[#1E3A8A] rounded-full",children:[x==="projectDescription"&&"Project Description",x==="testCases"&&"Test Cases",x==="smartInterviewer"&&"Smart Interviewer",h.jsx("button",{onClick:()=>r==null?void 0:r(x),className:"hover:text-red-500 ml-0.5",children:""})]},x))})]}),h.jsxs("div",{className:"p-5",children:[h.jsxs("div",{className:"flex items-end gap-2 mb-4",children:[h.jsx(Is,{value:l,onChange:x=>u(x.target.value),onKeyDown:y,placeholder:"Make this harder for mid-level engineers",className:"flex-1 min-h-[60px] max-h-[100px] text-sm resize-none border-gray-200 focus-visible:ring-[#1E3A8A] rounded-xl"}),h.jsx(Ee,{onClick:m,disabled:e,className:"bg-[#FFFF00] hover:bg-[#faed00] text-[#1E3A8A] p-2.5 h-auto rounded-xl shadow-sm hover:shadow-md hover:scale-105 transition-all",children:e?h.jsx(_e.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-5 h-5 border-2 border-[#1E3A8A] border-t-transparent rounded-full"}):h.jsx(_c,{className:"w-5 h-5"})})]}),h.jsx("div",{className:"flex flex-wrap gap-1.5",children:uZ.map((x,k)=>h.jsx("button",{onClick:()=>g(x),disabled:e,className:"px-3 py-1.5 text-xs rounded-full bg-gray-50 border border-gray-200 text-gray-600 hover:border-[#1E3A8A] hover:text-[#1E3A8A] hover:bg-blue-50 transition-all disabled:opacity-50",children:x},k))})]}),h.jsx(Bo,{children:e&&h.jsx(_e.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"px-5 py-4 border-t border-gray-100 bg-[#FFFF00]/10",children:h.jsxs("div",{className:"flex items-center gap-2 text-sm text-[#1E3A8A]",children:[h.jsx(E4,{className:"w-4 h-4 animate-pulse"}),"Bridge is updating your assessment"]})})}),h.jsx(Bo,{children:i&&!e&&h.jsxs(_e.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"px-5 py-4 border-t border-gray-100",children:[h.jsxs("p",{className:"text-xs font-medium text-gray-700 mb-2",children:["Updated ",i.section]}),h.jsx("ul",{className:"text-xs text-gray-500 space-y-1 mb-3",children:(C=i.changes)==null?void 0:C.map((x,k)=>h.jsxs("li",{children:[" ",x]},k))}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("button",{className:"text-xs text-gray-500 hover:text-gray-700 flex items-center gap-1",children:[h.jsx(O4,{className:"w-3 h-3"})," Undo"]}),h.jsxs("button",{className:"text-xs text-gray-500 hover:text-gray-700 flex items-center gap-1",children:[h.jsx(y4,{className:"w-3 h-3"})," Apply again"]})]})]})})]})}const $o="/assets/bridge-logo-aUv84H0B.svg";function hZ({isOpen:t,onClose:e,assessment:n}){return t?h.jsx(Bo,{children:h.jsx(_e.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",onClick:e,children:h.jsxs(_e.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:r=>r.stopPropagation(),className:"w-full max-w-3xl max-h-[90vh] overflow-y-auto bg-white rounded-2xl shadow-2xl",children:[h.jsxs("div",{className:"sticky top-0 bg-white px-6 py-4 border-b border-gray-100 flex items-center justify-between z-10",children:[h.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[h.jsx(hp,{className:"w-4 h-4"}),"Candidate View Preview"]}),h.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:h.jsx(fi,{className:"w-5 h-5 text-gray-500"})})]}),h.jsxs("div",{className:"p-8",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("div",{className:"w-16 h-16 rounded-2xl overflow-hidden flex items-center justify-center mx-auto mb-4",children:h.jsx("img",{src:$o,alt:"Bridge",className:"w-full h-full object-contain"})}),h.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Technical Assessment"}),h.jsx("p",{className:"text-gray-500",children:"Complete this take-home project to continue your application"})]}),h.jsxs("div",{className:"flex items-center justify-center gap-2 mb-8 text-sm text-gray-600",children:[h.jsx(Ps,{className:"w-4 h-4"}),h.jsx("span",{children:"Estimated time: 2-4 hours"})]}),h.jsxs("div",{className:"mb-8",children:[h.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Project Overview"}),h.jsx("p",{className:"text-gray-700 leading-relaxed bg-gray-50 p-4 rounded-xl",children:(n==null?void 0:n.projectDescription)||"Build a REST API for a task management system..."})]}),h.jsxs("div",{className:"mb-8",children:[h.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:"How You'll Be Evaluated"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:[{criteria:"Code Quality"},{criteria:"Problem Solving"},{criteria:"Documentation"}].map((r,i)=>h.jsx("span",{className:"px-3 py-1.5 bg-[#1E3A8A]/10 text-[#1E3A8A] text-sm rounded-lg",children:r.criteria},i))})]}),h.jsxs("div",{className:"text-center pt-4 border-t border-gray-100",children:[h.jsx(Ee,{className:"bg-[#1E3A8A] text-white hover:bg-[#152a66] px-8 py-3 h-auto rounded-xl text-base",children:"Start Assessment"}),h.jsx("p",{className:"text-xs text-gray-400 mt-3",children:"You can save your progress and return anytime"})]})]})]})})}):null}function fZ(){const[t]=Fd(),e=t.get("id"),[n,r]=w.useState(!1),[i,s]=w.useState(!0),[o,l]=w.useState(!1),[u,d]=w.useState(null),[f,m]=w.useState(!1),[g,y]=w.useState(null),[C,x]=w.useState(!1),[k,T]=w.useState(""),[_,P]=w.useState(!1),[E,I]=w.useState(null),[A,L]=w.useState(null),[R,j]=w.useState(null),[U,z]=w.useState(null),[F,W]=w.useState(!0),[Y,K]=w.useState(!1),[X,se]=w.useState(""),[H,te]=w.useState(""),[D,$]=w.useState(!1),[re,O]=w.useState(!1),[ve,oe]=w.useState(""),[ce,ie]=w.useState([]),[Se,Ce]=w.useState({hours:4,minutes:0}),[Le,qe]=w.useState(7),[Je,jt]=w.useState(null),[Ct,sn]=w.useState(2),[fn,Pn]=w.useState(null),[cr,on]=w.useState(""),[Fn,_n]=w.useState(!1),[Cr,Jn]=w.useState(""),[zr,Tr]=w.useState(!1),[M,Q]=w.useState("");w.useEffect(()=>{const le=Xa(st,Re=>{if(console.log(" [AssessmentEditor] Auth state changed, user:",Re==null?void 0:Re.email),y(Re),m(!0),!Re){console.warn(" [AssessmentEditor] No user found, redirecting to landing"),window.location.href="/";return}});return()=>le()},[]),w.useEffect(()=>{if(!f)return;(async()=>{if(!e){console.warn("No assessment ID provided"),s(!1);return}s(!0);try{console.log(" [AssessmentEditor] Fetching assessment:",e);const Re=g?await g.getIdToken():void 0;console.log("   Token obtained:",Re?"":"");const Ze=await HR(e,Re);if(Ze.success){console.log(" [AssessmentEditor] Assessment loaded:",Ze.data),d(Ze.data);const mt=Ze.data.timeLimit,Ft=Math.floor(mt/60),an=mt%60;Ce({hours:Ft,minutes:an})}else{const mt="error"in Ze?Ze.error:"Failed to load assessment";console.error(" [AssessmentEditor] Error:",mt),alert(mt)}}catch(Re){console.error(" [AssessmentEditor] Unexpected error:",Re),alert("Failed to load assessment")}finally{s(!1)}})()},[e,f,g]);const de=le=>{ie(Re=>Re.includes(le)?Re.filter(Ze=>Ze!==le):[...Re,le])},[be,Pe]=w.useState({projectDescription:"Build a simple REST API for a task management system. The candidate will create endpoints for CRUD operations on tasks and users, implement database relationships, and add basic authentication. This project tests practical backend skills in a realistic scenario.",interviewQuestions:["Walk me through how you structured your database schema and why.","How did you handle authentication? What alternatives did you consider?","What was the most challenging part of this project?","How would you scale this API to handle 10,000 concurrent users?","If you had more time, what would you improve?"]});w.useEffect(()=>{if(u){if(u.description&&Pe(le=>({...le,projectDescription:u.description})),u.title&&T(u.title),u.timeLimit){const le=u.timeLimit,Re=Math.floor(le/60),Ze=le%60;Ce({hours:Re,minutes:Ze})}if(u.isSmartInterviewerEnabled!==void 0&&W(u.isSmartInterviewerEnabled),u.numInterviewQuestions!==void 0){const le=u.numInterviewQuestions;sn(Re=>Re!==le?(console.log(` [AssessmentEditor] Updating numInterviewQuestions from ${Re} to ${le}`),le):Re)}else sn(le=>(le===5||console.log(` [AssessmentEditor] numInterviewQuestions is undefined in DB, keeping current value: ${le}`),le));if(u.starterFilesGitHubLink!==void 0){const le=u.starterFilesGitHubLink||"";on(le),Jn(le)}if(u.interviewerCustomInstructions!==void 0){const le=u.interviewerCustomInstructions||"";oe(le),Q(le)}}},[u]),w.useEffect(()=>{if(!e||!g||!f||!u)return;Je&&clearTimeout(Je);const le=Se.hours*60+Se.minutes,Re=u.timeLimit;if(le!==Re&&le>0){const Ze=setTimeout(async()=>{console.log(" [AssessmentEditor] Auto-saving timeLimit:",le),await kt(le)},1e3);jt(Ze)}return()=>{Je&&clearTimeout(Je)}},[Se,e,g,f,u]),w.useEffect(()=>{if(!e||!g||!f||!u)return;fn&&clearTimeout(fn);const le=u.numInterviewQuestions??2;if(Ct!==le&&Ct>=1&&Ct<=4&&!isNaN(Ct)){console.log(` [AssessmentEditor] Queuing save: ${Ct} (current: ${le})`);const Re=setTimeout(async()=>{console.log(" [AssessmentEditor] Auto-saving numInterviewQuestions:",Ct),await Ne({numInterviewQuestions:Ct})},1e3);Pn(Re)}return()=>{fn&&clearTimeout(fn)}},[Ct,e,g,f,u]);const Ne=async le=>{if(!e||!g)return console.warn("Cannot save: missing assessmentId or user"),{success:!1};P(!0);try{const Re=await g.getIdToken();console.log(" [AssessmentEditor] Updating assessment:",le);const Ze=await cG(e,le,Re);if(Ze.success){if(console.log(" [AssessmentEditor] Assessment saved:",Ze.data),console.log("   numInterviewQuestions in response:",Ze.data.numInterviewQuestions),d(Ze.data),Ze.data.description&&Pe(mt=>({...mt,projectDescription:Ze.data.description})),Ze.data.timeLimit){const mt=Ze.data.timeLimit,Ft=Math.floor(mt/60),an=mt%60;Ce({hours:Ft,minutes:an})}if(Ze.data.numInterviewQuestions!==void 0&&sn(mt=>{const Ft=Ze.data.numInterviewQuestions;return mt!==Ft?Ft:mt}),Ze.data.starterFilesGitHubLink!==void 0){const mt=Ze.data.starterFilesGitHubLink||"";on(mt),Fn||Jn(mt)}if(Ze.data.interviewerCustomInstructions!==void 0){const mt=Ze.data.interviewerCustomInstructions||"";oe(mt),zr||Q(mt)}return Ze}else{const mt="error"in Ze?Ze.error:"Failed to save assessment";console.error(" [AssessmentEditor] Save error:",mt),alert(mt)}}catch(Re){console.error(" [AssessmentEditor] Unexpected save error:",Re),alert("Failed to save assessment")}finally{P(!1)}},ft=async()=>{k.trim()&&k!==(u==null?void 0:u.title)&&await Ne({title:k.trim()}),x(!1)},ot=()=>{T((u==null?void 0:u.title)||""),x(!1)},Xe=async le=>{le.trim()&&le!==(u==null?void 0:u.description)&&await Ne({description:le.trim()})},kt=async le=>{le>0&&le!==(u==null?void 0:u.timeLimit)&&await Ne({timeLimit:le})},at=async()=>{const le=Cr.trim()||null;if(le!==((u==null?void 0:u.starterFilesGitHubLink)||null)){const Re=await Ne({starterFilesGitHubLink:le});Re&&Re.success&&on(le||"")}else on(Cr.trim()||"");_n(!1)},Zt=()=>{Jn((u==null?void 0:u.starterFilesGitHubLink)||""),_n(!1)},rt=async()=>{const le=M.trim()||null;if(le!==((u==null?void 0:u.interviewerCustomInstructions)||null)){const Re=await Ne({interviewerCustomInstructions:le});Re&&Re.success&&oe(le||"")}else oe(M.trim()||"");Tr(!1)},Bs=()=>{Q((u==null?void 0:u.interviewerCustomInstructions)||""),Tr(!1)},Vs=async le=>{if(!e||!g||!u){alert("Cannot chat: missing assessment data or user");return}r(!0),j(null),z(null);try{console.log(" [AssessmentEditor] Sending chat message:",le);const Re=await g.getIdToken(),Ze={message:le.trim(),allowedSections:ce.length>0?ce:void 0},mt=await hG(e,Ze,Re);if(!mt.success){const wn="error"in mt?mt.error:"Failed to process chat message";console.error(" [AssessmentEditor] Chat error:",wn),alert(wn),r(!1);return}const{updates:Ft,changedSections:an,changesSummary:Wr,responseMessage:bi,model:Pr,provider:rl,assessment:Hr}=mt.data;if(console.log(" [AssessmentEditor] Chat successful:",{changedSections:an,changesSummary:Wr,responseMessage:bi,model:Pr,provider:rl}),bi&&j(bi),Pr&&z(Pr),Ft.description&&(Pe(wn=>({...wn,projectDescription:Ft.description})),await Xe(Ft.description)),Ft.title&&(T(Ft.title),await ft()),Ft.timeLimit!==void 0){const wn=Math.floor(Ft.timeLimit/60),qr=Ft.timeLimit%60;Ce({hours:wn,minutes:qr}),await kt(Ft.timeLimit)}Hr&&d(Hr),an!=null&&an.length?(console.log(" [AssessmentEditor] Highlighting sections:",an),an.forEach((wn,qr)=>{setTimeout(()=>{const xi=wn==="description"?"projectDescription":wn;console.log(`   Highlighting section: ${xi}`),I(xi),setTimeout(()=>{I(null),console.log(`   Unhighlighting section: ${xi}`)},2e3)},qr*500)})):console.warn(" [AssessmentEditor] No changedSections received from backend"),L({section:an.length>1?`${an.length} sections`:an[0]||"assessment",changes:Wr||["Assessment updated"]})}catch(Re){console.error(" [AssessmentEditor] Chat error:",Re),alert("Failed to process chat message. Please try again.")}r(!1)},$r=()=>{K(!0),se(""),te(""),O(!1)},Er=async()=>{if(!X.trim()){alert("Please enter a candidate name");return}if(!e||!g){alert("Cannot generate link: missing assessment data or user");return}$(!0);try{const le=await g.getIdToken(),Re=await gD({assessmentId:e,candidateName:X.trim()},le);if(Re.success)te(Re.data.shareLink);else{const Ze="error"in Re?Re.error:"Failed to generate link";Ze.includes("SUBSCRIPTION_LIMIT_REACHED")||Ze.includes("limit")?window.confirm(`You've reached the free tier limit of 3 candidate submissions.

Upgrade to continue inviting unlimited candidates.

Would you like to view subscription plans?`)&&(window.location.href=Be("Subscription")):alert(Ze)}}catch(le){console.error(" [AssessmentEditor] Error generating link:",le),alert("Failed to generate link. Please try again.")}finally{$(!1)}},ra=async()=>{if(H)try{await navigator.clipboard.writeText(H),O(!0),setTimeout(()=>O(!1),2e3)}catch(le){console.error("Failed to copy link:",le),alert("Failed to copy link to clipboard")}};return i?h.jsx("div",{className:"min-h-screen bg-[#f8f9fb] flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"w-8 h-8 border-2 border-[#1E3A8A]/30 border-t-[#1E3A8A] rounded-full animate-spin mx-auto mb-4"}),h.jsx("p",{className:"text-gray-500",children:"Loading assessment..."})]})}):!e||!u?h.jsx("div",{className:"min-h-screen bg-[#f8f9fb] flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("p",{className:"text-red-600 mb-4",children:"Failed to load assessment"}),h.jsx(gr,{to:Be("Home"),children:h.jsx(Ee,{children:"Back to Assessments"})})]})}):h.jsxs("div",{className:"min-h-screen bg-[#f8f9fb]",children:[h.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[h.jsxs(_e.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-start justify-between mb-8",children:[h.jsxs("div",{children:[h.jsx(gr,{to:Be("Home"),className:"text-sm text-gray-500 hover:text-[#1E3A8A] mb-1 block",children:" Back to Assessments"}),C?h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(xn,{value:k,onChange:le=>T(le.target.value),onKeyDown:le=>{le.key==="Enter"?ft():le.key==="Escape"&&ot()},className:"text-2xl font-bold text-[#1E3A8A] border-[#1E3A8A] focus-visible:ring-[#1E3A8A]",autoFocus:!0}),h.jsx(Ee,{onClick:ft,size:"sm",className:"bg-[#1E3A8A] hover:bg-[#152a66]",disabled:_,children:"Save"}),h.jsx(Ee,{onClick:ot,size:"sm",variant:"outline",disabled:_,children:"Cancel"})]}):h.jsx("h1",{className:"text-2xl font-bold text-[#1E3A8A] cursor-pointer hover:underline",onClick:()=>x(!0),title:"Click to edit title",children:(u==null?void 0:u.title)||"Assessment Editor"}),h.jsx("p",{className:"text-gray-500 text-sm",children:"Use Bridge AI to shape your technical assessment  tweak scope, difficulty, and structure in one place."})]}),h.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 bg-white px-3 py-2 rounded-lg border border-gray-200",children:[h.jsx(Ps,{className:"w-3.5 h-3.5"}),h.jsx("span",{children:_?"Saving...":u!=null&&u.updatedAt?`Last updated ${new Date(u.updatedAt).toLocaleString()}`:"Draft saved"})]})]}),h.jsxs("div",{className:"flex gap-6",children:[h.jsxs(_e.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"flex-1 space-y-4",children:[h.jsx(Af,{title:"Project Description",icon:hp,isActive:!1,isHighlighted:E==="projectDescription",onSelect:()=>{},onAddToContext:()=>de("projectDescription"),isInContext:ce.includes("projectDescription"),editValue:be.projectDescription,onEdit:async le=>{Pe(Re=>({...Re,projectDescription:le})),await Xe(le)},children:h.jsx("div",{className:"prose prose-sm max-w-none text-gray-700 leading-relaxed",children:h.jsx(PM,{components:{h2:({children:le})=>h.jsx("h2",{className:"text-lg font-semibold text-gray-900 mt-6 mb-3",children:le}),h3:({children:le})=>h.jsx("h3",{className:"text-base font-semibold text-gray-900 mt-4 mb-2",children:le}),p:({children:le})=>h.jsx("p",{className:"mb-3",children:le}),ul:({children:le})=>h.jsx("ul",{className:"list-disc list-inside mb-3 space-y-1",children:le}),ol:({children:le})=>h.jsx("ol",{className:"list-decimal list-inside mb-3 space-y-1",children:le}),li:({children:le})=>h.jsx("li",{className:"ml-2",children:le}),code:({children:le,className:Re})=>!Re?h.jsx("code",{className:"bg-gray-100 text-gray-800 px-1.5 py-0.5 rounded text-sm font-mono",children:le}):h.jsx("code",{className:"block bg-gray-100 text-gray-800 p-3 rounded text-sm font-mono overflow-x-auto mb-3",children:le}),strong:({children:le})=>h.jsx("strong",{className:"font-semibold text-gray-900",children:le})},children:be.projectDescription})})}),h.jsx(Af,{title:"Smart AI Interviewer",icon:IU,isActive:!1,isHighlighted:E==="smartInterviewer",onSelect:()=>{},onAddToContext:()=>de("smartInterviewer"),isInContext:ce.includes("smartInterviewer"),children:h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:`flex items-start justify-between gap-4 ${F?"":"opacity-50"}`,children:[h.jsx("div",{className:"flex-1",children:h.jsx("p",{className:`leading-relaxed ${F?"text-gray-700":"text-gray-400"}`,children:"Bridge AI will automatically generate follow-up questions tailored to each candidate's code submission, probing their reasoning and decision-making."})}),h.jsx(LM,{checked:F,onCheckedChange:async le=>{W(le),await Ne({isSmartInterviewerEnabled:le})},className:"data-[state=checked]:bg-[#1E3A8A]"})]}),F&&h.jsxs("div",{className:"pt-3 border-t border-gray-100 space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Number of Questions"}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("input",{type:"number",min:"1",max:"4",value:Ct,onChange:le=>{const Re=parseInt(le.target.value,10);!isNaN(Re)&&Re>=1&&Re<=4&&sn(Re)},className:"w-20 text-sm text-gray-700 bg-white border border-gray-200 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#1E3A8A]/20 focus:border-[#1E3A8A]"}),h.jsx("span",{className:"text-sm text-gray-500",children:"questions (1-4)"})]}),h.jsx("p",{className:"text-xs text-gray-400 mt-1.5",children:"Number of base questions for the ElevenLabs voice interview. The AI interviewer will ask a couple follow-up questions per base question to dive deeper."})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Custom Instructions (optional)"}),zr?h.jsxs("div",{className:"flex gap-2",children:[h.jsx(Ee,{variant:"outline",size:"sm",onClick:Bs,className:"h-7 px-2 text-xs",disabled:_,children:"Cancel"}),h.jsx(Ee,{size:"sm",onClick:rt,className:"h-7 px-2 text-xs bg-[#1E3A8A] hover:bg-[#152a66]",disabled:_,children:"Save"})]}):h.jsxs(Ee,{variant:"ghost",size:"sm",onClick:()=>{Q(ve),Tr(!0)},className:"h-7 px-2 text-xs text-gray-500 hover:text-gray-700",children:[h.jsx(Qy,{className:"w-3.5 h-3.5 mr-1.5"}),"Edit"]})]}),zr?h.jsx("textarea",{value:M,onChange:le=>Q(le.target.value),placeholder:"E.g., Focus on system design decisions, ask about error handling strategies, probe for scalability considerations...",className:"w-full min-h-[80px] text-sm text-gray-700 bg-white border border-gray-200 rounded-lg px-3 py-2 resize-none focus:outline-none focus:ring-2 focus:ring-[#1E3A8A]/20 focus:border-[#1E3A8A]"}):h.jsx("div",{onClick:()=>{Q(ve),Tr(!0)},className:"w-full min-h-[80px] text-sm text-gray-700 bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 cursor-text hover:bg-gray-100 transition-colors",children:ve||h.jsx("span",{className:"text-gray-400 italic",children:"No custom instructions set. Click to add instructions."})}),h.jsx("p",{className:"text-xs text-gray-400 mt-1.5",children:"Guide the AI interviewer's focus and question style"})]})]})]})}),h.jsx(Af,{title:"Time & Deadlines",icon:N4,isActive:!1,isHighlighted:E==="timeLimit",onSelect:()=>{},onAddToContext:()=>de("timeLimit"),isInContext:ce.includes("timeLimit"),children:h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Time to complete"}),h.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Maximum time candidates have once they start the assessment."}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("input",{type:"number",min:"0",max:"72",value:Se.hours,onChange:le=>Ce(Re=>({...Re,hours:parseInt(le.target.value)||0})),className:"w-16 text-center border border-gray-200 rounded-lg px-2 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-[#1E3A8A]/20 focus:border-[#1E3A8A]"}),h.jsx("span",{className:"text-sm text-gray-500",children:"hours"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("input",{type:"number",min:"0",max:"59",value:Se.minutes,onChange:le=>Ce(Re=>({...Re,minutes:parseInt(le.target.value)||0})),className:"w-16 text-center border border-gray-200 rounded-lg px-2 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-[#1E3A8A]/20 focus:border-[#1E3A8A]"}),h.jsx("span",{className:"text-sm text-gray-500",children:"minutes"})]})]})]}),h.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[h.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Deadline to start"}),h.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"How long candidates have to begin the assessment after receiving the link."}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("input",{type:"number",min:"1",max:"30",value:Le,onChange:le=>qe(parseInt(le.target.value)||1),className:"w-16 text-center border border-gray-200 rounded-lg px-2 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-[#1E3A8A]/20 focus:border-[#1E3A8A]"}),h.jsx("span",{className:"text-sm text-gray-500",children:"days"})]})]})]})}),h.jsx(Af,{title:"Starter Files",icon:$u,isActive:!1,isHighlighted:E==="starterFiles",onSelect:()=>{},onAddToContext:()=>de("starterFiles"),isInContext:ce.includes("starterFiles"),children:h.jsx("div",{className:"space-y-4",children:h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("label",{className:"text-sm font-medium text-gray-700",children:"GitHub Repository Link (Optional)"}),Fn?h.jsxs("div",{className:"flex gap-2",children:[h.jsx(Ee,{variant:"outline",size:"sm",onClick:Zt,className:"h-7 px-2 text-xs",disabled:_,children:"Cancel"}),h.jsx(Ee,{size:"sm",onClick:at,className:"h-7 px-2 text-xs bg-[#1E3A8A] hover:bg-[#152a66]",disabled:_,children:"Save"})]}):h.jsxs(Ee,{variant:"ghost",size:"sm",onClick:()=>{Jn(cr),_n(!0)},className:"h-7 px-2 text-xs text-gray-500 hover:text-gray-700",children:[h.jsx(Qy,{className:"w-3.5 h-3.5 mr-1.5"}),"Edit"]})]}),h.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Provide a GitHub repository link with starter files and instructions. Candidates will have access to this link when they start the assessment."}),Fn?h.jsx("input",{type:"url",value:Cr,onChange:le=>Jn(le.target.value),placeholder:"https://github.com/username/repo",className:"w-full text-sm text-gray-700 bg-white border border-gray-200 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#1E3A8A]/20 focus:border-[#1E3A8A]"}):h.jsx("div",{onClick:()=>{Jn(cr),_n(!0)},className:"w-full text-sm text-gray-700 bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 cursor-text hover:bg-gray-100 transition-colors",children:cr||h.jsx("span",{className:"text-gray-400 italic",children:"No GitHub link set. Click to add a link."})})]})})}),h.jsx("div",{className:"sticky bottom-0 bg-white rounded-xl border border-gray-200 shadow-sm p-4 flex items-center justify-end mt-6",children:h.jsxs("div",{className:"flex gap-3",children:[h.jsx(gr,{to:Be("SubmissionsDashboard")+`?assessmentId=${e}`,children:h.jsxs(Ee,{variant:"outline",className:"px-5 h-10 rounded-full text-sm border-gray-200 text-gray-700 hover:bg-gray-50",children:[h.jsx(zu,{className:"w-4 h-4 mr-2"}),"View submissions"]})}),h.jsxs(Ee,{onClick:()=>l(!0),variant:"outline",className:"px-5 h-10 rounded-full text-sm border-gray-200 text-gray-700 hover:bg-gray-50",children:[h.jsx(uI,{className:"w-4 h-4 mr-2"}),"Preview candidate view"]}),h.jsxs(Ee,{onClick:$r,className:"px-5 h-10 rounded-full text-sm bg-[#FFFF00] hover:bg-[#faed00] text-[#1E3A8A] font-semibold shadow-sm hover:shadow-md hover:scale-105 transition-all",children:[h.jsx(C4,{className:"w-4 h-4 mr-2"}),"Share assessment link"]})]})})]}),h.jsx(_e.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},className:"w-[380px] flex-shrink-0",children:h.jsx(dZ,{onSubmit:Vs,isLoading:n,contextSections:ce,onRemoveContext:le=>ie(Re=>Re.filter(Ze=>Ze!==le)),lastChange:A,responseMessage:R,model:U})})]})]}),h.jsx(hZ,{isOpen:o,onClose:()=>l(!1),assessment:be}),h.jsx(Jf,{open:Y,onOpenChange:K,children:h.jsxs(Zu,{className:"sm:max-w-[500px]",children:[h.jsxs(ed,{children:[h.jsx(td,{children:"Generate Assessment Link"}),h.jsx(nd,{children:"Enter the candidate's name to generate a unique shareable link for this assessment."})]}),h.jsx("div",{className:"space-y-4 py-4",children:H?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[h.jsx("p",{className:"text-sm text-green-800 mb-2",children:"Link generated successfully!"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(xn,{value:H,readOnly:!0,className:"flex-1 bg-white"}),h.jsx(Ee,{onClick:ra,size:"sm",variant:"outline",className:"flex-shrink-0",children:re?h.jsxs(h.Fragment,{children:[h.jsx(Mo,{className:"w-4 h-4 mr-2"}),"Copied!"]}):h.jsxs(h.Fragment,{children:[h.jsx(cI,{className:"w-4 h-4 mr-2"}),"Copy"]})})]})]}),h.jsx("p",{className:"text-xs text-gray-500",children:"Share this link with the candidate. They will be able to access and complete the assessment."})]}):h.jsx(h.Fragment,{children:h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Candidate Name *"}),h.jsx(xn,{value:X,onChange:le=>se(le.target.value),placeholder:"Enter candidate's full name",onKeyDown:le=>{le.key==="Enter"&&X.trim()&&Er()},autoFocus:!0})]})})}),h.jsx(mD,{children:H?h.jsx(Ee,{onClick:()=>{K(!1),te(""),se("")},className:"bg-[#1E3A8A] hover:bg-[#152a66]",children:"Done"}):h.jsxs(h.Fragment,{children:[h.jsx(Ee,{variant:"outline",onClick:()=>K(!1),children:"Cancel"}),h.jsx(Ee,{onClick:Er,disabled:!X.trim()||D,className:"bg-[#1E3A8A] hover:bg-[#152a66]",children:D?"Generating...":"Generate Link"})]})})]})})]})}const pZ=$b("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ii({className:t,variant:e,...n}){return h.jsx("div",{className:et(pZ({variant:e}),t),...n})}function mZ(){const[t,e]=w.useState({code:!0,tests:!0,interview:!1}),n={name:"Sarah Chen",email:"sarah.chen@email.com",overallScore:87,githubUrl:"https://github.com/sarahchen/task-api",timeSpent:"3h 42m"},r=[{name:"User registration creates valid JWT",type:"unit",passed:!0,points:10,maxPoints:10},{name:"Tasks CRUD operations work correctly",type:"integration",passed:!0,points:15,maxPoints:15},{name:"Unauthorized access returns 401",type:"unit",passed:!0,points:10,maxPoints:10},{name:"Database relationships are maintained",type:"integration",passed:!1,points:10,maxPoints:15}],i=[{question:"Walk me through how you structured your database schema and why.",answer:"I used a normalized structure with users and tasks tables. The tasks table has a foreign key to users for ownership. I chose PostgreSQL for its reliability and JSON support for flexible task metadata.",aiNotes:"Candidate demonstrated solid understanding of relational database design principles.",score:85,videoUrl:"https://example.com/video1.mp4"},{question:"How did you handle authentication? What alternatives did you consider?",answer:"I implemented JWT-based authentication with refresh tokens. I considered session-based auth but chose JWT for stateless scalability. I also looked at OAuth but it was overkill for this scope.",aiNotes:"Good awareness of trade-offs. Could have mentioned security considerations more.",score:78,videoUrl:"https://example.com/video2.mp4"},{question:"How would you scale this API to handle 10,000 concurrent users?",answer:"I'd add Redis for caching frequently accessed data, implement connection pooling, and consider read replicas for the database. For the API layer, horizontal scaling with a load balancer.",aiNotes:"Strong technical knowledge. Mentioned key scaling strategies appropriately.",score:92,videoUrl:"https://example.com/video3.mp4"}],s=Math.round(i.reduce((d,f)=>d+f.score,0)/i.length),o=d=>{e(f=>({...f,[d]:!f[d]}))},l=d=>d>=90?"text-green-600":d>=70?"text-yellow-600":"text-red-600",u=d=>d>=90?"bg-green-100":d>=70?"bg-yellow-100":"bg-red-100";return h.jsx("div",{className:"min-h-screen bg-[#f8f9fb]",children:h.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-8",children:[h.jsxs(_e.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-8",children:[h.jsxs(gr,{to:Be("AssessmentEditor"),className:"inline-flex items-center gap-2 text-sm text-gray-500 hover:text-gray-700 mb-4",children:[h.jsx(Pc,{className:"w-4 h-4"}),"Back to Assessment"]}),h.jsxs("div",{className:"flex items-start justify-between",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"w-14 h-14 rounded-full bg-[#1E3A8A] flex items-center justify-center text-white text-xl font-semibold",children:n.name.split(" ").map(d=>d[0]).join("")}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:n.name}),h.jsx("p",{className:"text-gray-500",children:n.email})]})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs(Ee,{variant:"outline",className:"gap-2",children:[h.jsx(QU,{className:"w-4 h-4"}),"Export PDF"]}),h.jsxs(Ee,{className:"gap-2 bg-[#1E3A8A] hover:bg-[#152a66]",children:[h.jsx(jl,{className:"w-4 h-4"}),"Send Feedback"]})]})]})]}),h.jsxs(_e.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-4 gap-4 mb-6",children:[h.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[h.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Overall Score"}),h.jsxs("p",{className:`text-3xl font-bold ${l(n.overallScore)}`,children:[n.overallScore,"%"]})]}),h.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[h.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Time Spent"}),h.jsxs("p",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[h.jsx(Ps,{className:"w-5 h-5 text-gray-400"}),n.timeSpent]})]}),h.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[h.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Tests Passed"}),h.jsxs("p",{className:"text-xl font-semibold text-gray-900",children:[r.filter(d=>d.passed).length,"/",r.length]})]}),h.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[h.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Submission"}),h.jsxs("a",{href:n.githubUrl,target:"_blank",rel:"noopener noreferrer",className:"text-[#1E3A8A] hover:underline flex items-center gap-1 text-sm font-medium",children:["View on GitHub",h.jsx(ZU,{className:"w-3.5 h-3.5"})]})]})]}),h.jsxs(_e.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl border border-gray-200 mb-6",children:[h.jsxs("button",{onClick:()=>o("tests"),className:"w-full flex items-center justify-between p-5 text-left",children:[h.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[h.jsx(qU,{className:"w-5 h-5 text-[#1E3A8A]"}),"Test Results"]}),t.tests?h.jsx(dp,{className:"w-5 h-5 text-gray-400"}):h.jsx(vc,{className:"w-5 h-5 text-gray-400"})]}),t.tests&&h.jsx("div",{className:"px-5 pb-5 space-y-2",children:r.map((d,f)=>h.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${d.passed?"bg-green-50":"bg-red-50"}`,children:[h.jsxs("div",{className:"flex items-center gap-3",children:[d.passed?h.jsx(yc,{className:"w-5 h-5 text-green-600"}):h.jsx(lI,{className:"w-5 h-5 text-red-600"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium text-gray-900",children:d.name}),h.jsx(Ii,{variant:"outline",className:"text-xs mt-1",children:d.type})]})]}),h.jsxs("span",{className:`text-sm font-semibold ${d.passed?"text-green-600":"text-red-600"}`,children:[d.points,"/",d.maxPoints," pts"]})]},f))})]}),h.jsxs(_e.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.25},className:"bg-white rounded-xl border border-gray-200",children:[h.jsxs("button",{onClick:()=>o("interview"),className:"w-full flex items-center justify-between p-5 text-left",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[h.jsx(jl,{className:"w-5 h-5 text-[#1E3A8A]"}),"AI Interview Responses"]}),h.jsxs("div",{className:`px-2.5 py-1 rounded-full text-sm font-semibold ${u(s)} ${l(s)}`,children:["Avg: ",s,"%"]})]}),t.interview?h.jsx(dp,{className:"w-5 h-5 text-gray-400"}):h.jsx(vc,{className:"w-5 h-5 text-gray-400"})]}),t.interview&&h.jsx("div",{className:"px-5 pb-5 space-y-4",children:i.map((d,f)=>h.jsxs("div",{className:"border border-gray-100 rounded-lg p-4",children:[h.jsxs("div",{className:"flex items-start justify-between mb-3",children:[h.jsx("p",{className:"text-sm font-medium text-gray-900",children:d.question}),h.jsxs("div",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${u(d.score)} ${l(d.score)}`,children:[d.score,"%"]})]}),h.jsxs("div",{className:"mb-3 rounded-lg overflow-hidden bg-gray-900 aspect-video flex items-center justify-center relative group cursor-pointer",children:[h.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:h.jsx("div",{className:"w-14 h-14 rounded-full bg-white/90 flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform",children:h.jsx(pI,{className:"w-6 h-6 text-[#1E3A8A] ml-1"})})}),h.jsx("p",{className:"text-white/60 text-xs absolute bottom-3 left-3",children:"Video response  1:24"})]}),h.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-3",children:[h.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Transcript"}),h.jsxs("p",{className:"text-sm text-gray-700 italic",children:['"',d.answer,'"']})]}),h.jsxs("div",{className:"flex items-start gap-2 text-xs text-[#1E3A8A] bg-blue-50 rounded-lg p-2",children:[h.jsx(_4,{className:"w-3.5 h-3.5 mt-0.5 flex-shrink-0"}),h.jsx("span",{children:d.aiNotes})]})]},f))})]})]})})}var yw="Progress",bw=100,[gZ]=Xi(yw),[vZ,yZ]=gZ(yw),kD=w.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:s=bZ,...o}=t;(i||i===0)&&!yP(i)&&console.error(xZ(`${i}`,"Progress"));const l=yP(i)?i:bw;r!==null&&!bP(r,l)&&console.error(wZ(`${r}`,"Progress"));const u=bP(r,l)?r:null,d=Dp(u)?s(u,l):void 0;return h.jsx(vZ,{scope:n,value:u,max:l,children:h.jsx(ut.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Dp(u)?u:void 0,"aria-valuetext":d,role:"progressbar","data-state":TD(u,l),"data-value":u??void 0,"data-max":l,...o,ref:e})})});kD.displayName=yw;var SD="ProgressIndicator",CD=w.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,i=yZ(SD,n);return h.jsx(ut.div,{"data-state":TD(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:e})});CD.displayName=SD;function bZ(t,e){return`${Math.round(t/e*100)}%`}function TD(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Dp(t){return typeof t=="number"}function yP(t){return Dp(t)&&!isNaN(t)&&t>0}function bP(t,e){return Dp(t)&&!isNaN(t)&&t<=e&&t>=0}function xZ(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${bw}\`.`}function wZ(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${bw} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var ED=kD,kZ=CD;const SZ=w.forwardRef(({className:t,value:e,...n},r)=>h.jsx(ED,{ref:r,className:et("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",t),...n,children:h.jsx(kZ,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));SZ.displayName=ED.displayName;function CZ(){var cr,on,Fn,_n,Cr,Jn,zr,Tr;const[t]=Fd(),e=t.get("assessmentId"),[n,r]=w.useState(""),[i,s]=w.useState("all"),[o,l]=w.useState([]),[u,d]=w.useState(null),[f,m]=w.useState(!0),[g,y]=w.useState(null),[C,x]=w.useState(null),[k,T]=w.useState(null),[_,P]=w.useState(!1),[E,I]=w.useState(null),[A,L]=w.useState(!1),[R,j]=w.useState(new Set),[U,z]=w.useState(new Set),[F,W]=w.useState(!1),{toast:Y}=rI();w.useEffect(()=>{E!=null&&E._id&&(j(new Set),z(new Set))},[E==null?void 0:E._id]),w.useEffect(()=>{const M=Xa(st,Q=>{x(Q),Q||(window.location.href="/")});return()=>M()},[]),w.useEffect(()=>{if(!e||!C)return;(async()=>{m(!0),y(null);try{const Q=await C.getIdToken(),de=await HR(e,Q);if(!de.success){y("Failed to load assessment"),m(!1);return}d(de.data);const be=await Y0(e,Q);be.success?l(be.data||[]):y(be.error||"Failed to load submissions")}catch(Q){console.error("Error fetching data:",Q),y(Q.message||"An unexpected error occurred")}finally{m(!1)}})()},[e,C]);const K=Ni.useMemo(()=>{const M=o.length,Q=o.filter(Xe=>Xe.status==="in-progress"||Xe.status==="submitted"||Xe.status==="expired"||Xe.status==="opted-out"&&Xe.startedAt).length,de=o.filter(Xe=>Xe.status==="submitted").length,be=o.filter(Xe=>Xe.status==="expired").length,Pe=o.filter(Xe=>Xe.status==="opted-out").length,Ne=o.filter(Xe=>Xe.status==="submitted"&&Xe.timeSpent&&Xe.timeSpent>0),ft=Ne.length>0?Math.round(Ne.reduce((Xe,kt)=>Xe+(kt.timeSpent||0),0)/Ne.length):0;return{totalInvited:M,started:Q,completed:de,expired:be,optedOut:Pe,avgTimeSpent:(Xe=>{if(Xe<60)return`${Xe}m`;const kt=Math.floor(Xe/60),at=Xe%60;return at>0?`${kt}h ${at}m`:`${kt}h`})(ft)}},[o]),X=K.started>0?Math.round((K.started-K.completed)/K.started*100):0,se=K.totalInvited>0?Math.round(K.started/K.totalInvited*100):0,H=K.started>0?Math.round(K.completed/K.started*100):0,te=Ni.useMemo(()=>{const M=o.filter(Pe=>Pe.status==="opted-out"&&Pe.optOutReason);if(M.length===0)return null;const Q=M.map(Pe=>Pe.optOutReason.toLowerCase().trim()),de={time:{keywords:["time","busy","schedule","deadline","hours","long","too much time","not enough time"],count:0,examples:[]},complexity:{keywords:["too hard","too difficult","complex","challenging","overwhelming","advanced"],count:0,examples:[]},unclear:{keywords:["unclear","confusing","unclear instructions","not clear","vague","ambiguous"],count:0,examples:[]},notInterested:{keywords:["not interested","not a fit","not right","different","not for me"],count:0,examples:[]},technical:{keywords:["technical","tech stack","framework","language","tools","environment"],count:0,examples:[]},other:{keywords:[],count:0,examples:[]}};Q.forEach((Pe,Ne)=>{let ft=!1;const ot=M[Ne].optOutReason;for(const[Xe,kt]of Object.entries(de))if(Xe!=="other"&&kt.keywords.some(at=>Pe.includes(at))){kt.count++,kt.examples.length<3&&kt.examples.push(ot),ft=!0;break}ft||(de.other.count++,de.other.examples.length<3&&de.other.examples.push(ot))});const be=[];return de.time.count>0&&be.push({priority:de.time.count>=2?"high":"medium",issue:"Time concerns",suggestion:"Consider reducing the time limit or breaking the assessment into smaller parts. Make the expected time commitment clear upfront.",count:de.time.count}),de.complexity.count>0&&be.push({priority:de.complexity.count>=2?"high":"medium",issue:"Assessment too complex",suggestion:"Review the difficulty level. Consider providing starter code or scaffolding to help candidates get started faster.",count:de.complexity.count}),de.unclear.count>0&&be.push({priority:"high",issue:"Unclear instructions",suggestion:"Clarify the project description and requirements. Add more specific examples and expected deliverables.",count:de.unclear.count}),de.technical.count>0&&be.push({priority:"medium",issue:"Technical stack mismatch",suggestion:"Ensure the required technologies are clearly stated in the job description and assessment. Consider offering flexibility in tech stack.",count:de.technical.count}),de.notInterested.count>0&&be.push({priority:"low",issue:"Not a good fit",suggestion:"This is expected - some candidates will self-select out. Ensure your job description accurately represents the role.",count:de.notInterested.count}),be.sort((Pe,Ne)=>{const ft={high:3,medium:2,low:1};return ft[Pe.priority]!==ft[Ne.priority]?ft[Ne.priority]-ft[Pe.priority]:Ne.count-Pe.count}),{totalWithFeedback:M.length,themes:de,suggestions:be,allReasons:M.map(Pe=>Pe.optOutReason)}},[o]),D=o.filter(M=>{const Q=M.candidateName||"",de=M.candidateEmail||"",be=Q.toLowerCase().includes(n.toLowerCase())||de.toLowerCase().includes(n.toLowerCase());let Pe=i;i==="completed"&&(Pe="submitted"),i==="not_started"&&(Pe="pending"),i==="in_progress"&&(Pe="in-progress"),i==="opted_out"&&(Pe="opted-out");const Ne=i==="all"||M.status===Pe;return be&&Ne}),$=M=>{if(!M)return"";if(M<60)return`${M}m`;const Q=Math.floor(M/60),de=M%60;return de>0?`${Q}h ${de}m`:`${Q}h`},re=(M,Q)=>{const de={submitted:"bg-green-100 text-green-700","in-progress":"bg-blue-100 text-blue-700",pending:"bg-gray-100 text-gray-600",expired:"bg-red-100 text-red-700","opted-out":"bg-orange-100 text-orange-700"},be={submitted:"Completed","in-progress":"In Progress",pending:"Not Started",expired:"Expired","opted-out":Q!=null&&Q.startedAt?"Opted Out (After Start)":"Opted Out (Before Start)"};return h.jsx(Ii,{className:de[M]||"bg-gray-100 text-gray-600",children:be[M]||M})},O=M=>{if(!M)return h.jsx(Ii,{className:"bg-gray-100 text-gray-600",children:"Not Started"});const Q={not_started:"bg-gray-100 text-gray-600",in_progress:"bg-blue-100 text-blue-700",completed:"bg-green-100 text-green-700",failed:"bg-red-100 text-red-700"},de={not_started:"Not Started",in_progress:"In Progress",completed:"Completed",failed:"Failed"};return h.jsx(Ii,{className:Q[M.status]||Q.not_started,children:de[M.status]||"Unknown"})},ve=M=>M?new Date(M).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}):"",oe=M=>{var de,be,Pe,Ne,ft,ot,Xe,kt,at;if(!M||typeof M!="object")return"";const Q=M.prompt??M.content??M.input??M.user_input??M.userMessage??M.user_message??M.question??M.humanMessage??M.text??((be=(de=M.messages)==null?void 0:de[0])==null?void 0:be.content)??((Pe=M.metadata)==null?void 0:Pe.prompt)??((Ne=M.metadata)==null?void 0:Ne.input)??((ft=M.metadata)==null?void 0:ft.content)??((ot=M.data)==null?void 0:ot.prompt)??((Xe=M.data)==null?void 0:Xe.input)??((kt=M.payload)==null?void 0:kt.prompt)??((at=M.payload)==null?void 0:at.input);if(Q!=null)return typeof Q=="string"?Q:JSON.stringify(Q,null,2);if(Array.isArray(M.messages)){const Zt=M.messages.filter(rt=>(rt==null?void 0:rt.role)==="user"&&(rt==null?void 0:rt.content)!=null).map(rt=>typeof rt.content=="string"?rt.content:JSON.stringify(rt.content));if(Zt.length)return Zt.join(`

`)}return ie(M,1)[0]??""},ce=M=>{var de,be,Pe,Ne,ft,ot,Xe,kt,at;if(!M||typeof M!="object")return"";if(M.response!=null)return typeof M.response=="string"?M.response:M.response&&typeof M.response=="object"&&"content"in M.response?typeof M.response.content=="string"?M.response.content:JSON.stringify(M.response.content,null,2):JSON.stringify(M.response,null,2);const Q=M.output??M.assistant_output??M.assistantMessage??M.assistant_message??M.answer??M.aiMessage??M.completion??(M.role==="assistant"?M.content:null)??((be=(de=M.messages)==null?void 0:de[1])==null?void 0:be.content)??((Pe=M.metadata)==null?void 0:Pe.response)??((Ne=M.metadata)==null?void 0:Ne.output)??((ft=M.metadata)==null?void 0:ft.content)??((ot=M.data)==null?void 0:ot.response)??((Xe=M.data)==null?void 0:Xe.output)??((kt=M.payload)==null?void 0:kt.response)??((at=M.payload)==null?void 0:at.output);if(Q!=null)return typeof Q=="string"?Q:JSON.stringify(Q,null,2);if(Array.isArray(M.messages)){const Zt=M.messages.filter(rt=>(rt==null?void 0:rt.role)==="assistant"&&(rt==null?void 0:rt.content)!=null).map(rt=>typeof rt.content=="string"?rt.content:JSON.stringify(rt.content));if(Zt.length)return Zt.join(`

`)}return ie(M,2)[1]??""},ie=(M,Q)=>{const de=[],be=new Set,Pe=Ne=>{de.length>=Q||(typeof Ne=="string"&&Ne.length>10&&!be.has(Ne)?(be.add(Ne),de.push(Ne)):Array.isArray(Ne)?Ne.forEach(Pe):Ne&&typeof Ne=="object"&&Ne.constructor===Object&&Object.values(Ne).forEach(Pe))};return Pe(M),de},Se=M=>{T(M),P(!0)},[Ce,Le]=w.useState(null),[qe,Je]=w.useState(!1),jt=M=>{Le(M)},Ct=async()=>{if(!(!Ce||!C)){Je(!0);try{const M=await C.getIdToken(),Q=await bD(Ce._id,M);Q.success?(l(de=>de.filter(be=>be._id!==Ce._id)),Le(null)):y(Q.error||"Failed to delete submission")}catch(M){console.error("Error deleting submission:",M),y(M.message||"An error occurred while deleting")}finally{Je(!1)}}},sn=()=>{Le(null)},fn=M=>`${window.location.origin}${Be("CandidateAssessment")}?token=${M.token}`,Pn=async M=>{const Q=fn(M);try{await navigator.clipboard.writeText(Q),Y({title:"Link copied",description:"You have copied submission link"})}catch(de){console.error("Failed to copy link:",de),Y({title:"Failed to copy",description:"Failed to copy link to clipboard",variant:"destructive"})}};return h.jsx("div",{className:"min-h-screen bg-[#f8f9fb]",children:h.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-8",children:[h.jsxs(_e.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-8",children:[h.jsx(gr,{to:Be("Home"),className:"text-sm text-gray-500 hover:text-[#1E3A8A] mb-1 block",children:" Back to Assessments"}),h.jsx("h1",{className:"text-2xl font-bold text-[#1E3A8A]",children:u?u.title:"Submissions Dashboard"}),h.jsx("p",{className:"text-gray-500 text-sm",children:u?`Track candidate progress and review submissions for "${u.title}"`:"Track candidate progress and review submissions"})]}),h.jsxs(_e.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-4 gap-4 mb-8",children:[h.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[h.jsx("div",{className:"flex items-center justify-between mb-2",children:h.jsx(tT,{className:"w-5 h-5 text-gray-400"})}),h.jsx("p",{className:"text-2xl font-bold text-gray-900",children:K.totalInvited}),h.jsx("p",{className:"text-sm text-gray-500",children:"Total Invited"})]}),h.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx(Ps,{className:"w-5 h-5 text-blue-500"}),h.jsxs("span",{className:"text-xs text-green-600 flex items-center gap-0.5",children:[h.jsx(ZC,{className:"w-3 h-3"}),se,"%"]})]}),h.jsx("p",{className:"text-2xl font-bold text-gray-900",children:K.started}),h.jsx("p",{className:"text-sm text-gray-500",children:"Started"})]}),h.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx(yc,{className:"w-5 h-5 text-green-500"}),h.jsxs("span",{className:"text-xs text-green-600 flex items-center gap-0.5",children:[h.jsx(ZC,{className:"w-3 h-3"}),H,"%"]})]}),h.jsx("p",{className:"text-2xl font-bold text-gray-900",children:K.completed}),h.jsx("p",{className:"text-sm text-gray-500",children:"Completed"})]}),h.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx(eT,{className:"w-5 h-5 text-red-500"}),h.jsxs("span",{className:"text-xs text-red-600 flex items-center gap-0.5",children:[h.jsx(CU,{className:"w-3 h-3"}),X,"%"]})]}),h.jsx("p",{className:"text-2xl font-bold text-red-600",children:K.started-K.completed}),h.jsx("p",{className:"text-sm text-gray-500",children:"Dropoff"})]})]}),te&&te.totalWithFeedback>0&&h.jsxs(_e.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.12},className:"bg-gradient-to-r from-orange-50 to-yellow-50 rounded-xl border border-orange-200 mb-6 overflow-hidden",children:[h.jsxs("button",{onClick:()=>W(!F),className:"w-full p-6 flex items-center justify-between hover:bg-orange-100/50 transition-colors",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(eT,{className:"w-6 h-6 text-orange-600"}),h.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Dropoff Feedback Analysis"}),h.jsxs(Ii,{className:"bg-orange-100 text-orange-700",children:[te.totalWithFeedback," feedback",te.totalWithFeedback!==1?"s":""]})]}),F?h.jsx(dp,{className:"w-5 h-5 text-gray-600"}):h.jsx(vc,{className:"w-5 h-5 text-gray-600"})]}),F&&h.jsxs("div",{className:"px-6 pb-6",children:[te.suggestions.length>0&&h.jsxs("div",{className:"mb-6",children:[h.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Recommendations"}),h.jsx("div",{className:"space-y-3",children:te.suggestions.map((M,Q)=>h.jsx("div",{className:`p-4 rounded-lg border-l-4 ${M.priority==="high"?"bg-red-50 border-red-500":M.priority==="medium"?"bg-yellow-50 border-yellow-500":"bg-blue-50 border-blue-500"}`,children:h.jsx("div",{className:"flex items-start justify-between mb-2",children:h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("span",{className:"text-sm font-semibold text-gray-900",children:M.issue}),h.jsxs(Ii,{className:M.priority==="high"?"bg-red-100 text-red-700":M.priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700",children:[M.priority," priority"]}),h.jsxs("span",{className:"text-xs text-gray-500",children:["(",M.count," mention",M.count!==1?"s":"",")"]})]}),h.jsx("p",{className:"text-sm text-gray-700",children:M.suggestion})]})})},Q))})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Common Themes"}),h.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(te.themes).filter(([M,Q])=>Q.count>0).map(([M,Q])=>h.jsxs("div",{className:"bg-white rounded-lg border border-orange-200 p-3",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("span",{className:"text-sm font-medium text-gray-900 capitalize",children:M==="notInterested"?"Not Interested":M}),h.jsx(Ii,{className:"bg-orange-100 text-orange-700",children:Q.count})]}),Q.examples.length>0&&h.jsx("div",{className:"space-y-1",children:Q.examples.slice(0,2).map((de,be)=>h.jsxs("p",{className:"text-xs text-gray-600 italic truncate",title:de,children:['"',de,'"']},be))})]},M))})]})]})]}),h.jsxs(_e.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15},className:"bg-white rounded-xl border border-gray-200 p-4 mb-4 flex items-center gap-4",children:[h.jsxs("div",{className:"relative flex-1 max-w-sm",children:[h.jsx(x4,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),h.jsx(xn,{placeholder:"Search candidates...",value:n,onChange:M=>r(M.target.value),className:"pl-9"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(r4,{className:"w-4 h-4 text-gray-400"}),h.jsxs("select",{value:i,onChange:M=>s(M.target.value),className:"border border-gray-200 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-[#1E3A8A]/20",children:[h.jsx("option",{value:"all",children:"All Status"}),h.jsx("option",{value:"completed",children:"Completed"}),h.jsx("option",{value:"in_progress",children:"In Progress"}),h.jsx("option",{value:"not_started",children:"Not Started"}),h.jsx("option",{value:"opted_out",children:"Opted Out"}),h.jsx("option",{value:"expired",children:"Expired"})]})]})]}),g&&h.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700",children:g}),f?h.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center",children:[h.jsx("div",{className:"w-8 h-8 border-2 border-[#1E3A8A]/30 border-t-[#1E3A8A] rounded-full animate-spin mx-auto mb-4"}),h.jsx("p",{className:"text-gray-500",children:"Loading submissions..."})]}):D.length===0?h.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center",children:[h.jsx(tT,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),h.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No submissions yet"}),h.jsx("p",{className:"text-gray-500",children:o.length===0?"No candidates have been invited to this assessment yet.":"No submissions match your search criteria."})]}):h.jsx(_e.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:h.jsxs("table",{className:"w-full",children:[h.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:h.jsxs("tr",{children:[h.jsx("th",{className:"text-left px-5 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Candidate"}),h.jsx("th",{className:"text-left px-5 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),h.jsx("th",{className:"text-left px-5 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Interview"}),h.jsx("th",{className:"text-left px-5 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time Spent"}),h.jsx("th",{className:"text-left px-5 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Score"}),h.jsx("th",{className:"text-right px-5 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),h.jsx("tbody",{className:"divide-y divide-gray-100",children:D.map(M=>{var Pe,Ne,ft,ot,Xe,kt;const Q=M.candidateName||"Unknown",de=M.candidateEmail||"",be=Q.split(" ").map(at=>at[0]).join("").toUpperCase().slice(0,2);return h.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[h.jsx("td",{className:"px-5 py-4",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-9 h-9 rounded-full bg-[#1E3A8A] flex items-center justify-center text-white text-sm font-medium",children:be}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium text-gray-900",children:Q}),de&&h.jsx("p",{className:"text-xs text-gray-500",children:de})]})]})}),h.jsx("td",{className:"px-5 py-4",children:h.jsxs("div",{className:"flex flex-col gap-1",children:[re(M.status,M),M.optedOut&&M.optOutReason&&h.jsxs("p",{className:"text-xs text-gray-500 italic max-w-xs truncate",title:M.optOutReason,children:['"',M.optOutReason,'"']})]})}),h.jsx("td",{className:"px-5 py-4",children:h.jsxs("div",{className:"flex items-center gap-2",children:[O(M.interview),M.interview&&h.jsxs(Ee,{variant:"ghost",size:"sm",onClick:()=>Se(M),className:"text-[#1E3A8A] hover:bg-[#1E3A8A]/10 h-7 px-2",children:[h.jsx(jl,{className:"w-3.5 h-3.5 mr-1"}),"Details"]})]})}),h.jsx("td",{className:"px-5 py-4 text-sm text-gray-600",children:$(M.timeSpent)}),h.jsx("td",{className:"px-5 py-4",children:(()=>{var rt,Bs,Vs,$r,Er,ra,le,Re,Ze,mt,Ft,an,Wr,bi,Pr,rl,Hr,wn,qr,xi,nh,rh,ih,wi,Bc;const at=((rt=M.scores)==null?void 0:rt.overall)!=null?M.scores.overall:($r=(Vs=(Bs=M.llmWorkflow)==null?void 0:Bs.scores)==null?void 0:Vs.overall)==null?void 0:$r.score,Zt=M.status==="submitted"&&((Er=M.scores)==null?void 0:Er.overall)==null;return at!=null?h.jsxs("div",{className:"flex flex-col gap-0.5",title:[((le=(ra=M.scores)==null?void 0:ra.completeness)==null?void 0:le.score)!=null?`Completeness: ${M.scores.completeness.score}%`:null,((mt=(Ze=(Re=M.llmWorkflow)==null?void 0:Re.scores)==null?void 0:Ze.overall)==null?void 0:mt.score)!=null?`Workflow: ${M.llmWorkflow.scores.overall.score}/100`:null].filter(Boolean).join("  ")||void 0,children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-lg font-bold",children:at}),h.jsx("span",{className:"text-xs text-gray-500",children:"/100"})]}),(((an=(Ft=M.scores)==null?void 0:Ft.completeness)==null?void 0:an.score)!=null||((Pr=(bi=(Wr=M.llmWorkflow)==null?void 0:Wr.scores)==null?void 0:bi.overall)==null?void 0:Pr.score)!=null)&&h.jsxs("span",{className:"text-xs text-gray-500",children:[((Hr=(rl=M.scores)==null?void 0:rl.completeness)==null?void 0:Hr.score)!=null&&h.jsxs("span",{children:["Completeness:"," ",M.scores.completeness.score,"%"]}),((qr=(wn=M.scores)==null?void 0:wn.completeness)==null?void 0:qr.score)!=null&&((rh=(nh=(xi=M.llmWorkflow)==null?void 0:xi.scores)==null?void 0:nh.overall)==null?void 0:rh.score)!=null&&"  ",((Bc=(wi=(ih=M.llmWorkflow)==null?void 0:ih.scores)==null?void 0:wi.overall)==null?void 0:Bc.score)!=null&&h.jsxs("span",{children:["Workflow:"," ",M.llmWorkflow.scores.overall.score,"/100"]})]})]}):Zt?h.jsx(Ee,{onClick:async()=>{if(!C){Y({title:"Not signed in",description:"Please sign in to calculate scores.",variant:"destructive"});return}try{const zs=await C.getIdToken(),sh=await fetch(`${Ls}/submissions/${M._id}/calculate-scores`,{method:"POST",headers:{Authorization:`Bearer ${zs}`}});if(sh.ok){const $s=await Y0(e,zs);$s.success&&(l($s.data||[]),Y({title:"Scores calculated",description:"Completeness and workflow scores have been updated."}))}else{const $s=await sh.json().catch(()=>({}));Y({title:"Scoring failed",description:$s.error||$s.message||"Repo may not be indexed or workflow data missing.",variant:"destructive"})}}catch(zs){console.error("Error calculating scores:",zs),Y({title:"Scoring failed",description:zs.message||"An unexpected error occurred.",variant:"destructive"})}},size:"sm",variant:"outline",children:"Calculate scores"}):h.jsx("span",{className:"text-xs text-gray-400",children:""})})()}),h.jsx("td",{className:"px-5 py-4 text-right",children:h.jsxs("div",{className:"flex items-center justify-end gap-2",children:[h.jsx(Ee,{variant:"ghost",size:"sm",onClick:()=>Pn(M),className:"text-[#1E3A8A] hover:bg-[#1E3A8A]/10",title:"Copy candidate assessment link",children:h.jsx(cI,{className:"w-4 h-4"})}),(((ft=(Ne=(Pe=M.llmWorkflow)==null?void 0:Pe.trace)==null?void 0:Ne.events)==null?void 0:ft.length)>0||((Xe=(ot=M.llmWorkflow)==null?void 0:ot.taskResults)==null?void 0:Xe.length)>0||((kt=M.llmWorkflow)==null?void 0:kt.scores))&&h.jsx(Ee,{variant:"ghost",size:"sm",onClick:()=>{I(M),L(!0)},className:"text-[#1E3A8A] hover:bg-[#1E3A8A]/10",title:"View LLM workflow evaluation",children:h.jsx(zu,{className:"w-4 h-4"})}),M.status==="submitted"&&M.githubLink&&h.jsx("a",{href:M.githubLink,target:"_blank",rel:"noopener noreferrer",onClick:at=>at.stopPropagation(),children:h.jsx(Ee,{variant:"ghost",size:"sm",className:"text-[#1E3A8A] hover:bg-[#1E3A8A]/10",title:"View GitHub repository",children:h.jsx(uI,{className:"w-4 h-4"})})}),h.jsx(Ee,{variant:"ghost",size:"sm",onClick:()=>jt(M),className:"text-red-600 hover:bg-red-50 hover:text-red-700",title:"Delete submission",children:h.jsx(Zy,{className:"w-4 h-4"})})]})})]},M._id)})})]})}),h.jsx(Jf,{open:!!Ce,onOpenChange:M=>{M||sn()},children:h.jsxs(Zu,{children:[h.jsxs(ed,{children:[h.jsx(td,{children:"Delete Candidate Submission"}),h.jsxs(nd,{children:["Are you sure you want to delete the submission from"," ",h.jsx("strong",{children:(Ce==null?void 0:Ce.candidateName)||"this candidate"}),"? This action cannot be undone."]})]}),h.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[h.jsx(Ee,{variant:"outline",onClick:sn,disabled:qe,children:"Cancel"}),h.jsx(Ee,{variant:"destructive",onClick:Ct,disabled:qe,children:qe?"Deleting...":"Delete"})]})]})}),h.jsx(Jf,{open:_,onOpenChange:P,children:h.jsxs(Zu,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[h.jsxs(ed,{children:[h.jsxs(td,{className:"flex items-center gap-2",children:[h.jsx(jl,{className:"w-5 h-5"}),"Interview Details",k&&h.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["- ",k.candidateName||"Unknown Candidate"]})]}),h.jsx(nd,{children:"View transcript, summary, and metadata for this interview"})]}),k!=null&&k.interview?h.jsxs("div",{className:"space-y-6 mt-4",children:[k.optedOut&&h.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[h.jsx("p",{className:"text-sm font-medium text-orange-900 mb-2",children:"Candidate Opted Out"}),k.startedAt?h.jsx("p",{className:"text-xs text-orange-800 mb-2 font-semibold",children:" Opted out after starting the assessment"}):h.jsx("p",{className:"text-xs text-orange-800 mb-2 font-semibold",children:" Opted out before starting the assessment"}),k.optOutReason&&h.jsxs("p",{className:"text-sm text-orange-800 mb-1",children:[h.jsx("strong",{children:"Reason:"})," ",k.optOutReason]}),k.optedOutAt&&h.jsxs("p",{className:"text-xs text-orange-700",children:["Opted out on: ",ve(k.optedOutAt)]})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Status"}),O(k.interview)]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Provider"}),h.jsx("p",{className:"text-sm text-gray-600 capitalize",children:k.interview.provider||""})]}),k.interview.startedAt&&h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Started At"}),h.jsx("p",{className:"text-sm text-gray-600",children:ve(k.interview.startedAt)})]}),k.interview.completedAt&&h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Completed At"}),h.jsx("p",{className:"text-sm text-gray-600",children:ve(k.interview.completedAt)})]}),k.interview.conversationId&&h.jsxs("div",{className:"col-span-2",children:[h.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Conversation ID"}),h.jsx("p",{className:"text-sm text-gray-600 font-mono",children:k.interview.conversationId})]})]}),k.interview.summary&&h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Summary"}),h.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:h.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:k.interview.summary})})]}),((cr=k.interview.transcript)==null?void 0:cr.turns)&&k.interview.transcript.turns.length>0&&h.jsxs("div",{children:[h.jsxs("p",{className:"text-sm font-medium text-gray-700 mb-2",children:["Transcript (",k.interview.transcript.turns.length," ","turns)"]}),h.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200 space-y-4 max-h-96 overflow-y-auto",children:k.interview.transcript.turns.map((M,Q)=>h.jsx("div",{className:`flex gap-3 ${M.role==="agent"?"justify-start":"justify-end"}`,children:h.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 ${M.role==="agent"?"bg-white border border-gray-200":"bg-[#1E3A8A] text-white"}`,children:[h.jsx("p",{className:"text-xs font-medium mb-1 opacity-70",children:M.role==="agent"?"Interviewer":"Candidate"}),h.jsx("p",{className:`text-sm ${M.role==="agent"?"text-gray-700":"text-white"}`,children:M.text}),(M.startMs!==void 0||M.endMs!==void 0)&&h.jsxs("p",{className:"text-xs opacity-60 mt-1",children:[M.startMs!==void 0&&`${(M.startMs/1e3).toFixed(1)}s`,M.startMs!==void 0&&M.endMs!==void 0&&" - ",M.endMs!==void 0&&`${(M.endMs/1e3).toFixed(1)}s`]})]})},Q))})]}),k.interview.error&&k.interview.error.message&&h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium text-red-700 mb-2",children:"Error"}),h.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[h.jsx("p",{className:"text-sm text-red-700",children:k.interview.error.message}),k.interview.error.at&&h.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["At:"," ",ve(k.interview.error.at)]})]})]}),!k.interview.summary&&(!((on=k.interview.transcript)!=null&&on.turns)||k.interview.transcript.turns.length===0)&&h.jsxs("div",{className:"text-center py-8 text-gray-500",children:[h.jsx(jl,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),h.jsx("p",{children:"No interview data available yet"})]})]}):h.jsxs("div",{className:"text-center py-8 text-gray-500",children:[h.jsx(jl,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),h.jsx("p",{children:"No interview data available"})]})]})}),h.jsx(Jf,{open:A,onOpenChange:M=>{M||(L(!1),I(null))},children:h.jsxs(Zu,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[h.jsxs(ed,{children:[h.jsxs(td,{className:"flex items-center gap-2",children:[h.jsx(zu,{className:"w-5 h-5"}),"LLM Workflow Evaluation",E&&h.jsxs("span",{className:"text-sm font-normal text-gray-500",children:[" ",E.candidateName||"Unknown Candidate"]})]}),h.jsx(nd,{children:"Trace, task results, and workflow scores for this submission"})]}),E!=null&&E.llmWorkflow?h.jsxs("div",{className:"space-y-6 mt-4",children:[E.llmWorkflow.evaluation&&h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Evaluation"}),h.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200 grid grid-cols-2 sm:grid-cols-4 gap-3 text-sm",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-gray-500",children:"Tasks"}),h.jsxs("p",{className:"font-medium",children:[E.llmWorkflow.evaluation.tasksCompleted??"","/",E.llmWorkflow.evaluation.tasksTotal??""]})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-gray-500",children:"Harness"}),h.jsx("p",{className:"font-medium",children:E.llmWorkflow.evaluation.harnessVersion??""})]}),E.llmWorkflow.evaluation.startedAt&&h.jsxs("div",{children:[h.jsx("p",{className:"text-gray-500",children:"Started"}),h.jsx("p",{className:"font-medium",children:ve(E.llmWorkflow.evaluation.startedAt)})]}),E.llmWorkflow.evaluation.completedAt&&h.jsxs("div",{children:[h.jsx("p",{className:"text-gray-500",children:"Completed"}),h.jsx("p",{className:"font-medium",children:ve(E.llmWorkflow.evaluation.completedAt)})]})]})]}),E.llmWorkflow.trace&&h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Trace"}),h.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200 grid grid-cols-2 sm:grid-cols-5 gap-3 text-sm",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-gray-500",children:"Events"}),h.jsx("p",{className:"font-medium",children:((Fn=E.llmWorkflow.trace.events)==null?void 0:Fn.length)??0})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-gray-500",children:"Total tokens"}),h.jsx("p",{className:"font-medium",children:E.llmWorkflow.trace.totalTokens??""})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-gray-500",children:"Total cost"}),h.jsx("p",{className:"font-medium",children:E.llmWorkflow.trace.totalCost!=null?`$${Number(E.llmWorkflow.trace.totalCost).toFixed(4)}`:""})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-gray-500",children:"Total time"}),h.jsx("p",{className:"font-medium",children:E.llmWorkflow.trace.totalTime!=null?`${(E.llmWorkflow.trace.totalTime/1e3).toFixed(1)}s`:""})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-gray-500",children:"LLM calls"}),h.jsx("p",{className:"font-medium",children:E.llmWorkflow.trace.totalCalls??""})]})]}),E.llmWorkflow.trace.sessionId&&h.jsxs("p",{className:"text-xs text-gray-500 mt-2 font-mono",children:["Session:"," ",E.llmWorkflow.trace.sessionId]}),((_n=E.llmWorkflow.trace.events)==null?void 0:_n.length)>0&&h.jsxs("div",{className:"mt-4",children:[h.jsxs("h4",{className:"text-xs font-semibold text-gray-700 uppercase tracking-wider mb-3",children:["LLM calls (",E.llmWorkflow.trace.events.length,")"]}),h.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-1",children:E.llmWorkflow.trace.events.map((M,Q)=>{var Ne;const de=R.has(Q),be=oe(M),Pe=ce(M);return h.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden bg-white text-sm",children:[h.jsxs("div",{className:"px-3 py-2 bg-gray-50 border-b border-gray-200 flex flex-wrap items-center gap-2",children:[h.jsxs("span",{className:"font-medium text-gray-800",children:["Call ",Q+1]}),M.type&&h.jsx(Ii,{className:"bg-gray-200 text-gray-700 text-xs",children:M.type}),M.model&&h.jsx("span",{className:"text-gray-500 text-xs",children:M.model}),((Ne=M.tokens)==null?void 0:Ne.total)!=null&&h.jsxs("span",{className:"text-gray-500 text-xs",children:[M.tokens.total," tokens"]}),M.latency!=null&&h.jsxs("span",{className:"text-gray-500 text-xs",children:[M.latency,"ms"]})]}),h.jsxs("div",{className:"px-3 py-2 border-b border-gray-100",children:[h.jsx("p",{className:"text-xs font-medium text-gray-500 mb-1",children:"Prompt"}),h.jsxs("div",{className:"text-gray-800 whitespace-pre-wrap break-words max-h-32 overflow-y-auto",children:[be.length>500?be.slice(0,500)+"...":be,be.length>500&&h.jsxs("span",{className:"text-gray-400 text-xs",children:[" ","(",be.length," chars)"]})]})]}),h.jsxs("div",{className:"px-3 py-2",children:[h.jsxs("button",{type:"button",onClick:()=>{j(ft=>{const ot=new Set(ft);return ot.has(Q)?ot.delete(Q):ot.add(Q),ot})},className:"flex items-center gap-1 text-[#1E3A8A] hover:underline font-medium text-xs",children:[de?h.jsx(vc,{className:"w-3.5 h-3.5"}):h.jsx(aI,{className:"w-3.5 h-3.5"}),de?"Hide response":"Show response"]}),de&&h.jsx("div",{className:"mt-2 p-2 bg-gray-50 rounded border border-gray-200 text-gray-800 whitespace-pre-wrap break-words max-h-64 overflow-y-auto font-mono text-xs",children:Pe}),h.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-100",children:[h.jsx("button",{type:"button",onClick:()=>{z(ft=>{const ot=new Set(ft);return ot.has(Q)?ot.delete(Q):ot.add(Q),ot})},className:"text-gray-500 hover:text-gray-700 text-xs",children:U.has(Q)?"Hide raw JSON":"View raw JSON"}),U.has(Q)&&h.jsx("pre",{className:"mt-2 p-2 bg-gray-100 rounded border border-gray-200 text-gray-700 whitespace-pre-wrap break-words max-h-48 overflow-y-auto font-mono text-xs",children:JSON.stringify(M,null,2)})]})]})]},Q)})})]})]}),((Cr=E.llmWorkflow.taskResults)==null?void 0:Cr.length)>0&&h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Task results"}),h.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:h.jsxs("table",{className:"w-full text-sm",children:[h.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:h.jsxs("tr",{children:[h.jsx("th",{className:"text-left px-3 py-2 font-medium text-gray-700",children:"Task"}),h.jsx("th",{className:"text-left px-3 py-2 font-medium text-gray-700",children:"Status"}),h.jsx("th",{className:"text-left px-3 py-2 font-medium text-gray-700",children:"Tests"}),h.jsx("th",{className:"text-left px-3 py-2 font-medium text-gray-700",children:"Time"})]})}),h.jsx("tbody",{className:"divide-y divide-gray-100",children:E.llmWorkflow.taskResults.map((M,Q)=>h.jsxs("tr",{className:"hover:bg-gray-50/50",children:[h.jsx("td",{className:"px-3 py-2",children:M.taskName||M.taskId||""}),h.jsx("td",{className:"px-3 py-2",children:h.jsx(Ii,{className:M.status==="passed"?"bg-green-100 text-green-700":"bg-red-100 text-red-700",children:M.status})}),h.jsx("td",{className:"px-3 py-2",children:M.testResults?`${M.testResults.passed??0}/${M.testResults.total??0} passed`:""}),h.jsx("td",{className:"px-3 py-2",children:M.executionTime!=null?`${(M.executionTime/1e3).toFixed(1)}s`:""})]},Q))})]})})]}),E.llmWorkflow.scores&&h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Workflow scores"}),h.jsxs("div",{className:"space-y-3",children:[((Jn=E.llmWorkflow.scores.overall)==null?void 0:Jn.score)!=null&&h.jsxs("div",{className:"flex items-center gap-3 p-3 bg-[#1E3A8A]/5 rounded-lg border border-[#1E3A8A]/20",children:[h.jsxs("span",{className:"text-lg font-bold text-[#1E3A8A]",children:["Overall:"," ",E.llmWorkflow.scores.overall.score,"/100"]}),((zr=E.llmWorkflow.scores.overall.reasonCodes)==null?void 0:zr.length)>0&&h.jsx("span",{className:"text-xs text-gray-600",children:E.llmWorkflow.scores.overall.reasonCodes.join(", ")})]}),h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[{key:"correctness",label:"Correctness",max:40,s:E.llmWorkflow.scores.correctness},{key:"efficiency",label:"Efficiency",max:20,s:E.llmWorkflow.scores.efficiency},{key:"promptQuality",label:"Prompt quality",max:15,s:E.llmWorkflow.scores.promptQuality},{key:"structure",label:"Structure",max:20,s:E.llmWorkflow.scores.structure},{key:"reliability",label:"Reliability",max:5,s:E.llmWorkflow.scores.reliability}].map(({key:M,label:Q,max:de,s:be})=>(be==null?void 0:be.score)!=null&&h.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200 text-sm",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("span",{className:"font-medium text-gray-700",children:Q}),h.jsxs("span",{className:"font-semibold",children:[be.score,"/",de]})]}),be.evidence&&typeof be.evidence=="object"&&Object.keys(be.evidence).length>0&&h.jsx("p",{className:"text-xs text-gray-500 mt-1 truncate",children:Object.entries(be.evidence).filter(([Pe,Ne])=>Ne!=null&&Ne!==""&&Ne!==!1).map(([Pe,Ne])=>`${Pe}: ${Ne}`).join("  ")})]},M))})]})]}),!E.llmWorkflow.evaluation&&!E.llmWorkflow.trace&&!(((Tr=E.llmWorkflow.taskResults)==null?void 0:Tr.length)>0)&&!E.llmWorkflow.scores&&h.jsx("p",{className:"text-sm text-gray-500",children:"No evaluation data for this submission."})]}):h.jsxs("div",{className:"py-8 text-center text-gray-500",children:[h.jsx(zu,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),h.jsx("p",{children:"No LLM workflow data for this submission."})]})]})})]})})}function TZ(){var O,ve;const[t]=Fd(),e=Os(),n=t.get("token"),[r,i]=w.useState(null),[s,o]=w.useState(null),[l,u]=w.useState(!0),[d,f]=w.useState(!1),[m,g]=w.useState(!1),[y,C]=w.useState(""),[x,k]=w.useState(null),[T,_]=w.useState(""),[P,E]=w.useState(!1),[I,A]=w.useState(""),[L,R]=w.useState(!1),[j,U]=w.useState(null),[z,F]=w.useState(!1),[W,Y]=w.useState(!1);w.useEffect(()=>{if(!n){alert("No token provided in URL"),u(!1);return}(async()=>{u(!0);try{const ce=await Xl(n);if(ce.success){i(ce.data);const ie=ce.data.assessmentId;if(typeof ie=="object"&&ie!==null&&o(ie),ce.data.status==="submitted"||ce.data.status==="expired"){e(`${Be("CandidateSubmitted")}?token=${n}`);return}if(ce.data.status==="opted-out"){u(!1);return}ce.data.status==="in-progress"&&k(ce.data.timeRemaining),ce.data.githubLink&&C(ce.data.githubLink)}else{const ie="error"in ce?ce.error:"Failed to load assessment";alert(ie)}}catch(ce){console.error("Error loading submission:",ce),alert("Failed to load assessment")}finally{u(!1)}})()},[n]),w.useEffect(()=>{if(!n||!r||r.status!=="in-progress"||r.status==="opted-out")return;const oe=async()=>{try{const ie=await Xl(n);ie.success&&ie.data.timeRemaining!==null&&k(ie.data.timeRemaining)}catch(ie){console.error("Error syncing time:",ie)}};oe();const ce=setInterval(oe,3e4);return()=>clearInterval(ce)},[n,r]),w.useEffect(()=>{if(x===null||x<=0){_("00:00:00");return}const oe=()=>{const ie=Math.floor(x/60),Se=Math.floor(x%60),Ce=Math.floor(x%1*60);_(`${String(ie).padStart(2,"0")}:${String(Se).padStart(2,"0")}:${String(Ce).padStart(2,"0")}`)};oe();const ce=setInterval(()=>{k(ie=>ie===null||ie<=0?0:Math.max(0,ie-1/60)),oe()},1e3);return()=>clearInterval(ce)},[x]);const K=async()=>{if(!n){alert("No token provided");return}f(!0);try{const oe=await vD(n);if(oe.success)i(oe.data),k(oe.data.timeRemaining);else{const ce="error"in oe?oe.error:"Failed to start assessment";alert(ce)}}catch(oe){console.error("Error starting assessment:",oe),alert("Failed to start assessment")}finally{f(!1)}},X=async()=>{if(!(!j||!n)){Y(!0);try{const oe=await wD(n,j);if(oe.success)F(!0),alert("Trace uploaded successfully!");else{const ce="error"in oe?oe.error:"Failed to upload trace";alert(ce)}}catch(oe){console.error("Error uploading trace:",oe),alert("Failed to upload trace")}finally{Y(!1)}}},se=async()=>{if(!y.trim()){alert("Please enter a GitHub repository URL");return}if(!z){alert("Please upload your LLM trace file before submitting");return}if(!n){alert("No token provided");return}g(!0);try{const oe=await yD(n,y.trim());if(oe.success)e(`${Be("CandidateSubmitted")}?token=${n}`);else{const ce="error"in oe?oe.error:"Failed to submit assessment";alert(ce),g(!1)}}catch(oe){console.error("Error submitting assessment:",oe),alert("Failed to submit assessment"),g(!1)}},H=async()=>{if(!n){alert("No token provided");return}R(!0);try{const oe=await xD(n,I.trim()||void 0);if(oe.success)i(oe.data),E(!1),A("");else{const ce="error"in oe?oe.error:"Failed to opt out";alert(ce),R(!1)}}catch(oe){console.error("Error opting out:",oe),alert("Failed to opt out"),R(!1)}};if(l)return h.jsx("div",{className:"min-h-screen bg-[#f8f9fb] flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"w-8 h-8 border-2 border-[#1E3A8A]/30 border-t-[#1E3A8A] rounded-full animate-spin mx-auto mb-4"}),h.jsx("p",{className:"text-gray-500",children:"Loading assessment..."})]})});if(!r||!s)return h.jsx("div",{className:"min-h-screen bg-[#f8f9fb] flex items-center justify-center",children:h.jsx("div",{className:"text-center",children:h.jsx("p",{className:"text-red-600 mb-4",children:"Failed to load assessment"})})});if(r.status==="opted-out"){const oe=!r.startedAt;return h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#f8f9fb] to-[#eef1f8] flex items-center justify-center p-6",children:h.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-2xl bg-white rounded-2xl shadow-xl overflow-hidden",children:[h.jsxs("div",{className:"bg-orange-500 px-8 py-6 text-center",children:[h.jsx("div",{className:"w-16 h-16 rounded-full bg-white flex items-center justify-center mx-auto mb-4",children:h.jsx(fi,{className:"w-10 h-10 text-orange-500"})}),h.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:"You Have Opted Out"}),h.jsx("p",{className:"text-white/90",children:oe?"You have chosen not to start this assessment":"You have chosen not to complete this assessment"})]}),h.jsxs("div",{className:"p-8",children:[h.jsxs("div",{className:"mb-6",children:[h.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:s.title}),oe?h.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-3 mb-4",children:h.jsx("p",{className:"text-xs text-blue-800 font-medium",children:" You opted out before starting the assessment"})}):h.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-3 mb-4",children:h.jsx("p",{className:"text-xs text-orange-800 font-medium",children:" You opted out after starting the assessment"})}),r.optOutReason&&h.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200 mb-4",children:[h.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Your reason:"}),h.jsx("p",{className:"text-sm text-gray-600",children:r.optOutReason})]})]}),h.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-4",children:h.jsxs("p",{className:"text-sm text-orange-800",children:[h.jsx("strong",{children:"Note:"})," ",oe?"You opted out before starting the assessment. If you change your mind, please contact the assessment team.":"You opted out after starting the assessment. If you change your mind, please contact the assessment team."]})})]})]})})}const te=r.status==="in-progress"||r.status==="submitted"||r.status==="expired",D=Math.floor(s.timeLimit/60),$=s.timeLimit%60,re=D>0?`${D} hour${D>1?"s":""}${$>0?` ${$} minute${$>1?"s":""}`:""}`:`${$} minute${$>1?"s":""}`;return te?h.jsxs("div",{className:"min-h-screen bg-[#f8f9fb]",children:[h.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:h.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-4 flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 rounded-xl bg-white flex items-center justify-center overflow-hidden",children:h.jsx("img",{src:$o,alt:"Bridge",className:"w-full h-full object-contain"})}),h.jsxs("div",{children:[h.jsx("h1",{className:"font-semibold text-gray-900",children:s.title}),((ve=s.userId)==null?void 0:ve.companyName)&&h.jsx("p",{className:"text-xs text-gray-500",children:s.userId.companyName})]})]}),h.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg ${x!==null&&x<=15?"bg-red-50 text-red-700":x!==null&&x<=60?"bg-yellow-50 text-yellow-700":"bg-blue-50 text-blue-700"}`,children:[h.jsx(Ps,{className:"w-4 h-4"}),h.jsx("span",{className:"font-mono font-semibold",children:x!==null?T:"00:00:00"}),h.jsx("span",{className:"text-sm",children:"remaining"})]})]})}),h.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[h.jsxs("div",{className:"space-y-6",children:[h.jsxs(_e.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white rounded-xl border border-gray-200 p-6",children:[h.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Project Instructions"}),h.jsx("div",{className:"prose prose-sm max-w-none text-gray-700 leading-relaxed",children:h.jsx(PM,{components:{h2:({children:oe})=>h.jsx("h2",{className:"text-lg font-semibold text-gray-900 mt-6 mb-3",children:oe}),h3:({children:oe})=>h.jsx("h3",{className:"text-base font-semibold text-gray-900 mt-4 mb-2",children:oe}),p:({children:oe})=>h.jsx("p",{className:"mb-3",children:oe}),ul:({children:oe})=>h.jsx("ul",{className:"list-disc list-inside mb-3 space-y-1",children:oe}),ol:({children:oe})=>h.jsx("ol",{className:"list-decimal list-inside mb-3 space-y-1",children:oe}),li:({children:oe})=>h.jsx("li",{className:"ml-2",children:oe}),code:({children:oe,className:ce})=>!ce?h.jsx("code",{className:"bg-gray-100 text-gray-800 px-1.5 py-0.5 rounded text-sm font-mono",children:oe}):h.jsx("code",{className:"block bg-gray-100 text-gray-800 p-3 rounded text-sm font-mono overflow-x-auto mb-3",children:oe}),strong:({children:oe})=>h.jsx("strong",{className:"font-semibold text-gray-900",children:oe})},children:s.description})}),s.starterFilesGitHubLink&&h.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx($u,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-1",children:"Starter Files & Instructions"}),h.jsx("p",{className:"text-sm text-blue-800 mb-2",children:"Access the starter files and detailed instructions in the GitHub repository:"}),h.jsx("a",{href:s.starterFilesGitHubLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 hover:underline text-sm font-medium break-all",children:s.starterFilesGitHubLink})]})]})})]}),h.jsxs(_e.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl border border-gray-200 p-6",children:[h.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Submit Your Work"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GitHub Repository URL *"}),h.jsxs("div",{className:"relative",children:[h.jsx($u,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),h.jsx(xn,{value:y,onChange:oe=>C(oe.target.value),placeholder:"https://github.com/username/repository",className:"pl-10"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"LLM Interaction Trace * (Required)"}),h.jsx(xn,{type:"file",accept:".json,.md",onChange:oe=>{var ie;const ce=(ie=oe.target.files)==null?void 0:ie[0];ce&&U(ce)}}),j&&h.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Selected: ",j.name]}),h.jsx(Ee,{onClick:X,disabled:!j||z||W,variant:"outline",className:"mt-2",children:W?"Uploading...":z?"Trace Uploaded ":"Upload Trace"}),h.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg mt-2",children:[h.jsxs("p",{className:"text-sm text-yellow-800",children:[h.jsx("strong",{children:"Required:"})," Upload your LLM conversation trace as ",h.jsx("strong",{children:"JSON or Markdown (.md)"}),". JSON: use an"," ",h.jsx("code",{className:"bg-yellow-100 px-1 rounded",children:"events"})," array. Markdown: use ",h.jsx("code",{className:"bg-yellow-100 px-1 rounded",children:"## User"})," /"," ",h.jsx("code",{className:"bg-yellow-100 px-1 rounded",children:"## Assistant"})," sections; optional metadata block at end for total tokens, cost, and time."]}),h.jsxs("details",{className:"mt-2 text-sm text-yellow-800",children:[h.jsx("summary",{className:"cursor-pointer font-medium",children:"Accepted trace format (click to expand)"}),h.jsxs("p",{className:"mt-2 mb-1",children:["Use one of these shapes. For each event, we look for",h.jsx("strong",{children:" user text"})," under:"," ",h.jsx("code",{children:"prompt"}),", ",h.jsx("code",{children:"input"}),", ",h.jsx("code",{children:"content"}),","," ",h.jsx("code",{children:"user_input"}),", ",h.jsx("code",{children:"userMessage"}),", ",h.jsx("code",{children:"question"}),","," ","or ",h.jsx("code",{children:"messages[0].content"}),". We look for"," ",h.jsx("strong",{children:"assistant text"})," under:"," ",h.jsx("code",{children:"response"}),", ",h.jsx("code",{children:"output"}),", ",h.jsx("code",{children:"assistant_output"}),","," ",h.jsx("code",{children:"assistantMessage"}),", ",h.jsx("code",{children:"answer"}),", or"," ",h.jsx("code",{children:"messages[1].content"}),"."]}),h.jsx("pre",{className:"mt-2 p-2 bg-yellow-100 rounded text-xs overflow-x-auto",children:`{
  "events": [
    {
      "prompt": "Your question or prompt to the LLM",
      "response": "The LLM's reply"
    }
  ]
}`}),h.jsxs("p",{className:"mt-2 text-xs",children:["If your export uses different keys (e.g."," ",h.jsx("code",{children:"userMessage"})," / ",h.jsx("code",{children:"assistantMessage"})," or"," ",h.jsx("code",{children:"input"})," / ",h.jsx("code",{children:"output"}),"), they are also accepted. Ensure the JSON is valid and each event contains the actual conversation text so it appears in the evaluation."]})]})]})]}),h.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:h.jsxs("p",{className:"text-sm text-blue-800",children:[h.jsx("strong",{children:"Note:"})," Please include any additional context, notes about your approach, trade-offs made, or things you'd improve with more time in your repository's README file."]})}),h.jsxs("div",{className:"flex gap-3",children:[h.jsxs(Ee,{onClick:se,disabled:!y||!z||m||x!==null&&x<=0,className:"flex-1 bg-[#1E3A8A] hover:bg-[#152a66] text-white py-5 disabled:opacity-50",children:[h.jsx(k4,{className:"w-4 h-4 mr-2"}),m?"Submitting...":"Submit Assessment"]}),h.jsxs(Ee,{onClick:()=>E(!0),variant:"outline",className:"px-4 py-5 border-gray-300 text-gray-700 hover:bg-gray-50",children:[h.jsx(fi,{className:"w-4 h-4 mr-2"}),"Opt Out"]})]})]})]})]}),h.jsxs(_e.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-8 bg-blue-50 rounded-xl border border-blue-100 p-5 text-center",children:[h.jsx("h3",{className:"font-medium text-[#1E3A8A] mb-2",children:"Need Help?"}),h.jsx("p",{className:"text-sm text-gray-600",children:"If you encounter any technical issues, contact support@bridge.ai"})]})]}),P&&h.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:h.jsxs(_e.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-xl shadow-xl max-w-md w-full p-6",children:[h.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Opt Out of Assessment"}),h.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Are you sure you want to opt out of this assessment? Please let us know why (optional):"}),h.jsx(Is,{value:I,onChange:oe=>A(oe.target.value),placeholder:"E.g., Time constraints, technical issues, not interested...",className:"min-h-[100px] mb-4"}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx(Ee,{onClick:H,disabled:L,className:"flex-1 bg-red-600 hover:bg-red-700 text-white",children:L?"Opting Out...":"Confirm Opt Out"}),h.jsx(Ee,{onClick:()=>{E(!1),A("")},variant:"outline",disabled:L,children:"Cancel"})]})]})})]}):h.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#f8f9fb] to-[#eef1f8] flex items-center justify-center p-6",children:[h.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-2xl bg-white rounded-2xl shadow-xl overflow-hidden",children:[h.jsxs("div",{className:"bg-[#1E3A8A] px-8 py-6 text-center",children:[h.jsx("div",{className:"w-16 h-16 rounded-2xl bg-white flex items-center justify-center mx-auto mb-4 overflow-hidden",children:h.jsx("img",{src:$o,alt:"Bridge",className:"w-full h-full object-contain"})}),h.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:s.title}),h.jsx("p",{className:"text-blue-200",children:"Technical Assessment"}),((O=s.userId)==null?void 0:O.companyName)&&h.jsxs("p",{className:"text-blue-300 text-sm mt-2",children:["From ",s.userId.companyName]})]}),h.jsxs("div",{className:"p-8",children:[h.jsx("div",{className:"flex items-center justify-center gap-6 mb-8 py-4 bg-gray-50 rounded-xl",children:h.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[h.jsx(Ps,{className:"w-5 h-5 text-[#1E3A8A]"}),h.jsxs("span",{className:"text-sm",children:[h.jsx("strong",{children:re})," to complete"]})]})}),s.starterFilesGitHubLink&&h.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-xl",children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx($u,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-1",children:"Starter Files & Instructions"}),h.jsx("p",{className:"text-sm text-blue-800 mb-2",children:"Access the starter files and detailed instructions:"}),h.jsx("a",{href:s.starterFilesGitHubLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 hover:underline text-sm font-medium break-all",children:s.starterFilesGitHubLink})]})]})}),h.jsxs("div",{className:"flex items-start gap-3 p-4 bg-yellow-50 border border-yellow-200 rounded-xl mb-6",children:[h.jsx(tm,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),h.jsxs("div",{className:"text-sm text-yellow-800",children:[h.jsx("strong",{children:"Important:"})," Once you start, the timer begins. You'll have ",re," to complete and submit your work. Make sure you're ready before clicking Start."]})]}),h.jsxs(Ee,{onClick:K,disabled:d,className:"w-full bg-[#1E3A8A] hover:bg-[#152a66] text-white py-6 text-lg rounded-xl disabled:opacity-50 mb-3",children:[h.jsx(pI,{className:"w-5 h-5 mr-2"}),d?"Starting...":"Start Assessment"]}),h.jsx("button",{onClick:()=>E(!0),className:"w-full text-sm text-gray-500 hover:text-gray-700 py-2",children:"I cannot complete this assessment"})]})]}),P&&h.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:h.jsxs(_e.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-xl shadow-xl max-w-md w-full p-6",children:[h.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Opt Out of Assessment"}),h.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Are you sure you want to opt out of this assessment? Please let us know why (optional):"}),h.jsx(Is,{value:I,onChange:oe=>A(oe.target.value),placeholder:"E.g., Time constraints, technical issues, not interested...",className:"min-h-[100px] mb-4"}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx(Ee,{onClick:H,disabled:L,className:"flex-1 bg-red-600 hover:bg-red-700 text-white",children:L?"Opting Out...":"Confirm Opt Out"}),h.jsx(Ee,{onClick:()=>{E(!1),A("")},variant:"outline",disabled:L,children:"Cancel"})]})]})})]})}const EZ="modulepreload",PZ=function(t){return"/"+t},xP={},_Z=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let o=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=o(n.map(d=>{if(d=PZ(d),d in xP)return;xP[d]=!0;const f=d.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${m}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":EZ,f||(g.as="script"),g.crossOrigin="",g.href=d,u&&g.setAttribute("nonce",u),document.head.appendChild(g),f)return new Promise((y,C)=>{g.addEventListener("load",y),g.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};var wP={};function IZ(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}var NZ=Object.defineProperty,AZ=(t,e,n)=>e in t?NZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kP=(t,e,n)=>AZ(t,typeof e!="symbol"?e+"":e,n);let qn=class{constructor(){kP(this,"_locking"),kP(this,"_locks"),this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let e;const n=new Promise(i=>e=()=>{this._locks-=1,i()}),r=this._locking.then(()=>e);return this._locking=this._locking.then(()=>n),r}};function qt(t,e){if(!t)throw new Error(e)}const RZ=34028234663852886e22,MZ=-34028234663852886e22,DZ=4294967295,jZ=2147483647,OZ=-2147483648;function Qf(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>jZ||t<OZ)throw new Error("invalid int 32: "+t)}function J0(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>DZ||t<0)throw new Error("invalid uint 32: "+t)}function PD(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>RZ||t<MZ))throw new Error("invalid float 32: "+t)}const _D=Symbol("@bufbuild/protobuf/enum-type");function LZ(t){const e=t[_D];return qt(e,"missing enum type on enum object"),e}function ID(t,e,n,r){t[_D]=ND(e,n.map(i=>({no:i.no,name:i.name,localName:t[i.no]})))}function ND(t,e,n){const r=Object.create(null),i=Object.create(null),s=[];for(const o of e){const l=AD(o);s.push(l),r[o.name]=l,i[o.no]=l}return{typeName:t,values:s,findName(o){return r[o]},findNumber(o){return i[o]}}}function FZ(t,e,n){const r={};for(const i of e){const s=AD(i);r[s.localName]=s.no,r[s.no]=s.localName}return ID(r,t,e),r}function AD(t){return"localName"in t?t:Object.assign(Object.assign({},t),{localName:t.name})}class xw{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,n){const r=this.getType(),i=r.runtime.bin,s=i.makeReadOptions(n);return i.readMessage(this,s.readerFactory(e),e.byteLength,s),this}fromJson(e,n){const r=this.getType(),i=r.runtime.json,s=i.makeReadOptions(n);return i.readMessage(r,e,s,this),this}fromJsonString(e,n){let r;try{r=JSON.parse(e)}catch(i){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(i instanceof Error?i.message:String(i)))}return this.fromJson(r,n)}toBinary(e){const n=this.getType(),r=n.runtime.bin,i=r.makeWriteOptions(e),s=i.writerFactory();return r.writeMessage(this,s,i),s.finish()}toJson(e){const n=this.getType(),r=n.runtime.json,i=r.makeWriteOptions(e);return r.writeMessage(this,i)}toJsonString(e){var n;const r=this.toJson(e);return JSON.stringify(r,null,(n=e==null?void 0:e.prettySpaces)!==null&&n!==void 0?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function UZ(t,e,n,r){var i;const s=(i=r==null?void 0:r.localName)!==null&&i!==void 0?i:e.substring(e.lastIndexOf(".")+1),o={[s]:function(l){t.util.initFields(this),t.util.initPartial(l,this)}}[s];return Object.setPrototypeOf(o.prototype,new xw),Object.assign(o,{runtime:t,typeName:e,fields:t.util.newFieldList(n),fromBinary(l,u){return new o().fromBinary(l,u)},fromJson(l,u){return new o().fromJson(l,u)},fromJsonString(l,u){return new o().fromJsonString(l,u)},equals(l,u){return t.util.equals(o,l,u)}}),o}function BZ(){let t=0,e=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(t|=(i&127)<<r,(i&128)==0)return this.assertBounds(),[t,e]}let n=this.buf[this.pos++];if(t|=(n&15)<<28,e=(n&112)>>4,(n&128)==0)return this.assertBounds(),[t,e];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,(i&128)==0)return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function Iy(t,e,n){for(let s=0;s<28;s=s+7){const o=t>>>s,l=!(!(o>>>7)&&e==0),u=(l?o|128:o)&255;if(n.push(u),!l)return}const r=t>>>28&15|(e&7)<<4,i=e>>3!=0;if(n.push((i?r|128:r)&255),!!i){for(let s=3;s<31;s=s+7){const o=e>>>s,l=!!(o>>>7),u=(l?o|128:o)&255;if(n.push(u),!l)return}n.push(e>>>31&1)}}const Xf=4294967296;function SP(t){const e=t[0]==="-";e&&(t=t.slice(1));const n=1e6;let r=0,i=0;function s(o,l){const u=Number(t.slice(o,l));i*=n,r=r*n+u,r>=Xf&&(i=i+(r/Xf|0),r=r%Xf)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),e?MD(r,i):ww(r,i)}function VZ(t,e){let n=ww(t,e);const r=n.hi&2147483648;r&&(n=MD(n.lo,n.hi));const i=RD(n.lo,n.hi);return r?"-"+i:i}function RD(t,e){if({lo:t,hi:e}=zZ(t,e),e<=2097151)return String(Xf*e+t);const n=t&16777215,r=(t>>>24|e<<8)&16777215,i=e>>16&65535;let s=n+r*6777216+i*6710656,o=r+i*8147497,l=i*2;const u=1e7;return s>=u&&(o+=Math.floor(s/u),s%=u),o>=u&&(l+=Math.floor(o/u),o%=u),l.toString()+CP(o)+CP(s)}function zZ(t,e){return{lo:t>>>0,hi:e>>>0}}function ww(t,e){return{lo:t|0,hi:e|0}}function MD(t,e){return e=~e,t?t=~t+1:e+=1,ww(t,e)}const CP=t=>{const e=String(t);return"0000000".slice(e.length)+e};function TP(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let n=0;n<9;n++)e.push(t&127|128),t=t>>7;e.push(1)}}function $Z(){let t=this.buf[this.pos++],e=t&127;if((t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,(t&128)==0)return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let n=5;(t&128)!==0&&n<10;n++)t=this.buf[this.pos++];if((t&128)!=0)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function WZ(){const t=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"&&(typeof process!="object"||typeof wP!="object"||wP.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),s=BigInt("9223372036854775807"),o=BigInt("0"),l=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(u){const d=typeof u=="bigint"?u:BigInt(u);if(d>s||d<i)throw new Error("int64 invalid: ".concat(u));return d},uParse(u){const d=typeof u=="bigint"?u:BigInt(u);if(d>l||d<o)throw new Error("uint64 invalid: ".concat(u));return d},enc(u){return t.setBigInt64(0,this.parse(u),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},uEnc(u){return t.setBigInt64(0,this.uParse(u),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},dec(u,d){return t.setInt32(0,u,!0),t.setInt32(4,d,!0),t.getBigInt64(0,!0)},uDec(u,d){return t.setInt32(0,u,!0),t.setInt32(4,d,!0),t.getBigUint64(0,!0)}}}const n=i=>qt(/^-?[0-9]+$/.test(i),"int64 invalid: ".concat(i)),r=i=>qt(/^[0-9]+$/.test(i),"uint64 invalid: ".concat(i));return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),n(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),r(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),n(i),SP(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),r(i),SP(i)},dec(i,s){return VZ(i,s)},uDec(i,s){return RD(i,s)}}}const Lt=WZ();var he;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(he||(he={}));var Wo;(function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING"})(Wo||(Wo={}));function fo(t,e,n){if(e===n)return!0;if(t==he.BYTES){if(!(e instanceof Uint8Array)||!(n instanceof Uint8Array)||e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==n[r])return!1;return!0}switch(t){case he.UINT64:case he.FIXED64:case he.INT64:case he.SFIXED64:case he.SINT64:return e==n}return!1}function Sc(t,e){switch(t){case he.BOOL:return!1;case he.UINT64:case he.FIXED64:case he.INT64:case he.SFIXED64:case he.SINT64:return e==0?Lt.zero:"0";case he.DOUBLE:case he.FLOAT:return 0;case he.BYTES:return new Uint8Array(0);case he.STRING:return"";default:return 0}}function DD(t,e){switch(t){case he.BOOL:return e===!1;case he.STRING:return e==="";case he.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var Xt;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(Xt||(Xt={}));class HZ{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let n=new Uint8Array(e),r=0;for(let i=0;i<this.chunks.length;i++)n.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(J0(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return Qf(e),TP(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let n=this.textEncoder.encode(e);return this.uint32(n.byteLength),this.raw(n)}float(e){PD(e);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}fixed32(e){J0(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}sfixed32(e){Qf(e);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}sint32(e){return Qf(e),e=(e<<1^e>>31)>>>0,TP(e,this.buf),this}sfixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),i=Lt.enc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}fixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),i=Lt.uEnc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}int64(e){let n=Lt.enc(e);return Iy(n.lo,n.hi,this.buf),this}sint64(e){let n=Lt.enc(e),r=n.hi>>31,i=n.lo<<1^r,s=(n.hi<<1|n.lo>>>31)^r;return Iy(i,s,this.buf),this}uint64(e){let n=Lt.uEnc(e);return Iy(n.lo,n.hi,this.buf),this}}class qZ{constructor(e,n){this.varint64=BZ,this.uint32=$Z,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=n??new TextDecoder}tag(){let e=this.uint32(),n=e>>>3,r=e&7;if(n<=0||r<0||r>5)throw new Error("illegal tag: field no "+n+" wire type "+r);return[n,r]}skip(e,n){let r=this.pos;switch(e){case Xt.Varint:for(;this.buf[this.pos++]&128;);break;case Xt.Bit64:this.pos+=4;case Xt.Bit32:this.pos+=4;break;case Xt.LengthDelimited:let i=this.uint32();this.pos+=i;break;case Xt.StartGroup:for(;;){const[s,o]=this.tag();if(o===Xt.EndGroup){if(n!==void 0&&s!==n)throw new Error("invalid end group tag");break}this.skip(o,s)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return Lt.dec(...this.varint64())}uint64(){return Lt.uDec(...this.varint64())}sint64(){let[e,n]=this.varint64(),r=-(e&1);return e=(e>>>1|(n&1)<<31)^r,n=n>>>1^r,Lt.dec(e,n)}bool(){let[e,n]=this.varint64();return e!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return Lt.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return Lt.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}string(){return this.textDecoder.decode(this.bytes())}}function GZ(t,e,n,r){let i;return{typeName:e,extendee:n,get field(){if(!i){const s=typeof r=="function"?r():r;s.name=e.split(".").pop(),s.jsonName="[".concat(e,"]"),i=t.util.newFieldList([s]).list()[0]}return i},runtime:t}}function jD(t){const e=t.field.localName,n=Object.create(null);return n[e]=KZ(t),[n,()=>n[e]]}function KZ(t){const e=t.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return Sc(e.T,e.L);case"message":const n=e.T,r=new n;return n.fieldWrapper?n.fieldWrapper.unwrapField(r):r;case"map":throw"map fields are not allowed to be extensions"}}function YZ(t,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let n=t.length-1;n>=0;--n)if(t[n].no==e.no)return[t[n]];return[]}return t.filter(n=>n.no===e.no)}let gs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Nm=[];for(let t=0;t<gs.length;t++)Nm[gs[t].charCodeAt(0)]=t;Nm[45]=gs.indexOf("+");Nm[95]=gs.indexOf("/");const OD={dec(t){let e=t.length*3/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let n=new Uint8Array(e),r=0,i=0,s,o=0;for(let l=0;l<t.length;l++){if(s=Nm[t.charCodeAt(l)],s===void 0)switch(t[l]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:o=s,i=1;break;case 1:n[r++]=o<<2|(s&48)>>4,o=s,i=2;break;case 2:n[r++]=(o&15)<<4|(s&60)>>2,o=s,i=3;break;case 3:n[r++]=(o&3)<<6|s,i=0;break}}if(i==1)throw Error("invalid base64 string.");return n.subarray(0,r)},enc(t){let e="",n=0,r,i=0;for(let s=0;s<t.length;s++)switch(r=t[s],n){case 0:e+=gs[r>>2],i=(r&3)<<4,n=1;break;case 1:e+=gs[i|r>>4],i=(r&15)<<2,n=2;break;case 2:e+=gs[i|r>>6],e+=gs[r&63],n=0;break}return n&&(e+=gs[i],e+="=",n==1&&(e+="=")),e}};function JZ(t,e,n){FD(e,t);const r=e.runtime.bin.makeReadOptions(n),i=YZ(t.getType().runtime.bin.listUnknownFields(t),e.field),[s,o]=jD(e);for(const l of i)e.runtime.bin.readField(s,r.readerFactory(l.data),e.field,l.wireType,r);return o()}function QZ(t,e,n,r){FD(e,t);const i=e.runtime.bin.makeReadOptions(r),s=e.runtime.bin.makeWriteOptions(r);if(LD(t,e)){const d=t.getType().runtime.bin.listUnknownFields(t).filter(f=>f.no!=e.field.no);t.getType().runtime.bin.discardUnknownFields(t);for(const f of d)t.getType().runtime.bin.onUnknownField(t,f.no,f.wireType,f.data)}const o=s.writerFactory();let l=e.field;!l.opt&&!l.repeated&&(l.kind=="enum"||l.kind=="scalar")&&(l=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(l,n,o,s);const u=i.readerFactory(o.finish());for(;u.pos<u.len;){const[d,f]=u.tag(),m=u.skip(f,d);t.getType().runtime.bin.onUnknownField(t,d,f,m)}}function LD(t,e){const n=t.getType();return e.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(t).find(r=>r.no==e.field.no)}function FD(t,e){qt(t.extendee.typeName==e.getType().typeName,"extension ".concat(t.typeName," can only be applied to message ").concat(t.extendee.typeName))}function UD(t,e){const n=t.localName;if(t.repeated)return e[n].length>0;if(t.oneof)return e[t.oneof.localName].case===n;switch(t.kind){case"enum":case"scalar":return t.opt||t.req?e[n]!==void 0:t.kind=="enum"?e[n]!==t.T.values[0].no:!DD(t.T,e[n]);case"message":return e[n]!==void 0;case"map":return Object.keys(e[n]).length>0}}function EP(t,e){const n=t.localName,r=!t.opt&&!t.req;if(t.repeated)e[n]=[];else if(t.oneof)e[t.oneof.localName]={case:void 0};else switch(t.kind){case"map":e[n]={};break;case"enum":e[n]=r?t.T.values[0].no:void 0;break;case"scalar":e[n]=r?Sc(t.T,t.L):void 0;break;case"message":e[n]=void 0;break}}function vs(t,e){if(t===null||typeof t!="object"||!Object.getOwnPropertyNames(xw.prototype).every(r=>r in t&&typeof t[r]=="function"))return!1;const n=t.getType();return n===null||typeof n!="function"||!("typeName"in n)||typeof n.typeName!="string"?!1:e===void 0?!0:n.typeName==e.typeName}function BD(t,e){return vs(e)||!t.fieldWrapper?e:t.fieldWrapper.wrapField(e)}he.DOUBLE,he.FLOAT,he.INT64,he.UINT64,he.INT32,he.UINT32,he.BOOL,he.STRING,he.BYTES;const PP={ignoreUnknownFields:!1},_P={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function XZ(t){return t?Object.assign(Object.assign({},PP),t):PP}function ZZ(t){return t?Object.assign(Object.assign({},_P),t):_P}const jp=Symbol(),Zf=Symbol();function eee(){return{makeReadOptions:XZ,makeWriteOptions:ZZ,readMessage(t,e,n,r){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error("cannot decode message ".concat(t.typeName," from JSON: ").concat(Ai(e)));r=r??new t;const i=new Map,s=n.typeRegistry;for(const[o,l]of Object.entries(e)){const u=t.fields.findJsonName(o);if(u){if(u.oneof){if(l===null&&u.kind=="scalar")continue;const d=i.get(u.oneof);if(d!==void 0)throw new Error("cannot decode message ".concat(t.typeName,' from JSON: multiple keys for oneof "').concat(u.oneof.name,'" present: "').concat(d,'", "').concat(o,'"'));i.set(u.oneof,o)}IP(r,l,u,n,t)}else{let d=!1;if(s!=null&&s.findExtension&&o.startsWith("[")&&o.endsWith("]")){const f=s.findExtension(o.substring(1,o.length-1));if(f&&f.extendee.typeName==t.typeName){d=!0;const[m,g]=jD(f);IP(m,l,f.field,n,f),QZ(r,f,g(),n)}}if(!d&&!n.ignoreUnknownFields)throw new Error("cannot decode message ".concat(t.typeName,' from JSON: key "').concat(o,'" is unknown'))}}return r},writeMessage(t,e){const n=t.getType(),r={};let i;try{for(i of n.fields.byNumber()){if(!UD(i,t)){if(i.req)throw"required field not set";if(!e.emitDefaultValues||!nee(i))continue}const o=i.oneof?t[i.oneof.localName].value:t[i.localName],l=NP(i,o,e);l!==void 0&&(r[e.useProtoFieldName?i.name:i.jsonName]=l)}const s=e.typeRegistry;if(s!=null&&s.findExtensionFor)for(const o of n.runtime.bin.listUnknownFields(t)){const l=s.findExtensionFor(n.typeName,o.no);if(l&&LD(t,l)){const u=JZ(t,l,e),d=NP(l.field,u,e);d!==void 0&&(r[l.field.jsonName]=d)}}}catch(s){const o=i?"cannot encode field ".concat(n.typeName,".").concat(i.name," to JSON"):"cannot encode message ".concat(n.typeName," to JSON"),l=s instanceof Error?s.message:String(s);throw new Error(o+(l.length>0?": ".concat(l):""))}return r},readScalar(t,e,n){return rd(t,e,n??Wo.BIGINT,!0)},writeScalar(t,e,n){if(e!==void 0&&(n||DD(t,e)))return ep(t,e)},debug:Ai}}function Ai(t){if(t===null)return"null";switch(typeof t){case"object":return Array.isArray(t)?"array":"object";case"string":return t.length>100?"string":'"'.concat(t.split('"').join('\\"'),'"');default:return String(t)}}function IP(t,e,n,r,i){let s=n.localName;if(n.repeated){if(qt(n.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Ai(e)));const o=t[s];for(const l of e){if(l===null)throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Ai(l)));switch(n.kind){case"message":o.push(n.T.fromJson(l,r));break;case"enum":const u=Ny(n.T,l,r.ignoreUnknownFields,!0);u!==Zf&&o.push(u);break;case"scalar":try{o.push(rd(n.T,l,n.L,!0))}catch(d){let f="cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Ai(l));throw d instanceof Error&&d.message.length>0&&(f+=": ".concat(d.message)),new Error(f)}break}}}else if(n.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Ai(e)));const o=t[s];for(const[l,u]of Object.entries(e)){if(u===null)throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: map value null"));let d;try{d=tee(n.K,l)}catch(f){let m="cannot decode map key for field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Ai(e));throw f instanceof Error&&f.message.length>0&&(m+=": ".concat(f.message)),new Error(m)}switch(n.V.kind){case"message":o[d]=n.V.T.fromJson(u,r);break;case"enum":const f=Ny(n.V.T,u,r.ignoreUnknownFields,!0);f!==Zf&&(o[d]=f);break;case"scalar":try{o[d]=rd(n.V.T,u,Wo.BIGINT,!0)}catch(m){let g="cannot decode map value for field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Ai(e));throw m instanceof Error&&m.message.length>0&&(g+=": ".concat(m.message)),new Error(g)}break}}}else switch(n.oneof&&(t=t[n.oneof.localName]={case:s},s="value"),n.kind){case"message":const o=n.T;if(e===null&&o.typeName!="google.protobuf.Value")return;let l=t[s];vs(l)?l.fromJson(e,r):(t[s]=l=o.fromJson(e,r),o.fieldWrapper&&!n.oneof&&(t[s]=o.fieldWrapper.unwrapField(l)));break;case"enum":const u=Ny(n.T,e,r.ignoreUnknownFields,!1);switch(u){case jp:EP(n,t);break;case Zf:break;default:t[s]=u;break}break;case"scalar":try{const d=rd(n.T,e,n.L,!1);switch(d){case jp:EP(n,t);break;default:t[s]=d;break}}catch(d){let f="cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Ai(e));throw d instanceof Error&&d.message.length>0&&(f+=": ".concat(d.message)),new Error(f)}break}}function tee(t,e){if(t===he.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return rd(t,e,Wo.BIGINT,!0).toString()}function rd(t,e,n,r){if(e===null)return r?Sc(t,n):jp;switch(t){case he.DOUBLE:case he.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const i=Number(e);if(Number.isNaN(i)||!Number.isFinite(i))break;return t==he.FLOAT&&PD(i),i;case he.INT32:case he.FIXED32:case he.SFIXED32:case he.SINT32:case he.UINT32:let s;if(typeof e=="number"?s=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(s=Number(e)),s===void 0)break;return t==he.UINT32||t==he.FIXED32?J0(s):Qf(s),s;case he.INT64:case he.SFIXED64:case he.SINT64:if(typeof e!="number"&&typeof e!="string")break;const o=Lt.parse(e);return n?o.toString():o;case he.FIXED64:case he.UINT64:if(typeof e!="number"&&typeof e!="string")break;const l=Lt.uParse(e);return n?l.toString():l;case he.BOOL:if(typeof e!="boolean")break;return e;case he.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case he.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return OD.dec(e)}throw new Error}function Ny(t,e,n,r){if(e===null)return t.typeName=="google.protobuf.NullValue"?0:r?t.values[0].no:jp;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const i=t.findName(e);if(i!==void 0)return i.no;if(n)return Zf;break}throw new Error("cannot decode enum ".concat(t.typeName," from JSON: ").concat(Ai(e)))}function nee(t){return t.repeated||t.kind=="map"?!0:!(t.oneof||t.kind=="message"||t.opt||t.req)}function NP(t,e,n){if(t.kind=="map"){qt(typeof e=="object"&&e!=null);const r={},i=Object.entries(e);switch(t.V.kind){case"scalar":for(const[o,l]of i)r[o.toString()]=ep(t.V.T,l);break;case"message":for(const[o,l]of i)r[o.toString()]=l.toJson(n);break;case"enum":const s=t.V.T;for(const[o,l]of i)r[o.toString()]=Ay(s,l,n.enumAsInteger);break}return n.emitDefaultValues||i.length>0?r:void 0}if(t.repeated){qt(Array.isArray(e));const r=[];switch(t.kind){case"scalar":for(let i=0;i<e.length;i++)r.push(ep(t.T,e[i]));break;case"enum":for(let i=0;i<e.length;i++)r.push(Ay(t.T,e[i],n.enumAsInteger));break;case"message":for(let i=0;i<e.length;i++)r.push(e[i].toJson(n));break}return n.emitDefaultValues||r.length>0?r:void 0}switch(t.kind){case"scalar":return ep(t.T,e);case"enum":return Ay(t.T,e,n.enumAsInteger);case"message":return BD(t.T,e).toJson(n)}}function Ay(t,e,n){var r;if(qt(typeof e=="number"),t.typeName=="google.protobuf.NullValue")return null;if(n)return e;const i=t.findNumber(e);return(r=i==null?void 0:i.name)!==null&&r!==void 0?r:e}function ep(t,e){switch(t){case he.INT32:case he.SFIXED32:case he.SINT32:case he.FIXED32:case he.UINT32:return qt(typeof e=="number"),e;case he.FLOAT:case he.DOUBLE:return qt(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case he.STRING:return qt(typeof e=="string"),e;case he.BOOL:return qt(typeof e=="boolean"),e;case he.UINT64:case he.FIXED64:case he.INT64:case he.SFIXED64:case he.SINT64:return qt(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case he.BYTES:return qt(e instanceof Uint8Array),OD.enc(e)}}const Rl=Symbol("@bufbuild/protobuf/unknown-fields"),AP={readUnknownFields:!0,readerFactory:t=>new qZ(t)},RP={writeUnknownFields:!0,writerFactory:()=>new HZ};function ree(t){return t?Object.assign(Object.assign({},AP),t):AP}function iee(t){return t?Object.assign(Object.assign({},RP),t):RP}function see(){return{makeReadOptions:ree,makeWriteOptions:iee,listUnknownFields(t){var e;return(e=t[Rl])!==null&&e!==void 0?e:[]},discardUnknownFields(t){delete t[Rl]},writeUnknownFields(t,e){const r=t[Rl];if(r)for(const i of r)e.tag(i.no,i.wireType).raw(i.data)},onUnknownField(t,e,n,r){const i=t;Array.isArray(i[Rl])||(i[Rl]=[]),i[Rl].push({no:e,wireType:n,data:r})},readMessage(t,e,n,r,i){const s=t.getType(),o=i?e.len:e.pos+n;let l,u;for(;e.pos<o&&([l,u]=e.tag(),!(i===!0&&u==Xt.EndGroup));){const d=s.fields.find(l);if(!d){const f=e.skip(u,l);r.readUnknownFields&&this.onUnknownField(t,l,u,f);continue}MP(t,e,d,u,r)}if(i&&(u!=Xt.EndGroup||l!==n))throw new Error("invalid end group tag")},readField:MP,writeMessage(t,e,n){const r=t.getType();for(const i of r.fields.byNumber()){if(!UD(i,t)){if(i.req)throw new Error("cannot encode field ".concat(r.typeName,".").concat(i.name," to binary: required field not set"));continue}const s=i.oneof?t[i.oneof.localName].value:t[i.localName];DP(i,s,e,n)}return n.writeUnknownFields&&this.writeUnknownFields(t,e),e},writeField(t,e,n,r){e!==void 0&&DP(t,e,n,r)}}}function MP(t,e,n,r,i){let{repeated:s,localName:o}=n;switch(n.oneof&&(t=t[n.oneof.localName],t.case!=o&&delete t.value,t.case=o,o="value"),n.kind){case"scalar":case"enum":const l=n.kind=="enum"?he.INT32:n.T;let u=Op;if(n.kind=="scalar"&&n.L>0&&(u=aee),s){let g=t[o];if(r==Xt.LengthDelimited&&l!=he.STRING&&l!=he.BYTES){let C=e.uint32()+e.pos;for(;e.pos<C;)g.push(u(e,l))}else g.push(u(e,l))}else t[o]=u(e,l);break;case"message":const d=n.T;s?t[o].push(tp(e,new d,i,n)):vs(t[o])?tp(e,t[o],i,n):(t[o]=tp(e,new d,i,n),d.fieldWrapper&&!n.oneof&&!n.repeated&&(t[o]=d.fieldWrapper.unwrapField(t[o])));break;case"map":let[f,m]=oee(n,e,i);t[o][f]=m;break}}function tp(t,e,n,r){const i=e.getType().runtime.bin,s=r==null?void 0:r.delimited;return i.readMessage(e,t,s?r.no:t.uint32(),n,s),e}function oee(t,e,n){const r=e.uint32(),i=e.pos+r;let s,o;for(;e.pos<i;){const[l]=e.tag();switch(l){case 1:s=Op(e,t.K);break;case 2:switch(t.V.kind){case"scalar":o=Op(e,t.V.T);break;case"enum":o=e.int32();break;case"message":o=tp(e,new t.V.T,n,void 0);break}break}}if(s===void 0&&(s=Sc(t.K,Wo.BIGINT)),typeof s!="string"&&typeof s!="number"&&(s=s.toString()),o===void 0)switch(t.V.kind){case"scalar":o=Sc(t.V.T,Wo.BIGINT);break;case"enum":o=t.V.T.values[0].no;break;case"message":o=new t.V.T;break}return[s,o]}function aee(t,e){const n=Op(t,e);return typeof n=="bigint"?n.toString():n}function Op(t,e){switch(e){case he.STRING:return t.string();case he.BOOL:return t.bool();case he.DOUBLE:return t.double();case he.FLOAT:return t.float();case he.INT32:return t.int32();case he.INT64:return t.int64();case he.UINT64:return t.uint64();case he.FIXED64:return t.fixed64();case he.BYTES:return t.bytes();case he.FIXED32:return t.fixed32();case he.SFIXED32:return t.sfixed32();case he.SFIXED64:return t.sfixed64();case he.SINT64:return t.sint64();case he.UINT32:return t.uint32();case he.SINT32:return t.sint32()}}function DP(t,e,n,r){qt(e!==void 0);const i=t.repeated;switch(t.kind){case"scalar":case"enum":let s=t.kind=="enum"?he.INT32:t.T;if(i)if(qt(Array.isArray(e)),t.packed)cee(n,s,t.no,e);else for(const o of e)id(n,s,t.no,o);else id(n,s,t.no,e);break;case"message":if(i){qt(Array.isArray(e));for(const o of e)jP(n,r,t,o)}else jP(n,r,t,e);break;case"map":qt(typeof e=="object"&&e!=null);for(const[o,l]of Object.entries(e))lee(n,r,t,o,l);break}}function lee(t,e,n,r,i){t.tag(n.no,Xt.LengthDelimited),t.fork();let s=r;switch(n.K){case he.INT32:case he.FIXED32:case he.UINT32:case he.SFIXED32:case he.SINT32:s=Number.parseInt(r);break;case he.BOOL:qt(r=="true"||r=="false"),s=r=="true";break}switch(id(t,n.K,1,s),n.V.kind){case"scalar":id(t,n.V.T,2,i);break;case"enum":id(t,he.INT32,2,i);break;case"message":qt(i!==void 0),t.tag(2,Xt.LengthDelimited).bytes(i.toBinary(e));break}t.join()}function jP(t,e,n,r){const i=BD(n.T,r);n.delimited?t.tag(n.no,Xt.StartGroup).raw(i.toBinary(e)).tag(n.no,Xt.EndGroup):t.tag(n.no,Xt.LengthDelimited).bytes(i.toBinary(e))}function id(t,e,n,r){qt(r!==void 0);let[i,s]=VD(e);t.tag(n,i)[s](r)}function cee(t,e,n,r){if(!r.length)return;t.tag(n,Xt.LengthDelimited).fork();let[,i]=VD(e);for(let s=0;s<r.length;s++)t[i](r[s]);t.join()}function VD(t){let e=Xt.Varint;switch(t){case he.BYTES:case he.STRING:e=Xt.LengthDelimited;break;case he.DOUBLE:case he.FIXED64:case he.SFIXED64:e=Xt.Bit64;break;case he.FIXED32:case he.SFIXED32:case he.FLOAT:e=Xt.Bit32;break}const n=he[t].toLowerCase();return[e,n]}function uee(){return{setEnumType:ID,initPartial(t,e){if(t===void 0)return;const n=e.getType();for(const r of n.fields.byMember()){const i=r.localName,s=e,o=t;if(o[i]!=null)switch(r.kind){case"oneof":const l=o[i].case;if(l===void 0)continue;const u=r.findField(l);let d=o[i].value;u&&u.kind=="message"&&!vs(d,u.T)?d=new u.T(d):u&&u.kind==="scalar"&&u.T===he.BYTES&&(d=Pu(d)),s[i]={case:l,value:d};break;case"scalar":case"enum":let f=o[i];r.T===he.BYTES&&(f=r.repeated?f.map(Pu):Pu(f)),s[i]=f;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===he.BYTES)for(const[y,C]of Object.entries(o[i]))s[i][y]=Pu(C);else Object.assign(s[i],o[i]);break;case"message":const g=r.V.T;for(const y of Object.keys(o[i])){let C=o[i][y];g.fieldWrapper||(C=new g(C)),s[i][y]=C}break}break;case"message":const m=r.T;if(r.repeated)s[i]=o[i].map(g=>vs(g,m)?g:new m(g));else{const g=o[i];m.fieldWrapper?m.typeName==="google.protobuf.BytesValue"?s[i]=Pu(g):s[i]=g:s[i]=vs(g,m)?g:new m(g)}break}}},equals(t,e,n){return e===n?!0:!e||!n?!1:t.fields.byMember().every(r=>{const i=e[r.localName],s=n[r.localName];if(r.repeated){if(i.length!==s.length)return!1;switch(r.kind){case"message":return i.every((o,l)=>r.T.equals(o,s[l]));case"scalar":return i.every((o,l)=>fo(r.T,o,s[l]));case"enum":return i.every((o,l)=>fo(he.INT32,o,s[l]))}throw new Error("repeated cannot contain ".concat(r.kind))}switch(r.kind){case"message":let o=i,l=s;return r.T.fieldWrapper&&(o!==void 0&&!vs(o)&&(o=r.T.fieldWrapper.wrapField(o)),l!==void 0&&!vs(l)&&(l=r.T.fieldWrapper.wrapField(l))),r.T.equals(o,l);case"enum":return fo(he.INT32,i,s);case"scalar":return fo(r.T,i,s);case"oneof":if(i.case!==s.case)return!1;const u=r.findField(i.case);if(u===void 0)return!0;switch(u.kind){case"message":return u.T.equals(i.value,s.value);case"enum":return fo(he.INT32,i.value,s.value);case"scalar":return fo(u.T,i.value,s.value)}throw new Error("oneof cannot contain ".concat(u.kind));case"map":const d=Object.keys(i).concat(Object.keys(s));switch(r.V.kind){case"message":const f=r.V.T;return d.every(g=>f.equals(i[g],s[g]));case"enum":return d.every(g=>fo(he.INT32,i[g],s[g]));case"scalar":const m=r.V.T;return d.every(g=>fo(m,i[g],s[g]))}break}})},clone(t){const e=t.getType(),n=new e,r=n;for(const i of e.fields.byMember()){const s=t[i.localName];let o;if(i.repeated)o=s.map(Rf);else if(i.kind=="map"){o=r[i.localName];for(const[l,u]of Object.entries(s))o[l]=Rf(u)}else i.kind=="oneof"?o=i.findField(s.case)?{case:s.case,value:Rf(s.value)}:{case:void 0}:o=Rf(s);r[i.localName]=o}for(const i of e.runtime.bin.listUnknownFields(t))e.runtime.bin.onUnknownField(r,i.no,i.wireType,i.data);return n}}}function Rf(t){if(t===void 0)return t;if(vs(t))return t.clone();if(t instanceof Uint8Array){const e=new Uint8Array(t.byteLength);return e.set(t),e}return t}function Pu(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function dee(t,e,n){return{syntax:t,json:eee(),bin:see(),util:Object.assign(Object.assign({},uee()),{newFieldList:e,initFields:n}),makeMessageType(r,i,s){return UZ(this,r,i,s)},makeEnum:FZ,makeEnumType:ND,getEnumType:LZ,makeExtension(r,i,s){return GZ(this,r,i,s)}}}class hee{constructor(e,n){this._fields=e,this._normalizer=n}findJsonName(e){if(!this.jsonNames){const n={};for(const r of this.list())n[r.jsonName]=n[r.name]=r;this.jsonNames=n}return this.jsonNames[e]}find(e){if(!this.numbers){const n={};for(const r of this.list())n[r.no]=r;this.numbers=n}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,n)=>e.no-n.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let n;for(const r of this.list())r.oneof?r.oneof!==n&&(n=r.oneof,e.push(n)):e.push(r)}return this.members}}function zD(t,e){const n=$D(t);return e?n:yee(vee(n))}function fee(t){return zD(t,!1)}const pee=$D;function $D(t){let e=!1;const n=[];for(let r=0;r<t.length;r++){let i=t.charAt(r);switch(i){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(i),e=!1;break;default:e&&(e=!1,i=i.toUpperCase()),n.push(i);break}}return n.join("")}const mee=new Set(["constructor","toString","toJSON","valueOf"]),gee=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),WD=t=>"".concat(t,"$"),vee=t=>gee.has(t)?WD(t):t,yee=t=>mee.has(t)?WD(t):t;class bee{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=fee(e)}addField(e){qt(e.oneof===this,"field ".concat(e.name," not one of ").concat(this.name)),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[e]}}function xee(t,e){var n,r,i,s,o,l;const u=[];let d;for(const f of typeof t=="function"?t():t){const m=f;if(m.localName=zD(f.name,f.oneof!==void 0),m.jsonName=(n=f.jsonName)!==null&&n!==void 0?n:pee(f.name),m.repeated=(r=f.repeated)!==null&&r!==void 0?r:!1,f.kind=="scalar"&&(m.L=(i=f.L)!==null&&i!==void 0?i:Wo.BIGINT),m.delimited=(s=f.delimited)!==null&&s!==void 0?s:!1,m.req=(o=f.req)!==null&&o!==void 0?o:!1,m.opt=(l=f.opt)!==null&&l!==void 0?l:!1,f.packed===void 0&&(m.packed=f.kind=="enum"||f.kind=="scalar"&&f.T!=he.BYTES&&f.T!=he.STRING),f.oneof!==void 0){const g=typeof f.oneof=="string"?f.oneof:f.oneof.name;(!d||d.name!=g)&&(d=new bee(g)),m.oneof=d,d.addField(m)}u.push(m)}return u}const Z=dee("proto3",t=>new hee(t,e=>xee(e)),t=>{for(const e of t.getType().fields.byMember()){if(e.opt)continue;const n=e.localName,r=t;if(e.repeated){r[n]=[];continue}switch(e.kind){case"oneof":r[n]={case:void 0};break;case"enum":r[n]=0;break;case"map":r[n]={};break;case"scalar":r[n]=Sc(e.T,e.L);break}}});class ir extends xw{constructor(e){super(),this.seconds=Lt.zero,this.nanos=0,Z.util.initPartial(e,this)}fromJson(e,n){if(typeof e!="string")throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(Z.json.debug(e)));const r=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=Lt.parse(i/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(e){const n=Number(this.seconds)*1e3;if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const i=(this.nanos+1e9).toString().substring(1);i.substring(3)==="000000"?r="."+i.substring(0,3)+"Z":i.substring(6)==="000"?r="."+i.substring(0,6)+"Z":r="."+i+"Z"}return new Date(n).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return ir.fromDate(new Date)}static fromDate(e){const n=e.getTime();return new ir({seconds:Lt.parse(Math.floor(n/1e3)),nanos:n%1e3*1e6})}static fromBinary(e,n){return new ir().fromBinary(e,n)}static fromJson(e,n){return new ir().fromJson(e,n)}static fromJsonString(e,n){return new ir().fromJsonString(e,n)}static equals(e,n){return Z.util.equals(ir,e,n)}}ir.runtime=Z;ir.typeName="google.protobuf.Timestamp";ir.fields=Z.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);const wee=Z.makeMessageType("livekit.MetricsBatch",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:ir},{no:3,name:"str_data",kind:"scalar",T:9,repeated:!0},{no:4,name:"time_series",kind:"message",T:kee,repeated:!0},{no:5,name:"events",kind:"message",T:Cee,repeated:!0}]),kee=Z.makeMessageType("livekit.TimeSeriesMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"samples",kind:"message",T:See,repeated:!0},{no:5,name:"rid",kind:"scalar",T:13}]),See=Z.makeMessageType("livekit.MetricSample",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:ir},{no:3,name:"value",kind:"scalar",T:2}]),Cee=Z.makeMessageType("livekit.EventMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"start_timestamp_ms",kind:"scalar",T:3},{no:5,name:"end_timestamp_ms",kind:"scalar",T:3,opt:!0},{no:6,name:"normalized_start_timestamp",kind:"message",T:ir},{no:7,name:"normalized_end_timestamp",kind:"message",T:ir,opt:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"rid",kind:"scalar",T:13}]),HD=Z.makeEnum("livekit.BackupCodecPolicy",[{no:0,name:"PREFER_REGRESSION"},{no:1,name:"SIMULCAST"},{no:2,name:"REGRESSION"}]),li=Z.makeEnum("livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]),nn=Z.makeEnum("livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]),kw=Z.makeEnum("livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]),Fu=Z.makeEnum("livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]),wd=Z.makeEnum("livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]),hi=Z.makeEnum("livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"},{no:8,name:"MIGRATION"},{no:9,name:"SIGNAL_CLOSE"},{no:10,name:"ROOM_CLOSED"},{no:11,name:"USER_UNAVAILABLE"},{no:12,name:"USER_REJECTED"},{no:13,name:"SIP_TRUNK_FAILURE"},{no:14,name:"CONNECTION_TIMEOUT"},{no:15,name:"MEDIA_FAILURE"}]),wa=Z.makeEnum("livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]),Tee=Z.makeEnum("livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]),yn=Z.makeEnum("livekit.AudioTrackFeature",[{no:0,name:"TF_STEREO"},{no:1,name:"TF_NO_DTX"},{no:2,name:"TF_AUTO_GAIN_CONTROL"},{no:3,name:"TF_ECHO_CANCELLATION"},{no:4,name:"TF_NOISE_SUPPRESSION"},{no:5,name:"TF_ENHANCED_NOISE_CANCELLATION"},{no:6,name:"TF_PRECONNECT_BUFFER"}]),Am=Z.makeMessageType("livekit.Room",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:14,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:15,name:"creation_time_ms",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:Lp,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8},{no:13,name:"version",kind:"message",T:ij}]),Lp=Z.makeMessageType("livekit.Codec",()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]),Eee=Z.makeMessageType("livekit.ParticipantPermission",()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:Z.getEnumType(nn),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8},{no:12,name:"can_subscribe_metrics",kind:"scalar",T:8}]),Ua=Z.makeMessageType("livekit.ParticipantInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:Z.getEnumType(Zl)},{no:4,name:"tracks",kind:"message",T:zl,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:17,name:"joined_at_ms",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:Eee},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8},{no:14,name:"kind",kind:"enum",T:Z.getEnumType(kd)},{no:15,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:16,name:"disconnect_reason",kind:"enum",T:Z.getEnumType(hi)},{no:18,name:"kind_details",kind:"enum",T:Z.getEnumType(Pee),repeated:!0}]),Zl=Z.makeEnum("livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]),kd=Z.makeEnum("livekit.ParticipantInfo.Kind",[{no:0,name:"STANDARD"},{no:1,name:"INGRESS"},{no:2,name:"EGRESS"},{no:3,name:"SIP"},{no:4,name:"AGENT"},{no:7,name:"CONNECTOR"}]),Pee=Z.makeEnum("livekit.ParticipantInfo.KindDetail",[{no:0,name:"CLOUD_AGENT"},{no:1,name:"FORWARDED"}]),hn=Z.makeEnum("livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]),_ee=Z.makeMessageType("livekit.SimulcastCodecInfo",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:Lo,repeated:!0},{no:5,name:"video_layer_mode",kind:"enum",T:Z.getEnumType(qD)},{no:6,name:"sdp_cid",kind:"scalar",T:9}]),zl=Z.makeMessageType("livekit.TrackInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:Z.getEnumType(li)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:Z.getEnumType(nn)},{no:10,name:"layers",kind:"message",T:Lo,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:_ee,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:Z.getEnumType(hn)},{no:17,name:"stream",kind:"scalar",T:9},{no:18,name:"version",kind:"message",T:ij},{no:19,name:"audio_features",kind:"enum",T:Z.getEnumType(yn),repeated:!0},{no:20,name:"backup_codec_policy",kind:"enum",T:Z.getEnumType(HD)}]),Lo=Z.makeMessageType("livekit.VideoLayer",()=>[{no:1,name:"quality",kind:"enum",T:Z.getEnumType(kw)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13},{no:6,name:"spatial_layer",kind:"scalar",T:5},{no:7,name:"rid",kind:"scalar",T:9}]),qD=Z.makeEnum("livekit.VideoLayer.Mode",[{no:0,name:"MODE_UNUSED"},{no:1,name:"ONE_SPATIAL_LAYER_PER_STREAM"},{no:2,name:"MULTIPLE_SPATIAL_LAYERS_PER_STREAM"},{no:3,name:"ONE_SPATIAL_LAYER_PER_STREAM_INCOMPLETE_RTCP_SR"}]),Wn=Z.makeMessageType("livekit.DataPacket",()=>[{no:1,name:"kind",kind:"enum",T:Z.getEnumType(ct)},{no:4,name:"participant_identity",kind:"scalar",T:9},{no:5,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:2,name:"user",kind:"message",T:Sw,oneof:"value"},{no:3,name:"speaker",kind:"message",T:Iee,oneof:"value"},{no:6,name:"sip_dtmf",kind:"message",T:JD,oneof:"value"},{no:7,name:"transcription",kind:"message",T:Nee,oneof:"value"},{no:8,name:"metrics",kind:"message",T:wee,oneof:"value"},{no:9,name:"chat_message",kind:"message",T:Fp,oneof:"value"},{no:10,name:"rpc_request",kind:"message",T:Cw,oneof:"value"},{no:11,name:"rpc_ack",kind:"message",T:Tw,oneof:"value"},{no:12,name:"rpc_response",kind:"message",T:Ew,oneof:"value"},{no:13,name:"stream_header",kind:"message",T:Up,oneof:"value"},{no:14,name:"stream_chunk",kind:"message",T:Bp,oneof:"value"},{no:15,name:"stream_trailer",kind:"message",T:Vp,oneof:"value"},{no:18,name:"encrypted_packet",kind:"message",T:GD,oneof:"value"},{no:16,name:"sequence",kind:"scalar",T:13},{no:17,name:"participant_sid",kind:"scalar",T:9}]),ct=Z.makeEnum("livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]),GD=Z.makeMessageType("livekit.EncryptedPacket",()=>[{no:1,name:"encryption_type",kind:"enum",T:Z.getEnumType(hn)},{no:2,name:"iv",kind:"scalar",T:12},{no:3,name:"key_index",kind:"scalar",T:13},{no:4,name:"encrypted_value",kind:"scalar",T:12}]),KD=Z.makeMessageType("livekit.EncryptedPacketPayload",()=>[{no:1,name:"user",kind:"message",T:Sw,oneof:"value"},{no:3,name:"chat_message",kind:"message",T:Fp,oneof:"value"},{no:4,name:"rpc_request",kind:"message",T:Cw,oneof:"value"},{no:5,name:"rpc_ack",kind:"message",T:Tw,oneof:"value"},{no:6,name:"rpc_response",kind:"message",T:Ew,oneof:"value"},{no:7,name:"stream_header",kind:"message",T:Up,oneof:"value"},{no:8,name:"stream_chunk",kind:"message",T:Bp,oneof:"value"},{no:9,name:"stream_trailer",kind:"message",T:Vp,oneof:"value"}]),Iee=Z.makeMessageType("livekit.ActiveSpeakerUpdate",()=>[{no:1,name:"speakers",kind:"message",T:YD,repeated:!0}]),YD=Z.makeMessageType("livekit.SpeakerInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]),Sw=Z.makeMessageType("livekit.UserPacket",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0},{no:8,name:"id",kind:"scalar",T:9,opt:!0},{no:9,name:"start_time",kind:"scalar",T:4,opt:!0},{no:10,name:"end_time",kind:"scalar",T:4,opt:!0},{no:11,name:"nonce",kind:"scalar",T:12}]),JD=Z.makeMessageType("livekit.SipDTMF",()=>[{no:3,name:"code",kind:"scalar",T:13},{no:4,name:"digit",kind:"scalar",T:9}]),Nee=Z.makeMessageType("livekit.Transcription",()=>[{no:2,name:"transcribed_participant_identity",kind:"scalar",T:9},{no:3,name:"track_id",kind:"scalar",T:9},{no:4,name:"segments",kind:"message",T:Aee,repeated:!0}]),Aee=Z.makeMessageType("livekit.TranscriptionSegment",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"start_time",kind:"scalar",T:4},{no:4,name:"end_time",kind:"scalar",T:4},{no:5,name:"final",kind:"scalar",T:8},{no:6,name:"language",kind:"scalar",T:9}]),Fp=Z.makeMessageType("livekit.ChatMessage",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"edit_timestamp",kind:"scalar",T:3,opt:!0},{no:4,name:"message",kind:"scalar",T:9},{no:5,name:"deleted",kind:"scalar",T:8},{no:6,name:"generated",kind:"scalar",T:8}]),Cw=Z.makeMessageType("livekit.RpcRequest",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"method",kind:"scalar",T:9},{no:3,name:"payload",kind:"scalar",T:9},{no:4,name:"response_timeout_ms",kind:"scalar",T:13},{no:5,name:"version",kind:"scalar",T:13}]),Tw=Z.makeMessageType("livekit.RpcAck",()=>[{no:1,name:"request_id",kind:"scalar",T:9}]),Ew=Z.makeMessageType("livekit.RpcResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:9,oneof:"value"},{no:3,name:"error",kind:"message",T:QD,oneof:"value"}]),QD=Z.makeMessageType("livekit.RpcError",()=>[{no:1,name:"code",kind:"scalar",T:13},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"scalar",T:9}]),XD=Z.makeMessageType("livekit.ParticipantTracks",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]),ZD=Z.makeMessageType("livekit.ServerInfo",()=>[{no:1,name:"edition",kind:"enum",T:Z.getEnumType(ej)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9},{no:7,name:"agent_protocol",kind:"scalar",T:5}]),ej=Z.makeEnum("livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]),tj=Z.makeMessageType("livekit.ClientInfo",()=>[{no:1,name:"sdk",kind:"enum",T:Z.getEnumType(nj)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9},{no:11,name:"other_sdks",kind:"scalar",T:9}]),nj=Z.makeEnum("livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"},{no:11,name:"UNITY_WEB"},{no:12,name:"NODE"},{no:13,name:"UNREAL"},{no:14,name:"ESP32"}]),rj=Z.makeMessageType("livekit.ClientConfiguration",()=>[{no:1,name:"video",kind:"message",T:OP},{no:2,name:"screen",kind:"message",T:OP},{no:3,name:"resume_connection",kind:"enum",T:Z.getEnumType(wd)},{no:4,name:"disabled_codecs",kind:"message",T:Ree},{no:5,name:"force_relay",kind:"enum",T:Z.getEnumType(wd)}]),OP=Z.makeMessageType("livekit.VideoConfiguration",()=>[{no:1,name:"hardware_encoder",kind:"enum",T:Z.getEnumType(wd)}]),Ree=Z.makeMessageType("livekit.DisabledCodecs",()=>[{no:1,name:"codecs",kind:"message",T:Lp,repeated:!0},{no:2,name:"publish",kind:"message",T:Lp,repeated:!0}]),ij=Z.makeMessageType("livekit.TimedVersion",()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]),Q0=Z.makeEnum("livekit.DataStream.OperationType",[{no:0,name:"CREATE"},{no:1,name:"UPDATE"},{no:2,name:"DELETE"},{no:3,name:"REACTION"}]),sj=Z.makeMessageType("livekit.DataStream.TextHeader",()=>[{no:1,name:"operation_type",kind:"enum",T:Z.getEnumType(Q0)},{no:2,name:"version",kind:"scalar",T:5},{no:3,name:"reply_to_stream_id",kind:"scalar",T:9},{no:4,name:"attached_stream_ids",kind:"scalar",T:9,repeated:!0},{no:5,name:"generated",kind:"scalar",T:8}],{localName:"DataStream_TextHeader"}),oj=Z.makeMessageType("livekit.DataStream.ByteHeader",()=>[{no:1,name:"name",kind:"scalar",T:9}],{localName:"DataStream_ByteHeader"}),Up=Z.makeMessageType("livekit.DataStream.Header",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"mime_type",kind:"scalar",T:9},{no:5,name:"total_length",kind:"scalar",T:4,opt:!0},{no:7,name:"encryption_type",kind:"enum",T:Z.getEnumType(hn)},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:9,name:"text_header",kind:"message",T:sj,oneof:"content_header"},{no:10,name:"byte_header",kind:"message",T:oj,oneof:"content_header"}],{localName:"DataStream_Header"}),Bp=Z.makeMessageType("livekit.DataStream.Chunk",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"chunk_index",kind:"scalar",T:4},{no:3,name:"content",kind:"scalar",T:12},{no:4,name:"version",kind:"scalar",T:5},{no:5,name:"iv",kind:"scalar",T:12,opt:!0}],{localName:"DataStream_Chunk"}),Vp=Z.makeMessageType("livekit.DataStream.Trailer",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"reason",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"DataStream_Trailer"}),Mee=Z.makeMessageType("livekit.SubscribedAudioCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"enabled",kind:"scalar",T:8}]),ci=Z.makeEnum("livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]),X0=Z.makeEnum("livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]),Dee=Z.makeEnum("livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]),jee=Z.makeMessageType("livekit.SignalRequest",()=>[{no:1,name:"offer",kind:"message",T:Ho,oneof:"message"},{no:2,name:"answer",kind:"message",T:Ho,oneof:"message"},{no:3,name:"trickle",kind:"message",T:Rm,oneof:"message"},{no:4,name:"add_track",kind:"message",T:Sd,oneof:"message"},{no:5,name:"mute",kind:"message",T:Mm,oneof:"message"},{no:6,name:"subscription",kind:"message",T:Dm,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:aj,oneof:"message"},{no:8,name:"leave",kind:"message",T:jm,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:cj,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:hj,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:Aw,oneof:"message"},{no:13,name:"simulate",kind:"message",T:Pi,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:Iw,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:mj,oneof:"message"},{no:17,name:"update_audio_track",kind:"message",T:_w,oneof:"message"},{no:18,name:"update_video_track",kind:"message",T:lj,oneof:"message"}]),LP=Z.makeMessageType("livekit.SignalResponse",()=>[{no:1,name:"join",kind:"message",T:Oee,oneof:"message"},{no:2,name:"answer",kind:"message",T:Ho,oneof:"message"},{no:3,name:"offer",kind:"message",T:Ho,oneof:"message"},{no:4,name:"trickle",kind:"message",T:Rm,oneof:"message"},{no:5,name:"update",kind:"message",T:Uee,oneof:"message"},{no:6,name:"track_published",kind:"message",T:Pw,oneof:"message"},{no:8,name:"leave",kind:"message",T:jm,oneof:"message"},{no:9,name:"mute",kind:"message",T:Mm,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:Bee,oneof:"message"},{no:11,name:"room_update",kind:"message",T:Vee,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:$ee,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:Hee,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:Gee,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:Yee,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:Fee,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:Lee,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:Qee,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:ete,oneof:"message"},{no:22,name:"request_response",kind:"message",T:tte,oneof:"message"},{no:23,name:"track_subscribed",kind:"message",T:nte,oneof:"message"},{no:24,name:"room_moved",kind:"message",T:Jee,oneof:"message"},{no:25,name:"media_sections_requirement",kind:"message",T:ote,oneof:"message"},{no:26,name:"subscribed_audio_codec_update",kind:"message",T:Kee,oneof:"message"}]),Z0=Z.makeMessageType("livekit.SimulcastCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:Lo,repeated:!0},{no:5,name:"video_layer_mode",kind:"enum",T:Z.getEnumType(qD)}]),Sd=Z.makeMessageType("livekit.AddTrackRequest",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:Z.getEnumType(li)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:Z.getEnumType(nn)},{no:9,name:"layers",kind:"message",T:Lo,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:Z0,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:Z.getEnumType(hn)},{no:15,name:"stream",kind:"scalar",T:9},{no:16,name:"backup_codec_policy",kind:"enum",T:Z.getEnumType(HD)},{no:17,name:"audio_features",kind:"enum",T:Z.getEnumType(yn),repeated:!0}]),Rm=Z.makeMessageType("livekit.TrickleRequest",()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:Z.getEnumType(ci)},{no:3,name:"final",kind:"scalar",T:8}]),Mm=Z.makeMessageType("livekit.MuteTrackRequest",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]),Oee=Z.makeMessageType("livekit.JoinResponse",()=>[{no:1,name:"room",kind:"message",T:Am},{no:2,name:"participant",kind:"message",T:Ua},{no:3,name:"other_participants",kind:"message",T:Ua,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:uj,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:rj},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:ZD},{no:13,name:"sif_trailer",kind:"scalar",T:12},{no:14,name:"enabled_publish_codecs",kind:"message",T:Lp,repeated:!0},{no:15,name:"fast_publish",kind:"scalar",T:8}]),Lee=Z.makeMessageType("livekit.ReconnectResponse",()=>[{no:1,name:"ice_servers",kind:"message",T:uj,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:rj},{no:3,name:"server_info",kind:"message",T:ZD},{no:4,name:"last_message_seq",kind:"scalar",T:13}]),Pw=Z.makeMessageType("livekit.TrackPublishedResponse",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:zl}]),Fee=Z.makeMessageType("livekit.TrackUnpublishedResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),Ho=Z.makeMessageType("livekit.SessionDescription",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9},{no:3,name:"id",kind:"scalar",T:13},{no:4,name:"mid_to_track_id",kind:"map",K:9,V:{kind:"scalar",T:9}}]),Uee=Z.makeMessageType("livekit.ParticipantUpdate",()=>[{no:1,name:"participants",kind:"message",T:Ua,repeated:!0}]),Dm=Z.makeMessageType("livekit.UpdateSubscription",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:XD,repeated:!0}]),aj=Z.makeMessageType("livekit.UpdateTrackSettings",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:Z.getEnumType(kw)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]),_w=Z.makeMessageType("livekit.UpdateLocalAudioTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"features",kind:"enum",T:Z.getEnumType(yn),repeated:!0}]),lj=Z.makeMessageType("livekit.UpdateLocalVideoTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13}]),jm=Z.makeMessageType("livekit.LeaveRequest",()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:Z.getEnumType(hi)},{no:3,name:"action",kind:"enum",T:Z.getEnumType(ec)},{no:4,name:"regions",kind:"message",T:Xee}]),ec=Z.makeEnum("livekit.LeaveRequest.Action",[{no:0,name:"DISCONNECT"},{no:1,name:"RESUME"},{no:2,name:"RECONNECT"}]),cj=Z.makeMessageType("livekit.UpdateVideoLayers",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:Lo,repeated:!0}]),Iw=Z.makeMessageType("livekit.UpdateParticipantMetadata",()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:4,name:"request_id",kind:"scalar",T:13}]),uj=Z.makeMessageType("livekit.ICEServer",()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]),Bee=Z.makeMessageType("livekit.SpeakersChanged",()=>[{no:1,name:"speakers",kind:"message",T:YD,repeated:!0}]),Vee=Z.makeMessageType("livekit.RoomUpdate",()=>[{no:1,name:"room",kind:"message",T:Am}]),zee=Z.makeMessageType("livekit.ConnectionQualityInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:Z.getEnumType(Fu)},{no:3,name:"score",kind:"scalar",T:2}]),$ee=Z.makeMessageType("livekit.ConnectionQualityUpdate",()=>[{no:1,name:"updates",kind:"message",T:zee,repeated:!0}]),Wee=Z.makeMessageType("livekit.StreamStateInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:Z.getEnumType(X0)}]),Hee=Z.makeMessageType("livekit.StreamStateUpdate",()=>[{no:1,name:"stream_states",kind:"message",T:Wee,repeated:!0}]),Nw=Z.makeMessageType("livekit.SubscribedQuality",()=>[{no:1,name:"quality",kind:"enum",T:Z.getEnumType(kw)},{no:2,name:"enabled",kind:"scalar",T:8}]),qee=Z.makeMessageType("livekit.SubscribedCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:Nw,repeated:!0}]),Gee=Z.makeMessageType("livekit.SubscribedQualityUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:Nw,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:qee,repeated:!0}]),Kee=Z.makeMessageType("livekit.SubscribedAudioCodecUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_audio_codecs",kind:"message",T:Mee,repeated:!0}]),dj=Z.makeMessageType("livekit.TrackPermission",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]),hj=Z.makeMessageType("livekit.SubscriptionPermission",()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:dj,repeated:!0}]),Yee=Z.makeMessageType("livekit.SubscriptionPermissionUpdate",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]),Jee=Z.makeMessageType("livekit.RoomMovedResponse",()=>[{no:1,name:"room",kind:"message",T:Am},{no:2,name:"token",kind:"scalar",T:9},{no:3,name:"participant",kind:"message",T:Ua},{no:4,name:"other_participants",kind:"message",T:Ua,repeated:!0}]),Aw=Z.makeMessageType("livekit.SyncState",()=>[{no:1,name:"answer",kind:"message",T:Ho},{no:2,name:"subscription",kind:"message",T:Dm},{no:3,name:"publish_tracks",kind:"message",T:Pw,repeated:!0},{no:4,name:"data_channels",kind:"message",T:pj,repeated:!0},{no:5,name:"offer",kind:"message",T:Ho},{no:6,name:"track_sids_disabled",kind:"scalar",T:9,repeated:!0},{no:7,name:"datachannel_receive_states",kind:"message",T:fj,repeated:!0}]),fj=Z.makeMessageType("livekit.DataChannelReceiveState",()=>[{no:1,name:"publisher_sid",kind:"scalar",T:9},{no:2,name:"last_seq",kind:"scalar",T:13}]),pj=Z.makeMessageType("livekit.DataChannelInfo",()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:Z.getEnumType(ci)}]),Pi=Z.makeMessageType("livekit.SimulateScenario",()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:Z.getEnumType(Dee),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"},{no:9,name:"leave_request_full_reconnect",kind:"scalar",T:8,oneof:"scenario"}]),mj=Z.makeMessageType("livekit.Ping",()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]),Qee=Z.makeMessageType("livekit.Pong",()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]),Xee=Z.makeMessageType("livekit.RegionSettings",()=>[{no:1,name:"regions",kind:"message",T:Zee,repeated:!0}]),Zee=Z.makeMessageType("livekit.RegionInfo",()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]),ete=Z.makeMessageType("livekit.SubscriptionResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:Z.getEnumType(Tee)}]),tte=Z.makeMessageType("livekit.RequestResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:13},{no:2,name:"reason",kind:"enum",T:Z.getEnumType(Rw)},{no:3,name:"message",kind:"scalar",T:9},{no:4,name:"trickle",kind:"message",T:Rm,oneof:"request"},{no:5,name:"add_track",kind:"message",T:Sd,oneof:"request"},{no:6,name:"mute",kind:"message",T:Mm,oneof:"request"},{no:7,name:"update_metadata",kind:"message",T:Iw,oneof:"request"},{no:8,name:"update_audio_track",kind:"message",T:_w,oneof:"request"},{no:9,name:"update_video_track",kind:"message",T:lj,oneof:"request"}]),Rw=Z.makeEnum("livekit.RequestResponse.Reason",[{no:0,name:"OK"},{no:1,name:"NOT_FOUND"},{no:2,name:"NOT_ALLOWED"},{no:3,name:"LIMIT_EXCEEDED"},{no:4,name:"QUEUED"},{no:5,name:"UNSUPPORTED_TYPE"},{no:6,name:"UNCLASSIFIED_ERROR"}]),nte=Z.makeMessageType("livekit.TrackSubscribed",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),gj=Z.makeMessageType("livekit.ConnectionSettings",()=>[{no:1,name:"auto_subscribe",kind:"scalar",T:8},{no:2,name:"adaptive_stream",kind:"scalar",T:8},{no:3,name:"subscriber_allow_pause",kind:"scalar",T:8,opt:!0},{no:4,name:"disable_ice_lite",kind:"scalar",T:8}]),rte=Z.makeMessageType("livekit.JoinRequest",()=>[{no:1,name:"client_info",kind:"message",T:tj},{no:2,name:"connection_settings",kind:"message",T:gj},{no:3,name:"metadata",kind:"scalar",T:9},{no:4,name:"participant_attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"add_track_requests",kind:"message",T:Sd,repeated:!0},{no:6,name:"publisher_offer",kind:"message",T:Ho},{no:7,name:"reconnect",kind:"scalar",T:8},{no:8,name:"reconnect_reason",kind:"enum",T:Z.getEnumType(wa)},{no:9,name:"participant_sid",kind:"scalar",T:9},{no:10,name:"sync_state",kind:"message",T:Aw}]),ite=Z.makeMessageType("livekit.WrappedJoinRequest",()=>[{no:1,name:"compression",kind:"enum",T:Z.getEnumType(ste)},{no:2,name:"join_request",kind:"scalar",T:12}]),ste=Z.makeEnum("livekit.WrappedJoinRequest.Compression",[{no:0,name:"NONE"},{no:1,name:"GZIP"}]),ote=Z.makeMessageType("livekit.MediaSectionsRequirement",()=>[{no:1,name:"num_audios",kind:"scalar",T:13},{no:2,name:"num_videos",kind:"scalar",T:13}]);function ate(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var np={exports:{}},lte=np.exports,FP;function cte(){return FP||(FP=1,(function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(lte,function(){var e=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],s={},o=null;function l(x,k){var T=x[k];if(typeof T.bind=="function")return T.bind(x);try{return Function.prototype.bind.call(T,x)}catch{return function(){return Function.prototype.apply.apply(T,[x,arguments])}}}function u(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function d(x){return x==="debug"&&(x="log"),typeof console===n?!1:x==="trace"&&r?u:console[x]!==void 0?l(console,x):console.log!==void 0?l(console,"log"):e}function f(){for(var x=this.getLevel(),k=0;k<i.length;k++){var T=i[k];this[T]=k<x?e:this.methodFactory(T,x,this.name)}if(this.log=this.debug,typeof console===n&&x<this.levels.SILENT)return"No console available for logging"}function m(x){return function(){typeof console!==n&&(f.call(this),this[x].apply(this,arguments))}}function g(x,k,T){return d(x)||m.apply(this,arguments)}function y(x,k){var T=this,_,P,E,I="loglevel";typeof x=="string"?I+=":"+x:typeof x=="symbol"&&(I=void 0);function A(z){var F=(i[z]||"silent").toUpperCase();if(!(typeof window===n||!I)){try{window.localStorage[I]=F;return}catch{}try{window.document.cookie=encodeURIComponent(I)+"="+F+";"}catch{}}}function L(){var z;if(!(typeof window===n||!I)){try{z=window.localStorage[I]}catch{}if(typeof z===n)try{var F=window.document.cookie,W=encodeURIComponent(I),Y=F.indexOf(W+"=");Y!==-1&&(z=/^([^;]+)/.exec(F.slice(Y+W.length+1))[1])}catch{}return T.levels[z]===void 0&&(z=void 0),z}}function R(){if(!(typeof window===n||!I)){try{window.localStorage.removeItem(I)}catch{}try{window.document.cookie=encodeURIComponent(I)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function j(z){var F=z;if(typeof F=="string"&&T.levels[F.toUpperCase()]!==void 0&&(F=T.levels[F.toUpperCase()]),typeof F=="number"&&F>=0&&F<=T.levels.SILENT)return F;throw new TypeError("log.setLevel() called with invalid level: "+z)}T.name=x,T.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},T.methodFactory=k||g,T.getLevel=function(){return E??P??_},T.setLevel=function(z,F){return E=j(z),F!==!1&&A(E),f.call(T)},T.setDefaultLevel=function(z){P=j(z),L()||T.setLevel(z,!1)},T.resetLevel=function(){E=null,R(),f.call(T)},T.enableAll=function(z){T.setLevel(T.levels.TRACE,z)},T.disableAll=function(z){T.setLevel(T.levels.SILENT,z)},T.rebuild=function(){if(o!==T&&(_=j(o.getLevel())),f.call(T),o===T)for(var z in s)s[z].rebuild()},_=j(o?o.getLevel():"WARN");var U=L();U!=null&&(E=j(U)),f.call(T)}o=new y,o.getLogger=function(k){if(typeof k!="symbol"&&typeof k!="string"||k==="")throw new TypeError("You must supply a name when creating a logger.");var T=s[k];return T||(T=s[k]=new y(k,o.methodFactory)),T};var C=typeof window!==n?window.log:void 0;return o.noConflict=function(){return typeof window!==n&&window.log===o&&(window.log=C),o},o.getLoggers=function(){return s},o.default=o,o})})(np)),np.exports}var Om=cte(),eb;(function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.silent=5]="silent"})(eb||(eb={}));var mi;(function(t){t.Default="livekit",t.Room="livekit-room",t.TokenSource="livekit-token-source",t.Participant="livekit-participant",t.Track="livekit-track",t.Publication="livekit-track-publication",t.Engine="livekit-engine",t.Signal="livekit-signal",t.PCManager="livekit-pc-manager",t.PCTransport="livekit-pc-transport",t.E2EE="lk-e2ee"})(mi||(mi={}));let nt=Om.getLogger("livekit");Object.values(mi).map(t=>Om.getLogger(t));nt.setDefaultLevel(eb.info);function Ms(t){const e=Om.getLogger(t);return e.setDefaultLevel(nt.getLevel()),e}const ute=Om.getLogger("lk-e2ee"),_u=7e3,dte=[0,300,4*300,9*300,16*300,_u,_u,_u,_u,_u];class hte{constructor(e){this._retryDelays=e!==void 0?[...e]:dte}nextRetryDelayInMs(e){if(e.retryCount>=this._retryDelays.length)return null;const n=this._retryDelays[e.retryCount];return e.retryCount<=1?n:n+Math.random()*1e3}}function fte(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function V(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{d(r.next(f))}catch(m){o(m)}}function u(f){try{d(r.throw(f))}catch(m){o(m)}}function d(f){f.done?s(f.value):i(f.value).then(l,u)}d((r=r.apply(t,e||[])).next())})}function UP(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ys(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof UP=="function"?UP(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(l,u){o=t[s](o),i(l,u,o.done,o.value)})}}function i(s,o,l,u){Promise.resolve(u).then(function(d){s({value:d,done:l})},o)}}var Mf={exports:{}},BP;function pte(){if(BP)return Mf.exports;BP=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(I,A,L){return Function.prototype.apply.call(I,A,L)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(I){return Object.getOwnPropertyNames(I).concat(Object.getOwnPropertySymbols(I))}:n=function(I){return Object.getOwnPropertyNames(I)};function r(E){console&&console.warn&&console.warn(E)}var i=Number.isNaN||function(I){return I!==I};function s(){s.init.call(this)}Mf.exports=s,Mf.exports.once=T,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function l(E){if(typeof E!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof E)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(E){if(typeof E!="number"||E<0||i(E))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+E+".");o=E}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(I){if(typeof I!="number"||I<0||i(I))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+I+".");return this._maxListeners=I,this};function u(E){return E._maxListeners===void 0?s.defaultMaxListeners:E._maxListeners}s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(I){for(var A=[],L=1;L<arguments.length;L++)A.push(arguments[L]);var R=I==="error",j=this._events;if(j!==void 0)R=R&&j.error===void 0;else if(!R)return!1;if(R){var U;if(A.length>0&&(U=A[0]),U instanceof Error)throw U;var z=new Error("Unhandled error."+(U?" ("+U.message+")":""));throw z.context=U,z}var F=j[I];if(F===void 0)return!1;if(typeof F=="function")e(F,this,A);else for(var W=F.length,Y=C(F,W),L=0;L<W;++L)e(Y[L],this,A);return!0};function d(E,I,A,L){var R,j,U;if(l(A),j=E._events,j===void 0?(j=E._events=Object.create(null),E._eventsCount=0):(j.newListener!==void 0&&(E.emit("newListener",I,A.listener?A.listener:A),j=E._events),U=j[I]),U===void 0)U=j[I]=A,++E._eventsCount;else if(typeof U=="function"?U=j[I]=L?[A,U]:[U,A]:L?U.unshift(A):U.push(A),R=u(E),R>0&&U.length>R&&!U.warned){U.warned=!0;var z=new Error("Possible EventEmitter memory leak detected. "+U.length+" "+String(I)+" listeners added. Use emitter.setMaxListeners() to increase limit");z.name="MaxListenersExceededWarning",z.emitter=E,z.type=I,z.count=U.length,r(z)}return E}s.prototype.addListener=function(I,A){return d(this,I,A,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(I,A){return d(this,I,A,!0)};function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function m(E,I,A){var L={fired:!1,wrapFn:void 0,target:E,type:I,listener:A},R=f.bind(L);return R.listener=A,L.wrapFn=R,R}s.prototype.once=function(I,A){return l(A),this.on(I,m(this,I,A)),this},s.prototype.prependOnceListener=function(I,A){return l(A),this.prependListener(I,m(this,I,A)),this},s.prototype.removeListener=function(I,A){var L,R,j,U,z;if(l(A),R=this._events,R===void 0)return this;if(L=R[I],L===void 0)return this;if(L===A||L.listener===A)--this._eventsCount===0?this._events=Object.create(null):(delete R[I],R.removeListener&&this.emit("removeListener",I,L.listener||A));else if(typeof L!="function"){for(j=-1,U=L.length-1;U>=0;U--)if(L[U]===A||L[U].listener===A){z=L[U].listener,j=U;break}if(j<0)return this;j===0?L.shift():x(L,j),L.length===1&&(R[I]=L[0]),R.removeListener!==void 0&&this.emit("removeListener",I,z||A)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(I){var A,L,R;if(L=this._events,L===void 0)return this;if(L.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):L[I]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete L[I]),this;if(arguments.length===0){var j=Object.keys(L),U;for(R=0;R<j.length;++R)U=j[R],U!=="removeListener"&&this.removeAllListeners(U);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(A=L[I],typeof A=="function")this.removeListener(I,A);else if(A!==void 0)for(R=A.length-1;R>=0;R--)this.removeListener(I,A[R]);return this};function g(E,I,A){var L=E._events;if(L===void 0)return[];var R=L[I];return R===void 0?[]:typeof R=="function"?A?[R.listener||R]:[R]:A?k(R):C(R,R.length)}s.prototype.listeners=function(I){return g(this,I,!0)},s.prototype.rawListeners=function(I){return g(this,I,!1)},s.listenerCount=function(E,I){return typeof E.listenerCount=="function"?E.listenerCount(I):y.call(E,I)},s.prototype.listenerCount=y;function y(E){var I=this._events;if(I!==void 0){var A=I[E];if(typeof A=="function")return 1;if(A!==void 0)return A.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function C(E,I){for(var A=new Array(I),L=0;L<I;++L)A[L]=E[L];return A}function x(E,I){for(;I+1<E.length;I++)E[I]=E[I+1];E.pop()}function k(E){for(var I=new Array(E.length),A=0;A<I.length;++A)I[A]=E[A].listener||E[A];return I}function T(E,I){return new Promise(function(A,L){function R(U){E.removeListener(I,j),L(U)}function j(){typeof E.removeListener=="function"&&E.removeListener("error",R),A([].slice.call(arguments))}P(E,I,j,{once:!0}),I!=="error"&&_(E,R,{once:!0})})}function _(E,I,A){typeof E.on=="function"&&P(E,"error",I,A)}function P(E,I,A,L){if(typeof E.on=="function")L.once?E.once(I,A):E.on(I,A);else if(typeof E.addEventListener=="function")E.addEventListener(I,function R(j){L.once&&E.removeEventListener(I,R),A(j)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof E)}return Mf.exports}var Zi=pte();let vj=!0,yj=!0;function Uu(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseFloat(r[n],10)}function el(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(o,l){if(o!==e)return i.apply(this,arguments);const u=d=>{const f=n(d);f&&(l.handleEvent?l.handleEvent(f):l(f))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(l,u),i.apply(this,[o,u])};const s=r.removeEventListener;r.removeEventListener=function(o,l){if(o!==e||!this._eventMap||!this._eventMap[e])return s.apply(this,arguments);if(!this._eventMap[e].has(l))return s.apply(this,arguments);const u=this._eventMap[e].get(l);return this._eventMap[e].delete(l),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[o,u])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(o){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),o&&this.addEventListener(e,this["_on"+e]=o)},enumerable:!0,configurable:!0})}function mte(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(vj=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function gte(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(yj=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function bj(){if(typeof window=="object"){if(vj)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Mw(t,e){yj&&console.warn(t+" is deprecated, please use "+e+" instead.")}function vte(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)e.browser="firefox",e.version=parseInt(Uu(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(Uu(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(Uu(n.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype,e._safariVersion=Uu(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function VP(t){return Object.prototype.toString.call(t)==="[object Object]"}function xj(t){return VP(t)?Object.keys(t).reduce(function(e,n){const r=VP(t[n]),i=r?xj(t[n]):t[n],s=r&&!Object.keys(i).length;return i===void 0||s?e:Object.assign(e,{[n]:i})},{}):t}function tb(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?tb(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(i=>{tb(t,t.get(i),n)})}))}function zP(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(e===null)return i;const s=[];return t.forEach(o=>{o.type==="track"&&o.trackIdentifier===e.id&&s.push(o)}),s.forEach(o=>{t.forEach(l=>{l.type===r&&l.trackId===o.id&&tb(t,l,i)})}),i}const $P=bj;function wj(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const r=function(l){if(typeof l!="object"||l.mandatory||l.optional)return l;const u={};return Object.keys(l).forEach(d=>{if(d==="require"||d==="advanced"||d==="mediaSource")return;const f=typeof l[d]=="object"?l[d]:{ideal:l[d]};f.exact!==void 0&&typeof f.exact=="number"&&(f.min=f.max=f.exact);const m=function(g,y){return g?g+y.charAt(0).toUpperCase()+y.slice(1):y==="deviceId"?"sourceId":y};if(f.ideal!==void 0){u.optional=u.optional||[];let g={};typeof f.ideal=="number"?(g[m("min",d)]=f.ideal,u.optional.push(g),g={},g[m("max",d)]=f.ideal,u.optional.push(g)):(g[m("",d)]=f.ideal,u.optional.push(g))}f.exact!==void 0&&typeof f.exact!="number"?(u.mandatory=u.mandatory||{},u.mandatory[m("",d)]=f.exact):["min","max"].forEach(g=>{f[g]!==void 0&&(u.mandatory=u.mandatory||{},u.mandatory[m(g,d)]=f[g])})}),l.advanced&&(u.optional=(u.optional||[]).concat(l.advanced)),u},i=function(l,u){if(e.version>=61)return u(l);if(l=JSON.parse(JSON.stringify(l)),l&&typeof l.audio=="object"){const d=function(f,m,g){m in f&&!(g in f)&&(f[g]=f[m],delete f[m])};l=JSON.parse(JSON.stringify(l)),d(l.audio,"autoGainControl","googAutoGainControl"),d(l.audio,"noiseSuppression","googNoiseSuppression"),l.audio=r(l.audio)}if(l&&typeof l.video=="object"){let d=l.video.facingMode;d=d&&(typeof d=="object"?d:{ideal:d});const f=e.version<66;if(d&&(d.exact==="user"||d.exact==="environment"||d.ideal==="user"||d.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!f)){delete l.video.facingMode;let m;if(d.exact==="environment"||d.ideal==="environment"?m=["back","rear"]:(d.exact==="user"||d.ideal==="user")&&(m=["front"]),m)return n.mediaDevices.enumerateDevices().then(g=>{g=g.filter(C=>C.kind==="videoinput");let y=g.find(C=>m.some(x=>C.label.toLowerCase().includes(x)));return!y&&g.length&&m.includes("back")&&(y=g[g.length-1]),y&&(l.video.deviceId=d.exact?{exact:y.deviceId}:{ideal:y.deviceId}),l.video=r(l.video),$P("chrome: "+JSON.stringify(l)),u(l)})}l.video=r(l.video)}return $P("chrome: "+JSON.stringify(l)),u(l)},s=function(l){return e.version>=64?l:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[l.name]||l.name,message:l.message,constraint:l.constraint||l.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},o=function(l,u,d){i(l,f=>{n.webkitGetUserMedia(f,u,m=>{d&&d(s(m))})})};if(n.getUserMedia=o.bind(n),n.mediaDevices.getUserMedia){const l=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(u){return i(u,d=>l(d).then(f=>{if(d.audio&&!f.getAudioTracks().length||d.video&&!f.getVideoTracks().length)throw f.getTracks().forEach(m=>{m.stop()}),new DOMException("","NotFoundError");return f},f=>Promise.reject(s(f))))}}}function kj(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function Sj(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;t.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(l=>l.track&&l.track.id===i.track.id):s={track:i.track};const o=new Event("track");o.track=i.track,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)}),r.stream.getTracks().forEach(i=>{let s;t.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(l=>l.track&&l.track.id===i.id):s={track:i};const o=new Event("track");o.track=i,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else el(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function Cj(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(i,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=i.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:i}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(l,u){let d=i.apply(this,arguments);return d||(d=e(this,l),this._senders.push(d)),d};const s=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(l){s.apply(this,arguments);const u=this._senders.indexOf(l);u!==-1&&this._senders.splice(u,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(o=>{this._senders.push(e(this,o))})};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(o=>{const l=this._senders.find(u=>u.track===o);l&&this._senders.splice(this._senders.indexOf(l),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Tj(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(o=>o._pc=this),s});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),t.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(o=>zP(o,s.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(s=>s._pc=this),i}),el(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(s=>zP(s,i.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const r=arguments[0];let i,s,o;return this.getSenders().forEach(l=>{l.track===r&&(i?o=!0:i=l)}),this.getReceivers().forEach(l=>(l.track===r&&(s?o=!0:s=l),l.track===r)),o||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function Ej(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(o,l){if(!l)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const u=e.apply(this,arguments);return this._shimmedLocalStreams[l.id]?this._shimmedLocalStreams[l.id].indexOf(u)===-1&&this._shimmedLocalStreams[l.id].push(u):this._shimmedLocalStreams[l.id]=[l,u],u};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(d=>{if(this.getSenders().find(m=>m.track===d))throw new DOMException("Track already exists.","InvalidAccessError")});const l=this.getSenders();n.apply(this,arguments);const u=this.getSenders().filter(d=>l.indexOf(d)===-1);this._shimmedLocalStreams[o.id]=[o].concat(u)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],r.apply(this,arguments)};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(l=>{const u=this._shimmedLocalStreams[l].indexOf(o);u!==-1&&this._shimmedLocalStreams[l].splice(u,1),this._shimmedLocalStreams[l].length===1&&delete this._shimmedLocalStreams[l]}),i.apply(this,arguments)}}function Pj(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return Ej(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const f=n.apply(this);return this._reverseStreams=this._reverseStreams||{},f.map(m=>this._reverseStreams[m.id])};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(f){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},f.getTracks().forEach(m=>{if(this.getSenders().find(y=>y.track===m))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[f.id]){const m=new t.MediaStream(f.getTracks());this._streams[f.id]=m,this._reverseStreams[m.id]=f,f=m}r.apply(this,[f])};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(f){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[f.id]||f]),delete this._reverseStreams[this._streams[f.id]?this._streams[f.id].id:f.id],delete this._streams[f.id]},t.RTCPeerConnection.prototype.addTrack=function(f,m){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const g=[].slice.call(arguments,1);if(g.length!==1||!g[0].getTracks().find(x=>x===f))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(x=>x.track===f))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const C=this._streams[m.id];if(C)C.addTrack(f),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const x=new t.MediaStream([f]);this._streams[m.id]=x,this._reverseStreams[x.id]=m,this.addStream(x)}return this.getSenders().find(x=>x.track===f)};function s(d,f){let m=f.sdp;return Object.keys(d._reverseStreams||[]).forEach(g=>{const y=d._reverseStreams[g],C=d._streams[y.id];m=m.replace(new RegExp(C.id,"g"),y.id)}),new RTCSessionDescription({type:f.type,sdp:m})}function o(d,f){let m=f.sdp;return Object.keys(d._reverseStreams||[]).forEach(g=>{const y=d._reverseStreams[g],C=d._streams[y.id];m=m.replace(new RegExp(y.id,"g"),C.id)}),new RTCSessionDescription({type:f.type,sdp:m})}["createOffer","createAnswer"].forEach(function(d){const f=t.RTCPeerConnection.prototype[d],m={[d](){const g=arguments;return arguments.length&&typeof arguments[0]=="function"?f.apply(this,[C=>{const x=s(this,C);g[0].apply(null,[x])},C=>{g[1]&&g[1].apply(null,C)},arguments[2]]):f.apply(this,arguments).then(C=>s(this,C))}};t.RTCPeerConnection.prototype[d]=m[d]});const l=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?l.apply(this,arguments):(arguments[0]=o(this,arguments[0]),l.apply(this,arguments))};const u=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const d=u.get.apply(this);return d.type===""?d:s(this,d)}}),t.RTCPeerConnection.prototype.removeTrack=function(f){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!f._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(f._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let g;Object.keys(this._streams).forEach(y=>{this._streams[y].getTracks().find(x=>f.track===x)&&(g=this._streams[y])}),g&&(g.getTracks().length===1?this.removeStream(this._reverseStreams[g.id]):g.removeTrack(f.track),this.dispatchEvent(new Event("negotiationneeded")))}}function nb(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=t.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=i[n]})}function _j(t,e){el(t,"negotiationneeded",n=>{const r=n.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}var WP=Object.freeze({__proto__:null,fixNegotiationNeeded:_j,shimAddTrackRemoveTrack:Pj,shimAddTrackRemoveTrackWithNative:Ej,shimGetSendersWithDtmf:Cj,shimGetUserMedia:wj,shimMediaStream:kj,shimOnTrack:Sj,shimPeerConnection:nb,shimSenderReceiverGetStats:Tj});function Ij(t,e){const n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(i,s,o){Mw("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(s,o)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(o,l,u){l in o&&!(u in o)&&(o[u]=o[l],delete o[l])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),i(o.audio,"autoGainControl","mozAutoGainControl"),i(o.audio,"noiseSuppression","mozNoiseSuppression")),s(o)},r&&r.prototype.getSettings){const o=r.prototype.getSettings;r.prototype.getSettings=function(){const l=o.apply(this,arguments);return i(l,"mozAutoGainControl","autoGainControl"),i(l,"mozNoiseSuppression","noiseSuppression"),l}}if(r&&r.prototype.applyConstraints){const o=r.prototype.applyConstraints;r.prototype.applyConstraints=function(l){return this.kind==="audio"&&typeof l=="object"&&(l=JSON.parse(JSON.stringify(l)),i(l,"autoGainControl","mozAutoGainControl"),i(l,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[l])}}}}function yte(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(r)})}function Nj(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function rb(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=t.RTCPeerConnection.prototype[i],o={[i](){return arguments[0]=new(i==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};t.RTCPeerConnection.prototype[i]=o[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[s,o,l]=arguments;return r.apply(this,[s||null]).then(u=>{if(e.version<53&&!o)try{u.forEach(d=>{d.type=n[d.type]||d.type})}catch(d){if(d.name!=="TypeError")throw d;u.forEach((f,m)=>{u.set(m,Object.assign({},f,{type:n[f.type]||f.type}))})}return u}).then(o,l)}}function Aj(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(s=>s._pc=this),i});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Rj(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r}),el(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Mj(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){Mw("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function Dj(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function jj(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=e.apply(this,arguments);if(i){const{sender:o}=s,l=o.getParameters();(!("encodings"in l)||l.encodings.length===1&&Object.keys(l.encodings[0]).length===0)&&(l.encodings=r,o.sendEncodings=r,this.setParametersPromises.push(o.setParameters(l).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return s})}function Oj(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function Lj(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function Fj(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}var HP=Object.freeze({__proto__:null,shimAddTransceiver:jj,shimCreateAnswer:Fj,shimCreateOffer:Lj,shimGetDisplayMedia:yte,shimGetParameters:Oj,shimGetUserMedia:Ij,shimOnTrack:Nj,shimPeerConnection:rb,shimRTCDataChannel:Dj,shimReceiverGetStats:Rj,shimRemoveStream:Mj,shimSenderGetStats:Aj});function Uj(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>e.call(this,i,r)),r.getVideoTracks().forEach(i=>e.call(this,i,r))},t.RTCPeerConnection.prototype.addTrack=function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return s&&s.forEach(l=>{this._localStreams?this._localStreams.includes(l)||this._localStreams.push(l):this._localStreams=[l]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function Bj(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const o=new Event("addstream");o.stream=s,r.dispatchEvent(o)})}),e.apply(r,arguments)}}}function Vj(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,s=e.setRemoteDescription,o=e.addIceCandidate;e.createOffer=function(d,f){const m=arguments.length>=2?arguments[2]:arguments[0],g=n.apply(this,[m]);return f?(g.then(d,f),Promise.resolve()):g},e.createAnswer=function(d,f){const m=arguments.length>=2?arguments[2]:arguments[0],g=r.apply(this,[m]);return f?(g.then(d,f),Promise.resolve()):g};let l=function(u,d,f){const m=i.apply(this,[u]);return f?(m.then(d,f),Promise.resolve()):m};e.setLocalDescription=l,l=function(u,d,f){const m=s.apply(this,[u]);return f?(m.then(d,f),Promise.resolve()):m},e.setRemoteDescription=l,l=function(u,d,f){const m=o.apply(this,[u]);return f?(m.then(d,f),Promise.resolve()):m},e.addIceCandidate=l}function zj(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=i=>r($j(i))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(r,i,s){e.mediaDevices.getUserMedia(r).then(i,s)}).bind(e))}function $j(t){return t&&t.video!==void 0?Object.assign({},t,{video:xj(t.video)}):t}function Wj(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const s=[];for(let o=0;o<r.iceServers.length;o++){let l=r.iceServers[o];l.urls===void 0&&l.url?(Mw("RTCIceServer.url","RTCIceServer.urls"),l=JSON.parse(JSON.stringify(l)),l.urls=l.url,delete l.url,s.push(l)):s.push(r.iceServers[o])}r.iceServers=s}return new e(r,i)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function Hj(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function qj(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(o=>o.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function Gj(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}var qP=Object.freeze({__proto__:null,shimAudioContext:Gj,shimCallbacksAPI:Vj,shimConstraints:$j,shimCreateOfferLegacy:qj,shimGetUserMedia:zj,shimLocalStreamsAPI:Uj,shimRTCIceServerUrls:Wj,shimRemoteStreamsAPI:Bj,shimTrackEventTransceiver:Hj}),Ry={exports:{}},GP;function bte(){return GP||(GP=1,(function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},e.splitSections=function(n){return n.split(`
m=`).map((i,s)=>(s>0?"m="+i:i).trim()+`\r
`)},e.getDescription=function(n){const r=e.splitSections(n);return r&&r[0]},e.getMediaSections=function(n){const r=e.splitSections(n);return r.shift(),r},e.matchPrefix=function(n,r){return e.splitLines(n).filter(i=>i.indexOf(r)===0)},e.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let s=8;s<r.length;s+=2)switch(r[s]){case"raddr":i.relatedAddress=r[s+1];break;case"rport":i.relatedPort=parseInt(r[s+1],10);break;case"tcptype":i.tcpType=r[s+1];break;case"ufrag":i.ufrag=r[s+1],i.usernameFragment=r[s+1];break;default:i[r[s]]===void 0&&(i[r[s]]=r[s+1]);break}return i},e.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const s=n.type;return r.push("typ"),r.push(s),s!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},e.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},e.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const r={};let i;const s=n.substring(n.indexOf(" ")+1).split(";");for(let o=0;o<s.length;o++)i=s[o].trim().split("="),r[i[0].trim()]=i[1];return r},e.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const s=[];Object.keys(n.parameters).forEach(o=>{n.parameters[o]!==void 0?s.push(o+"="+n.parameters[o]):s.push(o)}),r+="a=fmtp:"+i+" "+s.join(";")+`\r
`}return r},e.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(s=>{r+="a=rtcp-fb:"+i+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},s=n.indexOf(":",r);return s>-1?(i.attribute=n.substring(r+1,s),i.value=n.substring(s+1)):i.attribute=n.substring(r+1),i},e.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},e.getMid=function(n){const r=e.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},e.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},e.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:e.matchPrefix(n+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(s=>{i+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),i},e.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,r){return e.matchPrefix(n+r,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,r){const i=e.matchPrefix(n+r,"a=ice-ufrag:")[0],s=e.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&s?{usernameFragment:i.substring(12),password:s.substring(10)}:null},e.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},e.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=e.splitLines(n)[0].split(" ");r.profile=s[2];for(let l=3;l<s.length;l++){const u=s[l],d=e.matchPrefix(n,"a=rtpmap:"+u+" ")[0];if(d){const f=e.parseRtpMap(d),m=e.matchPrefix(n,"a=fmtp:"+u+" ");switch(f.parameters=m.length?e.parseFmtp(m[0]):{},f.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+u+" ").map(e.parseRtcpFb),r.codecs.push(f),f.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(f.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(l=>{r.headerExtensions.push(e.parseExtmap(l))});const o=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return r.codecs.forEach(l=>{o.forEach(u=>{l.rtcpFeedback.find(f=>f.type===u.type&&f.parameter===u.parameter)||l.rtcpFeedback.push(u)})}),r},e.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(o=>o.preferredPayloadType!==void 0?o.preferredPayloadType:o.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(o=>{i+=e.writeRtpMap(o),i+=e.writeFmtp(o),i+=e.writeRtcpFb(o)});let s=0;return r.codecs.forEach(o=>{o.maxptime>s&&(s=o.maxptime)}),s>0&&(i+="a=maxptime:"+s+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(o=>{i+=e.writeExtmap(o)}),i},e.parseRtpEncodingParameters=function(n){const r=[],i=e.parseRtpParameters(n),s=i.fecMechanisms.indexOf("RED")!==-1,o=i.fecMechanisms.indexOf("ULPFEC")!==-1,l=e.matchPrefix(n,"a=ssrc:").map(g=>e.parseSsrcMedia(g)).filter(g=>g.attribute==="cname"),u=l.length>0&&l[0].ssrc;let d;const f=e.matchPrefix(n,"a=ssrc-group:FID").map(g=>g.substring(17).split(" ").map(C=>parseInt(C,10)));f.length>0&&f[0].length>1&&f[0][0]===u&&(d=f[0][1]),i.codecs.forEach(g=>{if(g.name.toUpperCase()==="RTX"&&g.parameters.apt){let y={ssrc:u,codecPayloadType:parseInt(g.parameters.apt,10)};u&&d&&(y.rtx={ssrc:d}),r.push(y),s&&(y=JSON.parse(JSON.stringify(y)),y.fec={ssrc:u,mechanism:o?"red+ulpfec":"red"},r.push(y))}}),r.length===0&&u&&r.push({ssrc:u});let m=e.matchPrefix(n,"b=");return m.length&&(m[0].indexOf("b=TIAS:")===0?m=parseInt(m[0].substring(7),10):m[0].indexOf("b=AS:")===0?m=parseInt(m[0].substring(5),10)*1e3*.95-2e3*8:m=void 0,r.forEach(g=>{g.maxBitrate=m})),r},e.parseRtcpParameters=function(n){const r={},i=e.matchPrefix(n,"a=ssrc:").map(l=>e.parseSsrcMedia(l)).filter(l=>l.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const s=e.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=s.length===0;const o=e.matchPrefix(n,"a=rtcp-mux");return r.mux=o.length>0,r},e.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},e.parseMsid=function(n){let r;const i=e.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const s=e.matchPrefix(n,"a=ssrc:").map(o=>e.parseSsrcMedia(o)).filter(o=>o.attribute==="msid");if(s.length>0)return r=s[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(n){const r=e.parseMLine(n),i=e.matchPrefix(n,"a=max-message-size:");let s;i.length>0&&(s=parseInt(i[0].substring(19),10)),isNaN(s)&&(s=65536);const o=e.matchPrefix(n,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:r.fmt,maxMessageSize:s};const l=e.matchPrefix(n,"a=sctpmap:");if(l.length>0){const u=l[0].substring(10).split(" ");return{port:parseInt(u[0],10),protocol:u[1],maxMessageSize:s}}},e.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,r,i){let s;const o=r!==void 0?r:2;return n?s=n:s=e.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+s+" "+o+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,r){const i=e.splitLines(n);for(let s=0;s<i.length;s++)switch(i[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[s].substring(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const i=e.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},e.parseOLine=function(n){const i=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=e.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},t.exports=e})(Ry)),Ry.exports}var Kj=bte(),tc=ate(Kj),xte=IZ({__proto__:null,default:tc},[Kj]);function rp(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new e(r),s=tc.parseCandidate(r.candidate);for(const o in s)o in i||Object.defineProperty(i,o,{value:s[o]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new e(r)},t.RTCIceCandidate.prototype=e.prototype,el(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function ib(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||el(t,"icecandidate",e=>{if(e.candidate){const n=tc.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function ip(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(l){if(!l||!l.sdp)return!1;const u=tc.splitSections(l.sdp);return u.shift(),u.some(d=>{const f=tc.parseMLine(d);return f&&f.kind==="application"&&f.protocol.indexOf("SCTP")!==-1})},r=function(l){const u=l.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(u===null||u.length<2)return-1;const d=parseInt(u[1],10);return d!==d?-1:d},i=function(l){let u=65536;return e.browser==="firefox"&&(e.version<57?l===-1?u=16384:u=2147483637:e.version<60?u=e.version===57?65535:65536:u=2147483637),u},s=function(l,u){let d=65536;e.browser==="firefox"&&e.version===57&&(d=65535);const f=tc.matchPrefix(l.sdp,"a=max-message-size:");return f.length>0?d=parseInt(f[0].substring(19),10):e.browser==="firefox"&&u!==-1&&(d=2147483637),d},o=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:u}=this.getConfiguration();u==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const u=r(arguments[0]),d=i(u),f=s(arguments[0],u);let m;d===0&&f===0?m=Number.POSITIVE_INFINITY:d===0||f===0?m=Math.max(d,f):m=Math.min(d,f);const g={};Object.defineProperty(g,"maxMessageSize",{get(){return m}}),this._sctp=g}return o.apply(this,arguments)}}function sp(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,i){const s=r.send;r.send=function(){const l=arguments[0],u=l.length||l.size||l.byteLength;if(r.readyState==="open"&&i.sctp&&u>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return e(i,this),i},el(t,"datachannel",r=>(e(r.channel,r.target),r))}function sb(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const o=new Event("connectionstatechange",i);s.dispatchEvent(o)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function ob(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=i.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&i instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return n.apply(this,arguments)}}function op(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function ap(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(o=>n.apply(this,[o]))})}var wte=Object.freeze({__proto__:null,removeExtmapAllowMixed:ob,shimAddIceCandidateNullOrEmpty:op,shimConnectionState:sb,shimMaxMessageSize:ip,shimParameterlessSetLocalDescription:ap,shimRTCIceCandidate:rp,shimRTCIceCandidateRelayProtocol:ib,shimSendThrowTypeError:sp});function kte(){let{window:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=bj,r=vte(t),i={browserDetails:r,commonShim:wte,extractVersion:Uu,disableLog:mte,disableWarnings:gte,sdp:xte};switch(r.browser){case"chrome":if(!WP||!nb||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=WP,op(t,r),ap(t),wj(t,r),kj(t),nb(t,r),Sj(t),Pj(t,r),Cj(t),Tj(t),_j(t,r),rp(t),ib(t),sb(t),ip(t,r),sp(t),ob(t,r);break;case"firefox":if(!HP||!rb||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=HP,op(t,r),ap(t),Ij(t,r),rb(t,r),Nj(t),Mj(t),Aj(t),Rj(t),Dj(t),jj(t),Oj(t),Lj(t),Fj(t),rp(t),sb(t),ip(t,r),sp(t);break;case"safari":if(!qP||!e.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=qP,op(t,r),ap(t),Wj(t),qj(t),Vj(t),Uj(t),Bj(t),Hj(t),zj(t),Gj(t),rp(t),ib(t),ip(t,r),sp(t),ob(t,r);break;default:n("Unsupported browser!");break}return i}kte({window:typeof window>"u"?void 0:window});const Ste=/version\/(\d+(\.?_?\d+)+)/i;let My;function ar(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof navigator>"u")return;const n=navigator.userAgent.toLowerCase();if(My===void 0||e){const r=Cte.find(i=>{let{test:s}=i;return s.test(n)});My=r==null?void 0:r.describe(n)}return My}const Cte=[{test:/firefox|iceweasel|fxios/i,describe(t){return{name:"Firefox",version:lp(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("fxios")?"iOS":void 0,osVersion:Dy(t)}}},{test:/chrom|crios|crmo/i,describe(t){return{name:"Chrome",version:lp(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("crios")?"iOS":void 0,osVersion:Dy(t)}}},{test:/safari|applewebkit/i,describe(t){return{name:"Safari",version:lp(Ste,t),os:t.includes("mobile/")?"iOS":"macOS",osVersion:Dy(t)}}}];function lp(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const r=e.match(t);return r&&r.length>=n&&r[n]||""}function Dy(t){return t.includes("mac os")?lp(/\(.+?(\d+_\d+(:?_\d+)?)/,t,1).replace(/_/g,"."):void 0}var Tte="2.16.1";const Ete=Tte,Pte=16;class es extends Error{constructor(e,n){super(n||"an error has occured"),this.name="LiveKitError",this.code=e}}var Mt;(function(t){t[t.NotAllowed=0]="NotAllowed",t[t.ServerUnreachable=1]="ServerUnreachable",t[t.InternalError=2]="InternalError",t[t.Cancelled=3]="Cancelled",t[t.LeaveRequest=4]="LeaveRequest",t[t.Timeout=5]="Timeout",t[t.WebSocket=6]="WebSocket"})(Mt||(Mt={}));class Ke extends es{constructor(e,n,r,i){super(1,e),this.name="ConnectionError",this.status=r,this.reason=n,this.context=i,this.reasonName=Mt[n]}static notAllowed(e,n,r){return new Ke(e,Mt.NotAllowed,n,r)}static timeout(e){return new Ke(e,Mt.Timeout)}static leaveRequest(e,n){return new Ke(e,Mt.LeaveRequest,void 0,n)}static internal(e,n){return new Ke(e,Mt.InternalError,void 0,n)}static cancelled(e){return new Ke(e,Mt.Cancelled)}static serverUnreachable(e,n){return new Ke(e,Mt.ServerUnreachable,n)}static websocket(e,n,r){return new Ke(e,Mt.WebSocket,n,r)}}class Dw extends es{constructor(e){super(21,e??"device is unsupported"),this.name="DeviceUnsupportedError"}}class bs extends es{constructor(e){super(20,e??"track is invalid"),this.name="TrackInvalidError"}}class _te extends es{constructor(e){super(10,e??"unsupported server"),this.name="UnsupportedServer"}}class dn extends es{constructor(e){super(12,e??"unexpected connection state"),this.name="UnexpectedConnectionState"}}class ab extends es{constructor(e){super(13,e??"unable to negotiate"),this.name="NegotiationError"}}class KP extends es{constructor(e,n){super(15,e),this.name="PublishTrackError",this.status=n}}class YP extends es{constructor(e,n){super(15,e),this.name="SignalRequestError",this.reason=n,this.reasonName=typeof n=="string"?n:Rw[n]}}var zn;(function(t){t[t.AlreadyOpened=0]="AlreadyOpened",t[t.AbnormalEnd=1]="AbnormalEnd",t[t.DecodeFailed=2]="DecodeFailed",t[t.LengthExceeded=3]="LengthExceeded",t[t.Incomplete=4]="Incomplete",t[t.HandlerAlreadyRegistered=7]="HandlerAlreadyRegistered",t[t.EncryptionTypeMismatch=8]="EncryptionTypeMismatch"})(zn||(zn={}));class Lr extends es{constructor(e,n){super(16,e),this.name="DataStreamError",this.reason=n,this.reasonName=zn[n]}}class Ml extends es{constructor(e){super(18,e),this.name="SignalReconnectError"}}var zp;(function(t){t.PermissionDenied="PermissionDenied",t.NotFound="NotFound",t.DeviceInUse="DeviceInUse",t.Other="Other"})(zp||(zp={}));(function(t){function e(n){if(n&&"name"in n)return n.name==="NotFoundError"||n.name==="DevicesNotFoundError"?t.NotFound:n.name==="NotAllowedError"||n.name==="PermissionDeniedError"?t.PermissionDenied:n.name==="NotReadableError"||n.name==="TrackStartError"?t.DeviceInUse:t.Other}t.getFailure=e})(zp||(zp={}));class Tn{}Tn.setTimeout=function(){return setTimeout(...arguments)};Tn.setInterval=function(){return setInterval(...arguments)};Tn.clearTimeout=function(){return clearTimeout(...arguments)};Tn.clearInterval=function(){return clearInterval(...arguments)};var me;(function(t){t.Connected="connected",t.Reconnecting="reconnecting",t.SignalReconnecting="signalReconnecting",t.Reconnected="reconnected",t.Disconnected="disconnected",t.ConnectionStateChanged="connectionStateChanged",t.Moved="moved",t.MediaDevicesChanged="mediaDevicesChanged",t.ParticipantConnected="participantConnected",t.ParticipantDisconnected="participantDisconnected",t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalAudioSilenceDetected="localAudioSilenceDetected",t.ActiveSpeakersChanged="activeSpeakersChanged",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.ParticipantAttributesChanged="participantAttributesChanged",t.ParticipantActive="participantActive",t.RoomMetadataChanged="roomMetadataChanged",t.DataReceived="dataReceived",t.SipDTMFReceived="sipDTMFReceived",t.TranscriptionReceived="transcriptionReceived",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.AudioPlaybackStatusChanged="audioPlaybackChanged",t.VideoPlaybackStatusChanged="videoPlaybackChanged",t.MediaDevicesError="mediaDevicesError",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.SignalConnected="signalConnected",t.RecordingStatusChanged="recordingStatusChanged",t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ActiveDeviceChanged="activeDeviceChanged",t.ChatMessage="chatMessage",t.LocalTrackSubscribed="localTrackSubscribed",t.MetricsReceived="metricsReceived"})(me||(me={}));var Te;(function(t){t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalTrackCpuConstrained="localTrackCpuConstrained",t.LocalSenderCreated="localSenderCreated",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.DataReceived="dataReceived",t.SipDTMFReceived="sipDTMFReceived",t.TranscriptionReceived="transcriptionReceived",t.IsSpeakingChanged="isSpeakingChanged",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.TrackCpuConstrained="trackCpuConstrained",t.MediaDevicesError="mediaDevicesError",t.AudioStreamAcquired="audioStreamAcquired",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.PCTrackAdded="pcTrackAdded",t.AttributesChanged="attributesChanged",t.LocalTrackSubscribed="localTrackSubscribed",t.ChatMessage="chatMessage",t.Active="active"})(Te||(Te={}));var ke;(function(t){t.TransportsCreated="transportsCreated",t.Connected="connected",t.Disconnected="disconnected",t.Resuming="resuming",t.Resumed="resumed",t.Restarting="restarting",t.Restarted="restarted",t.SignalResumed="signalResumed",t.SignalRestarted="signalRestarted",t.Closing="closing",t.MediaTrackAdded="mediaTrackAdded",t.ActiveSpeakersUpdate="activeSpeakersUpdate",t.DataPacketReceived="dataPacketReceived",t.RTPVideoMapUpdate="rtpVideoMapUpdate",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ParticipantUpdate="participantUpdate",t.RoomUpdate="roomUpdate",t.SpeakersChanged="speakersChanged",t.StreamStateChanged="streamStateChanged",t.ConnectionQualityUpdate="connectionQualityUpdate",t.SubscriptionError="subscriptionError",t.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",t.RemoteMute="remoteMute",t.SubscribedQualityUpdate="subscribedQualityUpdate",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalTrackSubscribed="localTrackSubscribed",t.Offline="offline",t.SignalRequestResponse="signalRequestResponse",t.SignalConnected="signalConnected",t.RoomMoved="roomMoved"})(ke||(ke={}));var we;(function(t){t.Message="message",t.Muted="muted",t.Unmuted="unmuted",t.Restarted="restarted",t.Ended="ended",t.Subscribed="subscribed",t.Unsubscribed="unsubscribed",t.CpuConstrained="cpuConstrained",t.UpdateSettings="updateSettings",t.UpdateSubscription="updateSubscription",t.AudioPlaybackStarted="audioPlaybackStarted",t.AudioPlaybackFailed="audioPlaybackFailed",t.AudioSilenceDetected="audioSilenceDetected",t.VisibilityChanged="visibilityChanged",t.VideoDimensionsChanged="videoDimensionsChanged",t.VideoPlaybackStarted="videoPlaybackStarted",t.VideoPlaybackFailed="videoPlaybackFailed",t.ElementAttached="elementAttached",t.ElementDetached="elementDetached",t.UpstreamPaused="upstreamPaused",t.UpstreamResumed="upstreamResumed",t.SubscriptionPermissionChanged="subscriptionPermissionChanged",t.SubscriptionStatusChanged="subscriptionStatusChanged",t.SubscriptionFailed="subscriptionFailed",t.TrackProcessorUpdate="trackProcessorUpdate",t.AudioTrackFeatureUpdate="audioTrackFeatureUpdate",t.TranscriptionReceived="transcriptionReceived",t.TimeSyncUpdate="timeSyncUpdate",t.PreConnectBufferFlushed="preConnectBufferFlushed"})(we||(we={}));function Ite(t){return typeof t>"u"?t:typeof structuredClone=="function"?typeof t=="object"&&t!==null?structuredClone(Object.assign({},t)):structuredClone(t):JSON.parse(JSON.stringify(t))}class Tt{constructor(e,n,r,i,s){if(typeof e=="object")this.width=e.width,this.height=e.height,this.aspectRatio=e.aspectRatio,this.encoding={maxBitrate:e.maxBitrate,maxFramerate:e.maxFramerate,priority:e.priority};else if(n!==void 0&&r!==void 0)this.width=e,this.height=n,this.aspectRatio=e/n,this.encoding={maxBitrate:r,maxFramerate:i,priority:s};else throw new TypeError("Unsupported options: provide at least width, height and maxBitrate")}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.aspectRatio}}}const Nte=["vp8","h264"],Ate=["vp8","h264","vp9","av1","h265"];function Rte(t){return!!Nte.find(e=>e===t)}const Mte=Rte;var JP;(function(t){t[t.PREFER_REGRESSION=0]="PREFER_REGRESSION",t[t.SIMULCAST=1]="SIMULCAST",t[t.REGRESSION=2]="REGRESSION"})(JP||(JP={}));var lb;(function(t){t.telephone={maxBitrate:12e3},t.speech={maxBitrate:24e3},t.music={maxBitrate:48e3},t.musicStereo={maxBitrate:64e3},t.musicHighQuality={maxBitrate:96e3},t.musicHighQualityStereo={maxBitrate:128e3}})(lb||(lb={}));const Cd={h90:new Tt(160,90,9e4,20),h180:new Tt(320,180,16e4,20),h216:new Tt(384,216,18e4,20),h360:new Tt(640,360,45e4,20),h540:new Tt(960,540,8e5,25),h720:new Tt(1280,720,17e5,30),h1080:new Tt(1920,1080,3e6,30),h1440:new Tt(2560,1440,5e6,30),h2160:new Tt(3840,2160,8e6,30)},cb={h120:new Tt(160,120,7e4,20),h180:new Tt(240,180,125e3,20),h240:new Tt(320,240,14e4,20),h360:new Tt(480,360,33e4,20),h480:new Tt(640,480,5e5,20),h540:new Tt(720,540,6e5,25),h720:new Tt(960,720,13e5,30),h1080:new Tt(1440,1080,23e5,30),h1440:new Tt(1920,1440,38e5,30)},jw={h360fps3:new Tt(640,360,2e5,3,"medium"),h360fps15:new Tt(640,360,4e5,15,"medium"),h720fps5:new Tt(1280,720,8e5,5,"medium"),h720fps15:new Tt(1280,720,15e5,15,"medium"),h720fps30:new Tt(1280,720,2e6,30,"medium"),h1080fps15:new Tt(1920,1080,25e5,15,"medium"),h1080fps30:new Tt(1920,1080,5e6,30,"medium"),original:new Tt(0,0,7e6,30,"medium")};function Yj(t,e,n){var r,i,s,o;const{optionsWithoutProcessor:l,audioProcessor:u,videoProcessor:d}=Xj(t??{}),f=e==null?void 0:e.processor,m=n==null?void 0:n.processor,g=l??{};return g.audio===!0&&(g.audio={}),g.video===!0&&(g.video={}),g.audio&&(ub(g.audio,e),(r=(s=g.audio).deviceId)!==null&&r!==void 0||(s.deviceId={ideal:"default"}),(u||f)&&(g.audio.processor=u??f)),g.video&&(ub(g.video,n),(i=(o=g.video).deviceId)!==null&&i!==void 0||(o.deviceId={ideal:"default"}),(d||m)&&(g.video.processor=d??m)),g}function ub(t,e){return Object.keys(e).forEach(n=>{t[n]===void 0&&(t[n]=e[n])}),t}function Ow(t){var e,n,r,i;const s={};if(t.video)if(typeof t.video=="object"){const o={},l=o,u=t.video;Object.keys(u).forEach(d=>{switch(d){case"resolution":ub(l,u.resolution);break;default:l[d]=u[d]}}),s.video=o,(e=(r=s.video).deviceId)!==null&&e!==void 0||(r.deviceId={ideal:"default"})}else s.video=t.video?{deviceId:{ideal:"default"}}:!1;else s.video=!1;return t.audio?typeof t.audio=="object"?(s.audio=t.audio,(n=(i=s.audio).deviceId)!==null&&n!==void 0||(i.deviceId={ideal:"default"})):s.audio={deviceId:{ideal:"default"}}:s.audio=!1,s}function Jj(t){return V(this,arguments,void 0,function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return(function*(){const r=Qj();if(r){const i=r.createAnalyser();i.fftSize=2048;const s=i.frequencyBinCount,o=new Uint8Array(s);r.createMediaStreamSource(new MediaStream([e.mediaStreamTrack])).connect(i),yield En(n),i.getByteTimeDomainData(o);const u=o.some(d=>d!==128&&d!==0);return r.close(),!u}return!1})()})}function Qj(){var t;const e=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(e){const n=new e({latencyHint:"interactive"});if(n.state==="suspended"&&typeof window<"u"&&(!((t=window.document)===null||t===void 0)&&t.body)){const r=()=>V(this,void 0,void 0,function*(){var i;try{n.state==="suspended"&&(yield n.resume())}catch(s){console.warn("Error trying to auto-resume audio context",s)}finally{(i=window.document.body)===null||i===void 0||i.removeEventListener("click",r)}});n.addEventListener("statechange",()=>{var i;n.state==="closed"&&((i=window.document.body)===null||i===void 0||i.removeEventListener("click",r))}),window.document.body.addEventListener("click",r)}return n}}function Dte(t){return t==="audioinput"?ue.Source.Microphone:t==="videoinput"?ue.Source.Camera:ue.Source.Unknown}function db(t){return t===ue.Source.Microphone?"audioinput":t===ue.Source.Camera?"videoinput":void 0}function jte(t){var e,n;let r=(e=t.video)!==null&&e!==void 0?e:!0;return t.resolution&&t.resolution.width>0&&t.resolution.height>0&&(r=typeof r=="boolean"?{}:r,Va()?r=Object.assign(Object.assign({},r),{width:{max:t.resolution.width},height:{max:t.resolution.height},frameRate:t.resolution.frameRate}):r=Object.assign(Object.assign({},r),{width:{ideal:t.resolution.width},height:{ideal:t.resolution.height},frameRate:t.resolution.frameRate})),{audio:(n=t.audio)!==null&&n!==void 0?n:!1,video:r,controller:t.controller,selfBrowserSurface:t.selfBrowserSurface,surfaceSwitching:t.surfaceSwitching,systemAudio:t.systemAudio,preferCurrentTab:t.preferCurrentTab}}function sd(t){return t.split("/")[1].toLowerCase()}function Ote(t){const e=[];return t.forEach(n=>{n.track!==void 0&&e.push(new Pw({cid:n.track.mediaStreamID,track:n.trackInfo}))}),e}function dt(t){return"mediaStreamTrack"in t?{trackID:t.sid,source:t.source,muted:t.isMuted,enabled:t.mediaStreamTrack.enabled,kind:t.kind,streamID:t.mediaStreamID,streamTrackID:t.mediaStreamTrack.id}:{trackID:t.trackSid,enabled:t.isEnabled,muted:t.isMuted,trackInfo:Object.assign({mimeType:t.mimeType,name:t.trackName,encrypted:t.isEncrypted,kind:t.kind,source:t.source},t.track?dt(t.track):{})}}function Lte(){return typeof RTCRtpReceiver<"u"&&"getSynchronizationSources"in RTCRtpReceiver}function Fte(t,e){var n;t===void 0&&(t={}),e===void 0&&(e={});const r=[...Object.keys(e),...Object.keys(t)],i={};for(const s of r)t[s]!==e[s]&&(i[s]=(n=e[s])!==null&&n!==void 0?n:"");return i}function Xj(t){const e=Object.assign({},t);let n,r;return typeof e.audio=="object"&&e.audio.processor&&(n=e.audio.processor,e.audio=Object.assign(Object.assign({},e.audio),{processor:void 0})),typeof e.video=="object"&&e.video.processor&&(r=e.video.processor,e.video=Object.assign(Object.assign({},e.video),{processor:void 0})),{audioProcessor:n,videoProcessor:r,optionsWithoutProcessor:Ite(e)}}function Ute(t){switch(t){case nn.CAMERA:return ue.Source.Camera;case nn.MICROPHONE:return ue.Source.Microphone;case nn.SCREEN_SHARE:return ue.Source.ScreenShare;case nn.SCREEN_SHARE_AUDIO:return ue.Source.ScreenShareAudio;default:return ue.Source.Unknown}}function QP(t,e){return t.width*t.height<e.width*e.height}function Bte(t,e){var n;return(n=t.layers)===null||n===void 0?void 0:n.find(r=>r.quality===e)}const Vte=5e3,Iu=[];var yr;(function(t){t[t.LOW=0]="LOW",t[t.MEDIUM=1]="MEDIUM",t[t.HIGH=2]="HIGH"})(yr||(yr={}));class ue extends Zi.EventEmitter{get streamState(){return this._streamState}setStreamState(e){this._streamState=e}constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var i;super(),this.attachedElements=[],this.isMuted=!1,this._streamState=ue.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=nt,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),Vte):this.handleAppVisibilityChanged()},this.log=Ms((i=r.loggerName)!==null&&i!==void 0?i:mi.Track),this.loggerContextCb=r.loggerContextCb,this.setMaxListeners(100),this.kind=n,this._mediaStreamTrack=e,this._mediaStreamID=e.id,this.source=ue.Source.Unknown}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),dt(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(e){let n="audio";this.kind===ue.Kind.Video&&(n="video"),this.attachedElements.length===0&&this.kind===ue.Kind.Video&&this.addAppVisibilityListener(),e||(n==="audio"&&(Iu.forEach(s=>{s.parentElement===null&&!e&&(e=s)}),e&&Iu.splice(Iu.indexOf(e),1)),e||(e=document.createElement(n))),this.attachedElements.includes(e)||this.attachedElements.push(e),$l(this.mediaStreamTrack,e);const r=e.srcObject.getTracks(),i=r.some(s=>s.kind==="audio");return e.play().then(()=>{this.emit(i?we.AudioPlaybackStarted:we.VideoPlaybackStarted)}).catch(s=>{s.name==="NotAllowedError"?this.emit(i?we.AudioPlaybackFailed:we.VideoPlaybackFailed,s):s.name==="AbortError"?nt.debug("".concat(i?"audio":"video"," playback aborted, likely due to new play request")):nt.warn("could not playback ".concat(i?"audio":"video"),s),i&&e&&r.some(o=>o.kind==="video")&&s.name==="NotAllowedError"&&(e.muted=!0,e.play().catch(()=>{}))}),this.emit(we.ElementAttached,e),e}detach(e){try{if(e){nc(this.mediaStreamTrack,e);const r=this.attachedElements.indexOf(e);return r>=0&&(this.attachedElements.splice(r,1),this.recycleElement(e),this.emit(we.ElementDetached,e)),e}const n=[];return this.attachedElements.forEach(r=>{nc(this.mediaStreamTrack,r),n.push(r),this.recycleElement(r),this.emit(we.ElementDetached,r)}),this.attachedElements=[],n}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval),this.timeSyncHandle&&cancelAnimationFrame(this.timeSyncHandle)}updateLoggerOptions(e){e.loggerName&&(this.log=Ms(e.loggerName)),e.loggerContextCb&&(this.loggerContextCb=e.loggerContextCb)}recycleElement(e){if(e instanceof HTMLAudioElement){let n=!0;e.pause(),Iu.forEach(r=>{r.parentElement||(n=!1)}),n&&Iu.push(e)}}handleAppVisibilityChanged(){return V(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden",!this.isInBackground&&this.kind===ue.Kind.Video&&setTimeout(()=>this.attachedElements.forEach(e=>e.play().catch(()=>{})),0)})}addAppVisibilityListener(){sr()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){sr()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function $l(t,e){let n;e.srcObject instanceof MediaStream?n=e.srcObject:n=new MediaStream;let r;t.kind==="audio"?r=n.getAudioTracks():r=n.getVideoTracks(),r.includes(t)||(r.forEach(i=>{n.removeTrack(i)}),n.addTrack(t)),(!Va()||!(e instanceof HTMLVideoElement))&&(e.autoplay=!0),e.muted=n.getAudioTracks().length===0,e instanceof HTMLVideoElement&&(e.playsInline=!0),e.srcObject!==n&&(e.srcObject=n,(Va()||Ba())&&e instanceof HTMLVideoElement&&setTimeout(()=>{e.srcObject=n,e.play().catch(()=>{})},0))}function nc(t,e){if(e.srcObject instanceof MediaStream){const n=e.srcObject;n.removeTrack(t),n.getTracks().length>0?e.srcObject=n:e.srcObject=null}}(function(t){let e;(function(d){d.Audio="audio",d.Video="video",d.Unknown="unknown"})(e=t.Kind||(t.Kind={}));let n;(function(d){d.Camera="camera",d.Microphone="microphone",d.ScreenShare="screen_share",d.ScreenShareAudio="screen_share_audio",d.Unknown="unknown"})(n=t.Source||(t.Source={}));let r;(function(d){d.Active="active",d.Paused="paused",d.Unknown="unknown"})(r=t.StreamState||(t.StreamState={}));function i(d){switch(d){case e.Audio:return li.AUDIO;case e.Video:return li.VIDEO;default:return li.DATA}}t.kindToProto=i;function s(d){switch(d){case li.AUDIO:return e.Audio;case li.VIDEO:return e.Video;default:return e.Unknown}}t.kindFromProto=s;function o(d){switch(d){case n.Camera:return nn.CAMERA;case n.Microphone:return nn.MICROPHONE;case n.ScreenShare:return nn.SCREEN_SHARE;case n.ScreenShareAudio:return nn.SCREEN_SHARE_AUDIO;default:return nn.UNKNOWN}}t.sourceToProto=o;function l(d){switch(d){case nn.CAMERA:return n.Camera;case nn.MICROPHONE:return n.Microphone;case nn.SCREEN_SHARE:return n.ScreenShare;case nn.SCREEN_SHARE_AUDIO:return n.ScreenShareAudio;default:return n.Unknown}}t.sourceFromProto=l;function u(d){switch(d){case X0.ACTIVE:return r.Active;case X0.PAUSED:return r.Paused;default:return r.Unknown}}t.streamStateFromProto=u})(ue||(ue={}));const zte="|",XP="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function $te(t){const e=t.split(zte);return e.length>1?[e[0],t.substr(e[0].length+1)]:[t,""]}function En(t){return V(this,void 0,void 0,function*(){return new Promise(e=>Tn.setTimeout(e,t))})}function hb(){return"addTransceiver"in RTCPeerConnection.prototype}function fb(){return"addTrack"in RTCPeerConnection.prototype}function Wte(){if(!("getCapabilities"in RTCRtpSender)||Va()||Ba())return!1;const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType.toLowerCase()==="video/av1"){e=!0;break}}return e}function Hte(){if(!("getCapabilities"in RTCRtpSender)||Ba())return!1;if(Va()){const n=ar();if(n!=null&&n.version&&Yi(n.version,"16")<0||(n==null?void 0:n.os)==="iOS"&&(n!=null&&n.osVersion)&&Yi(n.osVersion,"16")<0)return!1}const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType.toLowerCase()==="video/vp9"){e=!0;break}}return e}function ui(t){return t==="av1"||t==="vp9"}function pb(t){return!document||Td()?!1:(t||(t=document.createElement("audio")),"setSinkId"in t)}function qte(){return typeof RTCPeerConnection>"u"?!1:hb()||fb()}function Ba(){var t;return((t=ar())===null||t===void 0?void 0:t.name)==="Firefox"}function ZP(){const t=ar();return!!t&&t.name==="Chrome"&&t.os!=="iOS"}function Va(){var t;return((t=ar())===null||t===void 0?void 0:t.name)==="Safari"}function Td(){const t=ar();return(t==null?void 0:t.name)==="Safari"||(t==null?void 0:t.os)==="iOS"}function Gte(){const t=ar();return(t==null?void 0:t.name)==="Safari"&&t.version.startsWith("17.")||(t==null?void 0:t.os)==="iOS"&&!!(t!=null&&t.osVersion)&&Yi(t.osVersion,"17")>=0}function Kte(t){return t||(t=ar()),(t==null?void 0:t.name)==="Safari"&&Yi(t.version,"18.3")>0||(t==null?void 0:t.os)==="iOS"&&!!(t!=null&&t.osVersion)&&Yi(t.osVersion,"18.3")>0}function Zj(){var t,e;return sr()?(e=(t=navigator.userAgentData)===null||t===void 0?void 0:t.mobile)!==null&&e!==void 0?e:/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function Yte(){const t=ar(),e="17.2";if(t)return t.name!=="Safari"&&t.os!=="iOS"||t.os==="iOS"&&t.osVersion&&Yi(t.osVersion,e)>=0?!0:t.name==="Safari"&&Yi(t.version,e)>=0}function sr(){return typeof document<"u"}function Ki(){return navigator.product=="ReactNative"}function Cc(t){return t.hostname.endsWith(".livekit.cloud")||t.hostname.endsWith(".livekit.run")}function jy(t){return Cc(t)?t.hostname.split(".")[0]:null}function eO(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function tO(){if(!Ki())return;let t=eO();if(t)return t.platform}function e_(){if(sr())return window.devicePixelRatio;if(Ki()){let t=eO();if(t)return t.devicePixelRatio}return 1}function Yi(t,e){const n=t.split("."),r=e.split("."),i=Math.min(n.length,r.length);for(let s=0;s<i;++s){const o=parseInt(n[s],10),l=parseInt(r[s],10);if(o>l)return 1;if(o<l)return-1;if(s===i-1&&o===l)return 0}return t===""&&e!==""?-1:e===""?1:n.length==r.length?0:n.length<r.length?-1:1}function Jte(t){for(const e of t)e.target.handleResize(e)}function Qte(t){for(const e of t)e.target.handleVisibilityChanged(e)}let Oy=null;const t_=()=>(Oy||(Oy=new ResizeObserver(Jte)),Oy);let Ly=null;const n_=()=>(Ly||(Ly=new IntersectionObserver(Qte,{root:null,rootMargin:"0px"})),Ly);function Xte(){var t;const e=new tj({sdk:nj.JS,protocol:Pte,version:Ete});return Ki()&&(e.os=(t=tO())!==null&&t!==void 0?t:""),e}function r_(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=document.createElement("canvas");i.width=t,i.height=e;const s=i.getContext("2d");s==null||s.fillRect(0,0,i.width,i.height),r&&s&&(s.beginPath(),s.arc(t/2,e/2,50,0,Math.PI*2,!0),s.closePath(),s.fillStyle="grey",s.fill());const o=i.captureStream(),[l]=o.getTracks();if(!l)throw Error("Could not get empty media stream video track");return l.enabled=n,l}let Nu;function Fy(){if(!Nu){const t=new AudioContext,e=t.createOscillator(),n=t.createGain();n.gain.setValueAtTime(0,0);const r=t.createMediaStreamDestination();if(e.connect(n),n.connect(r),e.start(),[Nu]=r.stream.getAudioTracks(),!Nu)throw Error("Could not get empty media stream audio track");Nu.enabled=!1}return Nu.clone()}class Br{get isResolved(){return this._isResolved}constructor(e,n){this._isResolved=!1,this.onFinally=n,this.promise=new Promise((r,i)=>V(this,void 0,void 0,function*(){this.resolve=r,this.reject=i,e&&(yield e(r,i))})).finally(()=>{var r;this._isResolved=!0,(r=this.onFinally)===null||r===void 0||r.call(this)})}}function Zte(t){return Ate.includes(t)}function Fo(t){if(typeof t=="string"||typeof t=="number")return t;if(Array.isArray(t))return t[0];if(t.exact!==void 0)return Array.isArray(t.exact)?t.exact[0]:t.exact;if(t.ideal!==void 0)return Array.isArray(t.ideal)?t.ideal[0]:t.ideal;throw Error("could not unwrap constraint")}function ene(t){return t.startsWith("http")?t.replace(/^(http)/,"ws"):t}function Ed(t){return t.startsWith("ws")?t.replace(/^(ws)/,"http"):t}function tne(t,e){return t.segments.map(n=>{let{id:r,text:i,language:s,startTime:o,endTime:l,final:u}=n;var d;const f=(d=e.get(r))!==null&&d!==void 0?d:Date.now(),m=Date.now();return u?e.delete(r):e.set(r,f),{id:r,text:i,startTime:Number.parseInt(o.toString()),endTime:Number.parseInt(l.toString()),final:u,language:s,firstReceivedTime:f,lastReceivedTime:m}})}function nne(t){const{id:e,timestamp:n,message:r,editTimestamp:i}=t;return{id:e,timestamp:Number.parseInt(n.toString()),editTimestamp:i?Number.parseInt(i.toString()):void 0,message:r}}function i_(t){switch(t.reason){case Mt.LeaveRequest:return t.context;case Mt.Cancelled:return hi.CLIENT_INITIATED;case Mt.NotAllowed:return hi.USER_REJECTED;case Mt.ServerUnreachable:return hi.JOIN_FAILURE;default:return hi.UNKNOWN_REASON}}function cp(t){return t!==void 0?Number(t):void 0}function ka(t){return t!==void 0?BigInt(t):void 0}function rc(t){return!!t&&!(t instanceof MediaStreamTrack)&&t.isLocal}function $i(t){return!!t&&t.kind==ue.Kind.Audio}function Zo(t){return!!t&&t.kind==ue.Kind.Video}function po(t){return rc(t)&&Zo(t)}function hs(t){return rc(t)&&$i(t)}function mb(t){return!!t&&!t.isLocal}function rne(t){return!!t&&!t.isLocal}function Uy(t){return mb(t)&&Zo(t)}function ine(t){return t.isLocal}function sne(t,e){const n=[];let r=new TextEncoder().encode(t);for(;r.length>e;){let i=e;for(;i>0;){const s=r[i];if(s!==void 0&&(s&192)!==128)break;i--}n.push(r.slice(0,i)),r=r.slice(i)}return r.length>0&&n.push(r),n}function one(t){var e;const n=t.get("Cache-Control");if(n){const r=(e=n.match(/(?:^|[,\s])max-age=(\d+)/))===null||e===void 0?void 0:e[1];if(r)return parseInt(r,10)}}function ane(t,e){const n=new URL(ene(t));return e.forEach((r,i)=>{n.searchParams.set(i,r)}),rO(n,"rtc")}function lne(t){const e=new URL(Ed(t));return rO(e,"validate")}function nO(t){return t.endsWith("/")?t:"".concat(t,"/")}function rO(t,e){return t.pathname="".concat(nO(t.pathname)).concat(e),t.toString()}function s_(t){if(typeof t=="string")return LP.fromJson(JSON.parse(t),{ignoreUnknownFields:!0});if(t instanceof ArrayBuffer)return LP.fromBinary(new Uint8Array(t));throw new Error("could not decode websocket message: ".concat(typeof t))}function cne(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Unknown reason";if(!(t instanceof AbortSignal))return e;const n=t.reason;switch(typeof n){case"string":return n;case"object":return n instanceof Error?n.message:e;default:return"toString"in n?n.toString():e}}const une=10,Au="lk_e2ee",dne="LKFrameEncryptionKey",hne={sharedKey:!1,ratchetSalt:dne,ratchetWindowSize:8,failureTolerance:une,keyringSize:16};var Uo;(function(t){t.SetKey="setKey",t.RatchetRequest="ratchetRequest",t.KeyRatcheted="keyRatcheted"})(Uo||(Uo={}));var o_;(function(t){t.KeyRatcheted="keyRatcheted"})(o_||(o_={}));var Ro;(function(t){t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError"})(Ro||(Ro={}));var a_;(function(t){t.Error="cryptorError"})(a_||(a_={}));function fne(){return pne()||gb()}function gb(){return typeof window.RTCRtpScriptTransform<"u"}function pne(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}function mne(t){var e,n,r,i,s;if(((e=t.value)===null||e===void 0?void 0:e.case)!=="sipDtmf"&&((n=t.value)===null||n===void 0?void 0:n.case)!=="metrics"&&((r=t.value)===null||r===void 0?void 0:r.case)!=="speaker"&&((i=t.value)===null||i===void 0?void 0:i.case)!=="transcription"&&((s=t.value)===null||s===void 0?void 0:s.case)!=="encryptedPacket")return new KD({value:t.value})}class Ple extends Zi.EventEmitter{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.onKeyRatcheted=(n,r,i)=>{nt.debug("key ratcheted event received",{ratchetResult:n,participantId:r,keyIndex:i})},this.keyInfoMap=new Map,this.options=Object.assign(Object.assign({},hne),e),this.on(Uo.KeyRatcheted,this.onKeyRatcheted)}onSetEncryptionKey(e,n,r){const i={key:e,participantIdentity:n,keyIndex:r};if(!this.options.sharedKey&&!n)throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false");this.keyInfoMap.set("".concat(n??"shared","-").concat(r??0),i),this.emit(Uo.SetKey,i)}getKeys(){return Array.from(this.keyInfoMap.values())}getOptions(){return this.options}ratchetKey(e,n){this.emit(Uo.RatchetRequest,e,n)}}var l_;(function(t){t[t.InvalidKey=0]="InvalidKey",t[t.MissingKey=1]="MissingKey",t[t.InternalError=2]="InternalError"})(l_||(l_={}));class gne extends Zi.EventEmitter{constructor(e,n){super(),this.decryptDataRequests=new Map,this.encryptDataRequests=new Map,this.onWorkerMessage=r=>{var i,s;const{kind:o,data:l}=r.data;switch(o){case"error":if(nt.error(l.error.message),l.uuid){const f=this.decryptDataRequests.get(l.uuid);if(f!=null&&f.reject){f.reject(l.error);break}const m=this.encryptDataRequests.get(l.uuid);if(m!=null&&m.reject){m.reject(l.error);break}}this.emit(Ro.EncryptionError,l.error,l.participantIdentity);break;case"initAck":l.enabled&&this.keyProvider.getKeys().forEach(f=>{this.postKey(f)});break;case"enable":if(l.enabled&&this.keyProvider.getKeys().forEach(f=>{this.postKey(f)}),this.encryptionEnabled!==l.enabled&&l.participantIdentity===((i=this.room)===null||i===void 0?void 0:i.localParticipant.identity))this.emit(Ro.ParticipantEncryptionStatusChanged,l.enabled,this.room.localParticipant),this.encryptionEnabled=l.enabled;else if(l.participantIdentity){const f=(s=this.room)===null||s===void 0?void 0:s.getParticipantByIdentity(l.participantIdentity);if(!f)throw TypeError("couldn't set encryption status, participant not found".concat(l.participantIdentity));this.emit(Ro.ParticipantEncryptionStatusChanged,l.enabled,f)}break;case"ratchetKey":this.keyProvider.emit(Uo.KeyRatcheted,l.ratchetResult,l.participantIdentity,l.keyIndex);break;case"decryptDataResponse":const u=this.decryptDataRequests.get(l.uuid);u!=null&&u.resolve&&u.resolve(l);break;case"encryptDataResponse":const d=this.encryptDataRequests.get(l.uuid);d!=null&&d.resolve&&d.resolve(l);break}},this.onWorkerError=r=>{nt.error("e2ee worker encountered an error:",{error:r.error}),this.emit(Ro.EncryptionError,r.error,void 0)},this.keyProvider=e.keyProvider,this.worker=e.worker,this.encryptionEnabled=!1,this.dataChannelEncryptionEnabled=n}get isEnabled(){return this.encryptionEnabled}get isDataChannelEncryptionEnabled(){return this.isEnabled&&this.dataChannelEncryptionEnabled}setup(e){if(!fne())throw new Dw("tried to setup end-to-end encryption on an unsupported browser");if(nt.info("setting up e2ee"),e!==this.room){this.room=e,this.setupEventListeners(e,this.keyProvider);const n={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions(),loglevel:ute.getLevel()}};this.worker&&(nt.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(n))}}setParticipantCryptorEnabled(e,n){nt.debug("set e2ee to ".concat(e," for participant ").concat(n)),this.postEnable(e,n)}setSifTrailer(e){!e||e.length===0?nt.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer(e)}setupEngine(e){e.on(ke.RTPVideoMapUpdate,n=>{this.postRTPMap(n)})}setupEventListeners(e,n){e.on(me.TrackPublished,(r,i)=>this.setParticipantCryptorEnabled(r.trackInfo.encryption!==hn.NONE,i.identity)),e.on(me.ConnectionStateChanged,r=>{r===bt.Connected&&e.remoteParticipants.forEach(i=>{i.trackPublications.forEach(s=>{this.setParticipantCryptorEnabled(s.trackInfo.encryption!==hn.NONE,i.identity)})})}).on(me.TrackUnsubscribed,(r,i,s)=>{var o;const l={kind:"removeTransform",data:{participantIdentity:s.identity,trackId:r.mediaStreamID}};(o=this.worker)===null||o===void 0||o.postMessage(l)}).on(me.TrackSubscribed,(r,i,s)=>{this.setupE2EEReceiver(r,s.identity,i.trackInfo)}).on(me.SignalConnected,()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");n.getKeys().forEach(r=>{this.postKey(r)}),this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity)}),e.localParticipant.on(Te.LocalSenderCreated,(r,i)=>V(this,void 0,void 0,function*(){this.setupE2EESender(i,r)})),e.localParticipant.on(Te.LocalTrackPublished,r=>{if(!Zo(r.track)||!Td())return;const i={kind:"updateCodec",data:{trackId:r.track.mediaStreamID,codec:sd(r.trackInfo.codecs[0].mimeType),participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(i)}),n.on(Uo.SetKey,r=>this.postKey(r)).on(Uo.RatchetRequest,(r,i)=>this.postRatchetRequest(r,i))}encryptData(e){return V(this,void 0,void 0,function*(){if(!this.worker)throw Error("could not encrypt data, worker is missing");const n=crypto.randomUUID(),r={kind:"encryptDataRequest",data:{uuid:n,payload:e,participantIdentity:this.room.localParticipant.identity}},i=new Br;return i.onFinally=()=>{this.encryptDataRequests.delete(n)},this.encryptDataRequests.set(n,i),this.worker.postMessage(r),i.promise})}handleEncryptedData(e,n,r,i){if(!this.worker)throw Error("could not handle encrypted data, worker is missing");const s=crypto.randomUUID(),o={kind:"decryptDataRequest",data:{uuid:s,payload:e,iv:n,participantIdentity:r,keyIndex:i}},l=new Br;return l.onFinally=()=>{this.decryptDataRequests.delete(s)},this.decryptDataRequests.set(s,l),this.worker.postMessage(o),l.promise}postRatchetRequest(e,n){if(!this.worker)throw Error("could not ratchet key, worker is missing");const r={kind:"ratchetRequest",data:{participantIdentity:e,keyIndex:n}};this.worker.postMessage(r)}postKey(e){let{key:n,participantIdentity:r,keyIndex:i}=e;var s;if(!this.worker)throw Error("could not set key, worker is missing");const o={kind:"setKey",data:{participantIdentity:r,isPublisher:r===((s=this.room)===null||s===void 0?void 0:s.localParticipant.identity),key:n,keyIndex:i}};this.worker.postMessage(o)}postEnable(e,n){if(this.worker){const r={kind:"enable",data:{enabled:e,participantIdentity:n}};this.worker.postMessage(r)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}postRTPMap(e){var n;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((n=this.room)===null||n===void 0)&&n.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const r={kind:"setRTPMap",data:{map:e,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(r)}postSifTrailer(e){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const n={kind:"setSifTrailer",data:{trailer:e}};this.worker.postMessage(n)}setupE2EEReceiver(e,n,r){if(e.receiver){if(!(r!=null&&r.mimeType)||r.mimeType==="")throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(e.receiver,e.mediaStreamID,n,e.kind==="video"?sd(r.mimeType):void 0)}}setupE2EESender(e,n){if(!rc(e)||!n){n||nt.warn("early return because sender is not ready");return}this.handleSender(n,e.mediaStreamID,void 0)}handleReceiver(e,n,r,i){return V(this,void 0,void 0,function*(){if(this.worker){if(gb()&&!ZP()){const s={kind:"decode",participantIdentity:r,trackId:n,codec:i};e.transform=new RTCRtpScriptTransform(this.worker,s)}else{if(Au in e&&i){const u={kind:"updateCodec",data:{trackId:n,codec:i,participantIdentity:r}};this.worker.postMessage(u);return}let s=e.writableStream,o=e.readableStream;if(!s||!o){const u=e.createEncodedStreams();e.writableStream=u.writable,s=u.writable,e.readableStream=u.readable,o=u.readable}const l={kind:"decode",data:{readableStream:o,writableStream:s,trackId:n,codec:i,participantIdentity:r,isReuse:Au in e}};this.worker.postMessage(l,[o,s])}e[Au]=!0}})}handleSender(e,n,r){var i;if(!(Au in e||!this.worker)){if(!(!((i=this.room)===null||i===void 0)&&i.localParticipant.identity)||this.room.localParticipant.identity==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if(gb()&&!ZP()){nt.info("initialize script transform");const s={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:n,codec:r};e.transform=new RTCRtpScriptTransform(this.worker,s)}else{nt.info("initialize encoded streams");const s=e.createEncodedStreams(),o={kind:"encode",data:{readableStream:s.readable,writableStream:s.writable,codec:r,trackId:n,participantIdentity:this.room.localParticipant.identity,isReuse:!1}};this.worker.postMessage(o,[s.readable,s.writable])}e[Au]=!0}}}const vne=500,yne=15e3;class ic{constructor(){this.failedConnectionAttempts=new Map,this.backOffPromises=new Map}static getInstance(){return this._instance||(this._instance=new ic),this._instance}addFailedConnectionAttempt(e){var n;const r=new URL(e),i=jy(r);if(!i)return;let s=(n=this.failedConnectionAttempts.get(i))!==null&&n!==void 0?n:0;this.failedConnectionAttempts.set(i,s+1),this.backOffPromises.set(i,En(Math.min(vne*Math.pow(2,s),yne)))}getBackOffPromise(e){const n=new URL(e),r=n&&jy(n);return r&&this.backOffPromises.get(r)||Promise.resolve()}resetFailedConnectionAttempts(e){const n=new URL(e),r=n&&jy(n);r&&(this.failedConnectionAttempts.set(r,0),this.backOffPromises.set(r,Promise.resolve()))}resetAll(){this.backOffPromises.clear(),this.failedConnectionAttempts.clear()}}ic._instance=null;const By="default";class bn{constructor(){this._previousDevices=[]}static getInstance(){return this.instance===void 0&&(this.instance=new bn),this.instance}get previousDevices(){return this._previousDevices}getDevices(e){return V(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){var s;if(((s=bn.userMediaPromiseMap)===null||s===void 0?void 0:s.size)>0){nt.debug("awaiting getUserMedia promise");try{n?yield bn.userMediaPromiseMap.get(n):yield Promise.all(bn.userMediaPromiseMap.values())}catch{nt.warn("error waiting for media permissons")}}let o=yield navigator.mediaDevices.enumerateDevices();if(i&&!(Va()&&r.hasDeviceInUse(n))&&(o.filter(u=>u.kind===n).length===0||o.some(u=>{const d=u.label==="",f=n?u.kind===n:!0;return d&&f}))){const u={video:n!=="audioinput"&&n!=="audiooutput",audio:n!=="videoinput"&&{deviceId:{ideal:"default"}}},d=yield navigator.mediaDevices.getUserMedia(u);o=yield navigator.mediaDevices.enumerateDevices(),d.getTracks().forEach(f=>{f.stop()})}return r._previousDevices=o,n&&(o=o.filter(l=>l.kind===n)),o})()})}normalizeDeviceId(e,n,r){return V(this,void 0,void 0,function*(){if(n!==By)return n;const i=yield this.getDevices(e),s=i.find(l=>l.deviceId===By);if(!s){nt.warn("could not reliably determine default device");return}const o=i.find(l=>l.deviceId!==By&&l.groupId===(r??s.groupId));if(!o){nt.warn("could not reliably determine default device");return}return o==null?void 0:o.deviceId})}hasDeviceInUse(e){return e?bn.userMediaPromiseMap.has(e):bn.userMediaPromiseMap.size>0}}bn.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];bn.userMediaPromiseMap=new Map;var od;(function(t){t[t.WAITING=0]="WAITING",t[t.RUNNING=1]="RUNNING",t[t.COMPLETED=2]="COMPLETED"})(od||(od={}));class bne{constructor(){this.pendingTasks=new Map,this.taskMutex=new qn,this.nextTaskIndex=0}run(e){return V(this,void 0,void 0,function*(){const n={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:od.WAITING};this.pendingTasks.set(n.id,n);const r=yield this.taskMutex.lock();try{return n.executedAt=Date.now(),n.status=od.RUNNING,yield e()}finally{n.status=od.COMPLETED,this.pendingTasks.delete(n.id),r()}})}flush(){return V(this,void 0,void 0,function*(){return this.run(()=>V(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}class xne{get readyState(){return this.ws.readyState}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r,i;if(!((r=n.signal)===null||r===void 0)&&r.aborted)throw new DOMException("This operation was aborted","AbortError");this.url=e;const s=new WebSocket(e,(i=n.protocols)!==null&&i!==void 0?i:[]);s.binaryType="arraybuffer",this.ws=s;const o=function(){let{closeCode:l,reason:u}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return s.close(l,u)};this.opened=new Promise((l,u)=>{s.onopen=()=>{l({readable:new ReadableStream({start(d){s.onmessage=f=>{let{data:m}=f;return d.enqueue(m)},s.onerror=f=>d.error(f)},cancel:o}),writable:new WritableStream({write(d){s.send(d)},abort(){s.close()},close:o}),protocol:s.protocol,extensions:s.extensions}),s.removeEventListener("error",u)},s.addEventListener("error",u)}),this.closed=new Promise((l,u)=>{const d=()=>V(this,void 0,void 0,function*(){const f=new Promise(g=>{s.readyState!==WebSocket.CLOSED&&s.addEventListener("close",y=>{g(y)},{once:!0})}),m=yield Promise.race([En(250),f]);m?l(m):u(new Error("Encountered unspecified websocket error without a timely close event"))});s.onclose=f=>{let{code:m,reason:g}=f;l({closeCode:m,reason:g}),s.removeEventListener("error",d)},s.addEventListener("error",d)}),n.signal&&(n.signal.onabort=()=>s.close()),this.close=o}}const wne=["syncState","trickle","offer","answer","simulate","leave"];function kne(t){const e=wne.indexOf(t.case)>=0;return nt.trace("request allowed to bypass queue:",{canPass:e,req:t}),e}var Et;(function(t){t[t.CONNECTING=0]="CONNECTING",t[t.CONNECTED=1]="CONNECTED",t[t.RECONNECTING=2]="RECONNECTING",t[t.DISCONNECTING=3]="DISCONNECTING",t[t.DISCONNECTED=4]="DISCONNECTED"})(Et||(Et={}));const Sne=250;class Lw{get currentState(){return this.state}get isDisconnected(){return this.state===Et.DISCONNECTING||this.state===Et.DISCONNECTED}get isEstablishingConnection(){return this.state===Et.CONNECTING||this.state===Et.RECONNECTING}getNextRequestId(){return this._requestId+=1,this._requestId}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r;this.rtt=0,this.state=Et.DISCONNECTED,this.log=nt,this._requestId=0,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0,this.onMediaSectionsRequirement=void 0},this.log=Ms((r=n.loggerName)!==null&&r!==void 0?r:mi.Signal),this.loggerContextCb=n.loggerContextCb,this.useJSON=e,this.requestQueue=new bne,this.queuedRequests=[],this.closingLock=new qn,this.connectionLock=new qn,this.state=Et.DISCONNECTED}get logContext(){var e,n;return(n=(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this))!==null&&n!==void 0?n:{}}join(e,n,r,i){return V(this,void 0,void 0,function*(){return this.state=Et.CONNECTING,this.options=r,yield this.connect(e,n,r,i)})}reconnect(e,n,r,i){return V(this,void 0,void 0,function*(){if(!this.options){this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);return}return this.state=Et.RECONNECTING,this.clearPingInterval(),yield this.connect(e,n,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:r,reconnectReason:i}))})}connect(e,n,r,i){return V(this,void 0,void 0,function*(){const s=yield this.connectionLock.lock();this.connectOptions=r;const o=Xte(),l=r.singlePeerConnection?Tne(n,o,r):Cne(n,o,r),u=ane(e,l),d=lne(u);return new Promise((f,m)=>V(this,void 0,void 0,function*(){var g,y;try{let C=!1;const x=E=>V(this,void 0,void 0,function*(){if(C)return;C=!0;const I=E instanceof Event?E.currentTarget:E,A=cne(I,"Abort handler called");this.streamWriter&&!this.isDisconnected?this.sendLeave().then(()=>this.close(A)).catch(L=>{this.log.error(L),this.close()}):this.close(),k(),m(Ke.cancelled(A))});i==null||i.addEventListener("abort",x);const k=()=>{clearTimeout(T),i==null||i.removeEventListener("abort",x)},T=setTimeout(()=>{x(Ke.timeout("room connection has timed out (signal)"))},r.websocketTimeout),_=(E,I)=>{this.handleSignalConnected(E,T,I)},P=new URL(u);P.searchParams.has("access_token")&&P.searchParams.set("access_token","<redacted>"),this.log.debug("connecting to ".concat(P),Object.assign({reconnect:r.reconnect,reconnectReason:r.reconnectReason},this.logContext)),this.ws&&(yield this.close(!1)),this.ws=new xne(u);try{this.ws.closed.then(U=>{var z;this.isEstablishingConnection&&m(Ke.internal("Websocket got closed during a (re)connection attempt: ".concat(U.reason))),U.closeCode!==1e3&&(this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:U.reason,code:U.closeCode,wasClean:U.closeCode===1e3,state:this.state})),this.state===Et.CONNECTED&&this.handleOnClose((z=U.reason)!==null&&z!==void 0?z:"Unexpected WS error"))}).catch(U=>{this.isEstablishingConnection&&m(Ke.internal("Websocket error during a (re)connection attempt: ".concat(U)))});const E=yield this.ws.opened.catch(U=>V(this,void 0,void 0,function*(){if(this.state!==Et.CONNECTED){this.state=Et.DISCONNECTED,clearTimeout(T);const z=yield this.handleConnectionError(U,d);m(z);return}this.handleWSError(U),m(U)}));if(clearTimeout(T),!E)return;const I=E.readable.getReader();this.streamWriter=E.writable.getWriter();const A=yield I.read();if(I.releaseLock(),!A.value)throw Ke.internal("no message received as first message");const L=s_(A.value),R=this.validateFirstMessage(L,(g=r.reconnect)!==null&&g!==void 0?g:!1);if(!R.isValid){m(R.error);return}((y=L.message)===null||y===void 0?void 0:y.case)==="join"&&(this.pingTimeoutDuration=L.message.value.pingTimeout,this.pingIntervalDuration=L.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})));const j=R.shouldProcessFirstMessage?L:void 0;_(E,j),f(R.response)}catch(E){m(E)}finally{k()}}finally{s()}}))})}startReadingLoop(e,n){return V(this,void 0,void 0,function*(){for(n&&this.handleSignalResponse(n);;){this.signalLatency&&(yield En(this.signalLatency));const{done:r,value:i}=yield e.read();if(r)break;const s=s_(i);this.handleSignalResponse(s)}})}close(){return V(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Close method called on signal client";return(function*(){if([Et.DISCONNECTING||Et.DISCONNECTED].includes(e.state)){e.log.debug("ignoring signal close as it's already in disconnecting state");return}const i=yield e.closingLock.lock();try{if(e.clearPingInterval(),n&&(e.state=Et.DISCONNECTING),e.ws){e.ws.close({closeCode:1e3,reason:r});const s=e.ws.closed;e.ws=void 0,e.streamWriter=void 0,yield Promise.race([s,En(Sne)])}}catch(s){e.log.debug("websocket error while closing",Object.assign(Object.assign({},e.logContext),{error:s}))}finally{n&&(e.state=Et.DISCONNECTED),i()}})()})}sendOffer(e,n){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:e.sdp})),this.sendRequest({case:"offer",value:Wl(e,n)})}sendAnswer(e,n){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:e.sdp})),this.sendRequest({case:"answer",value:Wl(e,n)})}sendIceCandidate(e,n){return this.log.debug("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:e})),this.sendRequest({case:"trickle",value:new Rm({candidateInit:JSON.stringify(e),target:n})})}sendMuteTrack(e,n){return this.sendRequest({case:"mute",value:new Mm({sid:e,muted:n})})}sendAddTrack(e){return this.sendRequest({case:"addTrack",value:e})}sendUpdateLocalMetadata(e,n){return V(this,arguments,void 0,function(r,i){var s=this;let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return(function*(){const l=s.getNextRequestId();return yield s.sendRequest({case:"updateMetadata",value:new Iw({requestId:l,metadata:r,name:i,attributes:o})}),l})()})}sendUpdateTrackSettings(e){this.sendRequest({case:"trackSetting",value:e})}sendUpdateSubscription(e){return this.sendRequest({case:"subscription",value:e})}sendSyncState(e){return this.sendRequest({case:"syncState",value:e})}sendUpdateVideoLayers(e,n){return this.sendRequest({case:"updateLayers",value:new cj({trackSid:e,layers:n})})}sendUpdateSubscriptionPermissions(e,n){return this.sendRequest({case:"subscriptionPermission",value:new hj({allParticipants:e,trackPermissions:n})})}sendSimulateScenario(e){return this.sendRequest({case:"simulate",value:e})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:Lt.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new mj({timestamp:Lt.parse(Date.now()),rtt:Lt.parse(this.rtt)})})])}sendUpdateLocalAudioTrack(e,n){return this.sendRequest({case:"updateAudioTrack",value:new _w({trackSid:e,features:n})})}sendLeave(){return this.sendRequest({case:"leave",value:new jm({reason:hi.CLIENT_INITIATED,action:ec.DISCONNECT})})}sendRequest(e){return V(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return(function*(){if(!i&&!kne(n)&&r.state===Et.RECONNECTING){r.queuedRequests.push(()=>V(r,void 0,void 0,function*(){yield this.sendRequest(n,!0)}));return}if(i||(yield r.requestQueue.flush()),r.signalLatency&&(yield En(r.signalLatency)),r.isDisconnected){r.log.debug("skipping signal request (type: ".concat(n.case,") - SignalClient disconnected"));return}if(!r.streamWriter){r.log.error("cannot send signal request before connected, type: ".concat(n==null?void 0:n.case),r.logContext);return}const o=new jee({message:n});try{r.useJSON?yield r.streamWriter.write(o.toJsonString()):yield r.streamWriter.write(o.toBinary())}catch(l){r.log.error("error sending signal message",Object.assign(Object.assign({},r.logContext),{error:l}))}})()})}handleSignalResponse(e){var n,r;const i=e.message;if(i==null){this.log.debug("received unsupported message",this.logContext);return}let s=!1;if(i.case==="answer"){const o=c_(i.value);this.onAnswer&&this.onAnswer(o,i.value.id,i.value.midToTrackId)}else if(i.case==="offer"){const o=c_(i.value);this.onOffer&&this.onOffer(o,i.value.id,i.value.midToTrackId)}else if(i.case==="trickle"){const o=JSON.parse(i.value.candidateInit);this.onTrickle&&this.onTrickle(o,i.value.target)}else i.case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((n=i.value.participants)!==null&&n!==void 0?n:[]):i.case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(i.value):i.case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((r=i.value.speakers)!==null&&r!==void 0?r:[]):i.case==="leave"?this.onLeave&&this.onLeave(i.value):i.case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(i.value.sid,i.value.muted):i.case==="roomUpdate"?this.onRoomUpdate&&i.value.room&&this.onRoomUpdate(i.value.room):i.case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(i.value):i.case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(i.value):i.case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(i.value):i.case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(i.value):i.case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(i.value):i.case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(i.value):i.case==="subscriptionResponse"?this.onSubscriptionError&&this.onSubscriptionError(i.value):i.case==="pong"||(i.case==="pongResp"?(this.rtt=Date.now()-Number.parseInt(i.value.lastPingTimestamp.toString()),this.resetPingTimeout(),s=!0):i.case==="requestResponse"?this.onRequestResponse&&this.onRequestResponse(i.value):i.case==="trackSubscribed"?this.onLocalTrackSubscribed&&this.onLocalTrackSubscribed(i.value.trackSid):i.case==="roomMoved"?(this.onTokenRefresh&&this.onTokenRefresh(i.value.token),this.onRoomMoved&&this.onRoomMoved(i.value)):i.case==="mediaSectionsRequirement"?this.onMediaSectionsRequirement&&this.onMediaSectionsRequirement(i.value):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:i.case})));s||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const e=this.queuedRequests.shift();e&&this.requestQueue.run(e)}}handleOnClose(e){return V(this,void 0,void 0,function*(){if(this.state===Et.DISCONNECTED)return;const n=this.onClose;yield this.close(void 0,e),this.log.debug("websocket connection closed: ".concat(e),Object.assign(Object.assign({},this.logContext),{reason:e})),n&&n(e)})}handleWSError(e){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:e}))}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){this.log.warn("ping timeout duration not set",this.logContext);return}this.pingTimeout=Tn.setTimeout(()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString()),this.logContext),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&Tn.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){this.log.warn("ping interval duration not set",this.logContext);return}this.log.debug("start ping interval",this.logContext),this.pingInterval=Tn.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&Tn.clearInterval(this.pingInterval)}handleSignalConnected(e,n,r){this.state=Et.CONNECTED,clearTimeout(n),this.startPingInterval(),this.startReadingLoop(e.readable.getReader(),r)}validateFirstMessage(e,n){var r,i,s,o,l;return((r=e.message)===null||r===void 0?void 0:r.case)==="join"?{isValid:!0,response:e.message.value}:this.state===Et.RECONNECTING&&((i=e.message)===null||i===void 0?void 0:i.case)!=="leave"?((s=e.message)===null||s===void 0?void 0:s.case)==="reconnect"?{isValid:!0,response:e.message.value}:(this.log.debug("declaring signal reconnected without reconnect response received",this.logContext),{isValid:!0,response:void 0,shouldProcessFirstMessage:!0}):this.isEstablishingConnection&&((o=e.message)===null||o===void 0?void 0:o.case)==="leave"?{isValid:!1,error:Ke.leaveRequest("Received leave request while trying to (re)connect",e.message.value.reason)}:n?{isValid:!1,error:Ke.internal("Unexpected first message")}:{isValid:!1,error:Ke.internal("did not receive join response, got ".concat((l=e.message)===null||l===void 0?void 0:l.case," instead"))}}handleConnectionError(e,n){return V(this,void 0,void 0,function*(){try{const r=yield fetch(n);if(r.status.toFixed(0).startsWith("4")){const i=yield r.text();return Ke.notAllowed(i,r.status)}else return e instanceof Ke?e:Ke.internal("Encountered unknown websocket error during connection: ".concat(e),{status:r.status,statusText:r.statusText})}catch(r){return r instanceof Ke?r:Ke.serverUnreachable(r instanceof Error?r.message:"server was not reachable")}})}}function c_(t){const e={type:"offer",sdp:t.sdp};switch(t.type){case"answer":case"offer":case"pranswer":case"rollback":e.type=t.type;break}return e}function Wl(t,e){return new Ho({sdp:t.sdp,type:t.type,id:e})}function Cne(t,e,n){var r;const i=new URLSearchParams;return i.set("access_token",t),n.reconnect&&(i.set("reconnect","1"),n.sid&&i.set("sid",n.sid)),i.set("auto_subscribe",n.autoSubscribe?"1":"0"),i.set("sdk",Ki()?"reactnative":"js"),i.set("version",e.version),i.set("protocol",e.protocol.toString()),e.deviceModel&&i.set("device_model",e.deviceModel),e.os&&i.set("os",e.os),e.osVersion&&i.set("os_version",e.osVersion),e.browser&&i.set("browser",e.browser),e.browserVersion&&i.set("browser_version",e.browserVersion),n.adaptiveStream&&i.set("adaptive_stream","1"),n.reconnectReason&&i.set("reconnect_reason",n.reconnectReason.toString()),!((r=navigator.connection)===null||r===void 0)&&r.type&&i.set("network",navigator.connection.type),i}function Tne(t,e,n){const r=new URLSearchParams;r.set("access_token",t);const i=new rte({clientInfo:e,connectionSettings:new gj({autoSubscribe:!!n.autoSubscribe,adaptiveStream:!!n.adaptiveStream}),reconnect:!!n.reconnect,participantSid:n.sid?n.sid:void 0});n.reconnectReason&&(i.reconnectReason=n.reconnectReason);const s=new ite({joinRequest:i.toBinary()});return r.set("join_request",btoa(new TextDecoder("utf-8").decode(s.toBinary()))),r}class u_{constructor(){this.buffer=[],this._totalSize=0}push(e){this.buffer.push(e),this._totalSize+=e.data.byteLength}pop(){const e=this.buffer.shift();return e&&(this._totalSize-=e.data.byteLength),e}getAll(){return this.buffer.slice()}popToSequence(e){for(;this.buffer.length>0&&this.buffer[0].sequence<=e;)this.pop()}alignBufferedAmount(e){for(;this.buffer.length>0;){const n=this.buffer[0];if(this._totalSize-n.data.byteLength<=e)break;this.pop()}}get length(){return this.buffer.length}}class Ene{constructor(e){this._map=new Map,this._lastCleanup=0,this.ttl=e}set(e,n){const r=Date.now();r-this._lastCleanup>this.ttl/2&&this.cleanup();const i=r+this.ttl;return this._map.set(e,{value:n,expiresAt:i}),this}get(e){const n=this._map.get(e);if(n){if(n.expiresAt<Date.now()){this._map.delete(e);return}return n.value}}has(e){const n=this._map.get(e);return n?n.expiresAt<Date.now()?(this._map.delete(e),!1):!0:!1}delete(e){return this._map.delete(e)}clear(){this._map.clear()}cleanup(){const e=Date.now();for(const[n,r]of this._map.entries())r.expiresAt<e&&this._map.delete(n);this._lastCleanup=e}get size(){return this.cleanup(),this._map.size}forEach(e){this.cleanup();for(const[n,r]of this._map.entries())r.expiresAt>=Date.now()&&e(r.value,n,this.asValueMap())}map(e){this.cleanup();const n=[],r=this.asValueMap();for(const[i,s]of r.entries())n.push(e(s,i,r));return n}asValueMap(){const e=new Map;for(const[n,r]of this._map.entries())r.expiresAt>=Date.now()&&e.set(n,r.value);return e}}var ei={},Vy={},zy={exports:{}},d_;function Fw(){if(d_)return zy.exports;d_=1;var t=zy.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return e.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return e.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return e.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var n="candidate:%s %d %s %d %s %d typ %s";return n+=e.raddr!=null?" raddr %s rport %d":"%v%v",n+=e.tcptype!=null?" tcptype %s":"%v",e.generation!=null&&(n+=" generation %d"),n+=e["network-id"]!=null?" network-id %d":"%v",n+=e["network-cost"]!=null?" network-cost %d":"%v",n}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var n="ssrc:%d";return e.attribute!=null&&(n+=" %s",e.value!=null&&(n+=":%s")),n}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return e.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(e.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var n="mediaclk:";return n+=e.id!=null?"id=%s %s":"%v%s",n+=e.mediaClockValue!=null?"=%s":"",n+=e.rateNumerator!=null?" rate=%s":"",n+=e.rateDenominator!=null?"/%s":"",n}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(t).forEach(function(e){var n=t[e];n.forEach(function(r){r.reg||(r.reg=/(.*)/),r.format||(r.format="%s")})}),zy.exports}var h_;function Pne(){return h_||(h_=1,(function(t){var e=function(l){return String(Number(l))===l?Number(l):l},n=function(l,u,d,f){if(f&&!d)u[f]=e(l[1]);else for(var m=0;m<d.length;m+=1)l[m+1]!=null&&(u[d[m]]=e(l[m+1]))},r=function(l,u,d){var f=l.name&&l.names;l.push&&!u[l.push]?u[l.push]=[]:f&&!u[l.name]&&(u[l.name]={});var m=l.push?{}:f?u[l.name]:u;n(d.match(l.reg),m,l.names,l.name),l.push&&u[l.push].push(m)},i=Fw(),s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(l){var u={},d=[],f=u;return l.split(/(\r\n|\r|\n)/).filter(s).forEach(function(m){var g=m[0],y=m.slice(2);g==="m"&&(d.push({rtp:[],fmtp:[]}),f=d[d.length-1]);for(var C=0;C<(i[g]||[]).length;C+=1){var x=i[g][C];if(x.reg.test(y))return r(x,f,y)}}),u.media=d,u};var o=function(l,u){var d=u.split(/=(.+)/,2);return d.length===2?l[d[0]]=e(d[1]):d.length===1&&u.length>1&&(l[d[0]]=void 0),l};t.parseParams=function(l){return l.split(/;\s?/).reduce(o,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(l){return l.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(l){for(var u=[],d=l.split(" ").map(e),f=0;f<d.length;f+=3)u.push({component:d[f],ip:d[f+1],port:d[f+2]});return u},t.parseImageAttributes=function(l){return l.split(" ").map(function(u){return u.substring(1,u.length-1).split(",").reduce(o,{})})},t.parseSimulcastStreamList=function(l){return l.split(";").map(function(u){return u.split(",").map(function(d){var f,m=!1;return d[0]!=="~"?f=e(d):(f=e(d.substring(1,d.length)),m=!0),{scid:f,paused:m}})})}})(Vy)),Vy}var $y,f_;function _ne(){if(f_)return $y;f_=1;var t=Fw(),e=/%[sdv%]/g,n=function(o){var l=1,u=arguments,d=u.length;return o.replace(e,function(f){if(l>=d)return f;var m=u[l];switch(l+=1,f){case"%%":return"%";case"%s":return String(m);case"%d":return Number(m);case"%v":return""}})},r=function(o,l,u){var d=l.format instanceof Function?l.format(l.push?u:u[l.name]):l.format,f=[o+"="+d];if(l.names)for(var m=0;m<l.names.length;m+=1){var g=l.names[m];l.name?f.push(u[l.name][g]):f.push(u[l.names[m]])}else f.push(u[l.name]);return n.apply(null,f)},i=["v","o","s","i","u","e","p","c","b","t","r","z","a"],s=["i","c","b","a"];return $y=function(o,l){l=l||{},o.version==null&&(o.version=0),o.name==null&&(o.name=" "),o.media.forEach(function(m){m.payloads==null&&(m.payloads="")});var u=l.outerOrder||i,d=l.innerOrder||s,f=[];return u.forEach(function(m){t[m].forEach(function(g){g.name in o&&o[g.name]!=null?f.push(r(m,g,o)):g.push in o&&o[g.push]!=null&&o[g.push].forEach(function(y){f.push(r(m,g,y))})})}),o.media.forEach(function(m){f.push(r("m",t.m[0],m)),d.forEach(function(g){t[g].forEach(function(y){y.name in m&&m[y.name]!=null?f.push(r(g,y,m)):y.push in m&&m[y.push]!=null&&m[y.push].forEach(function(C){f.push(r(g,y,C))})})})}),f.join(`\r
`)+`\r
`},$y}var p_;function Ine(){if(p_)return ei;p_=1;var t=Pne(),e=_ne(),n=Fw();return ei.grammar=n,ei.write=e,ei.parse=t.parse,ei.parseParams=t.parseParams,ei.parseFmtpConfig=t.parseFmtpConfig,ei.parsePayloads=t.parsePayloads,ei.parseRemoteCandidates=t.parseRemoteCandidates,ei.parseImageAttributes=t.parseImageAttributes,ei.parseSimulcastStreamList=t.parseSimulcastStreamList,ei}var yo=Ine();function Uw(t,e,n){var r,i,s;e===void 0&&(e=50),n===void 0&&(n={});var o=(r=n.isImmediate)!=null&&r,l=(i=n.callback)!=null&&i,u=n.maxWait,d=Date.now(),f=[];function m(){if(u!==void 0){var y=Date.now()-d;if(y+e>=u)return u-y}return e}var g=function(){var y=[].slice.call(arguments),C=this;return new Promise(function(x,k){var T=o&&s===void 0;if(s!==void 0&&clearTimeout(s),s=setTimeout(function(){if(s=void 0,d=Date.now(),!o){var P=t.apply(C,y);l&&l(P),f.forEach(function(E){return(0,E.resolve)(P)}),f=[]}},m()),T){var _=t.apply(C,y);return l&&l(_),x(_)}f.push({resolve:x,reject:k})})};return g.cancel=function(y){s!==void 0&&clearTimeout(s),f.forEach(function(C){return(0,C.reject)(y)}),f=[]},g}const Nne=.7,Ane=20,sc={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete",RTPVideoPayloadTypes:"rtpVideoPayloadTypes"};class m_ extends Zi.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r;super(),this.log=nt,this.ddExtID=0,this.latestOfferId=0,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=Uw(i=>V(this,void 0,void 0,function*(){this.emit(sc.NegotiationStarted);try{yield this.createAndSendOffer()}catch(s){if(i)i(s);else throw s}}),Ane),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=Ms((r=n.loggerName)!==null&&r!==void 0?r:mi.PCTransport),this.loggerOptions=n,this.config=e,this._pc=this.createPC(),this.offerLock=new qn}createPC(){const e=new RTCPeerConnection(this.config);return e.onicecandidate=n=>{var r;n.candidate&&((r=this.onIceCandidate)===null||r===void 0||r.call(this,n.candidate))},e.onicecandidateerror=n=>{var r;(r=this.onIceCandidateError)===null||r===void 0||r.call(this,n)},e.oniceconnectionstatechange=()=>{var n;(n=this.onIceConnectionStateChange)===null||n===void 0||n.call(this,e.iceConnectionState)},e.onsignalingstatechange=()=>{var n;(n=this.onSignalingStatechange)===null||n===void 0||n.call(this,e.signalingState)},e.onconnectionstatechange=()=>{var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,e.connectionState)},e.ondatachannel=n=>{var r;(r=this.onDataChannel)===null||r===void 0||r.call(this,n)},e.ontrack=n=>{var r;(r=this.onTrack)===null||r===void 0||r.call(this,n)},e}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isICEConnected(){return this._pc!==null&&(this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed")}addIceCandidate(e){return V(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(e);this.pendingCandidates.push(e)})}setRemoteDescription(e,n){return V(this,void 0,void 0,function*(){var r;if(e.type==="answer"&&this.latestOfferId>0&&n>0&&n!==this.latestOfferId)return this.log.warn("ignoring answer for old offer",Object.assign(Object.assign({},this.logContext),{offerId:n,latestOfferId:this.latestOfferId})),!1;let i;if(e.type==="offer"){let{stereoMids:s,nackMids:o}=Rne(e);this.remoteStereoMids=s,this.remoteNackMids=o}else if(e.type==="answer"){const s=yo.parse((r=e.sdp)!==null&&r!==void 0?r:"");s.media.forEach(o=>{const l=Bw(o.mid);o.type==="audio"&&this.trackBitrates.some(u=>{if(!u.transceiver||l!=u.transceiver.mid)return!1;let d=0;if(o.rtp.some(m=>m.codec.toUpperCase()===u.codec.toUpperCase()?(d=m.payload,!0):!1),d===0)return!0;let f=!1;for(const m of o.fmtp)if(m.payload===d){m.config=m.config.split(";").filter(g=>!g.includes("maxaveragebitrate")).join(";"),u.maxbr>0&&(m.config+=";maxaveragebitrate=".concat(u.maxbr*1e3)),f=!0;break}return f||u.maxbr>0&&o.fmtp.push({payload:d,config:"maxaveragebitrate=".concat(u.maxbr*1e3)}),!0})}),i=yo.write(s)}return yield this.setMungedSDP(e,i,!0),this.pendingCandidates.forEach(s=>{this.pc.addIceCandidate(s)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,yield this.createAndSendOffer()):e.type==="answer"&&(this.emit(sc.NegotiationComplete),e.sdp&&yo.parse(e.sdp).media.forEach(o=>{o.type==="video"&&this.emit(sc.RTPVideoPayloadTypes,o.rtp)})),!0})}createAndSendOffer(e){return V(this,void 0,void 0,function*(){var n;const r=yield this.offerLock.lock();try{if(this.onOffer===void 0)return;if(e!=null&&e.iceRestart&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&this._pc.signalingState==="have-local-offer"){const l=this._pc.remoteDescription;if(e!=null&&e.iceRestart&&l)yield this._pc.setRemoteDescription(l);else{this.renegotiate=!0;return}}else if(!this._pc||this._pc.signalingState==="closed"){this.log.warn("could not createOffer with closed peer connection",this.logContext);return}this.log.debug("starting to negotiate",this.logContext);const i=this.latestOfferId+1;this.latestOfferId=i;const s=yield this.pc.createOffer(e);this.log.debug("original offer",Object.assign({sdp:s.sdp},this.logContext));const o=yo.parse((n=s.sdp)!==null&&n!==void 0?n:"");if(o.media.forEach(l=>{v_(l),l.type==="audio"?g_(l,["all"],[]):l.type==="video"&&this.trackBitrates.some(u=>{if(!l.msid||!u.cid||!l.msid.includes(u.cid))return!1;let d=0;if(l.rtp.some(m=>m.codec.toUpperCase()===u.codec.toUpperCase()?(d=m.payload,!0):!1),d===0||(ui(u.codec)&&!Va()&&this.ensureVideoDDExtensionForSVC(l,o),!ui(u.codec)))return!0;const f=Math.round(u.maxbr*Nne);for(const m of l.fmtp)if(m.payload===d){m.config.includes("x-google-start-bitrate")||(m.config+=";x-google-start-bitrate=".concat(f));break}return!0})}),this.latestOfferId>i){this.log.warn("latestOfferId mismatch",Object.assign(Object.assign({},this.logContext),{latestOfferId:this.latestOfferId,offerId:i}));return}yield this.setMungedSDP(s,yo.write(o)),this.onOffer(s,this.latestOfferId)}finally{r()}})}createAndSetAnswer(){return V(this,void 0,void 0,function*(){var e;const n=yield this.pc.createAnswer(),r=yo.parse((e=n.sdp)!==null&&e!==void 0?e:"");return r.media.forEach(i=>{v_(i),i.type==="audio"&&g_(i,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedSDP(n,yo.write(r)),n})}createDataChannel(e,n){return this.pc.createDataChannel(e,n)}addTransceiver(e,n){return this.pc.addTransceiver(e,n)}addTransceiverOfKind(e,n){return this.pc.addTransceiver(e,n)}addTrack(e){if(!this._pc)throw new dn("PC closed, cannot add track");return this._pc.addTrack(e)}setTrackCodecBitrate(e){this.trackBitrates.push(e)}setConfiguration(e){var n;if(!this._pc)throw new dn("PC closed, cannot configure");return(n=this._pc)===null||n===void 0?void 0:n.setConfiguration(e)}canRemoveTrack(){var e;return!!(!((e=this._pc)===null||e===void 0)&&e.removeTrack)}removeTrack(e){var n;return(n=this._pc)===null||n===void 0?void 0:n.removeTrack(e)}getConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.connectionState)!==null&&n!==void 0?n:"closed"}getICEConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.iceConnectionState)!==null&&n!==void 0?n:"closed"}getSignallingState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.signalingState)!==null&&n!==void 0?n:"closed"}getTransceivers(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getTransceivers())!==null&&n!==void 0?n:[]}getSenders(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getSenders())!==null&&n!==void 0?n:[]}getLocalDescription(){var e;return(e=this._pc)===null||e===void 0?void 0:e.localDescription}getRemoteDescription(){var e;return(e=this.pc)===null||e===void 0?void 0:e.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){return V(this,void 0,void 0,function*(){var e;if(!this._pc)return;let n="";const r=new Map,i=new Map;if((yield this._pc.getStats()).forEach(l=>{switch(l.type){case"transport":n=l.selectedCandidatePairId;break;case"candidate-pair":n===""&&l.selected&&(n=l.id),r.set(l.id,l);break;case"remote-candidate":i.set(l.id,"".concat(l.address,":").concat(l.port));break}}),n==="")return;const o=(e=r.get(n))===null||e===void 0?void 0:e.remoteCandidateId;if(o!==void 0)return i.get(o)})}setMungedSDP(e,n,r){return V(this,void 0,void 0,function*(){if(n){const i=e.sdp;e.sdp=n;try{this.log.debug("setting munged ".concat(r?"remote":"local"," description"),this.logContext),r?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e);return}catch(s){this.log.warn("not able to set ".concat(e.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:s,sdp:n})),e.sdp=i}}try{r?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e)}catch(i){let s="unknown error";i instanceof Error?s=i.message:typeof i=="string"&&(s=i);const o={error:s,sdp:e.sdp};throw!r&&this.pc.remoteDescription&&(o.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(e.type),Object.assign(Object.assign({},this.logContext),{fields:o})),new ab(s)}})}ensureVideoDDExtensionForSVC(e,n){var r,i;if(!((r=e.ext)===null||r===void 0?void 0:r.some(o=>o.uri===XP))){if(this.ddExtID===0){let o=0;n.media.forEach(l=>{var u;l.type==="video"&&((u=l.ext)===null||u===void 0||u.forEach(d=>{d.value>o&&(o=d.value)}))}),this.ddExtID=o+1}(i=e.ext)===null||i===void 0||i.push({value:this.ddExtID,uri:XP})}}}function g_(t,e,n){const r=Bw(t.mid);let i=0;t.rtp.some(s=>s.codec==="opus"?(i=s.payload,!0):!1),i>0&&(t.rtcpFb||(t.rtcpFb=[]),n.includes(r)&&!t.rtcpFb.some(s=>s.payload===i&&s.type==="nack")&&t.rtcpFb.push({payload:i,type:"nack"}),(e.includes(r)||e.length===1&&e[0]==="all")&&t.fmtp.some(s=>s.payload===i?(s.config.includes("stereo=1")||(s.config+=";stereo=1"),!0):!1))}function Rne(t){var e;const n=[],r=[],i=yo.parse((e=t.sdp)!==null&&e!==void 0?e:"");let s=0;return i.media.forEach(o=>{var l;const u=Bw(o.mid);o.type==="audio"&&(o.rtp.some(d=>d.codec==="opus"?(s=d.payload,!0):!1),!((l=o.rtcpFb)===null||l===void 0)&&l.some(d=>d.payload===s&&d.type==="nack")&&r.push(u),o.fmtp.some(d=>d.payload===s?(d.config.includes("sprop-stereo=1")&&n.push(u),!0):!1))}),{stereoMids:n,nackMids:r}}function v_(t){if(t.connection){const e=t.connection.ip.indexOf(":")>=0;(t.connection.version===4&&e||t.connection.version===6&&!e)&&(t.connection.ip="0.0.0.0",t.connection.version=4)}}function Bw(t){return typeof t=="number"?t.toFixed(0):t}const vb="vp8",Mne={audioPreset:lb.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:jw.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:vb,backupCodec:!0,preConnectBuffer:!1},iO={deviceId:{ideal:"default"},autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,voiceIsolation:!0},sO={deviceId:{ideal:"default"},resolution:Cd.h720.resolution},Dne={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new hte,disconnectOnPageLeave:!0,webAudioMix:!1,singlePeerConnection:!1},Vw={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var Ht;(function(t){t[t.NEW=0]="NEW",t[t.CONNECTING=1]="CONNECTING",t[t.CONNECTED=2]="CONNECTED",t[t.FAILED=3]="FAILED",t[t.CLOSING=4]="CLOSING",t[t.CLOSED=5]="CLOSED"})(Ht||(Ht={}));class jne{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(e,n,r){var i;this.peerConnectionTimeout=Vw.peerConnectionTimeout,this.log=nt,this.updateState=()=>{var s,o;const l=this.state,u=this.requiredTransports.map(d=>d.getConnectionState());u.every(d=>d==="connected")?this.state=Ht.CONNECTED:u.some(d=>d==="failed")?this.state=Ht.FAILED:u.some(d=>d==="connecting")?this.state=Ht.CONNECTING:u.every(d=>d==="closed")?this.state=Ht.CLOSED:u.some(d=>d==="closed")?this.state=Ht.CLOSING:u.every(d=>d==="new")&&(this.state=Ht.NEW),l!==this.state&&(this.log.debug("pc state change: from ".concat(Ht[l]," to ").concat(Ht[this.state]),this.logContext),(s=this.onStateChange)===null||s===void 0||s.call(this,this.state,this.publisher.getConnectionState(),(o=this.subscriber)===null||o===void 0?void 0:o.getConnectionState()))},this.log=Ms((i=r.loggerName)!==null&&i!==void 0?i:mi.PCManager),this.loggerOptions=r,this.isPublisherConnectionRequired=n!=="subscriber-primary",this.isSubscriberConnectionRequired=n==="subscriber-primary",this.publisher=new m_(e,r),n!=="publisher-only"&&(this.subscriber=new m_(e,r),this.subscriber.onConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.subscriber.onIceCandidate=s=>{var o;(o=this.onIceCandidate)===null||o===void 0||o.call(this,s,ci.SUBSCRIBER)},this.subscriber.onDataChannel=s=>{var o;(o=this.onDataChannel)===null||o===void 0||o.call(this,s)},this.subscriber.onTrack=s=>{var o;(o=this.onTrack)===null||o===void 0||o.call(this,s)}),this.publisher.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=s=>{var o;(o=this.onIceCandidate)===null||o===void 0||o.call(this,s,ci.PUBLISHER)},this.publisher.onTrack=s=>{var o;(o=this.onTrack)===null||o===void 0||o.call(this,s)},this.publisher.onOffer=(s,o)=>{var l;(l=this.onPublisherOffer)===null||l===void 0||l.call(this,s,o)},this.state=Ht.NEW,this.connectionLock=new qn,this.remoteOfferLock=new qn}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}requirePublisher(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isPublisherConnectionRequired=e,this.updateState()}createAndSendPublisherOffer(e){return this.publisher.createAndSendOffer(e)}setPublisherAnswer(e,n){return this.publisher.setRemoteDescription(e,n)}removeTrack(e){return this.publisher.removeTrack(e)}close(){return V(this,void 0,void 0,function*(){var e;if(this.publisher&&this.publisher.getSignallingState()!=="closed"){const n=this.publisher;for(const r of n.getSenders())try{n.canRemoveTrack()&&n.removeTrack(r)}catch(i){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:i}))}}yield Promise.all([this.publisher.close(),(e=this.subscriber)===null||e===void 0?void 0:e.close()]),this.updateState()})}triggerIceRestart(){return V(this,void 0,void 0,function*(){this.subscriber&&(this.subscriber.restartingIce=!0),this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))})}addIceCandidate(e,n){return V(this,void 0,void 0,function*(){var r;n===ci.PUBLISHER?yield this.publisher.addIceCandidate(e):yield(r=this.subscriber)===null||r===void 0?void 0:r.addIceCandidate(e)})}createSubscriberAnswerFromOffer(e,n){return V(this,void 0,void 0,function*(){var r,i,s;this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type,sdp:e.sdp,signalingState:(r=this.subscriber)===null||r===void 0?void 0:r.getSignallingState().toString()}));const o=yield this.remoteOfferLock.lock();try{return(yield(i=this.subscriber)===null||i===void 0?void 0:i.setRemoteDescription(e,n))?yield(s=this.subscriber)===null||s===void 0?void 0:s.createAndSetAnswer():void 0}finally{o()}})}updateConfiguration(e,n){var r;this.publisher.setConfiguration(e),(r=this.subscriber)===null||r===void 0||r.setConfiguration(e),n&&this.triggerIceRestart()}ensurePCTransportConnection(e,n){return V(this,void 0,void 0,function*(){var r;const i=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&this.publisher.getConnectionState()!=="connected"&&this.publisher.getConnectionState()!=="connecting"&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all((r=this.requiredTransports)===null||r===void 0?void 0:r.map(s=>this.ensureTransportConnected(s,e,n)))}finally{i()}})}negotiate(e){return V(this,void 0,void 0,function*(){return new Promise((n,r)=>V(this,void 0,void 0,function*(){const i=setTimeout(()=>{r("negotiation timed out")},this.peerConnectionTimeout),s=()=>{clearTimeout(i),r("negotiation aborted")};e.signal.addEventListener("abort",s),this.publisher.once(sc.NegotiationStarted,()=>{e.signal.aborted||this.publisher.once(sc.NegotiationComplete,()=>{clearTimeout(i),n()})}),yield this.publisher.negotiate(o=>{clearTimeout(i),r(o)})}))})}addPublisherTransceiver(e,n){return this.publisher.addTransceiver(e,n)}addPublisherTransceiverOfKind(e,n){return this.publisher.addTransceiverOfKind(e,n)}getMidForReceiver(e){const r=(this.subscriber?this.subscriber.getTransceivers():this.publisher.getTransceivers()).find(i=>i.receiver===e);return r==null?void 0:r.mid}addPublisherTrack(e){return this.publisher.addTrack(e)}createPublisherDataChannel(e,n){return this.publisher.createDataChannel(e,n)}getConnectedAddress(e){return e===ci.PUBLISHER?this.publisher.getConnectedAddress():e===ci.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const e=[];return this.isPublisherConnectionRequired&&e.push(this.publisher),this.isSubscriberConnectionRequired&&this.subscriber&&e.push(this.subscriber),e}ensureTransportConnected(e,n){return V(this,arguments,void 0,function(r,i){var s=this;let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.peerConnectionTimeout;return(function*(){if(r.getConnectionState()!=="connected")return new Promise((u,d)=>V(s,void 0,void 0,function*(){const f=()=>{this.log.warn("abort transport connection",this.logContext),Tn.clearTimeout(m),d(Ke.cancelled("room connection has been cancelled"))};i!=null&&i.signal.aborted&&f(),i==null||i.signal.addEventListener("abort",f);const m=Tn.setTimeout(()=>{i==null||i.signal.removeEventListener("abort",f),d(Ke.internal("could not establish pc connection"))},o);for(;this.state!==Ht.CONNECTED;)if(yield En(50),i!=null&&i.signal.aborted){d(Ke.cancelled("room connection has been cancelled"));return}Tn.clearTimeout(m),i==null||i.signal.removeEventListener("abort",f),u()}))})()})}}const oO=5e3,One=3e4;class vt{static fetchRegionSettings(e,n,r){return V(this,void 0,void 0,function*(){const i=yield vt.fetchLock.lock();try{const s=yield fetch("".concat(Lne(e),"/regions"),{headers:{authorization:"Bearer ".concat(n)},signal:r});if(s.ok){const o=one(s.headers),l=o?o*1e3:oO;return{regionSettings:yield s.json(),updatedAtInMs:Date.now(),maxAgeInMs:l}}else throw s.status===401?Ke.notAllowed("Could not fetch region settings: ".concat(s.statusText),s.status):Ke.internal("Could not fetch region settings: ".concat(s.statusText))}catch(s){throw s instanceof Ke?s:r!=null&&r.aborted?Ke.cancelled("Region fetching was aborted"):Ke.serverUnreachable("Could not fetch region settings, ".concat(s instanceof Error?"".concat(s.name,": ").concat(s.message):s))}finally{i()}})}static scheduleRefetch(e,n,r){return V(this,void 0,void 0,function*(){const i=vt.settingsTimeouts.get(e.hostname);clearTimeout(i),vt.settingsTimeouts.set(e.hostname,setTimeout(()=>V(this,void 0,void 0,function*(){try{const s=yield vt.fetchRegionSettings(e,n);vt.updateCachedRegionSettings(e,n,s)}catch(s){if(s instanceof Ke&&s.reason===Mt.NotAllowed){nt.debug("token is not valid, cancelling auto region refresh");return}nt.debug("auto refetching of region settings failed",{error:s}),vt.scheduleRefetch(e,n,r)}}),r))})}static updateCachedRegionSettings(e,n,r){vt.cache.set(e.hostname,r),vt.scheduleRefetch(e,n,r.maxAgeInMs)}static stopRefetch(e){const n=vt.settingsTimeouts.get(e);n&&(clearTimeout(n),vt.settingsTimeouts.delete(e))}static scheduleCleanup(e){let n=vt.connectionTrackers.get(e);n&&(n.cleanupTimeout&&clearTimeout(n.cleanupTimeout),n.cleanupTimeout=setTimeout(()=>{const r=vt.connectionTrackers.get(e);r&&r.connectionCount===0&&(nt.debug("stopping region refetch after disconnect delay",{hostname:e}),vt.stopRefetch(e)),r&&(r.cleanupTimeout=void 0)},One))}static cancelCleanup(e){const n=vt.connectionTrackers.get(e);n!=null&&n.cleanupTimeout&&(clearTimeout(n.cleanupTimeout),n.cleanupTimeout=void 0)}notifyConnected(){const e=this.serverUrl.hostname;let n=vt.connectionTrackers.get(e);n||(n={connectionCount:0},vt.connectionTrackers.set(e,n)),n.connectionCount++,vt.cancelCleanup(e)}notifyDisconnected(){const e=this.serverUrl.hostname,n=vt.connectionTrackers.get(e);n&&(n.connectionCount=Math.max(0,n.connectionCount-1),n.connectionCount===0&&vt.scheduleCleanup(e))}constructor(e,n){this.attemptedRegions=[],this.serverUrl=new URL(e),this.token=n}updateToken(e){this.token=e}isCloud(){return Cc(this.serverUrl)}getServerUrl(){return this.serverUrl}fetchRegionSettings(e){return V(this,void 0,void 0,function*(){return vt.fetchRegionSettings(this.serverUrl,this.token,e)})}getNextBestRegionUrl(e){return V(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");let n=vt.cache.get(this.serverUrl.hostname);(!n||Date.now()-n.updatedAtInMs>n.maxAgeInMs)&&(n=yield this.fetchRegionSettings(e),vt.updateCachedRegionSettings(this.serverUrl,this.token,n));const r=n.regionSettings.regions.filter(i=>!this.attemptedRegions.find(s=>s.url===i.url));if(r.length>0){const i=r[0];return this.attemptedRegions.push(i),nt.debug("next region: ".concat(i.region)),i.url}else return null})}resetAttempts(){this.attemptedRegions=[]}setServerReportedRegions(e){vt.updateCachedRegionSettings(this.serverUrl,this.token,e)}}vt.cache=new Map;vt.settingsTimeouts=new Map;vt.connectionTrackers=new Map;vt.fetchLock=new qn;function Lne(t){return"".concat(t.protocol.replace("ws","http"),"//").concat(t.host,"/settings")}class Gt extends Error{constructor(e,n,r){super(n),this.code=e,this.message=y_(n,Gt.MAX_MESSAGE_BYTES),this.data=r?y_(r,Gt.MAX_DATA_BYTES):void 0}static fromProto(e){return new Gt(e.code,e.message,e.data)}toProto(){return new QD({code:this.code,message:this.message,data:this.data})}static builtIn(e,n){return new Gt(Gt.ErrorCode[e],Gt.ErrorMessage[e],n)}}Gt.MAX_MESSAGE_BYTES=256;Gt.MAX_DATA_BYTES=15360;Gt.ErrorCode={APPLICATION_ERROR:1500,CONNECTION_TIMEOUT:1501,RESPONSE_TIMEOUT:1502,RECIPIENT_DISCONNECTED:1503,RESPONSE_PAYLOAD_TOO_LARGE:1504,SEND_FAILED:1505,UNSUPPORTED_METHOD:1400,RECIPIENT_NOT_FOUND:1401,REQUEST_PAYLOAD_TOO_LARGE:1402,UNSUPPORTED_SERVER:1403,UNSUPPORTED_VERSION:1404};Gt.ErrorMessage={APPLICATION_ERROR:"Application error in method handler",CONNECTION_TIMEOUT:"Connection timeout",RESPONSE_TIMEOUT:"Response timeout",RECIPIENT_DISCONNECTED:"Recipient disconnected",RESPONSE_PAYLOAD_TOO_LARGE:"Response payload too large",SEND_FAILED:"Failed to send",UNSUPPORTED_METHOD:"Method not supported at destination",RECIPIENT_NOT_FOUND:"Recipient not found",REQUEST_PAYLOAD_TOO_LARGE:"Request payload too large",UNSUPPORTED_SERVER:"RPC not supported by server",UNSUPPORTED_VERSION:"Unsupported RPC version"};const aO=15360;function zw(t){return new TextEncoder().encode(t).length}function y_(t,e){if(zw(t)<=e)return t;let n=0,r=t.length;const i=new TextEncoder;for(;n<r;){const s=Math.floor((n+r+1)/2);i.encode(t.slice(0,s)).length<=e?n=s:r=s-1}return t.slice(0,n)}const $w=2e3;function Lm(t,e){if(!e)return 0;let n,r;return"bytesReceived"in t?(n=t.bytesReceived,r=e.bytesReceived):"bytesSent"in t&&(n=t.bytesSent,r=e.bytesSent),n===void 0||r===void 0||t.timestamp===void 0||e.timestamp===void 0?0:(n-r)*8*1e3/(t.timestamp-e.timestamp)}const Ww=typeof MediaRecorder<"u";class Fne{constructor(){throw new Error("MediaRecorder is not available in this environment")}}const Une=Ww?MediaRecorder:Fne;class Bne extends Une{constructor(e,n){if(!Ww)throw new Error("MediaRecorder is not available in this environment");super(new MediaStream([e.mediaStreamTrack]),n);let r,i;const s=()=>i===void 0,o=()=>{this.removeEventListener("dataavailable",r),this.removeEventListener("stop",o),this.removeEventListener("error",l),i==null||i.close(),i=void 0},l=u=>{i==null||i.error(u),this.removeEventListener("dataavailable",r),this.removeEventListener("stop",o),this.removeEventListener("error",l),i=void 0};this.byteStream=new ReadableStream({start:u=>{i=u,r=d=>V(this,void 0,void 0,function*(){let f;if(d.data.arrayBuffer){const m=yield d.data.arrayBuffer();f=new Uint8Array(m)}else if(d.data.byteArray)f=d.data.byteArray;else throw new Error("no data available!");s()||u.enqueue(f)}),this.addEventListener("dataavailable",r)},cancel:()=>{o()}}),this.addEventListener("stop",o),this.addEventListener("error",l)}}function Vne(){return Ww}const zne=1e3,$ne=1e4;class lO extends ue{get sender(){return this._sender}set sender(e){this._sender=e}get constraints(){return this._constraints}get hasPreConnectBuffer(){return!!this.localTrackRecorder}constructor(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=arguments.length>4?arguments[4]:void 0;super(e,n,s),this.manuallyStopped=!1,this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch(()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext)),this.debouncedTrackMuteHandler=Uw(()=>V(this,void 0,void 0,function*(){yield this.pauseUpstream()}),5e3),this.handleTrackUnmuteEvent=()=>V(this,void 0,void 0,function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()}),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(we.Ended,this)},this.reacquireTrack=!1,this.providedByUser=i,this.muteLock=new qn,this.pauseUpstreamLock=new qn,this.trackChangeLock=new qn,this.trackChangeLock.lock().then(o=>V(this,void 0,void 0,function*(){try{yield this.setMediaStreamTrack(e,!0)}finally{o()}})),this._constraints=e.getConstraints(),r&&(this._constraints=r)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==ue.Kind.Video)return;const{width:e,height:n}=this._mediaStreamTrack.getSettings();if(e&&n)return{width:e,height:n}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var e,n;return(n=(e=this.processor)===null||e===void 0?void 0:e.processedTrack)!==null&&n!==void 0?n:this._mediaStreamTrack}get isLocal(){return!0}getSourceTrackSettings(){return this._mediaStreamTrack.getSettings()}setMediaStreamTrack(e,n){return V(this,void 0,void 0,function*(){var r;if(e===this._mediaStreamTrack&&!n)return;this._mediaStreamTrack&&(this.attachedElements.forEach(s=>{nc(this._mediaStreamTrack,s)}),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([e]),e&&(e.addEventListener("ended",this.handleEnded),e.addEventListener("mute",this.handleTrackMuteEvent),e.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=e.getConstraints());let i;if(this.processor&&e){if(this.log.debug("restarting processor",this.logContext),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");this.processorElement&&($l(e,this.processorElement),this.processorElement.muted=!0),yield this.processor.restart({track:e,kind:this.kind,element:this.processorElement}),i=this.processor.processedTrack}this.sender&&((r=this.sender.transport)===null||r===void 0?void 0:r.state)!=="closed"&&(yield this.sender.replaceTrack(i??e)),!this.providedByUser&&this._mediaStreamTrack!==e&&this._mediaStreamTrack.stop(),this._mediaStreamTrack=e,e&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach(s=>{$l(i??e,s)}))})}waitForDimensions(){return V(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:zne;return(function*(){var r;if(e.kind===ue.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");((r=ar())===null||r===void 0?void 0:r.os)==="iOS"&&(yield En(10));const i=Date.now();for(;Date.now()-i<n;){const s=e.dimensions;if(s)return s;yield En(50)}throw new bs("unable to get track dimensions after timeout")})()})}setDeviceId(e){return V(this,void 0,void 0,function*(){return this._constraints.deviceId===e&&this._mediaStreamTrack.getSettings().deviceId===Fo(e)||(this._constraints.deviceId=e,this.isMuted)?!0:(yield this.restartTrack(),Fo(e)===this._mediaStreamTrack.getSettings().deviceId)})}getDeviceId(){return V(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){if(e.source===ue.Source.ScreenShare)return;const{deviceId:r,groupId:i}=e._mediaStreamTrack.getSettings(),s=e.kind===ue.Kind.Audio?"audioinput":"videoinput";return n?bn.getInstance().normalizeDeviceId(s,r,i):r})()})}mute(){return V(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return V(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(e,n){return V(this,void 0,void 0,function*(){const r=yield this.trackChangeLock.lock();try{if(!this.sender)throw new bs("unable to replace an unpublished track");let i,s;return typeof n=="boolean"?i=n:n!==void 0&&(i=n.userProvidedTrack,s=n.stopProcessor),this.providedByUser=i??!0,this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(e),s&&this.processor&&(yield this.internalStopProcessor()),this}finally{r()}})}restart(e){return V(this,void 0,void 0,function*(){this.manuallyStopped=!1;const n=yield this.trackChangeLock.lock();try{e||(e=this._constraints);const{deviceId:r,facingMode:i}=e,s=fte(e,["deviceId","facingMode"]);this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:e}));const o={audio:!1,video:!1};this.kind===ue.Kind.Video?o.video=r||i?{deviceId:r,facingMode:i}:!0:o.audio=r?Object.assign({deviceId:r},s):!0,this.attachedElements.forEach(d=>{nc(this.mediaStreamTrack,d)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const u=(yield navigator.mediaDevices.getUserMedia(o)).getTracks()[0];return this.kind===ue.Kind.Video&&(yield u.applyConstraints(s)),u.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(u),this._constraints=e,this.emit(we.Restarted,this),this.manuallyStopped&&(this.log.warn("track was stopped during a restart, stopping restarted track",this.logContext),this.stop()),this}finally{n()}})}setTrackMuted(e){this.log.debug("setting ".concat(this.kind," track ").concat(e?"muted":"unmuted"),this.logContext),!(this.isMuted===e&&this._mediaStreamTrack.enabled!==e)&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?we.Muted:we.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return V(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),Zj()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))})}stop(){var e;this.manuallyStopped=!0,super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),(e=this.processor)===null||e===void 0||e.destroy(),this.processor=void 0}pauseUpstream(){return V(this,void 0,void 0,function*(){var e;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){this.log.warn("unable to pause upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!0,this.emit(we.UpstreamPaused,this);const r=ar();if((r==null?void 0:r.name)==="Safari"&&Yi(r.version,"12.0")<0)throw new Dw("pauseUpstream is not supported on Safari < 12.");((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(null))}finally{n()}})}resumeUpstream(){return V(this,void 0,void 0,function*(){var e;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){this.log.warn("unable to resume upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!1,this.emit(we.UpstreamResumed,this),((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(this.mediaStreamTrack))}finally{n()}})}getRTCStatsReport(){return V(this,void 0,void 0,function*(){var e;return!((e=this.sender)===null||e===void 0)&&e.getStats?yield this.sender.getStats():void 0})}setProcessor(e){return V(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){var s;const o=yield r.trackChangeLock.lock();try{r.log.debug("setting up processor",r.logContext);const l=document.createElement(r.kind),u={kind:r.kind,track:r._mediaStreamTrack,element:l,audioContext:r.audioContext};if(yield n.init(u),r.log.debug("processor initialized",r.logContext),r.processor&&(yield r.internalStopProcessor()),r.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");if($l(r._mediaStreamTrack,l),l.muted=!0,l.play().catch(d=>{d instanceof DOMException&&d.name==="AbortError"?(r.log.warn("failed to play processor element, retrying",Object.assign(Object.assign({},r.logContext),{error:d})),setTimeout(()=>{l.play().catch(f=>{r.log.error("failed to play processor element",Object.assign(Object.assign({},r.logContext),{err:f}))})},100)):r.log.error("failed to play processor element",Object.assign(Object.assign({},r.logContext),{error:d}))}),r.processor=n,r.processorElement=l,r.processor.processedTrack){for(const d of r.attachedElements)d!==r.processorElement&&i&&(nc(r._mediaStreamTrack,d),$l(r.processor.processedTrack,d));yield(s=r.sender)===null||s===void 0?void 0:s.replaceTrack(r.processor.processedTrack)}r.emit(we.TrackProcessorUpdate,r.processor)}finally{o()}})()})}getProcessor(){return this.processor}stopProcessor(){return V(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){const r=yield e.trackChangeLock.lock();try{yield e.internalStopProcessor(n)}finally{r()}})()})}internalStopProcessor(){return V(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){var r,i;e.processor&&(e.log.debug("stopping processor",e.logContext),(r=e.processor.processedTrack)===null||r===void 0||r.stop(),yield e.processor.destroy(),e.processor=void 0,n||((i=e.processorElement)===null||i===void 0||i.remove(),e.processorElement=void 0),yield e._mediaStreamTrack.applyConstraints(e._constraints),yield e.setMediaStreamTrack(e._mediaStreamTrack,!0),e.emit(we.TrackProcessorUpdate))})()})}startPreConnectBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;if(!Vne()){this.log.warn("MediaRecorder is not available, cannot start preconnect buffer",this.logContext);return}if(this.localTrackRecorder){this.log.warn("preconnect buffer already started");return}else{let n="audio/webm;codecs=opus";MediaRecorder.isTypeSupported(n)||(n="video/mp4"),this.localTrackRecorder=new Bne(this,{mimeType:n})}this.localTrackRecorder.start(e),this.autoStopPreConnectBuffer=setTimeout(()=>{this.log.warn("preconnect buffer timed out, stopping recording automatically",this.logContext),this.stopPreConnectBuffer()},$ne)}stopPreConnectBuffer(){clearTimeout(this.autoStopPreConnectBuffer),this.localTrackRecorder&&(this.localTrackRecorder.stop(),this.localTrackRecorder=void 0)}getPreConnectBuffer(){var e;return(e=this.localTrackRecorder)===null||e===void 0?void 0:e.byteStream}getPreConnectBufferMimeType(){var e;return(e=this.localTrackRecorder)===null||e===void 0?void 0:e.mimeType}}class $p extends lO{get enhancedNoiseCancellation(){return this.isKrispNoiseFilterEnabled}constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;super(e,ue.Kind.Audio,n,r,s),this.stopOnMute=!1,this.isKrispNoiseFilterEnabled=!1,this.monitorSender=()=>V(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let o;try{o=yield this.getSenderStats()}catch(l){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:l}));return}o&&this.prevStats&&(this._currentBitrate=Lm(o,this.prevStats)),this.prevStats=o}),this.handleKrispNoiseFilterEnable=()=>{this.isKrispNoiseFilterEnabled=!0,this.log.debug("Krisp noise filter enabled",this.logContext),this.emit(we.AudioTrackFeatureUpdate,this,yn.TF_ENHANCED_NOISE_CANCELLATION,!0)},this.handleKrispNoiseFilterDisable=()=>{this.isKrispNoiseFilterEnabled=!1,this.log.debug("Krisp noise filter disabled",this.logContext),this.emit(we.AudioTrackFeatureUpdate,this,yn.TF_ENHANCED_NOISE_CANCELLATION,!1)},this.audioContext=i,this.checkForSilence()}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return V(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===ue.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return V(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{if(!this.isMuted)return this.log.debug("Track already unmuted",this.logContext),this;const r=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==Fo(this._constraints.deviceId);return this.source===ue.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended"||r)&&!this.isUserProvided&&(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this}finally{n()}})}restartTrack(e){return V(this,void 0,void 0,function*(){let n;if(e){const r=Ow({audio:e});typeof r.audio!="boolean"&&(n=r.audio)}yield this.restart(n)})}restart(e){const n=Object.create(null,{restart:{get:()=>super.restart}});return V(this,void 0,void 0,function*(){const r=yield n.restart.call(this,e);return this.checkForSilence(),r})}startMonitor(){sr()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},$w)))}setProcessor(e){return V(this,void 0,void 0,function*(){var n;const r=yield this.trackChangeLock.lock();try{if(!Ki()&&!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");this.processor&&(yield this.internalStopProcessor());const i={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(e.name),this.logContext),yield e.init(i),this.processor=e,this.processor.processedTrack&&(yield(n=this.sender)===null||n===void 0?void 0:n.replaceTrack(this.processor.processedTrack),this.processor.processedTrack.addEventListener("enable-lk-krisp-noise-filter",this.handleKrispNoiseFilterEnable),this.processor.processedTrack.addEventListener("disable-lk-krisp-noise-filter",this.handleKrispNoiseFilterDisable)),this.emit(we.TrackProcessorUpdate,this.processor)}finally{r()}})}setAudioContext(e){this.audioContext=e}getSenderStats(){return V(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return;const n=yield this.sender.getStats();let r;return n.forEach(i=>{i.type==="outbound-rtp"&&(r={type:"audio",streamId:i.id,packetsSent:i.packetsSent,packetsLost:i.packetsLost,bytesSent:i.bytesSent,timestamp:i.timestamp,roundTripTime:i.roundTripTime,jitter:i.jitter})}),r})}checkForSilence(){return V(this,void 0,void 0,function*(){const e=yield Jj(this);return e&&(this.isMuted||this.log.debug("silence detected on local audio track",this.logContext),this.emit(we.AudioSilenceDetected)),e})}}function Wne(t,e,n){switch(t.kind){case"audio":return new $p(t,e,!1,void 0,n);case"video":return new Wp(t,e,!1,n);default:throw new bs("unsupported track type: ".concat(t.kind))}}const Hne=Object.values(Cd),qne=Object.values(cb),Gne=Object.values(jw),Kne=[Cd.h180,Cd.h360],Yne=[cb.h180,cb.h360],Jne=t=>[{scaleResolutionDownBy:2,fps:t.encoding.maxFramerate}].map(n=>{var r,i;return new Tt(Math.floor(t.width/n.scaleResolutionDownBy),Math.floor(t.height/n.scaleResolutionDownBy),Math.max(15e4,Math.floor(t.encoding.maxBitrate/(Math.pow(n.scaleResolutionDownBy,2)*(((r=t.encoding.maxFramerate)!==null&&r!==void 0?r:30)/((i=n.fps)!==null&&i!==void 0?i:30))))),n.fps,t.encoding.priority)}),yb=["q","h","f"];function bb(t,e,n,r){var i,s;let o=r==null?void 0:r.videoEncoding;t&&(o=r==null?void 0:r.screenShareEncoding);const l=r==null?void 0:r.simulcast,u=r==null?void 0:r.scalabilityMode,d=r==null?void 0:r.videoCodec;if(!o&&!l&&!u||!e||!n)return[{}];o||(o=Xne(t,e,n,d),nt.debug("using video encoding",o));const f=o.maxFramerate,m=new Tt(e,n,o.maxBitrate,o.maxFramerate,o.priority);if(u&&ui(d)){const C=new cO(u),x=[];if(C.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(u));const k=ar();if(Td()||Ki()||(k==null?void 0:k.name)==="Chrome"&&Yi(k==null?void 0:k.version,"113")<0){const T=C.suffix=="h"?2:3,_=Kte(k);for(let P=0;P<C.spatial;P+=1)x.push({rid:yb[2-P],maxBitrate:o.maxBitrate/Math.pow(T,P),maxFramerate:m.encoding.maxFramerate,scaleResolutionDownBy:_?Math.pow(2,P):void 0});x[0].scalabilityMode=u}else x.push({maxBitrate:o.maxBitrate,maxFramerate:m.encoding.maxFramerate,scalabilityMode:u});return m.encoding.priority&&(x[0].priority=m.encoding.priority,x[0].networkPriority=m.encoding.priority),nt.debug("using svc encoding",{encodings:x}),x}if(!l)return[o];let g=[];t?g=(i=x_(r==null?void 0:r.screenShareSimulcastLayers))!==null&&i!==void 0?i:b_(t,m):g=(s=x_(r==null?void 0:r.videoSimulcastLayers))!==null&&s!==void 0?s:b_(t,m);let y;if(g.length>0){const C=g[0];g.length>1&&([,y]=g);const x=Math.max(e,n);if(x>=960&&y)return Wy(e,n,[C,y,m],f);if(x>=480)return Wy(e,n,[C,m],f)}return Wy(e,n,[m])}function Qne(t,e,n){var r,i,s,o;if(!n.backupCodec||n.backupCodec===!0||n.backupCodec.codec===n.videoCodec)return;e!==n.backupCodec.codec&&nt.warn("requested a different codec than specified as backup",{serverRequested:e,backup:n.backupCodec.codec}),n.videoCodec=e,n.videoEncoding=n.backupCodec.encoding;const l=t.mediaStreamTrack.getSettings(),u=(r=l.width)!==null&&r!==void 0?r:(i=t.dimensions)===null||i===void 0?void 0:i.width,d=(s=l.height)!==null&&s!==void 0?s:(o=t.dimensions)===null||o===void 0?void 0:o.height;return t.source===ue.Source.ScreenShare&&n.simulcast&&(n.simulcast=!1),bb(t.source===ue.Source.ScreenShare,u,d,n)}function Xne(t,e,n,r){const i=Zne(t,e,n);let{encoding:s}=i[0];const o=Math.max(e,n);for(let l=0;l<i.length;l+=1){const u=i[l];if(s=u.encoding,u.width>=o)break}if(r)switch(r){case"av1":case"h265":s=Object.assign({},s),s.maxBitrate=s.maxBitrate*.7;break;case"vp9":s=Object.assign({},s),s.maxBitrate=s.maxBitrate*.85;break}return s}function Zne(t,e,n){if(t)return Gne;const r=e>n?e/n:n/e;return Math.abs(r-16/9)<Math.abs(r-4/3)?Hne:qne}function b_(t,e){if(t)return Jne(e);const{width:n,height:r}=e,i=n>r?n/r:r/n;return Math.abs(i-16/9)<Math.abs(i-4/3)?Kne:Yne}function Wy(t,e,n,r){const i=[];if(n.forEach((s,o)=>{if(o>=yb.length)return;const l=Math.min(t,e),d={rid:yb[o],scaleResolutionDownBy:Math.max(1,l/Math.min(s.width,s.height)),maxBitrate:s.encoding.maxBitrate},f=r&&s.encoding.maxFramerate?Math.min(r,s.encoding.maxFramerate):s.encoding.maxFramerate;f&&(d.maxFramerate=f);const m=Ba()||o===0;s.encoding.priority&&m&&(d.priority=s.encoding.priority,d.networkPriority=s.encoding.priority),i.push(d)}),Ki()&&tO()==="ios"){let s;i.forEach(l=>{s?l.maxFramerate&&l.maxFramerate>s&&(s=l.maxFramerate):s=l.maxFramerate});let o=!0;i.forEach(l=>{var u;l.maxFramerate!=s&&(o&&(o=!1,nt.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),nt.info('Setting framerate of encoding "'.concat((u=l.rid)!==null&&u!==void 0?u:"",'" to ').concat(s)),l.maxFramerate=s)})}return i}function x_(t){if(t)return t.sort((e,n)=>{const{encoding:r}=e,{encoding:i}=n;return r.maxBitrate>i.maxBitrate?1:r.maxBitrate<i.maxBitrate?-1:r.maxBitrate===i.maxBitrate&&r.maxFramerate&&i.maxFramerate?r.maxFramerate>i.maxFramerate?1:-1:0})}class cO{constructor(e){const n=e.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!n)throw new Error("invalid scalability mode");if(this.spatial=parseInt(n[1]),this.temporal=parseInt(n[2]),n.length>3)switch(n[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=n[3]}}toString(){var e;return"L".concat(this.spatial,"T").concat(this.temporal).concat((e=this.suffix)!==null&&e!==void 0?e:"")}}function ere(t){return t.source===ue.Source.ScreenShare||t.constraints.height&&Fo(t.constraints.height)>=1080?"maintain-resolution":"balanced"}const tre=5e3;class Wp extends lO{get sender(){return this._sender}set sender(e){this._sender=e,this.degradationPreference&&this.setDegradationPreference(this.degradationPreference)}constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0;super(e,ue.Kind.Video,n,r,i),this.simulcastCodecs=new Map,this.degradationPreference="balanced",this.isCpuConstrained=!1,this.optimizeForPerformance=!1,this.monitorSender=()=>V(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let s;try{s=yield this.getSenderStats()}catch(u){this.log.error("could not get video sender stats",Object.assign(Object.assign({},this.logContext),{error:u}));return}const o=new Map(s.map(u=>[u.rid,u])),l=s.some(u=>u.qualityLimitationReason==="cpu");if(l!==this.isCpuConstrained&&(this.isCpuConstrained=l,this.isCpuConstrained&&this.emit(we.CpuConstrained)),this.prevStats){let u=0;o.forEach((d,f)=>{var m;const g=(m=this.prevStats)===null||m===void 0?void 0:m.get(f);u+=Lm(d,g)}),this._currentBitrate=u}this.prevStats=o}),this.senderLock=new qn}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(e){var n;if(this.signalClient=e,!sr())return;const r=(n=this.sender)===null||n===void 0?void 0:n.getParameters();r&&(this.encodings=r.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},$w))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(e=>{e.mediaStreamTrack.stop()}),super.stop()}pauseUpstream(){const e=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});return V(this,void 0,void 0,function*(){var n,r,i,s,o;yield e.pauseUpstream.call(this);try{for(var l=!0,u=ys(this.simulcastCodecs.values()),d;d=yield u.next(),n=d.done,!n;l=!0)s=d.value,l=!1,yield(o=s.sender)===null||o===void 0?void 0:o.replaceTrack(null)}catch(f){r={error:f}}finally{try{!l&&!n&&(i=u.return)&&(yield i.call(u))}finally{if(r)throw r.error}}})}resumeUpstream(){const e=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});return V(this,void 0,void 0,function*(){var n,r,i,s,o;yield e.resumeUpstream.call(this);try{for(var l=!0,u=ys(this.simulcastCodecs.values()),d;d=yield u.next(),n=d.done,!n;l=!0){s=d.value,l=!1;const f=s;yield(o=f.sender)===null||o===void 0?void 0:o.replaceTrack(f.mediaStreamTrack)}}catch(f){r={error:f}}finally{try{!l&&!n&&(i=u.return)&&(yield i.call(u))}finally{if(r)throw r.error}}})}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return V(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===ue.Source.Camera&&!this.isUserProvided&&(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return V(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.source===ue.Source.Camera&&!this.isUserProvided&&(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this):(this.log.debug("Track already unmuted",this.logContext),this)}finally{n()}})}setTrackMuted(e){super.setTrackMuted(e);for(const n of this.simulcastCodecs.values())n.mediaStreamTrack.enabled=!e}getSenderStats(){return V(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return[];const n=[],r=yield this.sender.getStats();return r.forEach(i=>{var s;if(i.type==="outbound-rtp"){const o={type:"video",streamId:i.id,frameHeight:i.frameHeight,frameWidth:i.frameWidth,framesPerSecond:i.framesPerSecond,framesSent:i.framesSent,firCount:i.firCount,pliCount:i.pliCount,nackCount:i.nackCount,packetsSent:i.packetsSent,bytesSent:i.bytesSent,qualityLimitationReason:i.qualityLimitationReason,qualityLimitationDurations:i.qualityLimitationDurations,qualityLimitationResolutionChanges:i.qualityLimitationResolutionChanges,rid:(s=i.rid)!==null&&s!==void 0?s:i.id,retransmittedPacketsSent:i.retransmittedPacketsSent,targetBitrate:i.targetBitrate,timestamp:i.timestamp},l=r.get(i.remoteId);l&&(o.jitter=l.jitter,o.packetsLost=l.packetsLost,o.roundTripTime=l.roundTripTime),n.push(o)}}),n.sort((i,s)=>{var o,l;return((o=s.frameWidth)!==null&&o!==void 0?o:0)-((l=i.frameWidth)!==null&&l!==void 0?l:0)}),n})}setPublishingQuality(e){const n=[];for(let r=yr.LOW;r<=yr.HIGH;r+=1)n.push(new Nw({quality:r,enabled:r<=e}));this.log.debug("setting publishing quality. max quality ".concat(e),this.logContext),this.setPublishingLayers(ui(this.codec),n)}restartTrack(e){return V(this,void 0,void 0,function*(){var n,r,i,s,o;let l;if(e){const m=Ow({video:e});typeof m.video!="boolean"&&(l=m.video)}yield this.restart(l),this.isCpuConstrained=!1;try{for(var u=!0,d=ys(this.simulcastCodecs.values()),f;f=yield d.next(),n=f.done,!n;u=!0){s=f.value,u=!1;const m=s;m.sender&&((o=m.sender.transport)===null||o===void 0?void 0:o.state)!=="closed"&&(m.mediaStreamTrack=this.mediaStreamTrack.clone(),yield m.sender.replaceTrack(m.mediaStreamTrack))}}catch(m){r={error:m}}finally{try{!u&&!n&&(i=d.return)&&(yield i.call(d))}finally{if(r)throw r.error}}})}setProcessor(e){const n=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});return V(this,arguments,void 0,function(r){var i=this;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){var o,l,u,d,f,m;if(yield n.setProcessor.call(i,r,s),!((f=i.processor)===null||f===void 0)&&f.processedTrack)try{for(var g=!0,y=ys(i.simulcastCodecs.values()),C;C=yield y.next(),o=C.done,!o;g=!0)d=C.value,g=!1,yield(m=d.sender)===null||m===void 0?void 0:m.replaceTrack(i.processor.processedTrack)}catch(x){l={error:x}}finally{try{!g&&!o&&(u=y.return)&&(yield u.call(y))}finally{if(l)throw l.error}}})()})}setDegradationPreference(e){return V(this,void 0,void 0,function*(){if(this.degradationPreference=e,this.sender)try{this.log.debug("setting degradationPreference to ".concat(e),this.logContext);const n=this.sender.getParameters();n.degradationPreference=e,this.sender.setParameters(n)}catch(n){this.log.warn("failed to set degradationPreference",Object.assign({error:n},this.logContext))}})}addSimulcastTrack(e,n){if(this.simulcastCodecs.has(e)){this.log.error("".concat(e," already added, skipping adding simulcast codec"),this.logContext);return}const r={codec:e,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:n};return this.simulcastCodecs.set(e,r),r}setSimulcastTrackSender(e,n){const r=this.simulcastCodecs.get(e);r&&(r.sender=n,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},tre))}setPublishingCodecs(e){return V(this,void 0,void 0,function*(){var n,r,i,s,o,l,u;if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:e,currentCodec:this.codec})),!this.codec&&e.length>0)return yield this.setPublishingLayers(ui(e[0].codec),e[0].qualities),[];this.subscribedCodecs=e;const d=[];try{for(n=!0,r=ys(e);i=yield r.next(),s=i.done,!s;n=!0){u=i.value,n=!1;const f=u;if(!this.codec||this.codec===f.codec)yield this.setPublishingLayers(ui(f.codec),f.qualities);else{const m=this.simulcastCodecs.get(f.codec);if(this.log.debug("try setPublishingCodec for ".concat(f.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:m})),!m||!m.sender){for(const g of f.qualities)if(g.enabled){d.push(f.codec);break}}else m.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(f.codec),this.logContext),yield w_(m.sender,m.encodings,f.qualities,this.senderLock,ui(f.codec),this.log,this.logContext))}}}catch(f){o={error:f}}finally{try{!n&&!s&&(l=r.return)&&(yield l.call(r))}finally{if(o)throw o.error}}return d})}setPublishingLayers(e,n){return V(this,void 0,void 0,function*(){if(this.optimizeForPerformance){this.log.info("skipping setPublishingLayers due to optimized publishing performance",Object.assign(Object.assign({},this.logContext),{qualities:n}));return}this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:n})),!(!this.sender||!this.encodings)&&(yield w_(this.sender,this.encodings,n,this.senderLock,e,this.log,this.logContext))})}prioritizePerformance(){return V(this,void 0,void 0,function*(){if(!this.sender)throw new Error("sender not found");const e=yield this.senderLock.lock();try{this.optimizeForPerformance=!0;const n=this.sender.getParameters();n.encodings=n.encodings.map((r,i)=>{var s;return Object.assign(Object.assign({},r),{active:i===0,scaleResolutionDownBy:Math.max(1,Math.ceil(((s=this.mediaStreamTrack.getSettings().height)!==null&&s!==void 0?s:360)/360)),scalabilityMode:i===0&&ui(this.codec)?"L1T3":void 0,maxFramerate:i===0?15:0,maxBitrate:i===0?r.maxBitrate:0})}),this.log.debug("setting performance optimised encodings",Object.assign(Object.assign({},this.logContext),{encodings:n.encodings})),this.encodings=n.encodings,yield this.sender.setParameters(n)}catch(n){this.log.error("failed to set performance optimised encodings",Object.assign(Object.assign({},this.logContext),{error:n})),this.optimizeForPerformance=!1}finally{e()}})}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return V(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),Zj()&&this.isInBackground&&this.source===ue.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function w_(t,e,n,r,i,s,o){return V(this,void 0,void 0,function*(){const l=yield r.lock();s.debug("setPublishingLayersForSender",Object.assign(Object.assign({},o),{sender:t,qualities:n,senderEncodings:e}));try{const u=t.getParameters(),{encodings:d}=u;if(!d)return;if(d.length!==e.length){s.warn("cannot set publishing layers, encodings mismatch",Object.assign(Object.assign({},o),{encodings:d,senderEncodings:e}));return}let f=!1;!1&&d[0].scalabilityMode||(i&&n.some(y=>y.enabled)&&n.forEach(y=>y.enabled=!0),d.forEach((g,y)=>{var C;let x=(C=g.rid)!==null&&C!==void 0?C:"";x===""&&(x="q");const k=uO(x),T=n.find(_=>_.quality===k);T&&g.active!==T.enabled&&(f=!0,g.active=T.enabled,s.debug("setting layer ".concat(T.quality," to ").concat(g.active?"enabled":"disabled"),o),Ba()&&(T.enabled?(g.scaleResolutionDownBy=e[y].scaleResolutionDownBy,g.maxBitrate=e[y].maxBitrate,g.maxFrameRate=e[y].maxFrameRate):(g.scaleResolutionDownBy=4,g.maxBitrate=10,g.maxFrameRate=2)))})),f&&(u.encodings=d,s.debug("setting encodings",Object.assign(Object.assign({},o),{encodings:u.encodings})),yield t.setParameters(u))}finally{l()}})}function uO(t){switch(t){case"f":return yr.HIGH;case"h":return yr.MEDIUM;case"q":return yr.LOW;default:return yr.HIGH}}function k_(t,e,n,r){if(!n)return[new Lo({quality:yr.HIGH,width:t,height:e,bitrate:0,ssrc:0})];if(r){const i=n[0].scalabilityMode,s=new cO(i),o=[],l=s.suffix=="h"?1.5:2,u=s.suffix=="h"?2:3;for(let d=0;d<s.spatial;d+=1)o.push(new Lo({quality:Math.min(yr.HIGH,s.spatial-1)-d,width:Math.ceil(t/Math.pow(l,d)),height:Math.ceil(e/Math.pow(l,d)),bitrate:n[0].maxBitrate?Math.ceil(n[0].maxBitrate/Math.pow(u,d)):0,ssrc:0}));return o}return n.map(i=>{var s,o,l;const u=(s=i.scaleResolutionDownBy)!==null&&s!==void 0?s:1;let d=uO((o=i.rid)!==null&&o!==void 0?o:"");return new Lo({quality:d,width:Math.ceil(t/u),height:Math.ceil(e/u),bitrate:(l=i.maxBitrate)!==null&&l!==void 0?l:0,ssrc:0})})}const S_="_lossy",C_="_reliable",nre=2*1e3,Hy="leave-reconnect",rre=3e4,ire=8*1024,sre=256*1024;var Or;(function(t){t[t.New=0]="New",t[t.Connected=1]="Connected",t[t.Disconnected=2]="Disconnected",t[t.Reconnecting=3]="Reconnecting",t[t.Closed=4]="Closed"})(Or||(Or={}));class ore extends Zi.EventEmitter{get isClosed(){return this._isClosed}get pendingReconnect(){return!!this.reconnectTimeout}constructor(e){var n;super(),this.options=e,this.rtcConfig={},this.peerConnectionTimeout=Vw.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.latestRemoteOfferId=0,this.subscriberPrimary=!1,this.pcState=Or.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=nt,this.reliableDataSequence=1,this.reliableMessageBuffer=new u_,this.reliableReceivedState=new Ene(rre),this.lossyDataStatCurrentBytes=0,this.lossyDataStatByterate=0,this.lossyDataDropCount=0,this.midToTrackId={},this.isWaitingForNetworkReconnect=!1,this.handleDataChannel=r=>V(this,[r],void 0,function(i){var s=this;let{channel:o}=i;return(function*(){if(o){if(o.label===C_)s.reliableDCSub=o;else if(o.label===S_)s.lossyDCSub=o;else return;s.log.debug("on data channel ".concat(o.id,", ").concat(o.label),s.logContext),o.onmessage=s.handleDataMessage}})()}),this.handleDataMessage=r=>V(this,void 0,void 0,function*(){var i,s,o,l,u;const d=yield this.dataProcessLock.lock();try{let f;if(r.data instanceof ArrayBuffer)f=r.data;else if(r.data instanceof Blob)f=yield r.data.arrayBuffer();else{this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:r.data}));return}const m=Wn.fromBinary(new Uint8Array(f));if(m.sequence>0&&m.participantSid!==""){const g=this.reliableReceivedState.get(m.participantSid);if(g&&m.sequence<=g)return;this.reliableReceivedState.set(m.participantSid,m.sequence)}if(((i=m.value)===null||i===void 0?void 0:i.case)==="speaker")this.emit(ke.ActiveSpeakersUpdate,m.value.value.speakers);else if(((s=m.value)===null||s===void 0?void 0:s.case)==="encryptedPacket"){if(!this.e2eeManager){this.log.error("Received encrypted packet but E2EE not set up",this.logContext);return}const g=yield(o=this.e2eeManager)===null||o===void 0?void 0:o.handleEncryptedData(m.value.value.encryptedValue,m.value.value.iv,m.participantIdentity,m.value.value.keyIndex),y=KD.fromBinary(g.payload),C=new Wn({value:y.value,participantIdentity:m.participantIdentity,participantSid:m.participantSid});((l=C.value)===null||l===void 0?void 0:l.case)==="user"&&T_(C,C.value.value),this.emit(ke.DataPacketReceived,C,m.value.value.encryptionType)}else((u=m.value)===null||u===void 0?void 0:u.case)==="user"&&T_(m,m.value.value),this.emit(ke.DataPacketReceived,m,hn.NONE)}finally{d()}}),this.handleDataError=r=>{const s=r.currentTarget.maxRetransmits===0?"lossy":"reliable";if(r instanceof ErrorEvent&&r.error){const{error:o}=r.error;this.log.error("DataChannel error on ".concat(s,": ").concat(r.message),Object.assign(Object.assign({},this.logContext),{error:o}))}else this.log.error("Unknown DataChannel error on ".concat(s),Object.assign(Object.assign({},this.logContext),{event:r}))},this.handleBufferedAmountLow=r=>{const s=r.currentTarget.maxRetransmits===0?ct.LOSSY:ct.RELIABLE;this.updateAndEmitDCBufferStatus(s)},this.handleDisconnect=(r,i)=>{if(this._isClosed)return;this.log.warn("".concat(r," disconnected"),this.logContext),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const s=u=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(u,"ms. giving up"),this.logContext),this.emit(ke.Disconnected),this.close()},o=Date.now()-this.reconnectStart;let l=this.getNextRetryDelay({elapsedMs:o,retryCount:this.reconnectAttempts});if(l===null){s(o);return}r===Hy&&(l=0),this.log.debug("reconnecting in ".concat(l,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=Tn.setTimeout(()=>this.attemptReconnect(i).finally(()=>this.reconnectTimeout=void 0),l)},this.waitForRestarted=()=>new Promise((r,i)=>{this.pcState===Or.Connected&&r();const s=()=>{this.off(ke.Disconnected,o),r()},o=()=>{this.off(ke.Restarted,s),i()};this.once(ke.Restarted,s),this.once(ke.Disconnected,o)}),this.updateAndEmitDCBufferStatus=r=>{if(r===ct.RELIABLE){const s=this.dataChannelForKind(r);s&&this.reliableMessageBuffer.alignBufferedAmount(s.bufferedAmount)}const i=this.isBufferStatusLow(r);typeof i<"u"&&i!==this.dcBufferStatus.get(r)&&(this.dcBufferStatus.set(r,i),this.emit(ke.DCBufferStatusChanged,i,r))},this.isBufferStatusLow=r=>{const i=this.dataChannelForKind(r);if(i)return i.bufferedAmount<=i.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>V(this,void 0,void 0,function*(){!this.url||!(yield fetch(Ed(this.url),{method:"HEAD"}).then(i=>i.ok).catch(()=>!1))||(this.log.info("detected network reconnected"),(this.client.currentState===Et.RECONNECTING||this.isWaitingForNetworkReconnect&&this.client.currentState===Et.CONNECTED)&&(this.clearReconnectTimeout(),this.attemptReconnect(wa.RR_SIGNAL_DISCONNECTED),this.isWaitingForNetworkReconnect=!1))}),this.handleBrowserOffline=()=>V(this,void 0,void 0,function*(){if(this.url)try{yield Promise.race([fetch(Ed(this.url),{method:"HEAD"}),En(4e3).then(()=>Promise.reject())])}catch{window.navigator.onLine===!1&&(this.log.info("detected network interruption"),this.isWaitingForNetworkReconnect=!0)}}),this.log=Ms((n=e.loggerName)!==null&&n!==void 0?n:mi.Engine),this.loggerOptions={loggerName:e.loggerName,loggerContextCb:()=>this.logContext},this.client=new Lw(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.closingLock=new qn,this.dataProcessLock=new qn,this.dcBufferStatus=new Map([[ct.LOSSY,!0],[ct.RELIABLE,!0]]),this.client.onParticipantUpdate=r=>this.emit(ke.ParticipantUpdate,r),this.client.onConnectionQuality=r=>this.emit(ke.ConnectionQualityUpdate,r),this.client.onRoomUpdate=r=>this.emit(ke.RoomUpdate,r),this.client.onSubscriptionError=r=>this.emit(ke.SubscriptionError,r),this.client.onSubscriptionPermissionUpdate=r=>this.emit(ke.SubscriptionPermissionUpdate,r),this.client.onSpeakersChanged=r=>this.emit(ke.SpeakersChanged,r),this.client.onStreamStateUpdate=r=>this.emit(ke.StreamStateChanged,r),this.client.onRequestResponse=r=>this.emit(ke.SignalRequestResponse,r)}get logContext(){var e,n,r,i,s,o;return{room:(n=(e=this.latestJoinResponse)===null||e===void 0?void 0:e.room)===null||n===void 0?void 0:n.name,roomID:(i=(r=this.latestJoinResponse)===null||r===void 0?void 0:r.room)===null||i===void 0?void 0:i.sid,participant:(o=(s=this.latestJoinResponse)===null||s===void 0?void 0:s.participant)===null||o===void 0?void 0:o.identity,pID:this.participantSid}}join(e,n,r,i){return V(this,void 0,void 0,function*(){this.url=e,this.token=n,this.signalOpts=r,this.maxJoinAttempts=r.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const s=yield this.client.join(e,n,r,i);return this._isClosed=!1,this.latestJoinResponse=s,this.subscriberPrimary=s.subscriberPrimary,this.pcManager||(yield this.configure(s)),(!this.subscriberPrimary||s.fastPublish)&&this.negotiate().catch(o=>{nt.error(o,this.logContext)}),this.registerOnLineListener(),this.clientConfiguration=s.clientConfiguration,this.emit(ke.SignalConnected,s),s}catch(s){if(s instanceof Ke&&s.reason===Mt.ServerUnreachable&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join(e,n,r,i);throw s}})}close(){return V(this,void 0,void 0,function*(){const e=yield this.closingLock.lock();if(this.isClosed){e();return}try{this._isClosed=!0,this.joinAttempts=0,this.emit(ke.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),this.cleanupLossyDataStats(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{e()}})}cleanupPeerConnections(){return V(this,void 0,void 0,function*(){var e;yield(e=this.pcManager)===null||e===void 0?void 0:e.close(),this.pcManager=void 0;const n=r=>{r&&(r.close(),r.onbufferedamountlow=null,r.onclose=null,r.onclosing=null,r.onerror=null,r.onmessage=null,r.onopen=null)};n(this.lossyDC),n(this.lossyDCSub),n(this.reliableDC),n(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0,this.reliableMessageBuffer=new u_,this.reliableDataSequence=1,this.reliableReceivedState.clear()})}cleanupLossyDataStats(){this.lossyDataStatByterate=0,this.lossyDataStatCurrentBytes=0,this.lossyDataStatInterval&&(clearInterval(this.lossyDataStatInterval),this.lossyDataStatInterval=void 0),this.lossyDataDropCount=0}cleanupClient(){return V(this,void 0,void 0,function*(){yield this.client.close(),this.client.resetCallbacks()})}addTrack(e){if(this.pendingTrackResolvers[e.cid])throw new bs("a track with the same ID has already been published");return new Promise((n,r)=>{const i=setTimeout(()=>{delete this.pendingTrackResolvers[e.cid],r(Ke.timeout("publication of local track timed out, no response from server"))},1e4);this.pendingTrackResolvers[e.cid]={resolve:s=>{clearTimeout(i),n(s)},reject:()=>{clearTimeout(i),r(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(e)})}removeTrack(e){if(e.track&&this.pendingTrackResolvers[e.track.id]){const{reject:n}=this.pendingTrackResolvers[e.track.id];n&&n(),delete this.pendingTrackResolvers[e.track.id]}try{return this.pcManager.removeTrack(e),!0}catch(n){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:n}))}return!1}updateMuteStatus(e,n){this.client.sendMuteTrack(e,n)}get dataSubscriberReadyState(){var e;return(e=this.reliableDCSub)===null||e===void 0?void 0:e.readyState}getConnectedServerAddress(){return V(this,void 0,void 0,function*(){var e;return(e=this.pcManager)===null||e===void 0?void 0:e.getConnectedAddress()})}setRegionUrlProvider(e){this.regionUrlProvider=e}configure(e){return V(this,void 0,void 0,function*(){var n,r;if(this.pcManager&&this.pcManager.currentState!==Ht.NEW)return;this.participantSid=(n=e.participant)===null||n===void 0?void 0:n.sid;const i=this.makeRTCConfiguration(e);this.pcManager=new jne(i,this.options.singlePeerConnection?"publisher-only":e.subscriberPrimary?"subscriber-primary":"publisher-primary",this.loggerOptions),this.emit(ke.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(s,o)=>{this.client.sendIceCandidate(s,o)},this.pcManager.onPublisherOffer=(s,o)=>{this.client.sendOffer(s,o)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(s,o,l)=>V(this,void 0,void 0,function*(){if(this.log.debug("primary PC state changed ".concat(s),this.logContext),["closed","disconnected","failed"].includes(o)&&(this.publisherConnectionPromise=void 0),s===Ht.CONNECTED){const f=this.pcState===Or.New;this.pcState=Or.Connected,f&&this.emit(ke.Connected,e)}else s===Ht.FAILED&&(this.pcState===Or.Connected||this.pcState===Or.Reconnecting)&&(this.pcState=Or.Disconnected,this.handleDisconnect("peerconnection failed",l==="failed"?wa.RR_SUBSCRIBER_FAILED:wa.RR_PUBLISHER_FAILED));const u=this.client.isDisconnected||this.client.currentState===Et.RECONNECTING,d=[Ht.FAILED,Ht.CLOSING,Ht.CLOSED].includes(s);u&&d&&!this._isClosed&&this.emit(ke.Offline)}),this.pcManager.onTrack=s=>{s.streams.length!==0&&this.emit(ke.MediaTrackAdded,s.track,s.streams[0],s.receiver)},are((r=e.serverInfo)===null||r===void 0?void 0:r.protocol)||this.createDataChannels()})}setupSignalClientCallbacks(){this.client.onAnswer=(e,n,r)=>V(this,void 0,void 0,function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type,sdp:e.sdp,midToTrackId:r})),this.midToTrackId=r,yield this.pcManager.setPublisherAnswer(e,n))}),this.client.onTrickle=(e,n)=>{this.pcManager&&(this.log.debug("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:e,target:n})),this.pcManager.addIceCandidate(e,n))},this.client.onOffer=(e,n,r)=>V(this,void 0,void 0,function*(){if(this.latestRemoteOfferId=n,!this.pcManager)return;this.midToTrackId=r;const i=yield this.pcManager.createSubscriberAnswerFromOffer(e,n);i&&this.client.sendAnswer(i,n)}),this.client.onLocalTrackPublished=e=>{var n;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:e.cid,track:(n=e.track)===null||n===void 0?void 0:n.sid})),!this.pendingTrackResolvers[e.cid]){this.log.error("missing track resolver for ".concat(e.cid),Object.assign(Object.assign({},this.logContext),{cid:e.cid}));return}const{resolve:r}=this.pendingTrackResolvers[e.cid];delete this.pendingTrackResolvers[e.cid],r(e.track)},this.client.onLocalTrackUnpublished=e=>{this.emit(ke.LocalTrackUnpublished,e)},this.client.onLocalTrackSubscribed=e=>{this.emit(ke.LocalTrackSubscribed,e)},this.client.onTokenRefresh=e=>{var n;this.token=e,(n=this.regionUrlProvider)===null||n===void 0||n.updateToken(e)},this.client.onRemoteMuteChanged=(e,n)=>{this.emit(ke.RemoteMute,e,n)},this.client.onSubscribedQualityUpdate=e=>{this.emit(ke.SubscribedQualityUpdate,e)},this.client.onRoomMoved=e=>{var n;this.participantSid=(n=e.participant)===null||n===void 0?void 0:n.sid,this.latestJoinResponse&&(this.latestJoinResponse.room=e.room),this.emit(ke.RoomMoved,e)},this.client.onMediaSectionsRequirement=e=>{var n,r;const i={direction:"recvonly"};for(let s=0;s<e.numAudios;s++)(n=this.pcManager)===null||n===void 0||n.addPublisherTransceiverOfKind("audio",i);for(let s=0;s<e.numVideos;s++)(r=this.pcManager)===null||r===void 0||r.addPublisherTransceiverOfKind("video",i);this.negotiate()},this.client.onClose=()=>{this.handleDisconnect("signal",wa.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=e=>{switch(this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:e==null?void 0:e.reason})),e.regions&&this.regionUrlProvider&&(this.log.debug("updating regions",this.logContext),this.regionUrlProvider.setServerReportedRegions({updatedAtInMs:Date.now(),maxAgeInMs:oO,regionSettings:e.regions})),e.action){case ec.DISCONNECT:this.emit(ke.Disconnected,e==null?void 0:e.reason),this.close();break;case ec.RECONNECT:this.fullReconnectOnNext=!0,this.handleDisconnect(Hy);break;case ec.RESUME:this.handleDisconnect(Hy)}}}makeRTCConfiguration(e){var n;const r=Object.assign({},this.rtcConfig);if(!((n=this.signalOpts)===null||n===void 0)&&n.e2eeEnabled&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),r.encodedInsertableStreams=!0),e.iceServers&&!r.iceServers){const i=[];e.iceServers.forEach(s=>{const o={urls:s.urls};s.username&&(o.username=s.username),s.credential&&(o.credential=s.credential),i.push(o)}),r.iceServers=i}return e.clientConfiguration&&e.clientConfiguration.forceRelay===wd.ENABLED&&(r.iceTransportPolicy="relay"),r.sdpSemantics="unified-plan",r.continualGatheringPolicy="gather_continually",r}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(S_,{ordered:!1,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(C_,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow,this.cleanupLossyDataStats(),this.lossyDataStatInterval=setInterval(()=>{this.lossyDataStatByterate=this.lossyDataStatCurrentBytes,this.lossyDataStatCurrentBytes=0;const e=this.dataChannelForKind(ct.LOSSY);if(e){const n=this.lossyDataStatByterate/10;e.bufferedAmountLowThreshold=Math.min(Math.max(n,ire),sre)}},1e3))}createSender(e,n,r){return V(this,void 0,void 0,function*(){if(hb())return yield this.createTransceiverRTCRtpSender(e,n,r);if(fb())return this.log.warn("using add-track fallback",this.logContext),yield this.createRTCRtpSender(e.mediaStreamTrack);throw new dn("Required webRTC APIs not supported on this device")})}createSimulcastSender(e,n,r,i){return V(this,void 0,void 0,function*(){if(hb())return this.createSimulcastTransceiverSender(e,n,r,i);if(fb())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(e.mediaStreamTrack);throw new dn("Cannot stream on this device")})}createTransceiverRTCRtpSender(e,n,r){return V(this,void 0,void 0,function*(){if(!this.pcManager)throw new dn("publisher is closed");const i=[];e.mediaStream&&i.push(e.mediaStream),Zo(e)&&(e.codec=n.videoCodec);const s={direction:"sendonly",streams:i};return r&&(s.sendEncodings=r),(yield this.pcManager.addPublisherTransceiver(e.mediaStreamTrack,s)).sender})}createSimulcastTransceiverSender(e,n,r,i){return V(this,void 0,void 0,function*(){if(!this.pcManager)throw new dn("publisher is closed");const s={direction:"sendonly"};i&&(s.sendEncodings=i);const o=yield this.pcManager.addPublisherTransceiver(n.mediaStreamTrack,s);if(r.videoCodec)return e.setSimulcastTrackSender(r.videoCodec,o.sender),o.sender})}createRTCRtpSender(e){return V(this,void 0,void 0,function*(){if(!this.pcManager)throw new dn("publisher is closed");return this.pcManager.addPublisherTrack(e)})}attemptReconnect(e){return V(this,void 0,void 0,function*(){var n,r,i;if(!this._isClosed){if(this.attemptingReconnect){nt.warn("already attempting reconnect, returning early",this.logContext);return}(((n=this.clientConfiguration)===null||n===void 0?void 0:n.resumeConnection)===wd.DISABLED||((i=(r=this.pcManager)===null||r===void 0?void 0:r.currentState)!==null&&i!==void 0?i:Ht.NEW)===Ht.NEW)&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(e),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(s){this.reconnectAttempts+=1;let o=!0;s instanceof dn?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:s})),o=!1):s instanceof Ml||(this.fullReconnectOnNext=!0),o?this.handleDisconnect("reconnect",wa.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(ke.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay(e){try{return this.reconnectPolicy.nextRetryDelayInMs(e)}catch(n){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:n}))}return null}restartConnection(e){return V(this,void 0,void 0,function*(){var n,r,i;try{if(!this.url||!this.token)throw new dn("could not reconnect, url or token not saved");this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(ke.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();let s;try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new Ml;s=yield this.join(e??this.url,this.token,this.signalOpts)}catch(o){throw o instanceof Ke&&o.reason===Mt.NotAllowed?new dn("could not reconnect, token might be expired"):new Ml}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(ke.SignalRestarted,s),yield this.waitForPCReconnected(),this.client.currentState!==Et.CONNECTED)throw new Ml("Signal connection got severed during reconnect");(n=this.regionUrlProvider)===null||n===void 0||n.resetAttempts(),this.emit(ke.Restarted)}catch(s){const o=yield(r=this.regionUrlProvider)===null||r===void 0?void 0:r.getNextBestRegionUrl();if(o){yield this.restartConnection(o);return}else throw(i=this.regionUrlProvider)===null||i===void 0||i.resetAttempts(),s}})}resumeConnection(e){return V(this,void 0,void 0,function*(){var n;if(!this.url||!this.token)throw new dn("could not reconnect, url or token not saved");if(!this.pcManager)throw new dn("publisher and subscriber connections unset");this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(ke.Resuming);let r;try{this.setupSignalClientCallbacks(),r=yield this.client.reconnect(this.url,this.token,this.participantSid,e)}catch(i){let s="";throw i instanceof Error&&(s=i.message,this.log.error(i.message,Object.assign(Object.assign({},this.logContext),{error:i}))),i instanceof Ke&&i.reason===Mt.NotAllowed?new dn("could not reconnect, token might be expired"):i instanceof Ke&&i.reason===Mt.LeaveRequest?i:new Ml(s)}if(this.emit(ke.SignalResumed),r){const i=this.makeRTCConfiguration(r);this.pcManager.updateConfiguration(i),this.latestJoinResponse&&(this.latestJoinResponse.serverInfo=r.serverInfo)}else this.log.warn("Did not receive reconnect response",this.logContext);if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==Et.CONNECTED)throw new Ml("Signal connection got severed during reconnect");this.client.setReconnected(),((n=this.reliableDC)===null||n===void 0?void 0:n.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),r!=null&&r.lastMessageSeq&&this.resendReliableMessagesForResume(r.lastMessageSeq),this.emit(ke.Resumed)})}waitForPCInitialConnection(e,n){return V(this,void 0,void 0,function*(){if(!this.pcManager)throw new dn("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(n,e)})}waitForPCReconnected(){return V(this,void 0,void 0,function*(){this.pcState=Or.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield En(nre),!this.pcManager)throw new dn("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=Or.Connected}catch(e){throw this.pcState=Or.Disconnected,Ke.internal("could not establish PC connection, ".concat(e.message))}})}publishRpcResponse(e,n,r,i){return V(this,void 0,void 0,function*(){const s=new Wn({destinationIdentities:[e],kind:ct.RELIABLE,value:{case:"rpcResponse",value:new Ew({requestId:n,value:i?{case:"error",value:i.toProto()}:{case:"payload",value:r??""}})}});yield this.sendDataPacket(s,ct.RELIABLE)})}publishRpcAck(e,n){return V(this,void 0,void 0,function*(){const r=new Wn({destinationIdentities:[e],kind:ct.RELIABLE,value:{case:"rpcAck",value:new Tw({requestId:n})}});yield this.sendDataPacket(r,ct.RELIABLE)})}sendDataPacket(e,n){return V(this,void 0,void 0,function*(){if(yield this.ensurePublisherConnected(n),this.e2eeManager&&this.e2eeManager.isDataChannelEncryptionEnabled){const s=mne(e);if(s){const o=yield this.e2eeManager.encryptData(s.toBinary());e.value={case:"encryptedPacket",value:new GD({encryptedValue:o.payload,iv:o.iv,keyIndex:o.keyIndex})}}}n===ct.RELIABLE&&(e.sequence=this.reliableDataSequence,this.reliableDataSequence+=1);const r=e.toBinary(),i=this.dataChannelForKind(n);if(i){if(n===ct.RELIABLE)yield this.waitForBufferStatusLow(n),this.reliableMessageBuffer.push({data:r,sequence:e.sequence});else{if(!this.isBufferStatusLow(n)){this.lossyDataDropCount+=1,this.lossyDataDropCount%100===0&&this.log.warn("dropping lossy data channel messages, total dropped: ".concat(this.lossyDataDropCount),this.logContext);return}this.lossyDataStatCurrentBytes+=r.byteLength}if(this.attemptingReconnect)return;i.send(r)}this.updateAndEmitDCBufferStatus(n)})}resendReliableMessagesForResume(e){return V(this,void 0,void 0,function*(){yield this.ensurePublisherConnected(ct.RELIABLE);const n=this.dataChannelForKind(ct.RELIABLE);n&&(this.reliableMessageBuffer.popToSequence(e),this.reliableMessageBuffer.getAll().forEach(r=>{n.send(r.data)})),this.updateAndEmitDCBufferStatus(ct.RELIABLE)})}waitForBufferStatusLow(e){return new Promise((n,r)=>V(this,void 0,void 0,function*(){if(this.isBufferStatusLow(e))n();else{const i=()=>r("Engine closed");for(this.once(ke.Closing,i);!this.dcBufferStatus.get(e);)yield En(10);this.off(ke.Closing,i),n()}}))}ensureDataTransportConnected(e){return V(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;return(function*(){var s;if(!r.pcManager)throw new dn("PC manager is closed");const o=i?r.pcManager.subscriber:r.pcManager.publisher,l=i?"Subscriber":"Publisher";if(!o)throw Ke.internal("".concat(l," connection not set"));let u=!1;!i&&!r.dataChannelForKind(n,i)&&(r.createDataChannels(),u=!0),!u&&!i&&!r.pcManager.publisher.isICEConnected&&r.pcManager.publisher.getICEConnectionState()!=="checking"&&(u=!0),u&&r.negotiate().catch(m=>{nt.error(m,r.logContext)});const d=r.dataChannelForKind(n,i);if((d==null?void 0:d.readyState)==="open")return;const f=new Date().getTime()+r.peerConnectionTimeout;for(;new Date().getTime()<f;){if(o.isICEConnected&&((s=r.dataChannelForKind(n,i))===null||s===void 0?void 0:s.readyState)==="open")return;yield En(50)}throw Ke.internal("could not establish ".concat(l," connection, state: ").concat(o.getICEConnectionState()))})()})}ensurePublisherConnected(e){return V(this,void 0,void 0,function*(){this.publisherConnectionPromise||(this.publisherConnectionPromise=this.ensureDataTransportConnected(e,!1)),yield this.publisherConnectionPromise})}verifyTransport(){return!(!this.pcManager||this.pcManager.currentState!==Ht.CONNECTED||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return V(this,void 0,void 0,function*(){return new Promise((e,n)=>V(this,void 0,void 0,function*(){if(!this.pcManager){n(new ab("PC manager is closed"));return}this.pcManager.requirePublisher(),this.pcManager.publisher.getTransceivers().length==0&&!this.lossyDC&&!this.reliableDC&&this.createDataChannels();const r=new AbortController,i=()=>{r.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),e()};this.isClosed&&n("cannot negotiate on closed engine"),this.on(ke.Closing,i),this.pcManager.publisher.once(sc.RTPVideoPayloadTypes,s=>{const o=new Map;s.forEach(l=>{const u=l.codec.toLowerCase();Zte(u)&&o.set(l.payload,u)}),this.emit(ke.RTPVideoMapUpdate,o)});try{yield this.pcManager.negotiate(r),e()}catch(s){s instanceof ab&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",wa.RR_UNKNOWN),n(s)}finally{this.off(ke.Closing,i)}}))})}dataChannelForKind(e,n){if(n){if(e===ct.LOSSY)return this.lossyDCSub;if(e===ct.RELIABLE)return this.reliableDCSub}else{if(e===ct.LOSSY)return this.lossyDC;if(e===ct.RELIABLE)return this.reliableDC}}sendSyncState(e,n){var r,i,s,o;if(!this.pcManager){this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);return}const l=this.pcManager.publisher.getLocalDescription(),u=this.pcManager.publisher.getRemoteDescription(),d=(r=this.pcManager.subscriber)===null||r===void 0?void 0:r.getRemoteDescription(),f=(i=this.pcManager.subscriber)===null||i===void 0?void 0:i.getLocalDescription(),m=(o=(s=this.signalOpts)===null||s===void 0?void 0:s.autoSubscribe)!==null&&o!==void 0?o:!0,g=new Array,y=new Array;e.forEach(C=>{C.isDesired!==m&&g.push(C.trackSid),C.isEnabled||y.push(C.trackSid)}),this.client.sendSyncState(new Aw({answer:this.options.singlePeerConnection?u?Wl({sdp:u.sdp,type:u.type}):void 0:f?Wl({sdp:f.sdp,type:f.type}):void 0,offer:this.options.singlePeerConnection?l?Wl({sdp:l.sdp,type:l.type}):void 0:d?Wl({sdp:d.sdp,type:d.type}):void 0,subscription:new Dm({trackSids:g,subscribe:!m,participantTracks:[]}),publishTracks:Ote(n),dataChannels:this.dataChannelsInfo(),trackSidsDisabled:y,datachannelReceiveStates:this.reliableReceivedState.map((C,x)=>new fj({publisherSid:x,lastSeq:C}))}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const e=[],n=(r,i)=>{(r==null?void 0:r.id)!==void 0&&r.id!==null&&e.push(new pj({label:r.label,id:r.id,target:i}))};return n(this.dataChannelForKind(ct.LOSSY),ci.PUBLISHER),n(this.dataChannelForKind(ct.RELIABLE),ci.PUBLISHER),n(this.dataChannelForKind(ct.LOSSY,!0),ci.SUBSCRIBER),n(this.dataChannelForKind(ct.RELIABLE,!0),ci.SUBSCRIBER),e}clearReconnectTimeout(){this.reconnectTimeout&&Tn.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){sr()&&(window.addEventListener("online",this.handleBrowserOnLine),window.addEventListener("offline",this.handleBrowserOffline))}deregisterOnLineListener(){sr()&&(window.removeEventListener("online",this.handleBrowserOnLine),window.removeEventListener("offline",this.handleBrowserOffline))}getTrackIdForReceiver(e){var n;const r=(n=this.pcManager)===null||n===void 0?void 0:n.getMidForReceiver(e);if(r){const i=Object.entries(this.midToTrackId).find(s=>{let[o]=s;return o===r});if(i)return i[1]}}}function are(t){return t!==void 0&&t>13}function T_(t,e){const n=t.participantIdentity?t.participantIdentity:e.participantIdentity;t.participantIdentity=n,e.participantIdentity=n;const r=t.destinationIdentities.length!==0?t.destinationIdentities:e.destinationIdentities;t.destinationIdentities=r,e.destinationIdentities=r}class dO{get info(){return this._info}validateBytesReceived(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!(typeof this.totalByteSize!="number"||this.totalByteSize===0)){if(e&&this.bytesReceived<this.totalByteSize)throw new Lr("Not enough chunk(s) received - expected ".concat(this.totalByteSize," bytes of data total, only received ").concat(this.bytesReceived," bytes"),zn.Incomplete);if(this.bytesReceived>this.totalByteSize)throw new Lr("Extra chunk(s) received - expected ".concat(this.totalByteSize," bytes of data total, received ").concat(this.bytesReceived," bytes"),zn.LengthExceeded)}}constructor(e,n,r,i){this.reader=n,this.totalByteSize=r,this._info=e,this.bytesReceived=0,this.outOfBandFailureRejectingFuture=i}}class lre extends dO{handleChunkReceived(e){var n;this.bytesReceived+=e.content.byteLength,this.validateBytesReceived();const r=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,r)}[Symbol.asyncIterator](){const e=this.reader.getReader();let n=new Br,r=null,i=null;if(this.signal){const o=this.signal;i=()=>{var l;(l=n.reject)===null||l===void 0||l.call(n,o.reason)},o.addEventListener("abort",i),r=o}const s=()=>{e.releaseLock(),r&&i&&r.removeEventListener("abort",i),this.signal=void 0};return{next:()=>V(this,void 0,void 0,function*(){var o,l;try{const{done:u,value:d}=yield Promise.race([e.read(),n.promise,(l=(o=this.outOfBandFailureRejectingFuture)===null||o===void 0?void 0:o.promise)!==null&&l!==void 0?l:new Promise(()=>{})]);return u?(this.validateBytesReceived(!0),{done:!0,value:void 0}):(this.handleChunkReceived(d),{done:!1,value:d.content})}catch(u){throw s(),u}}),return(){return V(this,void 0,void 0,function*(){return s(),{done:!0,value:void 0}})}}}withAbortSignal(e){return this.signal=e,this}readAll(){return V(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(function*(){var r,i,s,o;let l=new Set;const u=n.signal?e.withAbortSignal(n.signal):e;try{for(var d=!0,f=ys(u),m;m=yield f.next(),r=m.done,!r;d=!0){o=m.value,d=!1;const g=o;l.add(g)}}catch(g){i={error:g}}finally{try{!d&&!r&&(s=f.return)&&(yield s.call(f))}finally{if(i)throw i.error}}return Array.from(l)})()})}}class cre extends dO{constructor(e,n,r,i){super(e,n,r,i),this.receivedChunks=new Map}handleChunkReceived(e){var n;const r=cp(e.chunkIndex),i=this.receivedChunks.get(r);if(i&&i.version>e.version)return;this.receivedChunks.set(r,e),this.bytesReceived+=e.content.byteLength,this.validateBytesReceived();const s=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,s)}[Symbol.asyncIterator](){const e=this.reader.getReader(),n=new TextDecoder("utf-8",{fatal:!0});let r=new Br,i=null,s=null;if(this.signal){const l=this.signal;s=()=>{var u;(u=r.reject)===null||u===void 0||u.call(r,l.reason)},l.addEventListener("abort",s),i=l}const o=()=>{e.releaseLock(),i&&s&&i.removeEventListener("abort",s),this.signal=void 0};return{next:()=>V(this,void 0,void 0,function*(){var l,u;try{const{done:d,value:f}=yield Promise.race([e.read(),r.promise,(u=(l=this.outOfBandFailureRejectingFuture)===null||l===void 0?void 0:l.promise)!==null&&u!==void 0?u:new Promise(()=>{})]);if(d)return this.validateBytesReceived(!0),{done:!0,value:void 0};{this.handleChunkReceived(f);let m;try{m=n.decode(f.content)}catch(g){throw new Lr("Cannot decode datastream chunk ".concat(f.chunkIndex," as text: ").concat(g),zn.DecodeFailed)}return{done:!1,value:m}}}catch(d){throw o(),d}}),return(){return V(this,void 0,void 0,function*(){return o(),{done:!0,value:void 0}})}}}withAbortSignal(e){return this.signal=e,this}readAll(){return V(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(function*(){var r,i,s,o;let l="";const u=n.signal?e.withAbortSignal(n.signal):e;try{for(var d=!0,f=ys(u),m;m=yield f.next(),r=m.done,!r;d=!0)o=m.value,d=!1,l+=o}catch(g){i={error:g}}finally{try{!d&&!r&&(s=f.return)&&(yield s.call(f))}finally{if(i)throw i.error}}return l})()})}}class ure{constructor(){this.log=nt,this.byteStreamControllers=new Map,this.textStreamControllers=new Map,this.byteStreamHandlers=new Map,this.textStreamHandlers=new Map}registerTextStreamHandler(e,n){if(this.textStreamHandlers.has(e))throw new Lr('A text stream handler for topic "'.concat(e,'" has already been set.'),zn.HandlerAlreadyRegistered);this.textStreamHandlers.set(e,n)}unregisterTextStreamHandler(e){this.textStreamHandlers.delete(e)}registerByteStreamHandler(e,n){if(this.byteStreamHandlers.has(e))throw new Lr('A byte stream handler for topic "'.concat(e,'" has already been set.'),zn.HandlerAlreadyRegistered);this.byteStreamHandlers.set(e,n)}unregisterByteStreamHandler(e){this.byteStreamHandlers.delete(e)}clearControllers(){this.byteStreamControllers.clear(),this.textStreamControllers.clear()}validateParticipantHasNoActiveDataStreams(e){var n,r,i,s;const o=Array.from(this.textStreamControllers.entries()).filter(u=>u[1].sendingParticipantIdentity===e),l=Array.from(this.byteStreamControllers.entries()).filter(u=>u[1].sendingParticipantIdentity===e);if(o.length>0||l.length>0){const u=new Lr("Participant ".concat(e," unexpectedly disconnected in the middle of sending data"),zn.AbnormalEnd);for(const[d,f]of l)(r=(n=f.outOfBandFailureRejectingFuture).reject)===null||r===void 0||r.call(n,u),this.byteStreamControllers.delete(d);for(const[d,f]of o)(s=(i=f.outOfBandFailureRejectingFuture).reject)===null||s===void 0||s.call(i,u),this.textStreamControllers.delete(d)}}handleDataStreamPacket(e,n){return V(this,void 0,void 0,function*(){switch(e.value.case){case"streamHeader":return this.handleStreamHeader(e.value.value,e.participantIdentity,n);case"streamChunk":return this.handleStreamChunk(e.value.value,n);case"streamTrailer":return this.handleStreamTrailer(e.value.value,n);default:throw new Error('DataPacket of value "'.concat(e.value.case,'" is not data stream related!'))}})}handleStreamHeader(e,n,r){return V(this,void 0,void 0,function*(){var i;if(e.contentHeader.case==="byteHeader"){const s=this.byteStreamHandlers.get(e.topic);if(!s){this.log.debug("ignoring incoming byte stream due to no handler for topic",e.topic);return}let o;const l=new Br;l.promise.catch(f=>{this.log.error(f)});const u={id:e.streamId,name:(i=e.contentHeader.value.name)!==null&&i!==void 0?i:"unknown",mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:cp(e.timestamp),attributes:e.attributes,encryptionType:r},d=new ReadableStream({start:f=>{if(o=f,this.textStreamControllers.has(e.streamId))throw new Lr("A data stream read is already in progress for a stream with id ".concat(e.streamId,"."),zn.AlreadyOpened);this.byteStreamControllers.set(e.streamId,{info:u,controller:o,startTime:Date.now(),sendingParticipantIdentity:n,outOfBandFailureRejectingFuture:l})}});s(new lre(u,d,cp(e.totalLength),l),{identity:n})}else if(e.contentHeader.case==="textHeader"){const s=this.textStreamHandlers.get(e.topic);if(!s){this.log.debug("ignoring incoming text stream due to no handler for topic",e.topic);return}let o;const l=new Br;l.promise.catch(f=>{this.log.error(f)});const u={id:e.streamId,mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:Number(e.timestamp),attributes:e.attributes,encryptionType:r},d=new ReadableStream({start:f=>{if(o=f,this.textStreamControllers.has(e.streamId))throw new Lr("A data stream read is already in progress for a stream with id ".concat(e.streamId,"."),zn.AlreadyOpened);this.textStreamControllers.set(e.streamId,{info:u,controller:o,startTime:Date.now(),sendingParticipantIdentity:n,outOfBandFailureRejectingFuture:l})}});s(new cre(u,d,cp(e.totalLength),l),{identity:n})}})}handleStreamChunk(e,n){const r=this.byteStreamControllers.get(e.streamId);r&&(r.info.encryptionType!==n?(r.controller.error(new Lr("Encryption type mismatch for stream ".concat(e.streamId,". Expected ").concat(n,", got ").concat(r.info.encryptionType),zn.EncryptionTypeMismatch)),this.byteStreamControllers.delete(e.streamId)):e.content.length>0&&r.controller.enqueue(e));const i=this.textStreamControllers.get(e.streamId);i&&(i.info.encryptionType!==n?(i.controller.error(new Lr("Encryption type mismatch for stream ".concat(e.streamId,". Expected ").concat(n,", got ").concat(i.info.encryptionType),zn.EncryptionTypeMismatch)),this.textStreamControllers.delete(e.streamId)):e.content.length>0&&i.controller.enqueue(e))}handleStreamTrailer(e,n){const r=this.textStreamControllers.get(e.streamId);r&&(r.info.encryptionType!==n?r.controller.error(new Lr("Encryption type mismatch for stream ".concat(e.streamId,". Expected ").concat(n,", got ").concat(r.info.encryptionType),zn.EncryptionTypeMismatch)):(r.info.attributes=Object.assign(Object.assign({},r.info.attributes),e.attributes),r.controller.close(),this.textStreamControllers.delete(e.streamId)));const i=this.byteStreamControllers.get(e.streamId);i&&(i.info.encryptionType!==n?i.controller.error(new Lr("Encryption type mismatch for stream ".concat(e.streamId,". Expected ").concat(n,", got ").concat(i.info.encryptionType),zn.EncryptionTypeMismatch)):(i.info.attributes=Object.assign(Object.assign({},i.info.attributes),e.attributes),i.controller.close()),this.byteStreamControllers.delete(e.streamId))}}class hO{constructor(e,n,r){this.writableStream=e,this.defaultWriter=e.getWriter(),this.onClose=r,this.info=n}write(e){return this.defaultWriter.write(e)}close(){return V(this,void 0,void 0,function*(){var e;yield this.defaultWriter.close(),this.defaultWriter.releaseLock(),(e=this.onClose)===null||e===void 0||e.call(this)})}}class dre extends hO{}class hre extends hO{}const E_=15e3;class fre{constructor(e,n){this.engine=e,this.log=n}setupEngine(e){this.engine=e}sendText(e,n){return V(this,void 0,void 0,function*(){var r;const i=crypto.randomUUID(),o=new TextEncoder().encode(e).byteLength,l=(r=n==null?void 0:n.attachments)===null||r===void 0?void 0:r.map(()=>crypto.randomUUID()),u=new Array(l?l.length+1:1).fill(0),d=(m,g)=>{var y;u[g]=m;const C=u.reduce((x,k)=>x+k,0);(y=n==null?void 0:n.onProgress)===null||y===void 0||y.call(n,C)},f=yield this.streamText({streamId:i,totalSize:o,destinationIdentities:n==null?void 0:n.destinationIdentities,topic:n==null?void 0:n.topic,attachedStreamIds:l,attributes:n==null?void 0:n.attributes});return yield f.write(e),d(1,0),yield f.close(),n!=null&&n.attachments&&l&&(yield Promise.all(n.attachments.map((m,g)=>V(this,void 0,void 0,function*(){return this._sendFile(l[g],m,{topic:n.topic,mimeType:m.type,onProgress:y=>{d(y,g+1)}})})))),f.info})}streamText(e){return V(this,void 0,void 0,function*(){var n,r,i;const s=(n=e==null?void 0:e.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),o={id:s,mimeType:"text/plain",timestamp:Date.now(),topic:(r=e==null?void 0:e.topic)!==null&&r!==void 0?r:"",size:e==null?void 0:e.totalSize,attributes:e==null?void 0:e.attributes,encryptionType:!((i=this.engine.e2eeManager)===null||i===void 0)&&i.isDataChannelEncryptionEnabled?hn.GCM:hn.NONE},l=new Up({streamId:s,mimeType:o.mimeType,topic:o.topic,timestamp:ka(o.timestamp),totalLength:ka(e==null?void 0:e.totalSize),attributes:o.attributes,contentHeader:{case:"textHeader",value:new sj({version:e==null?void 0:e.version,attachedStreamIds:e==null?void 0:e.attachedStreamIds,replyToStreamId:e==null?void 0:e.replyToStreamId,operationType:(e==null?void 0:e.type)==="update"?Q0.UPDATE:Q0.CREATE})}}),u=e==null?void 0:e.destinationIdentities,d=new Wn({destinationIdentities:u,value:{case:"streamHeader",value:l}});yield this.engine.sendDataPacket(d,ct.RELIABLE);let f=0;const m=this.engine,g=new WritableStream({write(x){return V(this,void 0,void 0,function*(){for(const k of sne(x,E_)){const T=new Bp({content:k,streamId:s,chunkIndex:ka(f)}),_=new Wn({destinationIdentities:u,value:{case:"streamChunk",value:T}});yield m.sendDataPacket(_,ct.RELIABLE),f+=1}})},close(){return V(this,void 0,void 0,function*(){const x=new Vp({streamId:s}),k=new Wn({destinationIdentities:u,value:{case:"streamTrailer",value:x}});yield m.sendDataPacket(k,ct.RELIABLE)})},abort(x){console.log("Sink error:",x)}});let y=()=>V(this,void 0,void 0,function*(){yield C.close()});m.once(ke.Closing,y);const C=new dre(g,o,()=>this.engine.off(ke.Closing,y));return C})}sendFile(e,n){return V(this,void 0,void 0,function*(){const r=crypto.randomUUID();return yield this._sendFile(r,e,n),{id:r}})}_sendFile(e,n,r){return V(this,void 0,void 0,function*(){var i;const s=yield this.streamBytes({streamId:e,totalSize:n.size,name:n.name,mimeType:(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:n.type,topic:r==null?void 0:r.topic,destinationIdentities:r==null?void 0:r.destinationIdentities}),o=n.stream().getReader();for(;;){const{done:l,value:u}=yield o.read();if(l)break;yield s.write(u)}return yield s.close(),s.info})}streamBytes(e){return V(this,void 0,void 0,function*(){var n,r,i,s,o,l;const u=(n=e==null?void 0:e.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),d=e==null?void 0:e.destinationIdentities,f={id:u,mimeType:(r=e==null?void 0:e.mimeType)!==null&&r!==void 0?r:"application/octet-stream",topic:(i=e==null?void 0:e.topic)!==null&&i!==void 0?i:"",timestamp:Date.now(),attributes:e==null?void 0:e.attributes,size:e==null?void 0:e.totalSize,name:(s=e==null?void 0:e.name)!==null&&s!==void 0?s:"unknown",encryptionType:!((o=this.engine.e2eeManager)===null||o===void 0)&&o.isDataChannelEncryptionEnabled?hn.GCM:hn.NONE},m=new Up({totalLength:ka((l=f.size)!==null&&l!==void 0?l:0),mimeType:f.mimeType,streamId:u,topic:f.topic,timestamp:ka(Date.now()),attributes:f.attributes,contentHeader:{case:"byteHeader",value:new oj({name:f.name})}}),g=new Wn({destinationIdentities:d,value:{case:"streamHeader",value:m}});yield this.engine.sendDataPacket(g,ct.RELIABLE);let y=0;const C=new qn,x=this.engine,k=this.log,T=new WritableStream({write(P){return V(this,void 0,void 0,function*(){const E=yield C.lock();let I=0;try{for(;I<P.byteLength;){const A=P.slice(I,I+E_),L=new Wn({destinationIdentities:d,value:{case:"streamChunk",value:new Bp({content:A,streamId:u,chunkIndex:ka(y)})}});yield x.sendDataPacket(L,ct.RELIABLE),y+=1,I+=A.byteLength}}finally{E()}})},close(){return V(this,void 0,void 0,function*(){const P=new Vp({streamId:u}),E=new Wn({destinationIdentities:d,value:{case:"streamTrailer",value:P}});yield x.sendDataPacket(E,ct.RELIABLE)})},abort(P){k.error("Sink error:",P)}});return new hre(T,f)})}}class fO extends ue{constructor(e,n,r,i,s){super(e,r,s),this.sid=n,this.receiver=i}get isLocal(){return!1}setMuted(e){this.isMuted!==e&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?we.Muted:we.Unmuted,this))}setMediaStream(e){this.mediaStream=e;const n=r=>{r.track===this._mediaStreamTrack&&(e.removeEventListener("removetrack",n),this.receiver&&"playoutDelayHint"in this.receiver&&(this.receiver.playoutDelayHint=void 0),this.receiver=void 0,this._currentBitrate=0,this.emit(we.Ended,this))};e.addEventListener("removetrack",n)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){return V(this,void 0,void 0,function*(){var e;return!((e=this.receiver)===null||e===void 0)&&e.getStats?yield this.receiver.getStats():void 0})}setPlayoutDelay(e){this.receiver?"playoutDelayHint"in this.receiver?this.receiver.playoutDelayHint=e:this.log.warn("Playout delay not supported in this browser"):this.log.warn("Cannot set playout delay, track already ended")}getPlayoutDelay(){if(this.receiver){if("playoutDelayHint"in this.receiver)return this.receiver.playoutDelayHint;this.log.warn("Playout delay not supported in this browser")}else this.log.warn("Cannot get playout delay, track already ended");return 0}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),$w)),Lte()&&this.registerTimeSyncUpdate()}registerTimeSyncUpdate(){const e=()=>{var n;this.timeSyncHandle=requestAnimationFrame(()=>e());const r=(n=this.receiver)===null||n===void 0?void 0:n.getSynchronizationSources()[0];if(r){const{timestamp:i,rtpTimestamp:s}=r;s&&this.rtpTimestamp!==s&&(this.emit(we.TimeSyncUpdate,{timestamp:i,rtpTimestamp:s}),this.rtpTimestamp=s)}};e()}}class pre extends fO{constructor(e,n,r,i,s,o){super(e,n,ue.Kind.Audio,r,o),this.monitorReceiver=()=>V(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const l=yield this.getReceiverStats();l&&this.prevStats&&this.receiver&&(this._currentBitrate=Lm(l,this.prevStats)),this.prevStats=l}),this.audioContext=i,this.webAudioPluginNodes=[],s&&(this.sinkId=s.deviceId)}setVolume(e){var n;for(const r of this.attachedElements)this.audioContext?(n=this.gainNode)===null||n===void 0||n.gain.setTargetAtTime(e,0,.1):r.volume=e;Ki()&&this._mediaStreamTrack._setVolume(e),this.elementVolume=e}getVolume(){if(this.elementVolume)return this.elementVolume;if(Ki())return 1;let e=0;return this.attachedElements.forEach(n=>{n.volume>e&&(e=n.volume)}),e}setSinkId(e){return V(this,void 0,void 0,function*(){this.sinkId=e,yield Promise.all(this.attachedElements.map(n=>{if(pb(n))return n.setSinkId(e)}))})}attach(e){const n=this.attachedElements.length===0;return e?super.attach(e):e=super.attach(),this.sinkId&&pb(e)&&e.setSinkId(this.sinkId).catch(r=>{this.log.error("Failed to set sink id on remote audio track",r,this.logContext)}),this.audioContext&&n&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,e),e.volume=0,e.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),e}detach(e){let n;return e?(n=super.detach(e),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(n=super.detach(),this.disconnectWebAudio()),n}setAudioContext(e){this.audioContext=e,e&&this.attachedElements.length>0?this.connectWebAudio(e,this.attachedElements[0]):e||this.disconnectWebAudio()}setWebAudioPlugins(e){this.webAudioPluginNodes=e,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(e,n){this.disconnectWebAudio(),this.sourceNode=e.createMediaStreamSource(n.srcObject);let r=this.sourceNode;this.webAudioPluginNodes.forEach(i=>{r.connect(i),r=i}),this.gainNode=e.createGain(),r.connect(this.gainNode),this.gainNode.connect(e.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),e.state!=="running"&&e.resume().then(()=>{e.state!=="running"&&this.emit(we.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(i=>{this.emit(we.AudioPlaybackFailed,i)})}disconnectWebAudio(){var e,n;(e=this.gainNode)===null||e===void 0||e.disconnect(),(n=this.sourceNode)===null||n===void 0||n.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return V(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n;return e.forEach(r=>{r.type==="inbound-rtp"&&(n={type:"audio",streamId:r.id,timestamp:r.timestamp,jitter:r.jitter,bytesReceived:r.bytesReceived,concealedSamples:r.concealedSamples,concealmentEvents:r.concealmentEvents,silentConcealedSamples:r.silentConcealedSamples,silentConcealmentEvents:r.silentConcealmentEvents,totalAudioEnergy:r.totalAudioEnergy,totalSamplesDuration:r.totalSamplesDuration})}),n})}}const qy=100;class mre extends fO{constructor(e,n,r,i,s){super(e,n,ue.Kind.Video,r,s),this.elementInfos=[],this.monitorReceiver=()=>V(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const o=yield this.getReceiverStats();o&&this.prevStats&&this.receiver&&(this._currentBitrate=Lm(o,this.prevStats)),this.prevStats=o}),this.debouncedHandleResize=Uw(()=>{this.updateDimensions()},qy),this.adaptiveStreamSettings=i}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}setStreamState(e){super.setStreamState(e),this.log.debug("setStreamState",e),this.isAdaptiveStream&&e===ue.StreamState.Active&&this.updateVisibility()}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(e){super.setMuted(e),this.attachedElements.forEach(n=>{e?nc(this._mediaStreamTrack,n):$l(this._mediaStreamTrack,n)})}attach(e){if(e?super.attach(e):e=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(n=>n.element===e)===void 0){const n=new gre(e);this.observeElementInfo(n)}return e}observeElementInfo(e){this.adaptiveStreamSettings&&this.elementInfos.find(n=>n===e)===void 0?(e.handleResize=()=>{this.debouncedHandleResize()},e.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(e),e.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(e){if(!this.isAdaptiveStream){this.log.warn("stopObservingElementInfo ignored",this.logContext);return}const n=this.elementInfos.filter(r=>r===e);for(const r of n)r.stopObserving();this.elementInfos=this.elementInfos.filter(r=>r!==e),this.updateVisibility(),this.debouncedHandleResize()}detach(e){let n=[];if(e)return this.stopObservingElement(e),super.detach(e);n=super.detach();for(const r of n)this.stopObservingElement(r);return n}getDecoderImplementation(){var e;return(e=this.prevStats)===null||e===void 0?void 0:e.decoderImplementation}getReceiverStats(){return V(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n,r="",i=new Map;return e.forEach(s=>{s.type==="inbound-rtp"?(r=s.codecId,n={type:"video",streamId:s.id,framesDecoded:s.framesDecoded,framesDropped:s.framesDropped,framesReceived:s.framesReceived,packetsReceived:s.packetsReceived,packetsLost:s.packetsLost,frameWidth:s.frameWidth,frameHeight:s.frameHeight,pliCount:s.pliCount,firCount:s.firCount,nackCount:s.nackCount,jitter:s.jitter,timestamp:s.timestamp,bytesReceived:s.bytesReceived,decoderImplementation:s.decoderImplementation}):s.type==="codec"&&i.set(s.id,s)}),n&&r!==""&&i.get(r)&&(n.mimeType=i.get(r).mimeType),n})}stopObservingElement(e){const n=this.elementInfos.filter(r=>r.element===e);for(const r of n)this.stopObservingElementInfo(r)}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return V(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(e){var n,r;const i=this.elementInfos.reduce((u,d)=>Math.max(u,d.visibilityChangedAt||0),0),s=!((r=(n=this.adaptiveStreamSettings)===null||n===void 0?void 0:n.pauseVideoInBackground)!==null&&r!==void 0)||r?this.isInBackground:!1,o=this.elementInfos.some(u=>u.pictureInPicture),l=this.elementInfos.some(u=>u.visible)&&!s||o;if(!(this.lastVisible===l&&!e)){if(!l&&Date.now()-i<qy){Tn.setTimeout(()=>{this.updateVisibility()},qy);return}this.lastVisible=l,this.emit(we.VisibilityChanged,l,this)}}updateDimensions(){var e,n;let r=0,i=0;const s=this.getPixelDensity();for(const o of this.elementInfos){const l=o.width()*s,u=o.height()*s;l+u>r+i&&(r=l,i=u)}((e=this.lastDimensions)===null||e===void 0?void 0:e.width)===r&&((n=this.lastDimensions)===null||n===void 0?void 0:n.height)===i||(this.lastDimensions={width:r,height:i},this.emit(we.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var e;const n=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pixelDensity;return n==="screen"?e_():n||(e_()>2?2:1)}}class gre{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(e,n){this.onVisibilityChanged=r=>{var i;const{target:s,isIntersecting:o}=r;s===this.element&&(this.isIntersecting=o,this.isPiP=Ru(this.element),this.visibilityChangedAt=Date.now(),(i=this.handleVisibilityChanged)===null||i===void 0||i.call(this))},this.onEnterPiP=()=>{var r,i,s;(i=(r=window.documentPictureInPicture)===null||r===void 0?void 0:r.window)===null||i===void 0||i.addEventListener("pagehide",this.onLeavePiP),this.isPiP=Ru(this.element),(s=this.handleVisibilityChanged)===null||s===void 0||s.call(this)},this.onLeavePiP=()=>{var r;this.isPiP=Ru(this.element),(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this)},this.element=e,this.isIntersecting=n??xb(e),this.isPiP=sr()&&Ru(e),this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){var e,n,r;this.isIntersecting=xb(this.element),this.isPiP=Ru(this.element),this.element.handleResize=()=>{var i;(i=this.handleResize)===null||i===void 0||i.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,n_().observe(this.element),t_().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP),(e=window.documentPictureInPicture)===null||e===void 0||e.addEventListener("enter",this.onEnterPiP),(r=(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window)===null||r===void 0||r.addEventListener("pagehide",this.onLeavePiP)}stopObserving(){var e,n,r,i,s;(e=n_())===null||e===void 0||e.unobserve(this.element),(n=t_())===null||n===void 0||n.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP),(r=window.documentPictureInPicture)===null||r===void 0||r.removeEventListener("enter",this.onEnterPiP),(s=(i=window.documentPictureInPicture)===null||i===void 0?void 0:i.window)===null||s===void 0||s.removeEventListener("pagehide",this.onLeavePiP)}}function Ru(t){var e,n;return document.pictureInPictureElement===t?!0:!((e=window.documentPictureInPicture)===null||e===void 0)&&e.window?xb(t,(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window):!1}function xb(t,e){const n=e||window;let r=t.offsetTop,i=t.offsetLeft;const s=t.offsetWidth,o=t.offsetHeight,{hidden:l}=t,{display:u}=getComputedStyle(t);for(;t.offsetParent;)t=t.offsetParent,r+=t.offsetTop,i+=t.offsetLeft;return r<n.pageYOffset+n.innerHeight&&i<n.pageXOffset+n.innerWidth&&r+o>n.pageYOffset&&i+s>n.pageXOffset&&!l&&u!=="none"}class fs extends Zi.EventEmitter{constructor(e,n,r,i){var s;super(),this.metadataMuted=!1,this.encryption=hn.NONE,this.log=nt,this.handleMuted=()=>{this.emit(we.Muted)},this.handleUnmuted=()=>{this.emit(we.Unmuted)},this.log=Ms((s=i==null?void 0:i.loggerName)!==null&&s!==void 0?s:mi.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=e,this.trackSid=n,this.trackName=r,this.source=ue.Source.Unknown}setTrack(e){this.track&&(this.track.off(we.Muted,this.handleMuted),this.track.off(we.Unmuted,this.handleUnmuted)),this.track=e,e&&(e.on(we.Muted,this.handleMuted),e.on(we.Unmuted,this.handleUnmuted))}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),dt(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get isEncrypted(){return this.encryption!==hn.NONE}get audioTrack(){if($i(this.track))return this.track}get videoTrack(){if(Zo(this.track))return this.track}updateInfo(e){this.trackSid=e.sid,this.trackName=e.name,this.source=ue.sourceFromProto(e.source),this.mimeType=e.mimeType,this.kind===ue.Kind.Video&&e.width>0&&(this.dimensions={width:e.width,height:e.height},this.simulcasted=e.simulcast),this.encryption=e.encryption,this.trackInfo=e,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:e}))}}(function(t){(function(e){e.Desired="desired",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed"})(t.SubscriptionStatus||(t.SubscriptionStatus={})),(function(e){e.Allowed="allowed",e.NotAllowed="not_allowed"})(t.PermissionStatus||(t.PermissionStatus={}))})(fs||(fs={}));class wb extends fs{get isUpstreamPaused(){var e;return(e=this.track)===null||e===void 0?void 0:e.isUpstreamPaused}constructor(e,n,r,i){super(e,n.sid,n.name,i),this.track=void 0,this.handleTrackEnded=()=>{this.emit(we.Ended)},this.handleCpuConstrained=()=>{this.track&&Zo(this.track)&&this.emit(we.CpuConstrained,this.track)},this.updateInfo(n),this.setTrack(r)}setTrack(e){this.track&&(this.track.off(we.Ended,this.handleTrackEnded),this.track.off(we.CpuConstrained,this.handleCpuConstrained)),super.setTrack(e),e&&(e.on(we.Ended,this.handleTrackEnded),e.on(we.CpuConstrained,this.handleCpuConstrained))}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}get isLocal(){return!0}mute(){return V(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.mute()})}unmute(){return V(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.unmute()})}pauseUpstream(){return V(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.pauseUpstream()})}resumeUpstream(){return V(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.resumeUpstream()})}getTrackFeatures(){var e;if($i(this.track)){const n=this.track.getSourceTrackSettings(),r=new Set;return n.autoGainControl&&r.add(yn.TF_AUTO_GAIN_CONTROL),n.echoCancellation&&r.add(yn.TF_ECHO_CANCELLATION),n.noiseSuppression&&r.add(yn.TF_NOISE_SUPPRESSION),n.channelCount&&n.channelCount>1&&r.add(yn.TF_STEREO),!((e=this.options)===null||e===void 0)&&e.dtx||r.add(yn.TF_NO_DTX),this.track.enhancedNoiseCancellation&&r.add(yn.TF_ENHANCED_NOISE_CANCELLATION),Array.from(r.values())}else return[]}}function Fm(t,e){return V(this,void 0,void 0,function*(){t??(t={});let n=!1;const{audioProcessor:r,videoProcessor:i,optionsWithoutProcessor:s}=Xj(t);let o=s.audio,l=s.video;if(r&&typeof s.audio=="object"&&(s.audio.processor=r),i&&typeof s.video=="object"&&(s.video.processor=i),t.audio&&typeof s.audio=="object"&&typeof s.audio.deviceId=="string"){const m=s.audio.deviceId;s.audio.deviceId={exact:m},n=!0,o=Object.assign(Object.assign({},s.audio),{deviceId:{ideal:m}})}if(s.video&&typeof s.video=="object"&&typeof s.video.deviceId=="string"){const m=s.video.deviceId;s.video.deviceId={exact:m},n=!0,l=Object.assign(Object.assign({},s.video),{deviceId:{ideal:m}})}s.audio===!0?s.audio={deviceId:"default"}:typeof s.audio=="object"&&s.audio!==null&&(s.audio=Object.assign(Object.assign({},s.audio),{deviceId:s.audio.deviceId||"default"})),s.video===!0?s.video={deviceId:"default"}:typeof s.video=="object"&&!s.video.deviceId&&(s.video.deviceId="default");const u=Yj(s,iO,sO),d=Ow(u),f=navigator.mediaDevices.getUserMedia(d);s.audio&&(bn.userMediaPromiseMap.set("audioinput",f),f.catch(()=>bn.userMediaPromiseMap.delete("audioinput"))),s.video&&(bn.userMediaPromiseMap.set("videoinput",f),f.catch(()=>bn.userMediaPromiseMap.delete("videoinput")));try{const m=yield f;return yield Promise.all(m.getTracks().map(g=>V(this,void 0,void 0,function*(){const y=g.kind==="audio";let C=y?u.audio:u.video;(typeof C=="boolean"||!C)&&(C={});let x;const k=y?d.audio:d.video;typeof k!="boolean"&&(x=k);const T=g.getSettings().deviceId;x!=null&&x.deviceId&&Fo(x.deviceId)!==T?x.deviceId=T:x||(x={deviceId:T});const _=Wne(g,x,e);return _.kind===ue.Kind.Video?_.source=ue.Source.Camera:_.kind===ue.Kind.Audio&&(_.source=ue.Source.Microphone),_.mediaStream=m,$i(_)&&r?yield _.setProcessor(r):Zo(_)&&i&&(yield _.setProcessor(i)),_})))}catch(m){if(!n)throw m;return Fm(Object.assign(Object.assign({},t),{audio:o,video:l}),e)}})}function vre(t){return V(this,void 0,void 0,function*(){return(yield Fm({audio:!1,video:!0}))[0]})}function pO(t){return V(this,void 0,void 0,function*(){return(yield Fm({audio:t??!0,video:!1}))[0]})}var So;(function(t){t.Excellent="excellent",t.Good="good",t.Poor="poor",t.Lost="lost",t.Unknown="unknown"})(So||(So={}));function yre(t){switch(t){case Fu.EXCELLENT:return So.Excellent;case Fu.GOOD:return So.Good;case Fu.POOR:return So.Poor;case Fu.LOST:return So.Lost;default:return So.Unknown}}class mO extends Zi.EventEmitter{get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions)===null||e===void 0?void 0:e.loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isEncrypted(){return this.trackPublications.size>0&&Array.from(this.trackPublications.values()).every(e=>e.isEncrypted)}get isAgent(){var e;return((e=this.permissions)===null||e===void 0?void 0:e.agent)||this.kind===kd.AGENT}get isActive(){var e;return((e=this.participantInfo)===null||e===void 0?void 0:e.state)===Zl.ACTIVE}get kind(){return this._kind}get attributes(){return Object.freeze(Object.assign({},this._attributes))}constructor(e,n,r,i,s,o){let l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:kd.STANDARD;var u;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=So.Unknown,this.log=nt,this.log=Ms((u=o==null?void 0:o.loggerName)!==null&&u!==void 0?u:mi.Participant),this.loggerOptions=o,this.setMaxListeners(100),this.sid=e,this.identity=n,this.name=r,this.metadata=i,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this._kind=l,this._attributes=s??{}}getTrackPublications(){return Array.from(this.trackPublications.values())}getTrackPublication(e){for(const[,n]of this.trackPublications)if(n.source===e)return n}getTrackPublicationByName(e){for(const[,n]of this.trackPublications)if(n.trackName===e)return n}waitUntilActive(){return this.isActive?Promise.resolve():this.activeFuture?this.activeFuture.promise:(this.activeFuture=new Br,this.once(Te.Active,()=>{var e,n;(n=(e=this.activeFuture)===null||e===void 0?void 0:e.resolve)===null||n===void 0||n.call(e),this.activeFuture=void 0}),this.activeFuture.promise)}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var e;const n=this.getTrackPublication(ue.Source.Camera);return!(!((e=n==null?void 0:n.isMuted)!==null&&e!==void 0)||e)}get isMicrophoneEnabled(){var e;const n=this.getTrackPublication(ue.Source.Microphone);return!(!((e=n==null?void 0:n.isMuted)!==null&&e!==void 0)||e)}get isScreenShareEnabled(){return!!this.getTrackPublication(ue.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(Number.parseInt(this.participantInfo.joinedAt.toString())*1e3):new Date}updateInfo(e){var n;return this.participantInfo&&this.participantInfo.sid===e.sid&&this.participantInfo.version>e.version?!1:(this.identity=e.identity,this.sid=e.sid,this._setName(e.name),this._setMetadata(e.metadata),this._setAttributes(e.attributes),e.state===Zl.ACTIVE&&((n=this.participantInfo)===null||n===void 0?void 0:n.state)!==Zl.ACTIVE&&this.emit(Te.Active),e.permission&&this.setPermissions(e.permission),this.participantInfo=e,!0)}_setMetadata(e){const n=this.metadata!==e,r=this.metadata;this.metadata=e,n&&this.emit(Te.ParticipantMetadataChanged,r)}_setName(e){const n=this.name!==e;this.name=e,n&&this.emit(Te.ParticipantNameChanged,e)}_setAttributes(e){const n=Fte(this.attributes,e);this._attributes=e,Object.keys(n).length>0&&this.emit(Te.AttributesChanged,n)}setPermissions(e){var n,r,i,s,o,l;const u=this.permissions,d=e.canPublish!==((n=this.permissions)===null||n===void 0?void 0:n.canPublish)||e.canSubscribe!==((r=this.permissions)===null||r===void 0?void 0:r.canSubscribe)||e.canPublishData!==((i=this.permissions)===null||i===void 0?void 0:i.canPublishData)||e.hidden!==((s=this.permissions)===null||s===void 0?void 0:s.hidden)||e.recorder!==((o=this.permissions)===null||o===void 0?void 0:o.recorder)||e.canPublishSources.length!==this.permissions.canPublishSources.length||e.canPublishSources.some((f,m)=>{var g;return f!==((g=this.permissions)===null||g===void 0?void 0:g.canPublishSources[m])})||e.canSubscribeMetrics!==((l=this.permissions)===null||l===void 0?void 0:l.canSubscribeMetrics);return this.permissions=e,d&&this.emit(Te.ParticipantPermissionsChanged,u),d}setIsSpeaking(e){e!==this.isSpeaking&&(this.isSpeaking=e,e&&(this.lastSpokeAt=new Date),this.emit(Te.IsSpeakingChanged,e))}setConnectionQuality(e){const n=this._connectionQuality;this._connectionQuality=yre(e),n!==this._connectionQuality&&this.emit(Te.ConnectionQualityChanged,this._connectionQuality)}setDisconnected(){var e,n;this.activeFuture&&((n=(e=this.activeFuture).reject)===null||n===void 0||n.call(e,new Error("Participant disconnected")),this.activeFuture=void 0)}setAudioContext(e){this.audioContext=e,this.audioTrackPublications.forEach(n=>$i(n.track)&&n.track.setAudioContext(e))}addTrackPublication(e){e.on(we.Muted,()=>{this.emit(Te.TrackMuted,e)}),e.on(we.Unmuted,()=>{this.emit(Te.TrackUnmuted,e)});const n=e;switch(n.track&&(n.track.sid=e.trackSid),this.trackPublications.set(e.trackSid,e),e.kind){case ue.Kind.Audio:this.audioTrackPublications.set(e.trackSid,e);break;case ue.Kind.Video:this.videoTrackPublications.set(e.trackSid,e);break}}}function bre(t){var e,n,r;if(!t.participantSid&&!t.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new dj({participantIdentity:(e=t.participantIdentity)!==null&&e!==void 0?e:"",participantSid:(n=t.participantSid)!==null&&n!==void 0?n:"",allTracks:(r=t.allowAll)!==null&&r!==void 0?r:!1,trackSids:t.allowedTrackSids||[]})}class xre extends mO{constructor(e,n,r,i,s,o){super(e,n,void 0,void 0,void 0,{loggerName:i.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=hn.NONE,this.enabledPublishVideoCodecs=[],this.pendingAcks=new Map,this.pendingResponses=new Map,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new Br)},this.handleReconnected=()=>{var l,u;(u=(l=this.reconnectFuture)===null||l===void 0?void 0:l.resolve)===null||u===void 0||u.call(l),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleClosing=()=>{var l,u,d,f,m,g;this.reconnectFuture&&(this.reconnectFuture.promise.catch(y=>this.log.warn(y.message,this.logContext)),(u=(l=this.reconnectFuture)===null||l===void 0?void 0:l.reject)===null||u===void 0||u.call(l,new Error("Got disconnected during reconnection attempt")),this.reconnectFuture=void 0),this.signalConnectedFuture&&((f=(d=this.signalConnectedFuture).reject)===null||f===void 0||f.call(d,new Error("Got disconnected without signal connected")),this.signalConnectedFuture=void 0),(g=(m=this.activeAgentFuture)===null||m===void 0?void 0:m.reject)===null||g===void 0||g.call(m,new Error("Got disconnected without active agent present")),this.activeAgentFuture=void 0,this.firstActiveAgent=void 0},this.handleSignalConnected=l=>{var u,d;l.participant&&this.updateInfo(l.participant),this.signalConnectedFuture||(this.signalConnectedFuture=new Br),(d=(u=this.signalConnectedFuture).resolve)===null||d===void 0||d.call(u)},this.handleSignalRequestResponse=l=>{const{requestId:u,reason:d,message:f}=l,m=this.pendingSignalRequests.get(u);m&&(d!==Rw.OK&&m.reject(new YP(f,d)),this.pendingSignalRequests.delete(u))},this.handleDataPacket=l=>{switch(l.value.case){case"rpcResponse":let u=l.value.value,d=null,f=null;u.value.case==="payload"?d=u.value.value:u.value.case==="error"&&(f=Gt.fromProto(u.value.value)),this.handleIncomingRpcResponse(u.requestId,d,f);break;case"rpcAck":let m=l.value.value;this.handleIncomingRpcAck(m.requestId);break}},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(l=>bre(l)))},this.onTrackUnmuted=l=>{this.onTrackMuted(l,l.isUpstreamPaused)},this.onTrackMuted=(l,u)=>{if(u===void 0&&(u=!0),!l.sid){this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),dt(l)));return}this.engine.updateMuteStatus(l.sid,u)},this.onTrackUpstreamPaused=l=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),dt(l))),this.onTrackMuted(l,!0)},this.onTrackUpstreamResumed=l=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),dt(l))),this.onTrackMuted(l,l.isMuted)},this.onTrackFeatureUpdate=l=>{const u=this.audioTrackPublications.get(l.sid);if(!u){this.log.warn("Could not update local audio track settings, missing publication for track ".concat(l.sid),this.logContext);return}this.engine.client.sendUpdateLocalAudioTrack(u.trackSid,u.getTrackFeatures())},this.onTrackCpuConstrained=(l,u)=>{this.log.debug("track cpu constrained",Object.assign(Object.assign({},this.logContext),dt(u))),this.emit(Te.LocalTrackCpuConstrained,l,u)},this.handleSubscribedQualityUpdate=l=>V(this,void 0,void 0,function*(){var u,d,f,m,g;if(!(!((g=this.roomOptions)===null||g===void 0)&&g.dynacast))return;const y=this.videoTrackPublications.get(l.trackSid);if(!y){this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:l.trackSid}));return}if(!y.videoTrack)return;const C=yield y.videoTrack.setPublishingCodecs(l.subscribedCodecs);try{for(var x=!0,k=ys(C),T;T=yield k.next(),u=T.done,!u;x=!0){m=T.value,x=!1;const _=m;Mte(_)&&(this.log.debug("publish ".concat(_," for ").concat(y.videoTrack.sid),Object.assign(Object.assign({},this.logContext),dt(y))),yield this.publishAdditionalCodecForTrack(y.videoTrack,_,y.options))}}catch(_){d={error:_}}finally{try{!x&&!u&&(f=k.return)&&(yield f.call(k))}finally{if(d)throw d.error}}}),this.handleLocalTrackUnpublished=l=>{const u=this.trackPublications.get(l.trackSid);if(!u){this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:l.trackSid}));return}this.unpublishTrack(u.track)},this.handleTrackEnded=l=>V(this,void 0,void 0,function*(){if(l.source===ue.Source.ScreenShare||l.source===ue.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),dt(l))),this.unpublishTrack(l);else if(l.isUserProvided)yield l.mute();else if(hs(l)||po(l))try{if(sr())try{const u=yield navigator==null?void 0:navigator.permissions.query({name:l.source===ue.Source.Camera?"camera":"microphone"});if(u&&u.state==="denied")throw this.log.warn("user has revoked access to ".concat(l.source),Object.assign(Object.assign({},this.logContext),dt(l))),u.onchange=()=>{u.state!=="denied"&&(l.isMuted||l.restartTrack(),u.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}l.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),dt(l))),hs(l)?yield l.restartTrack({deviceId:"default"}):yield l.restartTrack())}catch{this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),dt(l))),yield l.mute()}}),this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this.engine=r,this.roomOptions=i,this.setupEngine(r),this.activeDeviceMap=new Map([["audioinput","default"],["videoinput","default"],["audiooutput","default"]]),this.pendingSignalRequests=new Map,this.rpcHandlers=s,this.roomOutgoingDataStreamManager=o}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==hn.NONE}getTrackPublication(e){const n=super.getTrackPublication(e);if(n)return n}getTrackPublicationByName(e){const n=super.getTrackPublicationByName(e);if(n)return n}setupEngine(e){var n;this.engine=e,this.engine.on(ke.RemoteMute,(r,i)=>{const s=this.trackPublications.get(r);!s||!s.track||(i?s.mute():s.unmute())}),!((n=this.signalConnectedFuture)===null||n===void 0)&&n.isResolved&&(this.signalConnectedFuture=void 0),this.engine.on(ke.Connected,this.handleReconnected).on(ke.SignalConnected,this.handleSignalConnected).on(ke.SignalRestarted,this.handleReconnected).on(ke.SignalResumed,this.handleReconnected).on(ke.Restarting,this.handleReconnecting).on(ke.Resuming,this.handleReconnecting).on(ke.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(ke.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(ke.Closing,this.handleClosing).on(ke.SignalRequestResponse,this.handleSignalRequestResponse).on(ke.DataPacketReceived,this.handleDataPacket)}setMetadata(e){return V(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({metadata:e})})}setName(e){return V(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({name:e})})}setAttributes(e){return V(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({attributes:e})})}requestMetadataUpdate(e){return V(this,arguments,void 0,function(n){var r=this;let{metadata:i,name:s,attributes:o}=n;return(function*(){return new Promise((l,u)=>V(r,void 0,void 0,function*(){var d,f;try{let m=!1;const g=yield this.engine.client.sendUpdateLocalMetadata((d=i??this.metadata)!==null&&d!==void 0?d:"",(f=s??this.name)!==null&&f!==void 0?f:"",o),y=performance.now();for(this.pendingSignalRequests.set(g,{resolve:l,reject:C=>{u(C),m=!0},values:{name:s,metadata:i,attributes:o}});performance.now()-y<5e3&&!m;){if((!s||this.name===s)&&(!i||this.metadata===i)&&(!o||Object.entries(o).every(C=>{let[x,k]=C;return this.attributes[x]===k||k===""&&!this.attributes[x]}))){this.pendingSignalRequests.delete(g),l();return}yield En(50)}u(new YP("Request to update local metadata timed out","TimeoutError"))}catch(m){m instanceof Error&&u(m)}}))})()})}setCameraEnabled(e,n,r){return this.setTrackEnabled(ue.Source.Camera,e,n,r)}setMicrophoneEnabled(e,n,r){return this.setTrackEnabled(ue.Source.Microphone,e,n,r)}setScreenShareEnabled(e,n,r){return this.setTrackEnabled(ue.Source.ScreenShare,e,n,r)}setE2EEEnabled(e){return V(this,void 0,void 0,function*(){this.encryptionType=e?hn.GCM:hn.NONE,yield this.republishAllTracks(void 0,!1)})}setTrackEnabled(e,n,r,i){return V(this,void 0,void 0,function*(){var s,o;this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:e,enabled:n})),this.republishPromise&&(yield this.republishPromise);let l=this.getTrackPublication(e);if(n)if(l)yield l.unmute();else{let u;if(this.pendingPublishing.has(e)){const d=yield this.waitForPendingPublicationOfSource(e);return d||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e})),yield d==null?void 0:d.unmute(),d}this.pendingPublishing.add(e);try{switch(e){case ue.Source.Camera:u=yield this.createTracks({video:(s=r)!==null&&s!==void 0?s:!0});break;case ue.Source.Microphone:u=yield this.createTracks({audio:(o=r)!==null&&o!==void 0?o:!0});break;case ue.Source.ScreenShare:u=yield this.createScreenTracks(Object.assign({},r));break;default:throw new bs(e)}}catch(d){throw u==null||u.forEach(f=>{f.stop()}),d instanceof Error&&this.emit(Te.MediaDevicesError,d,db(e)),this.pendingPublishing.delete(e),d}for(const d of u){const f=Object.assign(Object.assign({},this.roomOptions.publishDefaults),r);e===ue.Source.Microphone&&$i(d)&&f.preConnectBuffer&&(this.log.info("starting preconnect buffer for microphone",Object.assign({},this.logContext)),d.startPreConnectBuffer())}try{const d=[];for(const m of u)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),dt(m))),d.push(this.publishTrack(m,i));[l]=yield Promise.all(d)}catch(d){throw u==null||u.forEach(f=>{f.stop()}),d}finally{this.pendingPublishing.delete(e)}}else if(!(l!=null&&l.track)&&this.pendingPublishing.has(e)&&(l=yield this.waitForPendingPublicationOfSource(e),l||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e}))),l&&l.track)if(e===ue.Source.ScreenShare){l=yield this.unpublishTrack(l.track);const u=this.getTrackPublication(ue.Source.ScreenShareAudio);u&&u.track&&this.unpublishTrack(u.track)}else yield l.mute();return l})}enableCameraAndMicrophone(){return V(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(ue.Source.Camera)||this.pendingPublishing.has(ue.Source.Microphone))){this.pendingPublishing.add(ue.Source.Camera),this.pendingPublishing.add(ue.Source.Microphone);try{const e=yield this.createTracks({audio:!0,video:!0});yield Promise.all(e.map(n=>this.publishTrack(n)))}finally{this.pendingPublishing.delete(ue.Source.Camera),this.pendingPublishing.delete(ue.Source.Microphone)}}})}createTracks(e){return V(this,void 0,void 0,function*(){var n,r;e??(e={});const i=Yj(e,(n=this.roomOptions)===null||n===void 0?void 0:n.audioCaptureDefaults,(r=this.roomOptions)===null||r===void 0?void 0:r.videoCaptureDefaults);try{return(yield Fm(i,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext})).map(l=>($i(l)&&(this.microphoneError=void 0,l.setAudioContext(this.audioContext),l.source=ue.Source.Microphone,this.emit(Te.AudioStreamAcquired)),Zo(l)&&(this.cameraError=void 0,l.source=ue.Source.Camera),l))}catch(s){throw s instanceof Error&&(e.audio&&(this.microphoneError=s),e.video&&(this.cameraError=s)),s}})}createScreenTracks(e){return V(this,void 0,void 0,function*(){if(e===void 0&&(e={}),navigator.mediaDevices.getDisplayMedia===void 0)throw new Dw("getDisplayMedia not supported");e.resolution===void 0&&!Gte()&&(e.resolution=jw.h1080fps30.resolution);const n=jte(e),r=yield navigator.mediaDevices.getDisplayMedia(n),i=r.getVideoTracks();if(i.length===0)throw new bs("no video track found");const s=new Wp(i[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});s.source=ue.Source.ScreenShare,e.contentHint&&(s.mediaStreamTrack.contentHint=e.contentHint);const o=[s];if(r.getAudioTracks().length>0){this.emit(Te.AudioStreamAcquired);const l=new $p(r.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});l.source=ue.Source.ScreenShareAudio,o.push(l)}return o})}publishTrack(e,n){return V(this,void 0,void 0,function*(){return this.publishOrRepublishTrack(e,n)})}publishOrRepublishTrack(e,n){return V(this,arguments,void 0,function(r,i){var s=this;let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return(function*(){var l,u,d,f;hs(r)&&r.setAudioContext(s.audioContext),yield(l=s.reconnectFuture)===null||l===void 0?void 0:l.promise,s.republishPromise&&!o&&(yield s.republishPromise),rc(r)&&s.pendingPublishPromises.has(r)&&(yield s.pendingPublishPromises.get(r));let m;if(r instanceof MediaStreamTrack)m=r.getConstraints();else{m=r.constraints;let T;switch(r.source){case ue.Source.Microphone:T="audioinput";break;case ue.Source.Camera:T="videoinput"}T&&s.activeDeviceMap.has(T)&&(m=Object.assign(Object.assign({},m),{deviceId:s.activeDeviceMap.get(T)}))}if(r instanceof MediaStreamTrack)switch(r.kind){case"audio":r=new $p(r,m,!0,s.audioContext,{loggerName:s.roomOptions.loggerName,loggerContextCb:()=>s.logContext});break;case"video":r=new Wp(r,m,!0,{loggerName:s.roomOptions.loggerName,loggerContextCb:()=>s.logContext});break;default:throw new bs("unsupported MediaStreamTrack kind ".concat(r.kind))}else r.updateLoggerOptions({loggerName:s.roomOptions.loggerName,loggerContextCb:()=>s.logContext});let g;if(s.trackPublications.forEach(T=>{T.track&&T.track===r&&(g=T)}),g)return s.log.warn("track has already been published, skipping",Object.assign(Object.assign({},s.logContext),dt(g))),g;const y=Object.assign(Object.assign({},s.roomOptions.publishDefaults),i),C="channelCount"in r.mediaStreamTrack.getSettings()&&r.mediaStreamTrack.getSettings().channelCount===2||r.mediaStreamTrack.getConstraints().channelCount===2,x=(u=y.forceStereo)!==null&&u!==void 0?u:C;x&&(y.dtx===void 0&&s.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},s.logContext),dt(r))),y.red===void 0&&s.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(d=y.dtx)!==null&&d!==void 0||(y.dtx=!1),(f=y.red)!==null&&f!==void 0||(y.red=!1)),!Yte()&&s.roomOptions.e2ee&&(s.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari versions and iOS browsers running iOS < v17.2",Object.assign({},s.logContext)),y.simulcast=!1),y.source&&(r.source=y.source);const k=new Promise((T,_)=>V(s,void 0,void 0,function*(){try{if(this.engine.client.currentState!==Et.CONNECTED){this.log.debug("deferring track publication until signal is connected",Object.assign(Object.assign({},this.logContext),{track:dt(r)}));let P=!1;const E=setTimeout(()=>{P=!0,r.stop(),_(new KP("publishing rejected as engine not connected within timeout",408))},15e3);if(yield this.waitUntilEngineConnected(),clearTimeout(E),P)return;const I=yield this.publish(r,y,x);T(I)}else try{const P=yield this.publish(r,y,x);T(P)}catch(P){_(P)}}catch(P){_(P)}}));s.pendingPublishPromises.set(r,k);try{return yield k}catch(T){throw T}finally{s.pendingPublishPromises.delete(r)}})()})}waitUntilEngineConnected(){return this.signalConnectedFuture||(this.signalConnectedFuture=new Br),this.signalConnectedFuture.promise}hasPermissionsToPublish(e){if(!this.permissions)return this.log.warn("no permissions present for publishing track",Object.assign(Object.assign({},this.logContext),dt(e))),!1;const{canPublish:n,canPublishSources:r}=this.permissions;return n&&(r.length===0||r.map(i=>Ute(i)).includes(e.source))?!0:(this.log.warn("insufficient permissions to publish",Object.assign(Object.assign({},this.logContext),dt(e))),!1)}publish(e,n,r){return V(this,void 0,void 0,function*(){var i,s,o,l,u,d,f,m,g,y;if(!this.hasPermissionsToPublish(e))throw new KP("failed to publish track, insufficient permissions",403);Array.from(this.trackPublications.values()).find(j=>rc(e)&&j.source===e.source)&&e.source!==ue.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(e.source),Object.assign(Object.assign({},this.logContext),dt(e))),n.stopMicTrackOnMute&&$i(e)&&(e.stopOnMute=!0),e.source===ue.Source.ScreenShare&&Ba()&&(n.simulcast=!1),n.videoCodec==="av1"&&!Wte()&&(n.videoCodec=void 0),n.videoCodec==="vp9"&&!Hte()&&(n.videoCodec=void 0),n.videoCodec===void 0&&(n.videoCodec=vb),this.enabledPublishVideoCodecs.length>0&&(this.enabledPublishVideoCodecs.some(j=>n.videoCodec===sd(j.mime))||(n.videoCodec=sd(this.enabledPublishVideoCodecs[0].mime)));const x=n.videoCodec;e.on(we.Muted,this.onTrackMuted),e.on(we.Unmuted,this.onTrackUnmuted),e.on(we.Ended,this.handleTrackEnded),e.on(we.UpstreamPaused,this.onTrackUpstreamPaused),e.on(we.UpstreamResumed,this.onTrackUpstreamResumed),e.on(we.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate);const k=[],T=!(!((i=n.dtx)!==null&&i!==void 0)||i),_=e.getSourceTrackSettings();_.autoGainControl&&k.push(yn.TF_AUTO_GAIN_CONTROL),_.echoCancellation&&k.push(yn.TF_ECHO_CANCELLATION),_.noiseSuppression&&k.push(yn.TF_NOISE_SUPPRESSION),_.channelCount&&_.channelCount>1&&k.push(yn.TF_STEREO),T&&k.push(yn.TF_NO_DTX),hs(e)&&e.hasPreConnectBuffer&&k.push(yn.TF_PRECONNECT_BUFFER);const P=new Sd({cid:e.mediaStreamTrack.id,name:n.name,type:ue.kindToProto(e.kind),muted:e.isMuted,source:ue.sourceToProto(e.source),disableDtx:T,encryption:this.encryptionType,stereo:r,disableRed:this.isE2EEEnabled||!(!((s=n.red)!==null&&s!==void 0)||s),stream:n==null?void 0:n.stream,backupCodecPolicy:n==null?void 0:n.backupCodecPolicy,audioFeatures:k});let E;if(e.kind===ue.Kind.Video){let j={width:0,height:0};try{j=yield e.waitForDimensions()}catch{const z=(l=(o=this.roomOptions.videoCaptureDefaults)===null||o===void 0?void 0:o.resolution)!==null&&l!==void 0?l:Cd.h720.resolution;j={width:z.width,height:z.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),dt(e)),{dims:j}))}P.width=j.width,P.height=j.height,po(e)&&(ui(x)&&(e.source===ue.Source.ScreenShare&&(n.scalabilityMode="L1T3","contentHint"in e.mediaStreamTrack&&(e.mediaStreamTrack.contentHint="motion",this.log.info("forcing contentHint to motion for screenshare with SVC codecs",Object.assign(Object.assign({},this.logContext),dt(e))))),n.scalabilityMode=(u=n.scalabilityMode)!==null&&u!==void 0?u:"L3T3_KEY"),P.simulcastCodecs=[new Z0({codec:x,cid:e.mediaStreamTrack.id})],n.backupCodec===!0&&(n.backupCodec={codec:vb}),n.backupCodec&&x!==n.backupCodec.codec&&P.encryption===hn.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),P.simulcastCodecs.push(new Z0({codec:n.backupCodec.codec,cid:""})))),E=bb(e.source===ue.Source.ScreenShare,P.width,P.height,n),P.layers=k_(P.width,P.height,E,ui(n.videoCodec))}else e.kind===ue.Kind.Audio&&(E=[{maxBitrate:(d=n.audioPreset)===null||d===void 0?void 0:d.maxBitrate,priority:(m=(f=n.audioPreset)===null||f===void 0?void 0:f.priority)!==null&&m!==void 0?m:"high",networkPriority:(y=(g=n.audioPreset)===null||g===void 0?void 0:g.priority)!==null&&y!==void 0?y:"high"}]);if(!this.engine||this.engine.isClosed)throw new dn("cannot publish track when not connected");const I=()=>V(this,void 0,void 0,function*(){var j,U,z;if(!this.engine.pcManager)throw new dn("pcManager is not ready");if(e.sender=yield this.engine.createSender(e,n,E),this.emit(Te.LocalSenderCreated,e.sender,e),po(e)&&((j=n.degradationPreference)!==null&&j!==void 0||(n.degradationPreference=ere(e)),e.setDegradationPreference(n.degradationPreference)),E)if(Ba()&&e.kind===ue.Kind.Audio){let F;for(const W of this.engine.pcManager.publisher.getTransceivers())if(W.sender===e.sender){F=W;break}F&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:F,codec:"opus",maxbr:!((U=E[0])===null||U===void 0)&&U.maxBitrate?E[0].maxBitrate/1e3:0})}else e.codec&&ui(e.codec)&&(!((z=E[0])===null||z===void 0)&&z.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:P.cid,codec:e.codec,maxbr:E[0].maxBitrate/1e3});yield this.engine.negotiate()});let A;const L=new Promise((j,U)=>V(this,void 0,void 0,function*(){var z;try{A=yield this.engine.addTrack(P),j(A)}catch(F){e.sender&&(!((z=this.engine.pcManager)===null||z===void 0)&&z.publisher)&&(this.engine.pcManager.publisher.removeTrack(e.sender),yield this.engine.negotiate().catch(W=>{this.log.error("failed to negotiate after removing track due to failed add track request",Object.assign(Object.assign(Object.assign({},this.logContext),dt(e)),{error:W}))})),U(F)}}));if(this.enabledPublishVideoCodecs.length>0)A=(yield Promise.all([L,I()]))[0];else{A=yield L;let j;if(A.codecs.forEach(U=>{j===void 0&&(j=U.mimeType)}),j&&e.kind===ue.Kind.Video){const U=sd(j);U!==x&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),dt(e)),{codec:U})),n.videoCodec=U,E=bb(e.source===ue.Source.ScreenShare,P.width,P.height,n))}yield I()}const R=new wb(e.kind,A,e,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});if(R.on(we.CpuConstrained,j=>this.onTrackCpuConstrained(j,R)),R.options=n,e.sid=A.sid,this.log.debug("publishing ".concat(e.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:E,trackInfo:A})),po(e)?e.startMonitor(this.engine.client):hs(e)&&e.startMonitor(),this.addTrackPublication(R),this.emit(Te.LocalTrackPublished,R),hs(e)&&A.audioFeatures.includes(yn.TF_PRECONNECT_BUFFER)){const j=e.getPreConnectBuffer(),U=e.getPreConnectBufferMimeType();this.on(Te.LocalTrackSubscribed,z=>{if(z.trackSid===A.sid){if(!e.hasPreConnectBuffer){this.log.warn("subscribe event came to late, buffer already closed",this.logContext);return}this.log.debug("finished recording preconnect buffer",Object.assign(Object.assign({},this.logContext),dt(e))),e.stopPreConnectBuffer()}}),j&&new Promise((F,W)=>V(this,void 0,void 0,function*(){var Y,K,X,se,H,te;try{this.log.debug("waiting for agent",Object.assign(Object.assign({},this.logContext),dt(e)));const O=setTimeout(()=>{W(new Error("agent not active within 10 seconds"))},1e4),ve=yield this.waitUntilActiveAgentPresent();clearTimeout(O),this.log.debug("sending preconnect buffer",Object.assign(Object.assign({},this.logContext),dt(e)));const oe=yield this.streamBytes({name:"preconnect-buffer",mimeType:U,topic:"lk.agent.pre-connect-audio-buffer",destinationIdentities:[ve.identity],attributes:{trackId:R.trackSid,sampleRate:String((H=_.sampleRate)!==null&&H!==void 0?H:"48000"),channels:String((te=_.channelCount)!==null&&te!==void 0?te:"1")}});try{for(var D=!0,$=ys(j),re;re=yield $.next(),Y=re.done,!Y;D=!0){se=re.value,D=!1;const ce=se;yield oe.write(ce)}}catch(ce){K={error:ce}}finally{try{!D&&!Y&&(X=$.return)&&(yield X.call($))}finally{if(K)throw K.error}}yield oe.close(),F()}catch(O){W(O)}})).then(()=>{this.log.debug("preconnect buffer sent successfully",Object.assign(Object.assign({},this.logContext),dt(e)))}).catch(F=>{this.log.error("error sending preconnect buffer",Object.assign(Object.assign(Object.assign({},this.logContext),dt(e)),{error:F}))})}return R})}get isLocal(){return!0}publishAdditionalCodecForTrack(e,n,r){return V(this,void 0,void 0,function*(){var i;if(this.encryptionType!==hn.NONE)return;let s;if(this.trackPublications.forEach(y=>{y.track&&y.track===e&&(s=y)}),!s)throw new bs("track is not published");if(!po(e))throw new bs("track is not a video track");const o=Object.assign(Object.assign({},(i=this.roomOptions)===null||i===void 0?void 0:i.publishDefaults),r),l=Qne(e,n,o);if(!l){this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),dt(e)));return}const u=e.addSimulcastTrack(n,l);if(!u)return;const d=new Sd({cid:u.mediaStreamTrack.id,type:ue.kindToProto(e.kind),muted:e.isMuted,source:ue.sourceToProto(e.source),sid:e.sid,simulcastCodecs:[{codec:o.videoCodec,cid:u.mediaStreamTrack.id}]});if(d.layers=k_(d.width,d.height,l),!this.engine||this.engine.isClosed)throw new dn("cannot publish track when not connected");const f=()=>V(this,void 0,void 0,function*(){yield this.engine.createSimulcastSender(e,u,o,l),yield this.engine.negotiate()}),g=(yield Promise.all([this.engine.addTrack(d),f()]))[0];this.log.debug("published ".concat(n," for track ").concat(e.sid),Object.assign(Object.assign({},this.logContext),{encodings:l,trackInfo:g}))})}unpublishTrack(e,n){return V(this,void 0,void 0,function*(){var r,i;if(rc(e)){const d=this.pendingPublishPromises.get(e);d&&(this.log.info("awaiting publish promise before attempting to unpublish",Object.assign(Object.assign({},this.logContext),dt(e))),yield d)}const s=this.getPublicationForTrack(e),o=s?dt(s):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),o)),!s||!s.track){this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),o));return}e=s.track,e.off(we.Muted,this.onTrackMuted),e.off(we.Unmuted,this.onTrackUnmuted),e.off(we.Ended,this.handleTrackEnded),e.off(we.UpstreamPaused,this.onTrackUpstreamPaused),e.off(we.UpstreamResumed,this.onTrackUpstreamResumed),e.off(we.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate),n===void 0&&(n=(i=(r=this.roomOptions)===null||r===void 0?void 0:r.stopLocalTrackOnUnpublish)!==null&&i!==void 0?i:!0),n?e.stop():e.stopMonitor();let l=!1;const u=e.sender;if(e.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<Ht.FAILED&&u)try{for(const d of this.engine.pcManager.publisher.getTransceivers())d.sender===u&&(d.direction="inactive",l=!0);if(this.engine.removeTrack(u)&&(l=!0),po(e)){for(const[,d]of e.simulcastCodecs)d.sender&&(this.engine.removeTrack(d.sender)&&(l=!0),d.sender=void 0);e.simulcastCodecs.clear()}}catch(d){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),o),{error:d}))}switch(this.trackPublications.delete(s.trackSid),s.kind){case ue.Kind.Audio:this.audioTrackPublications.delete(s.trackSid);break;case ue.Kind.Video:this.videoTrackPublications.delete(s.trackSid);break}return this.emit(Te.LocalTrackUnpublished,s),s.setTrack(void 0),l&&(yield this.engine.negotiate()),s})}unpublishTracks(e){return V(this,void 0,void 0,function*(){return(yield Promise.all(e.map(r=>this.unpublishTrack(r)))).filter(r=>!!r)})}republishAllTracks(e){return V(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){r.republishPromise&&(yield r.republishPromise),r.republishPromise=new Promise((s,o)=>V(r,void 0,void 0,function*(){try{const l=[];this.trackPublications.forEach(u=>{u.track&&(n&&(u.options=Object.assign(Object.assign({},u.options),n)),l.push(u))}),yield Promise.all(l.map(u=>V(this,void 0,void 0,function*(){const d=u.track;yield this.unpublishTrack(d,!1),i&&!d.isMuted&&d.source!==ue.Source.ScreenShare&&d.source!==ue.Source.ScreenShareAudio&&(hs(d)||po(d))&&!d.isUserProvided&&(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:u.trackSid})),yield d.restartTrack()),yield this.publishOrRepublishTrack(d,u.options,!0)}))),s()}catch(l){o(l)}finally{this.republishPromise=void 0}})),yield r.republishPromise})()})}publishData(e){return V(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(function*(){const s=i.reliable?ct.RELIABLE:ct.LOSSY,o=i.destinationIdentities,l=i.topic;let u=new Sw({participantIdentity:r.identity,payload:n,destinationIdentities:o,topic:l});const d=new Wn({kind:s,value:{case:"user",value:u}});yield r.engine.sendDataPacket(d,s)})()})}publishDtmf(e,n){return V(this,void 0,void 0,function*(){const r=new Wn({kind:ct.RELIABLE,value:{case:"sipDtmf",value:new JD({code:e,digit:n})}});yield this.engine.sendDataPacket(r,ct.RELIABLE)})}sendChatMessage(e,n){return V(this,void 0,void 0,function*(){const r={id:crypto.randomUUID(),message:e,timestamp:Date.now(),attachedFiles:n==null?void 0:n.attachments},i=new Wn({value:{case:"chatMessage",value:new Fp(Object.assign(Object.assign({},r),{timestamp:Lt.parse(r.timestamp)}))}});return yield this.engine.sendDataPacket(i,ct.RELIABLE),this.emit(Te.ChatMessage,r),r})}editChatMessage(e,n){return V(this,void 0,void 0,function*(){const r=Object.assign(Object.assign({},n),{message:e,editTimestamp:Date.now()}),i=new Wn({value:{case:"chatMessage",value:new Fp(Object.assign(Object.assign({},r),{timestamp:Lt.parse(r.timestamp),editTimestamp:Lt.parse(r.editTimestamp)}))}});return yield this.engine.sendDataPacket(i,ct.RELIABLE),this.emit(Te.ChatMessage,r),r})}sendText(e,n){return V(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.sendText(e,n)})}streamText(e){return V(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.streamText(e)})}sendFile(e,n){return V(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.sendFile(e,n)})}streamBytes(e){return V(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.streamBytes(e)})}performRpc(e){return V(this,arguments,void 0,function(n){var r=this;let{destinationIdentity:i,method:s,payload:o,responseTimeout:l=15e3}=n;return(function*(){return new Promise((f,m)=>V(r,void 0,void 0,function*(){var g,y,C,x;if(zw(o)>aO){m(Gt.builtIn("REQUEST_PAYLOAD_TOO_LARGE"));return}if(!((y=(g=this.engine.latestJoinResponse)===null||g===void 0?void 0:g.serverInfo)===null||y===void 0)&&y.version&&Yi((x=(C=this.engine.latestJoinResponse)===null||C===void 0?void 0:C.serverInfo)===null||x===void 0?void 0:x.version,"1.8.0")<0){m(Gt.builtIn("UNSUPPORTED_SERVER"));return}const k=Math.max(l,8e3),T=crypto.randomUUID();yield this.publishRpcRequest(i,T,s,o,k);const _=setTimeout(()=>{this.pendingAcks.delete(T),m(Gt.builtIn("CONNECTION_TIMEOUT")),this.pendingResponses.delete(T),clearTimeout(P)},7e3);this.pendingAcks.set(T,{resolve:()=>{clearTimeout(_)},participantIdentity:i});const P=setTimeout(()=>{this.pendingResponses.delete(T),m(Gt.builtIn("RESPONSE_TIMEOUT"))},l);this.pendingResponses.set(T,{resolve:(E,I)=>{clearTimeout(P),this.pendingAcks.has(T)&&(this.log.warn("RPC response received before ack",T),this.pendingAcks.delete(T),clearTimeout(_)),I?m(I):f(E??"")},participantIdentity:i})}))})()})}registerRpcMethod(e,n){this.rpcHandlers.has(e)&&this.log.warn("you're overriding the RPC handler for method ".concat(e,", in the future this will throw an error")),this.rpcHandlers.set(e,n)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}setTrackSubscriptionPermissions(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=n,this.allParticipantsAllowedToSubscribe=e,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}handleIncomingRpcAck(e){const n=this.pendingAcks.get(e);n?(n.resolve(),this.pendingAcks.delete(e)):console.error("Ack received for unexpected RPC request",e)}handleIncomingRpcResponse(e,n,r){const i=this.pendingResponses.get(e);i?(i.resolve(n,r),this.pendingResponses.delete(e)):console.error("Response received for unexpected RPC request",e)}publishRpcRequest(e,n,r,i,s){return V(this,void 0,void 0,function*(){const o=new Wn({destinationIdentities:[e],kind:ct.RELIABLE,value:{case:"rpcRequest",value:new Cw({id:n,method:r,payload:i,responseTimeoutMs:s,version:1})}});yield this.engine.sendDataPacket(o,ct.RELIABLE)})}handleParticipantDisconnected(e){for(const[n,{participantIdentity:r}]of this.pendingAcks)r===e&&this.pendingAcks.delete(n);for(const[n,{participantIdentity:r,resolve:i}]of this.pendingResponses)r===e&&(i(null,Gt.builtIn("RECIPIENT_DISCONNECTED")),this.pendingResponses.delete(n))}setEnabledPublishCodecs(e){this.enabledPublishVideoCodecs=e.filter(n=>n.mime.split("/")[0].toLowerCase()==="video")}updateInfo(e){return super.updateInfo(e)?(e.tracks.forEach(n=>{var r,i;const s=this.trackPublications.get(n.sid);if(s){const o=s.isMuted||((i=(r=s.track)===null||r===void 0?void 0:r.isUpstreamPaused)!==null&&i!==void 0?i:!1);o!==n.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),dt(s)),{mutedOnServer:o})),this.engine.client.sendMuteTrack(n.sid,o))}}),!0):!1}setActiveAgent(e){var n,r,i,s;this.firstActiveAgent=e,e&&!this.firstActiveAgent&&(this.firstActiveAgent=e),e?(r=(n=this.activeAgentFuture)===null||n===void 0?void 0:n.resolve)===null||r===void 0||r.call(n,e):(s=(i=this.activeAgentFuture)===null||i===void 0?void 0:i.reject)===null||s===void 0||s.call(i,new Error("Agent disconnected")),this.activeAgentFuture=void 0}waitUntilActiveAgentPresent(){return this.firstActiveAgent?Promise.resolve(this.firstActiveAgent):(this.activeAgentFuture||(this.activeAgentFuture=new Br),this.activeAgentFuture.promise)}getPublicationForTrack(e){let n;return this.trackPublications.forEach(r=>{const i=r.track;i&&(e instanceof MediaStreamTrack?(hs(i)||po(i))&&i.mediaStreamTrack===e&&(n=r):e===i&&(n=r))}),n}waitForPendingPublicationOfSource(e){return V(this,void 0,void 0,function*(){const r=Date.now();for(;Date.now()<r+1e4;){const i=Array.from(this.pendingPublishPromises.entries()).find(s=>{let[o]=s;return o.source===e});if(i)return i[1];yield En(20)}})}}class wre extends fs{constructor(e,n,r,i){super(e,n.sid,n.name,i),this.track=void 0,this.allowed=!0,this.requestedDisabled=void 0,this.visible=!0,this.handleEnded=s=>{this.setTrack(void 0),this.emit(we.Ended,s)},this.handleVisibilityChange=s=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(s),this.logContext),this.visible=s,this.emitTrackUpdate()},this.handleVideoDimensionsChange=s=>{this.log.debug("adaptivestream video dimensions ".concat(s.width,"x").concat(s.height),this.logContext),this.videoDimensionsAdaptiveStream=s,this.emitTrackUpdate()},this.subscribed=r,this.updateInfo(n)}setSubscribed(e){const n=this.subscriptionStatus,r=this.permissionStatus;this.subscribed=e,e&&(this.allowed=!0);const i=new Dm({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new XD({participantSid:"",trackSids:[this.trackSid]})]});this.emit(we.UpdateSubscription,i),this.emitSubscriptionUpdateIfChanged(n),this.emitPermissionUpdateIfChanged(r)}get subscriptionStatus(){return this.subscribed===!1?fs.SubscriptionStatus.Unsubscribed:super.isSubscribed?fs.SubscriptionStatus.Subscribed:fs.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?fs.PermissionStatus.Allowed:fs.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return this.requestedDisabled!==void 0?!this.requestedDisabled:this.isAdaptiveStream?this.visible:!0}get isLocal(){return!1}setEnabled(e){!this.isManualOperationAllowed()||this.requestedDisabled===!e||(this.requestedDisabled=!e,this.emitTrackUpdate())}setVideoQuality(e){!this.isManualOperationAllowed()||this.requestedMaxQuality===e||(this.requestedMaxQuality=e,this.requestedVideoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(e){var n,r;this.isManualOperationAllowed()&&(((n=this.requestedVideoDimensions)===null||n===void 0?void 0:n.width)===e.width&&((r=this.requestedVideoDimensions)===null||r===void 0?void 0:r.height)===e.height||(Uy(this.track)&&(this.requestedVideoDimensions=e),this.requestedMaxQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(e){this.isManualOperationAllowed()&&Uy(this.track)&&this.fps!==e&&(this.fps=e,this.emitTrackUpdate())}get videoQuality(){var e;return(e=this.requestedMaxQuality)!==null&&e!==void 0?e:yr.HIGH}setTrack(e){const n=this.subscriptionStatus,r=this.permissionStatus,i=this.track;i!==e&&(i&&(i.off(we.VideoDimensionsChanged,this.handleVideoDimensionsChange),i.off(we.VisibilityChanged,this.handleVisibilityChange),i.off(we.Ended,this.handleEnded),i.detach(),i.stopMonitor(),this.emit(we.Unsubscribed,i)),super.setTrack(e),e&&(e.sid=this.trackSid,e.on(we.VideoDimensionsChanged,this.handleVideoDimensionsChange),e.on(we.VisibilityChanged,this.handleVisibilityChange),e.on(we.Ended,this.handleEnded),this.emit(we.Subscribed,e)),this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n))}setAllowed(e){const n=this.subscriptionStatus,r=this.permissionStatus;this.allowed=e,this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n)}setSubscriptionError(e){this.emit(we.SubscriptionFailed,e)}updateInfo(e){super.updateInfo(e);const n=this.metadataMuted;this.metadataMuted=e.muted,this.track?this.track.setMuted(e.muted):n!==e.muted&&this.emit(e.muted?we.Muted:we.Unmuted)}emitSubscriptionUpdateIfChanged(e){const n=this.subscriptionStatus;e!==n&&this.emit(we.SubscriptionStatusChanged,n,e)}emitPermissionUpdateIfChanged(e){this.permissionStatus!==e&&this.emit(we.SubscriptionPermissionChanged,this.permissionStatus,e)}isManualOperationAllowed(){return this.isDesired?!0:(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return Uy(this.track)&&this.track.isAdaptiveStream}emitTrackUpdate(){const e=new aj({trackSids:[this.trackSid],disabled:!this.isEnabled,fps:this.fps});if(this.kind===ue.Kind.Video){let n=this.requestedVideoDimensions;if(this.videoDimensionsAdaptiveStream!==void 0)if(n)QP(this.videoDimensionsAdaptiveStream,n)&&(this.log.debug("using adaptive stream dimensions instead of requested",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream);else if(this.requestedMaxQuality!==void 0&&this.trackInfo){const r=Bte(this.trackInfo,this.requestedMaxQuality);r&&QP(this.videoDimensionsAdaptiveStream,r)&&(this.log.debug("using adaptive stream dimensions instead of max quality layer",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream)}else this.log.debug("using adaptive stream dimensions",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream;n?(e.width=Math.ceil(n.width),e.height=Math.ceil(n.height)):this.requestedMaxQuality!==void 0?(this.log.debug("using requested max quality",Object.assign(Object.assign({},this.logContext),{quality:this.requestedMaxQuality})),e.quality=this.requestedMaxQuality):(this.log.debug("using default quality",Object.assign(Object.assign({},this.logContext),{quality:yr.HIGH})),e.quality=yr.HIGH)}this.emit(we.UpdateSettings,e)}}class Hp extends mO{static fromParticipantInfo(e,n,r){return new Hp(e,n.sid,n.identity,n.name,n.metadata,n.attributes,r,n.kind)}get logContext(){return Object.assign(Object.assign({},super.logContext),{rpID:this.sid,remoteParticipant:this.identity})}constructor(e,n,r,i,s,o,l){let u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:kd.STANDARD;super(n,r||"",i,s,o,l,u),this.signalClient=e,this.trackPublications=new Map,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.volumeMap=new Map}addTrackPublication(e){super.addTrackPublication(e),e.on(we.UpdateSettings,n=>{this.log.debug("send update settings",Object.assign(Object.assign(Object.assign({},this.logContext),dt(e)),{settings:n})),this.signalClient.sendUpdateTrackSettings(n)}),e.on(we.UpdateSubscription,n=>{n.participantTracks.forEach(r=>{r.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(n)}),e.on(we.SubscriptionPermissionChanged,n=>{this.emit(Te.TrackSubscriptionPermissionChanged,e,n)}),e.on(we.SubscriptionStatusChanged,n=>{this.emit(Te.TrackSubscriptionStatusChanged,e,n)}),e.on(we.Subscribed,n=>{this.emit(Te.TrackSubscribed,n,e)}),e.on(we.Unsubscribed,n=>{this.emit(Te.TrackUnsubscribed,n,e)}),e.on(we.SubscriptionFailed,n=>{this.emit(Te.TrackSubscriptionFailed,e.trackSid,n)})}getTrackPublication(e){const n=super.getTrackPublication(e);if(n)return n}getTrackPublicationByName(e){const n=super.getTrackPublicationByName(e);if(n)return n}setVolume(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ue.Source.Microphone;this.volumeMap.set(n,e);const r=this.getTrackPublication(n);r&&r.track&&r.track.setVolume(e)}getVolume(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ue.Source.Microphone;const n=this.getTrackPublication(e);return n&&n.track?n.track.getVolume():this.volumeMap.get(e)}addSubscribedMediaTrack(e,n,r,i,s,o){let l=this.getTrackPublicationBySid(n);if(l||n.startsWith("TR")||this.trackPublications.forEach(f=>{!l&&e.kind===f.kind.toString()&&(l=f)}),!l){if(o===0){this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:n})),this.emit(Te.TrackSubscriptionFailed,n);return}o===void 0&&(o=20),setTimeout(()=>{this.addSubscribedMediaTrack(e,n,r,i,s,o-1)},150);return}if(e.readyState==="ended"){this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),dt(l))),this.emit(Te.TrackSubscriptionFailed,n);return}const u=e.kind==="video";let d;return u?d=new mre(e,n,i,s):d=new pre(e,n,i,this.audioContext,this.audioOutput),d.source=l.source,d.isMuted=l.isMuted,d.setMediaStream(r),d.start(),l.setTrack(d),this.volumeMap.has(l.source)&&mb(d)&&$i(d)&&d.setVolume(this.volumeMap.get(l.source)),l}get hasMetadata(){return!!this.participantInfo}getTrackPublicationBySid(e){return this.trackPublications.get(e)}updateInfo(e){if(!super.updateInfo(e))return!1;const n=new Map,r=new Map;return e.tracks.forEach(i=>{var s,o;let l=this.getTrackPublicationBySid(i.sid);if(l)l.updateInfo(i);else{const u=ue.kindFromProto(i.type);if(!u)return;l=new wre(u,i,(s=this.signalClient.connectOptions)===null||s===void 0?void 0:s.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:(o=this.loggerOptions)===null||o===void 0?void 0:o.loggerName}),l.updateInfo(i),r.set(i.sid,l);const d=Array.from(this.trackPublications.values()).find(f=>f.source===(l==null?void 0:l.source));d&&l.source!==ue.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(l.source),Object.assign(Object.assign({},this.logContext),{oldTrack:dt(d),newTrack:dt(l)})),this.addTrackPublication(l)}n.set(i.sid,l)}),this.trackPublications.forEach(i=>{n.has(i.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),dt(i))),this.unpublishTrack(i.trackSid,!0))}),r.forEach(i=>{this.emit(Te.TrackPublished,i)}),!0}unpublishTrack(e,n){const r=this.trackPublications.get(e);if(!r)return;const{track:i}=r;switch(i&&(i.stop(),r.setTrack(void 0)),this.trackPublications.delete(e),r.kind){case ue.Kind.Audio:this.audioTrackPublications.delete(e);break;case ue.Kind.Video:this.videoTrackPublications.delete(e);break}n&&this.emit(Te.TrackUnpublished,r)}setAudioOutput(e){return V(this,void 0,void 0,function*(){this.audioOutput=e;const n=[];this.audioTrackPublications.forEach(r=>{var i;$i(r.track)&&mb(r.track)&&n.push(r.track.setSinkId((i=e.deviceId)!==null&&i!==void 0?i:"default"))}),yield Promise.all(n)})}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:e,args:r})),super.emit(e,...r)}}var bt;(function(t){t.Disconnected="disconnected",t.Connecting="connecting",t.Connected="connected",t.Reconnecting="reconnecting",t.SignalReconnecting="signalReconnecting"})(bt||(bt={}));const kre=4*1e3;class Tc extends Zi.EventEmitter{get hasE2EESetup(){return this.e2eeManager!==void 0}constructor(e){var n,r,i,s;if(super(),n=this,this.state=bt.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=nt,this.bufferedEvents=[],this.isResuming=!1,this.rpcHandlers=new Map,this.connect=(o,l,u)=>V(this,void 0,void 0,function*(){var d;if(!qte())throw Ki()?Error("WebRTC isn't detected, have you called registerGlobals?"):Error("LiveKit doesn't seem to be supported on this browser. Try to update your browser and make sure no browser extensions are disabling webRTC.");const f=yield this.disconnectLock.lock();if(this.state===bt.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),f(),Promise.resolve();if(this.connectFuture)return f(),this.connectFuture.promise;this.setAndEmitConnectionState(bt.Connecting),((d=this.regionUrlProvider)===null||d===void 0?void 0:d.getServerUrl().toString())!==nO(o)&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),Cc(new URL(o))&&(this.regionUrlProvider===void 0?this.regionUrlProvider=new vt(o,l):this.regionUrlProvider.updateToken(l),this.regionUrlProvider.fetchRegionSettings().then(y=>{var C;(C=this.regionUrlProvider)===null||C===void 0||C.setServerReportedRegions(y)}).catch(y=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:y}))}));const m=(y,C,x)=>V(this,void 0,void 0,function*(){var k,T;this.abortController&&this.abortController.abort();const _=new AbortController;this.abortController=_,f==null||f();try{if(yield ic.getInstance().getBackOffPromise(o),_.signal.aborted)throw Ke.cancelled("Connection attempt aborted");yield this.attemptConnection(x??o,l,u,_),this.abortController=void 0,y()}catch(P){if(this.regionUrlProvider&&P instanceof Ke&&P.reason!==Mt.Cancelled&&P.reason!==Mt.NotAllowed){let E=null;try{this.log.debug("Fetching next region"),E=yield this.regionUrlProvider.getNextBestRegionUrl((k=this.abortController)===null||k===void 0?void 0:k.signal)}catch(I){if(I instanceof Ke&&(I.status===401||I.reason===Mt.Cancelled)){this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),C(I);return}}[Mt.InternalError,Mt.ServerUnreachable,Mt.Timeout].includes(P.reason)&&(this.log.debug("Adding failed connection attempt to back off"),ic.getInstance().addFailedConnectionAttempt(o)),E&&!(!((T=this.abortController)===null||T===void 0)&&T.signal.aborted)?(this.log.info("Initial connection failed with ConnectionError: ".concat(P.message,". Retrying with another region: ").concat(E),this.logContext),this.recreateEngine(),yield m(y,C,E)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,i_(P)),C(P))}else{let E=hi.UNKNOWN_REASON;P instanceof Ke&&(E=i_(P)),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,E),C(P)}}}),g=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new Br((y,C)=>{m(y,C,g)},()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(o,l,u,d,f,m)=>V(this,void 0,void 0,function*(){var g,y,C;const x=yield u.join(o,l,{autoSubscribe:d.autoSubscribe,adaptiveStream:typeof f.adaptiveStream=="object"?!0:f.adaptiveStream,maxRetries:d.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:d.websocketTimeout,singlePeerConnection:f.singlePeerConnection},m.signal);let k=x.serverInfo;if(k||(k={version:x.serverVersion,region:x.serverRegion}),this.serverInfo=k,this.log.debug("connected to Livekit Server ".concat(Object.entries(k).map(T=>{let[_,P]=T;return"".concat(_,": ").concat(P)}).join(", ")),{room:(g=x.room)===null||g===void 0?void 0:g.name,roomSid:(y=x.room)===null||y===void 0?void 0:y.sid,identity:(C=x.participant)===null||C===void 0?void 0:C.identity}),!k.version)throw new _te("unknown server version");return k.version==="0.15.1"&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),f.dynacast=!1),x}),this.applyJoinResponse=o=>{const l=o.participant;if(this.localParticipant.sid=l.sid,this.localParticipant.identity=l.identity,this.localParticipant.setEnabledPublishCodecs(o.enabledPublishCodecs),this.e2eeManager)try{this.e2eeManager.setSifTrailer(o.sifTrailer)}catch(u){this.log.error(u instanceof Error?u.message:"Could not set SifTrailer",Object.assign(Object.assign({},this.logContext),{error:u}))}this.handleParticipantUpdates([l,...o.otherParticipants]),o.room&&this.handleRoomUpdate(o.room)},this.attemptConnection=(o,l,u,d)=>V(this,void 0,void 0,function*(){var f,m;this.state===bt.Reconnecting||this.isResuming||!((f=this.engine)===null||f===void 0)&&f.pendingReconnect?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),!((m=this.regionUrlProvider)===null||m===void 0)&&m.isCloud()&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},Vw),u),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const g=yield this.connectSignal(o,l,this.engine,this.connOptions,this.options,d);this.applyJoinResponse(g),this.setupLocalParticipantEvents(),this.emit(me.SignalConnected)}catch(g){yield this.engine.close(),this.recreateEngine();const y=d.signal.aborted?Ke.cancelled("Signal connection aborted"):Ke.serverUnreachable("could not establish signal connection");throw g instanceof Error&&(y.message="".concat(y.message,": ").concat(g.message)),g instanceof Ke&&(y.reason=g.reason,y.status=g.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:g})),y}if(d.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),Ke.cancelled("Connection attempt aborted");try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,d)}catch(g){throw yield this.engine.close(),this.recreateEngine(),g}sr()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),sr()&&window.addEventListener("freeze",this.onPageLeave),this.setAndEmitConnectionState(bt.Connected),this.emit(me.Connected),ic.getInstance().resetFailedConnectionAttempts(o),this.registerConnectionReconcile(),this.regionUrlProvider&&this.regionUrlProvider.notifyConnected()}),this.disconnect=function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];return V(n,[...l],void 0,function(){var d=this;let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){var m,g,y;const C=yield d.disconnectLock.lock();try{if(d.state===bt.Disconnected){d.log.debug("already disconnected",d.logContext);return}if(d.log.info("disconnect from room",Object.assign({},d.logContext)),d.state===bt.Connecting||d.state===bt.Reconnecting||d.isResuming){const x="Abort connection attempt due to user initiated disconnect";d.log.warn(x,d.logContext),(m=d.abortController)===null||m===void 0||m.abort(x),(y=(g=d.connectFuture)===null||g===void 0?void 0:g.reject)===null||y===void 0||y.call(g,Ke.cancelled("Client initiated disconnect")),d.connectFuture=void 0}d.engine&&(d.engine.client.isDisconnected||(yield d.engine.client.sendLeave()),yield d.engine.close()),d.handleDisconnect(f,hi.CLIENT_INITIATED),d.engine=void 0}finally{C()}})()})},this.onPageLeave=()=>V(this,void 0,void 0,function*(){this.log.info("Page leave detected, disconnecting",this.logContext),yield this.disconnect()}),this.startAudio=()=>V(this,void 0,void 0,function*(){const o=[],l=ar();if(l&&l.os==="iOS"){const u="livekit-dummy-audio-el";let d=document.getElementById(u);if(!d){d=document.createElement("audio"),d.id=u,d.autoplay=!0,d.hidden=!0;const f=Fy();f.enabled=!0;const m=new MediaStream([f]);d.srcObject=m,document.addEventListener("visibilitychange",()=>{d&&(d.srcObject=document.hidden?null:m,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))}),document.body.append(d),this.once(me.Disconnected,()=>{d==null||d.remove(),d=null})}o.push(d)}this.remoteParticipants.forEach(u=>{u.audioTrackPublications.forEach(d=>{d.track&&d.track.attachedElements.forEach(f=>{o.push(f)})})});try{yield Promise.all([this.acquireAudioContext(),...o.map(u=>(u.muted=!1,u.play()))]),this.handleAudioPlaybackStarted()}catch(u){throw this.handleAudioPlaybackFailed(u),u}}),this.startVideo=()=>V(this,void 0,void 0,function*(){const o=[];for(const l of this.remoteParticipants.values())l.videoTrackPublications.forEach(u=>{var d;(d=u.track)===null||d===void 0||d.attachedElements.forEach(f=>{o.includes(f)||o.push(f)})});yield Promise.all(o.map(l=>l.play())).then(()=>{this.handleVideoPlaybackStarted()}).catch(l=>{l.name==="NotAllowedError"?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)})}),this.handleRestarting=()=>{this.clearConnectionReconcile(),this.isResuming=!1;for(const o of this.remoteParticipants.values())this.handleParticipantDisconnected(o.identity,o);this.setAndEmitConnectionState(bt.Reconnecting)&&this.emit(me.Reconnecting)},this.handleSignalRestarted=o=>V(this,void 0,void 0,function*(){this.log.debug("signal reconnected to server, region ".concat(o.serverRegion),Object.assign(Object.assign({},this.logContext),{region:o.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(o);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(l){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:l}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:o.serverRegion}))}catch{return}this.setAndEmitConnectionState(bt.Connected),this.emit(me.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()}),this.handleParticipantUpdates=o=>{o.forEach(l=>{var u;if(l.identity===this.localParticipant.identity){this.localParticipant.updateInfo(l);return}l.identity===""&&(l.identity=(u=this.sidToIdentity.get(l.sid))!==null&&u!==void 0?u:"");let d=this.remoteParticipants.get(l.identity);l.state===Zl.DISCONNECTED?this.handleParticipantDisconnected(l.identity,d):d=this.getOrCreateParticipant(l.identity,l)})},this.handleActiveSpeakersUpdate=o=>{const l=[],u={};o.forEach(d=>{if(u[d.sid]=!0,d.sid===this.localParticipant.sid)this.localParticipant.audioLevel=d.level,this.localParticipant.setIsSpeaking(!0),l.push(this.localParticipant);else{const f=this.getRemoteParticipantBySid(d.sid);f&&(f.audioLevel=d.level,f.setIsSpeaking(!0),l.push(f))}}),u[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.remoteParticipants.forEach(d=>{u[d.sid]||(d.audioLevel=0,d.setIsSpeaking(!1))}),this.activeSpeakers=l,this.emitWhenConnected(me.ActiveSpeakersChanged,l)},this.handleSpeakersChanged=o=>{const l=new Map;this.activeSpeakers.forEach(d=>{const f=this.remoteParticipants.get(d.identity);f&&f.sid!==d.sid||l.set(d.sid,d)}),o.forEach(d=>{let f=this.getRemoteParticipantBySid(d.sid);d.sid===this.localParticipant.sid&&(f=this.localParticipant),f&&(f.audioLevel=d.level,f.setIsSpeaking(d.active),d.active?l.set(d.sid,f):l.delete(d.sid))});const u=Array.from(l.values());u.sort((d,f)=>f.audioLevel-d.audioLevel),this.activeSpeakers=u,this.emitWhenConnected(me.ActiveSpeakersChanged,u)},this.handleStreamStateUpdate=o=>{o.streamStates.forEach(l=>{const u=this.getRemoteParticipantBySid(l.participantSid);if(!u)return;const d=u.getTrackPublicationBySid(l.trackSid);if(!d||!d.track)return;const f=ue.streamStateFromProto(l.state);d.track.setStreamState(f),f!==d.track.streamState&&(u.emit(Te.TrackStreamStateChanged,d,d.track.streamState),this.emitWhenConnected(me.TrackStreamStateChanged,d,d.track.streamState,u))})},this.handleSubscriptionPermissionUpdate=o=>{const l=this.getRemoteParticipantBySid(o.participantSid);if(!l)return;const u=l.getTrackPublicationBySid(o.trackSid);u&&u.setAllowed(o.allowed)},this.handleSubscriptionError=o=>{const l=Array.from(this.remoteParticipants.values()).find(d=>d.trackPublications.has(o.trackSid));if(!l)return;const u=l.getTrackPublicationBySid(o.trackSid);u&&u.setSubscriptionError(o.err)},this.handleDataPacket=(o,l)=>{const u=this.remoteParticipants.get(o.participantIdentity);if(o.value.case==="user")this.handleUserPacket(u,o.value.value,o.kind,l);else if(o.value.case==="transcription")this.handleTranscription(u,o.value.value);else if(o.value.case==="sipDtmf")this.handleSipDtmf(u,o.value.value);else if(o.value.case==="chatMessage")this.handleChatMessage(u,o.value.value);else if(o.value.case==="metrics")this.handleMetrics(o.value.value,u);else if(o.value.case==="streamHeader"||o.value.case==="streamChunk"||o.value.case==="streamTrailer")this.handleDataStream(o,l);else if(o.value.case==="rpcRequest"){const d=o.value.value;this.handleIncomingRpcRequest(o.participantIdentity,d.id,d.method,d.payload,d.responseTimeoutMs,d.version)}},this.handleUserPacket=(o,l,u,d)=>{this.emit(me.DataReceived,l.payload,o,u,l.topic,d),o==null||o.emit(Te.DataReceived,l.payload,u,d)},this.handleSipDtmf=(o,l)=>{this.emit(me.SipDTMFReceived,l,o),o==null||o.emit(Te.SipDTMFReceived,l)},this.handleTranscription=(o,l)=>{const u=l.transcribedParticipantIdentity===this.localParticipant.identity?this.localParticipant:this.getParticipantByIdentity(l.transcribedParticipantIdentity),d=u==null?void 0:u.trackPublications.get(l.trackId),f=tne(l,this.transcriptionReceivedTimes);d==null||d.emit(we.TranscriptionReceived,f),u==null||u.emit(Te.TranscriptionReceived,f,d),this.emit(me.TranscriptionReceived,f,u,d)},this.handleChatMessage=(o,l)=>{const u=nne(l);this.emit(me.ChatMessage,u,o)},this.handleMetrics=(o,l)=>{this.emit(me.MetricsReceived,o,l)},this.handleDataStream=(o,l)=>{this.incomingDataStreamManager.handleDataStreamPacket(o,l)},this.bufferedSegments=new Map,this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(me.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=o=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:o})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(me.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(me.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(me.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>V(this,void 0,void 0,function*(){var o;((o=ar())===null||o===void 0?void 0:o.os)!=="iOS"&&(yield this.selectDefaultDevices()),this.emit(me.MediaDevicesChanged)}),this.handleRoomUpdate=o=>{const l=this.roomInfo;this.roomInfo=o,l&&l.metadata!==o.metadata&&this.emitWhenConnected(me.RoomMetadataChanged,o.metadata),(l==null?void 0:l.activeRecording)!==o.activeRecording&&this.emitWhenConnected(me.RecordingStatusChanged,o.activeRecording)},this.handleConnectionQualityUpdate=o=>{o.updates.forEach(l=>{if(l.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(l.quality);return}const u=this.getRemoteParticipantBySid(l.participantSid);u&&u.setConnectionQuality(l.quality)})},this.onLocalParticipantMetadataChanged=o=>{this.emit(me.ParticipantMetadataChanged,o,this.localParticipant)},this.onLocalParticipantNameChanged=o=>{this.emit(me.ParticipantNameChanged,o,this.localParticipant)},this.onLocalAttributesChanged=o=>{this.emit(me.ParticipantAttributesChanged,o,this.localParticipant)},this.onLocalTrackMuted=o=>{this.emit(me.TrackMuted,o,this.localParticipant)},this.onLocalTrackUnmuted=o=>{this.emit(me.TrackUnmuted,o,this.localParticipant)},this.onTrackProcessorUpdate=o=>{var l;(l=o==null?void 0:o.onPublish)===null||l===void 0||l.call(o,this)},this.onLocalTrackPublished=o=>V(this,void 0,void 0,function*(){var l,u,d,f,m,g;(l=o.track)===null||l===void 0||l.on(we.TrackProcessorUpdate,this.onTrackProcessorUpdate),(u=o.track)===null||u===void 0||u.on(we.Restarted,this.onLocalTrackRestarted),(m=(f=(d=o.track)===null||d===void 0?void 0:d.getProcessor())===null||f===void 0?void 0:f.onPublish)===null||m===void 0||m.call(f,this),this.emit(me.LocalTrackPublished,o,this.localParticipant),hs(o.track)&&(yield o.track.checkForSilence())&&this.emit(me.LocalAudioSilenceDetected,o);const y=yield(g=o.track)===null||g===void 0?void 0:g.getDeviceId(!1),C=db(o.source);C&&y&&y!==this.localParticipant.activeDeviceMap.get(C)&&(this.localParticipant.activeDeviceMap.set(C,y),this.emit(me.ActiveDeviceChanged,C,y))}),this.onLocalTrackUnpublished=o=>{var l,u;(l=o.track)===null||l===void 0||l.off(we.TrackProcessorUpdate,this.onTrackProcessorUpdate),(u=o.track)===null||u===void 0||u.off(we.Restarted,this.onLocalTrackRestarted),this.emit(me.LocalTrackUnpublished,o,this.localParticipant)},this.onLocalTrackRestarted=o=>V(this,void 0,void 0,function*(){const l=yield o.getDeviceId(!1),u=db(o.source);u&&l&&l!==this.localParticipant.activeDeviceMap.get(u)&&(this.log.debug("local track restarted, setting ".concat(u," ").concat(l," active"),this.logContext),this.localParticipant.activeDeviceMap.set(u,l),this.emit(me.ActiveDeviceChanged,u,l))}),this.onLocalConnectionQualityChanged=o=>{this.emit(me.ConnectionQualityChanged,o,this.localParticipant)},this.onMediaDevicesError=(o,l)=>{this.emit(me.MediaDevicesError,o,l)},this.onLocalParticipantPermissionsChanged=o=>{this.emit(me.ParticipantPermissionsChanged,o,this.localParticipant)},this.onLocalChatMessageSent=o=>{this.emit(me.ChatMessage,o,this.localParticipant)},this.setMaxListeners(100),this.remoteParticipants=new Map,this.sidToIdentity=new Map,this.options=Object.assign(Object.assign({},Dne),e),this.log=Ms((r=this.options.loggerName)!==null&&r!==void 0?r:mi.Room),this.transcriptionReceivedTimes=new Map,this.options.audioCaptureDefaults=Object.assign(Object.assign({},iO),e==null?void 0:e.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},sO),e==null?void 0:e.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},Mne),e==null?void 0:e.publishDefaults),this.maybeCreateEngine(),this.incomingDataStreamManager=new ure,this.outgoingDataStreamManager=new fre(this.engine,this.log),this.disconnectLock=new qn,this.localParticipant=new xre("","",this.engine,this.options,this.rpcHandlers,this.outgoingDataStreamManager),(this.options.e2ee||this.options.encryption)&&this.setupE2EE(),this.engine.e2eeManager=this.e2eeManager,this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",Fo(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",Fo(this.options.audioCaptureDefaults.deviceId)),!((i=this.options.audioOutput)===null||i===void 0)&&i.deviceId&&this.switchActiveDevice("audiooutput",Fo(this.options.audioOutput.deviceId)).catch(o=>this.log.warn("Could not set audio output: ".concat(o.message),this.logContext)),sr()){const o=new AbortController;(s=navigator.mediaDevices)===null||s===void 0||s.addEventListener("devicechange",this.handleDeviceChange,{signal:o.signal}),Tc.cleanupRegistry&&Tc.cleanupRegistry.register(this,()=>{o.abort()})}}registerTextStreamHandler(e,n){return this.incomingDataStreamManager.registerTextStreamHandler(e,n)}unregisterTextStreamHandler(e){return this.incomingDataStreamManager.unregisterTextStreamHandler(e)}registerByteStreamHandler(e,n){return this.incomingDataStreamManager.registerByteStreamHandler(e,n)}unregisterByteStreamHandler(e){return this.incomingDataStreamManager.unregisterByteStreamHandler(e)}registerRpcMethod(e,n){if(this.rpcHandlers.has(e))throw Error("RPC handler already registered for method ".concat(e,", unregisterRpcMethod before trying to register again"));this.rpcHandlers.set(e,n)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}setE2EEEnabled(e){return V(this,void 0,void 0,function*(){if(this.e2eeManager)yield Promise.all([this.localParticipant.setE2EEEnabled(e)]),this.localParticipant.identity!==""&&this.e2eeManager.setParticipantCryptorEnabled(e,this.localParticipant.identity);else throw Error("e2ee not configured, please set e2ee settings within the room options")})}setupE2EE(){var e;const n=!!this.options.encryption,r=this.options.encryption||this.options.e2ee;r&&("e2eeManager"in r?(this.e2eeManager=r.e2eeManager,this.e2eeManager.isDataChannelEncryptionEnabled=n):this.e2eeManager=new gne(r,n),this.e2eeManager.on(Ro.ParticipantEncryptionStatusChanged,(i,s)=>{ine(s)&&(this.isE2EEEnabled=i),this.emit(me.ParticipantEncryptionStatusChanged,i,s)}),this.e2eeManager.on(Ro.EncryptionError,(i,s)=>{const o=s?this.getParticipantByIdentity(s):void 0;this.emit(me.EncryptionError,i,o)}),(e=this.e2eeManager)===null||e===void 0||e.setup(this))}get logContext(){var e;return{room:this.name,roomID:(e=this.roomInfo)===null||e===void 0?void 0:e.sid,participant:this.localParticipant.identity,pID:this.localParticipant.sid}}get isRecording(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.activeRecording)!==null&&n!==void 0?n:!1}getSid(){return V(this,void 0,void 0,function*(){return this.state===bt.Disconnected?"":this.roomInfo&&this.roomInfo.sid!==""?this.roomInfo.sid:new Promise((e,n)=>{const r=i=>{i.sid!==""&&(this.engine.off(ke.RoomUpdate,r),e(i.sid))};this.engine.on(ke.RoomUpdate,r),this.once(me.Disconnected,()=>{this.engine.off(ke.RoomUpdate,r),n("Room disconnected before room server id was available")})})})}get name(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.name)!==null&&n!==void 0?n:""}get metadata(){var e;return(e=this.roomInfo)===null||e===void 0?void 0:e.metadata}get numParticipants(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numParticipants)!==null&&n!==void 0?n:0}get numPublishers(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numPublishers)!==null&&n!==void 0?n:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new ore(this.options),this.engine.e2eeManager=this.e2eeManager,this.engine.on(ke.ParticipantUpdate,this.handleParticipantUpdates).on(ke.RoomUpdate,this.handleRoomUpdate).on(ke.SpeakersChanged,this.handleSpeakersChanged).on(ke.StreamStateChanged,this.handleStreamStateUpdate).on(ke.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(ke.SubscriptionError,this.handleSubscriptionError).on(ke.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(ke.MediaTrackAdded,(e,n,r)=>{this.onTrackAdded(e,n,r)}).on(ke.Disconnected,e=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,e)}).on(ke.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(ke.DataPacketReceived,this.handleDataPacket).on(ke.Resuming,()=>{this.clearConnectionReconcile(),this.isResuming=!0,this.log.info("Resuming signal connection",this.logContext),this.setAndEmitConnectionState(bt.SignalReconnecting)&&this.emit(me.SignalReconnecting)}).on(ke.Resumed,()=>{this.registerConnectionReconcile(),this.isResuming=!1,this.log.info("Resumed signal connection",this.logContext),this.updateSubscriptions(),this.emitBufferedEvents(),this.setAndEmitConnectionState(bt.Connected)&&this.emit(me.Reconnected)}).on(ke.SignalResumed,()=>{this.bufferedEvents=[],(this.state===bt.Reconnecting||this.isResuming)&&this.sendSyncState()}).on(ke.Restarting,this.handleRestarting).on(ke.SignalRestarted,this.handleSignalRestarted).on(ke.Offline,()=>{this.setAndEmitConnectionState(bt.Reconnecting)&&this.emit(me.Reconnecting)}).on(ke.DCBufferStatusChanged,(e,n)=>{this.emit(me.DCBufferStatusChanged,e,n)}).on(ke.LocalTrackSubscribed,e=>{const n=this.localParticipant.getTrackPublications().find(r=>{let{trackSid:i}=r;return i===e});if(!n){this.log.warn("could not find local track subscription for subscribed event",this.logContext);return}this.localParticipant.emit(Te.LocalTrackSubscribed,n),this.emitWhenConnected(me.LocalTrackSubscribed,n,this.localParticipant)}).on(ke.RoomMoved,e=>{this.log.debug("room moved",e),e.room&&this.handleRoomUpdate(e.room),this.remoteParticipants.forEach((n,r)=>{this.handleParticipantDisconnected(r,n)}),this.emit(me.Moved,e.room.name),e.participant?this.handleParticipantUpdates([e.participant,...e.otherParticipants]):this.handleParticipantUpdates(e.otherParticipants)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine),this.outgoingDataStreamManager&&this.outgoingDataStreamManager.setupEngine(this.engine))}static getLocalDevices(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return bn.getInstance().getDevices(e,n)}prepareConnection(e,n){return V(this,void 0,void 0,function*(){if(this.state===bt.Disconnected){this.log.debug("prepareConnection to ".concat(e),this.logContext);try{if(Cc(new URL(e))&&n){this.regionUrlProvider=new vt(e,n);const r=yield this.regionUrlProvider.getNextBestRegionUrl();r&&this.state===bt.Disconnected&&(this.regionUrl=r,yield fetch(Ed(r),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(r),this.logContext))}else yield fetch(Ed(e),{method:"HEAD"})}catch(r){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:r}))}}})}getParticipantByIdentity(e){return this.localParticipant.identity===e?this.localParticipant:this.remoteParticipants.get(e)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(e,n){return V(this,void 0,void 0,function*(){let r=()=>V(this,void 0,void 0,function*(){}),i;switch(e){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":i=new Pi({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":i=new Pi({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":i=new Pi({scenario:{case:"serverLeave",value:!0}});break;case"migration":i=new Pi({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":r=()=>V(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),i=new Pi({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":r=()=>V(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),i=new Pi({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":i=new Pi({scenario:{case:"switchCandidateProtocol",value:e==="force-tls"?2:1}}),r=()=>V(this,void 0,void 0,function*(){const s=this.engine.client.onLeave;s&&s(new jm({reason:hi.CLIENT_INITIATED,action:ec.RECONNECT}))});break;case"subscriber-bandwidth":if(n===void 0||typeof n!="number")throw new Error("subscriber-bandwidth requires a number as argument");i=new Pi({scenario:{case:"subscriberBandwidth",value:ka(n)}});break;case"leave-full-reconnect":i=new Pi({scenario:{case:"leaveRequestFullReconnect",value:!0}})}i&&(yield this.engine.client.sendSimulateScenario(i),yield r())})}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveDevice(e){return this.localParticipant.activeDeviceMap.get(e)}switchActiveDevice(e,n){return V(this,arguments,void 0,function(r,i){var s=this;let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return(function*(){var l,u,d,f,m,g,y;let C=!0,x=!1;const k=o?{exact:i}:i;if(r==="audioinput"){x=s.localParticipant.audioTrackPublications.size===0;const T=(l=s.getActiveDevice(r))!==null&&l!==void 0?l:s.options.audioCaptureDefaults.deviceId;s.options.audioCaptureDefaults.deviceId=k;const _=Array.from(s.localParticipant.audioTrackPublications.values()).filter(E=>E.source===ue.Source.Microphone);try{C=(yield Promise.all(_.map(E=>{var I;return(I=E.audioTrack)===null||I===void 0?void 0:I.setDeviceId(k)}))).every(E=>E===!0)}catch(E){throw s.options.audioCaptureDefaults.deviceId=T,E}const P=_.some(E=>{var I,A;return(A=(I=E.track)===null||I===void 0?void 0:I.isMuted)!==null&&A!==void 0?A:!1});C&&P&&(x=!0)}else if(r==="videoinput"){x=s.localParticipant.videoTrackPublications.size===0;const T=(u=s.getActiveDevice(r))!==null&&u!==void 0?u:s.options.videoCaptureDefaults.deviceId;s.options.videoCaptureDefaults.deviceId=k;const _=Array.from(s.localParticipant.videoTrackPublications.values()).filter(E=>E.source===ue.Source.Camera);try{C=(yield Promise.all(_.map(E=>{var I;return(I=E.videoTrack)===null||I===void 0?void 0:I.setDeviceId(k)}))).every(E=>E===!0)}catch(E){throw s.options.videoCaptureDefaults.deviceId=T,E}const P=_.some(E=>{var I,A;return(A=(I=E.track)===null||I===void 0?void 0:I.isMuted)!==null&&A!==void 0?A:!1});C&&P&&(x=!0)}else if(r==="audiooutput"){if(x=!0,!pb()&&!s.options.webAudioMix||s.options.webAudioMix&&s.audioContext&&!("setSinkId"in s.audioContext))throw new Error("cannot switch audio output, the current browser does not support it");s.options.webAudioMix&&(i=(d=yield bn.getInstance().normalizeDeviceId("audiooutput",i))!==null&&d!==void 0?d:""),(f=(y=s.options).audioOutput)!==null&&f!==void 0||(y.audioOutput={});const T=(m=s.getActiveDevice(r))!==null&&m!==void 0?m:s.options.audioOutput.deviceId;s.options.audioOutput.deviceId=i;try{s.options.webAudioMix&&((g=s.audioContext)===null||g===void 0||g.setSinkId(i)),yield Promise.all(Array.from(s.remoteParticipants.values()).map(_=>_.setAudioOutput({deviceId:i})))}catch(_){throw s.options.audioOutput.deviceId=T,_}}return x&&(s.localParticipant.activeDeviceMap.set(r,i),s.emit(me.ActiveDeviceChanged,r,i)),C})()})}setupLocalParticipantEvents(){this.localParticipant.on(Te.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(Te.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(Te.AttributesChanged,this.onLocalAttributesChanged).on(Te.TrackMuted,this.onLocalTrackMuted).on(Te.TrackUnmuted,this.onLocalTrackUnmuted).on(Te.LocalTrackPublished,this.onLocalTrackPublished).on(Te.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(Te.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(Te.MediaDevicesError,this.onMediaDevicesError).on(Te.AudioStreamAcquired,this.startAudio).on(Te.ChatMessage,this.onLocalChatMessageSent).on(Te.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var e;(e=this.engine)===null||e===void 0||e.close(),this.engine=void 0,this.isResuming=!1,this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded(e,n,r){if(this.state===bt.Connecting||this.state===bt.Reconnecting){const m=()=>{this.log.debug("deferring on track for later",{mediaTrackId:e.id,mediaStreamId:n.id,tracksInStream:n.getTracks().map(y=>y.id)}),this.onTrackAdded(e,n,r),g()},g=()=>{this.off(me.Reconnected,m),this.off(me.Connected,m),this.off(me.Disconnected,g)};this.once(me.Reconnected,m),this.once(me.Connected,m),this.once(me.Disconnected,g);return}if(this.state===bt.Disconnected){this.log.warn("skipping incoming track after Room disconnected",this.logContext);return}if(e.readyState==="ended"){this.log.info("skipping incoming track as it already ended",this.logContext);return}const i=$te(n.id),s=i[0];let o=i[1],l=e.id;if(o&&o.startsWith("TR")&&(l=o),s===this.localParticipant.sid){this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);return}const u=Array.from(this.remoteParticipants.values()).find(m=>m.sid===s);if(!u){this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(s),this.logContext);return}if(!l.startsWith("TR")){const m=this.engine.getTrackIdForReceiver(r);if(!m){this.log.error("Tried to add a track whose 'sid' could not be found for a participant, that's not present. Sid: ".concat(s),this.logContext);return}l=m}l.startsWith("TR")||this.log.warn("Tried to add a track whose 'sid' could not be determined for a participant, that's not present. Sid: ".concat(s,", streamId: ").concat(o,", trackId: ").concat(l),Object.assign(Object.assign({},this.logContext),{rpID:s,streamId:o,trackId:l}));let d;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?d=this.options.adaptiveStream:d={});const f=u.addSubscribedMediaTrack(e,l,n,r,d);f!=null&&f.isEncrypted&&!this.e2eeManager&&this.emit(me.EncryptionError,new Error("Encrypted ".concat(f.source," track received from participant ").concat(u.sid,", but room does not have encryption enabled!")))}handleDisconnect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=arguments.length>1?arguments[1]:void 0;var r;if(this.clearConnectionReconcile(),this.isResuming=!1,this.bufferedEvents=[],this.transcriptionReceivedTimes.clear(),this.incomingDataStreamManager.clearControllers(),this.state!==bt.Disconnected){this.regionUrl=void 0,this.regionUrlProvider&&this.regionUrlProvider.notifyDisconnected();try{this.remoteParticipants.forEach(i=>{i.trackPublications.forEach(s=>{i.unpublishTrack(s.trackSid)})}),this.localParticipant.trackPublications.forEach(i=>{var s,o,l;i.track&&this.localParticipant.unpublishTrack(i.track,e),e?((s=i.track)===null||s===void 0||s.detach(),(o=i.track)===null||o===void 0||o.stop()):(l=i.track)===null||l===void 0||l.stopMonitor()}),this.localParticipant.off(Te.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(Te.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(Te.AttributesChanged,this.onLocalAttributesChanged).off(Te.TrackMuted,this.onLocalTrackMuted).off(Te.TrackUnmuted,this.onLocalTrackUnmuted).off(Te.LocalTrackPublished,this.onLocalTrackPublished).off(Te.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(Te.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(Te.MediaDevicesError,this.onMediaDevicesError).off(Te.AudioStreamAcquired,this.startAudio).off(Te.ChatMessage,this.onLocalChatMessageSent).off(Te.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.trackPublications.clear(),this.localParticipant.videoTrackPublications.clear(),this.localParticipant.audioTrackPublications.clear(),this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.webAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),sr()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),(r=navigator.mediaDevices)===null||r===void 0||r.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(bt.Disconnected),this.emit(me.Disconnected,n)}}}handleParticipantDisconnected(e,n){var r;this.remoteParticipants.delete(e),n&&(this.incomingDataStreamManager.validateParticipantHasNoActiveDataStreams(e),n.trackPublications.forEach(i=>{n.unpublishTrack(i.trackSid,!0)}),this.emit(me.ParticipantDisconnected,n),n.setDisconnected(),(r=this.localParticipant)===null||r===void 0||r.handleParticipantDisconnected(n.identity))}handleIncomingRpcRequest(e,n,r,i,s,o){return V(this,void 0,void 0,function*(){if(yield this.engine.publishRpcAck(e,n),o!==1){yield this.engine.publishRpcResponse(e,n,null,Gt.builtIn("UNSUPPORTED_VERSION"));return}const l=this.rpcHandlers.get(r);if(!l){yield this.engine.publishRpcResponse(e,n,null,Gt.builtIn("UNSUPPORTED_METHOD"));return}let u=null,d=null;try{const f=yield l({requestId:n,callerIdentity:e,payload:i,responseTimeout:s});zw(f)>aO?(u=Gt.builtIn("RESPONSE_PAYLOAD_TOO_LARGE"),this.log.warn("RPC Response payload too large for ".concat(r))):d=f}catch(f){f instanceof Gt?u=f:(this.log.warn("Uncaught error returned by RPC handler for ".concat(r,". Returning APPLICATION_ERROR instead."),f),u=Gt.builtIn("APPLICATION_ERROR"))}yield this.engine.publishRpcResponse(e,n,d,u)})}selectDefaultDevices(){return V(this,void 0,void 0,function*(){var e,n,r;const i=bn.getInstance().previousDevices,s=yield bn.getInstance().getDevices(void 0,!1),o=ar();if((o==null?void 0:o.name)==="Chrome"&&o.os!=="iOS")for(let u of s){const d=i.find(f=>f.deviceId===u.deviceId);d&&d.label!==""&&d.kind===u.kind&&d.label!==u.label&&this.getActiveDevice(u.kind)==="default"&&this.emit(me.ActiveDeviceChanged,u.kind,u.deviceId)}const l=["audiooutput","audioinput","videoinput"];for(let u of l){const d=Dte(u),f=this.localParticipant.getTrackPublication(d);if(f&&(!((e=f.track)===null||e===void 0)&&e.isUserProvided))continue;const m=s.filter(y=>y.kind===u),g=this.getActiveDevice(u);if(g===((n=i.filter(y=>y.kind===u)[0])===null||n===void 0?void 0:n.deviceId)&&m.length>0&&((r=m[0])===null||r===void 0?void 0:r.deviceId)!==g){yield this.switchActiveDevice(u,m[0].deviceId);continue}u==="audioinput"&&!Td()||u==="videoinput"||m.length>0&&!m.find(y=>y.deviceId===this.getActiveDevice(u))&&(u!=="audiooutput"||!Td())&&(yield this.switchActiveDevice(u,m[0].deviceId))}})}acquireAudioContext(){return V(this,void 0,void 0,function*(){var e,n;if(typeof this.options.webAudioMix!="boolean"&&this.options.webAudioMix.audioContext?this.audioContext=this.options.webAudioMix.audioContext:(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=(e=Qj())!==null&&e!==void 0?e:void 0),this.options.webAudioMix&&this.remoteParticipants.forEach(i=>i.setAudioContext(this.audioContext)),this.localParticipant.setAudioContext(this.audioContext),this.audioContext&&this.audioContext.state==="suspended")try{yield Promise.race([this.audioContext.resume(),En(200)])}catch(i){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:i}))}const r=((n=this.audioContext)===null||n===void 0?void 0:n.state)==="running";r!==this.canPlaybackAudio&&(this.audioEnabled=r,this.emit(me.AudioPlaybackStatusChanged,r))})}createParticipant(e,n){var r;let i;return n?i=Hp.fromParticipantInfo(this.engine.client,n,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}):i=new Hp(this.engine.client,"",e,void 0,void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.webAudioMix&&i.setAudioContext(this.audioContext),!((r=this.options.audioOutput)===null||r===void 0)&&r.deviceId&&i.setAudioOutput(this.options.audioOutput).catch(s=>this.log.warn("Could not set audio output: ".concat(s.message),this.logContext)),i}getOrCreateParticipant(e,n){if(this.remoteParticipants.has(e)){const i=this.remoteParticipants.get(e);return n&&i.updateInfo(n)&&this.sidToIdentity.set(n.sid,n.identity),i}const r=this.createParticipant(e,n);return this.remoteParticipants.set(e,r),this.sidToIdentity.set(n.sid,n.identity),this.emitWhenConnected(me.ParticipantConnected,r),r.on(Te.TrackPublished,i=>{this.emitWhenConnected(me.TrackPublished,i,r)}).on(Te.TrackSubscribed,(i,s)=>{i.kind===ue.Kind.Audio?(i.on(we.AudioPlaybackStarted,this.handleAudioPlaybackStarted),i.on(we.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):i.kind===ue.Kind.Video&&(i.on(we.VideoPlaybackFailed,this.handleVideoPlaybackFailed),i.on(we.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(me.TrackSubscribed,i,s,r)}).on(Te.TrackUnpublished,i=>{this.emit(me.TrackUnpublished,i,r)}).on(Te.TrackUnsubscribed,(i,s)=>{this.emit(me.TrackUnsubscribed,i,s,r)}).on(Te.TrackMuted,i=>{this.emitWhenConnected(me.TrackMuted,i,r)}).on(Te.TrackUnmuted,i=>{this.emitWhenConnected(me.TrackUnmuted,i,r)}).on(Te.ParticipantMetadataChanged,i=>{this.emitWhenConnected(me.ParticipantMetadataChanged,i,r)}).on(Te.ParticipantNameChanged,i=>{this.emitWhenConnected(me.ParticipantNameChanged,i,r)}).on(Te.AttributesChanged,i=>{this.emitWhenConnected(me.ParticipantAttributesChanged,i,r)}).on(Te.ConnectionQualityChanged,i=>{this.emitWhenConnected(me.ConnectionQualityChanged,i,r)}).on(Te.ParticipantPermissionsChanged,i=>{this.emitWhenConnected(me.ParticipantPermissionsChanged,i,r)}).on(Te.TrackSubscriptionStatusChanged,(i,s)=>{this.emitWhenConnected(me.TrackSubscriptionStatusChanged,i,s,r)}).on(Te.TrackSubscriptionFailed,(i,s)=>{this.emit(me.TrackSubscriptionFailed,i,r,s)}).on(Te.TrackSubscriptionPermissionChanged,(i,s)=>{this.emitWhenConnected(me.TrackSubscriptionPermissionChanged,i,s,r)}).on(Te.Active,()=>{this.emitWhenConnected(me.ParticipantActive,r),r.kind===kd.AGENT&&this.localParticipant.setActiveAgent(r)}),n&&r.updateInfo(n),r}sendSyncState(){const e=Array.from(this.remoteParticipants.values()).reduce((r,i)=>(r.push(...i.getTrackPublications()),r),[]),n=this.localParticipant.getTrackPublications();this.engine.sendSyncState(e,n)}updateSubscriptions(){for(const e of this.remoteParticipants.values())for(const n of e.videoTrackPublications.values())n.isSubscribed&&rne(n)&&n.emitTrackUpdate()}getRemoteParticipantBySid(e){const n=this.sidToIdentity.get(e);if(n)return this.remoteParticipants.get(n)}registerConnectionReconcile(){this.clearConnectionReconcile();let e=0;this.connectionReconcileInterval=Tn.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(e++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:e,engine:this.engine?{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}:void 0})),e>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,hi.STATE_MISMATCH))):e=0},kre)}clearConnectionReconcile(){this.connectionReconcileInterval&&Tn.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(e){return e===this.state?!1:(this.state=e,this.emit(me.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach(e=>{let[n,r]=e;this.emit(n,...r)}),this.bufferedEvents=[]}emitWhenConnected(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(this.state===bt.Reconnecting||this.isResuming||!this.engine||this.engine.pendingReconnect)this.bufferedEvents.push([e,r]);else if(this.state===bt.Connected)return this.emit(e,...r);return!1}simulateParticipants(e){return V(this,void 0,void 0,function*(){var n,r;const i=Object.assign({audio:!0,video:!0,useRealTracks:!1},e.publish),s=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},e.participants);if(this.handleDisconnect(),this.roomInfo=new Am({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:Lt.parse(new Date().getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new Ua({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(me.SignalConnected),this.emit(me.Connected),this.setAndEmitConnectionState(bt.Connected),i.video){const o=new wb(ue.Kind.Video,new zl({source:nn.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:li.AUDIO,name:"video-dummy"}),new Wp(i.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:r_(160*((n=s.aspectRatios[0])!==null&&n!==void 0?n:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(o),this.localParticipant.emit(Te.LocalTrackPublished,o)}if(i.audio){const o=new wb(ue.Kind.Audio,new zl({source:nn.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:li.AUDIO}),new $p(i.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:Fy(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(o),this.localParticipant.emit(Te.LocalTrackPublished,o)}for(let o=0;o<s.count-1;o+=1){let l=new Ua({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(o),state:Zl.ACTIVE,tracks:[],joinedAt:Lt.parse(Date.now())});const u=this.getOrCreateParticipant(l.identity,l);if(s.video){const d=r_(160*((r=s.aspectRatios[o%s.aspectRatios.length])!==null&&r!==void 0?r:1),160,!1,!0),f=new zl({source:nn.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:li.AUDIO});u.addSubscribedMediaTrack(d,f.sid,new MediaStream([d]),new RTCRtpReceiver),l.tracks=[...l.tracks,f]}if(s.audio){const d=Fy(),f=new zl({source:nn.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:li.AUDIO});u.addSubscribedMediaTrack(d,f.sid,new MediaStream([d]),new RTCRtpReceiver),l.tracks=[...l.tracks,f]}u.updateInfo(l)}})}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(e!==me.ActiveSpeakersChanged&&e!==me.TranscriptionReceived){const s=gO(r).filter(o=>o!==void 0);(e===me.TrackSubscribed||e===me.TrackUnsubscribed)&&this.log.trace("subscribe trace: ".concat(e),Object.assign(Object.assign({},this.logContext),{event:e,args:s})),this.log.debug("room event ".concat(e),Object.assign(Object.assign({},this.logContext),{event:e,args:s}))}return super.emit(e,...r)}}Tc.cleanupRegistry=typeof FinalizationRegistry<"u"&&new FinalizationRegistry(t=>{t()});function gO(t){return t.map(e=>{if(e)return Array.isArray(e)?gO(e):typeof e=="object"?"logContext"in e?e.logContext:void 0:e})}var oi;(function(t){t[t.IDLE=0]="IDLE",t[t.RUNNING=1]="RUNNING",t[t.SKIPPED=2]="SKIPPED",t[t.SUCCESS=3]="SUCCESS",t[t.FAILED=4]="FAILED"})(oi||(oi={}));class ea extends Zi.EventEmitter{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=oi.IDLE,this.logs=[],this.options={},this.url=e,this.token=n,this.name=this.constructor.name,this.room=new Tc(r.roomOptions),this.connectOptions=r.connectOptions,this.options=r}run(e){return V(this,void 0,void 0,function*(){if(this.status!==oi.IDLE)throw Error("check is running already");this.setStatus(oi.RUNNING);try{yield this.perform()}catch(n){n instanceof Error&&(this.options.errorsAsWarnings?this.appendWarning(n.message):this.appendError(n.message))}return yield this.disconnect(),yield new Promise(n=>setTimeout(n,500)),this.status!==oi.SKIPPED&&this.setStatus(this.isSuccess()?oi.SUCCESS:oi.FAILED),e&&e(),this.getInfo()})}isSuccess(){return!this.logs.some(e=>e.level==="error")}connect(e){return V(this,void 0,void 0,function*(){return this.room.state===bt.Connected?this.room:(e||(e=this.url),yield this.room.connect(e,this.token,this.connectOptions),this.room)})}disconnect(){return V(this,void 0,void 0,function*(){this.room&&this.room.state!==bt.Disconnected&&(yield this.room.disconnect(),yield new Promise(e=>setTimeout(e,500)))})}skip(){this.setStatus(oi.SKIPPED)}switchProtocol(e){return V(this,void 0,void 0,function*(){let n=!1,r=!1;if(this.room.on(me.Reconnecting,()=>{n=!0}),this.room.once(me.Reconnected,()=>{r=!0}),this.room.simulateScenario("force-".concat(e)),yield new Promise(s=>setTimeout(s,1e3)),!n)return;const i=Date.now()+1e4;for(;Date.now()<i;){if(r)return;yield En(100)}throw new Error("Could not reconnect using ".concat(e," protocol after 10 seconds"))})}appendMessage(e){this.logs.push({level:"info",message:e}),this.emit("update",this.getInfo())}appendWarning(e){this.logs.push({level:"warning",message:e}),this.emit("update",this.getInfo())}appendError(e){this.logs.push({level:"error",message:e}),this.emit("update",this.getInfo())}setStatus(e){this.status=e,this.emit("update",this.getInfo())}get engine(){var e;return(e=this.room)===null||e===void 0?void 0:e.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}class Sre extends ea{get description(){return"Cloud regions"}perform(){return V(this,void 0,void 0,function*(){const e=new vt(this.url,this.token);if(!e.isCloud()){this.skip();return}const n=[],r=new Set;for(let s=0;s<3;s++){const o=yield e.getNextBestRegionUrl();if(!o)break;if(r.has(o))continue;r.add(o);const l=yield this.checkCloudRegion(o);this.appendMessage("".concat(l.region," RTT: ").concat(l.rtt,"ms, duration: ").concat(l.duration,"ms")),n.push(l)}n.sort((s,o)=>(s.duration-o.duration)*.5+(s.rtt-o.rtt)*.5);const i=n[0];this.bestStats=i,this.appendMessage("best Cloud region: ".concat(i.region))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkCloudRegion(e){return V(this,void 0,void 0,function*(){var n,r;yield this.connect(e),this.options.protocol==="tcp"&&(yield this.switchProtocol("tcp"));const i=(n=this.room.serverInfo)===null||n===void 0?void 0:n.region;if(!i)throw new Error("Region not found");const s=yield this.room.localParticipant.streamText({topic:"test"}),o=1e3,u=1e6/o,d="A".repeat(o),f=Date.now();for(let C=0;C<u;C++)yield s.write(d);yield s.close();const m=Date.now(),g=yield(r=this.room.engine.pcManager)===null||r===void 0?void 0:r.publisher.getStats(),y={region:i,rtt:1e4,duration:m-f};return g==null||g.forEach(C=>{C.type==="candidate-pair"&&C.nominated&&(y.rtt=C.currentRoundTripTime*1e3)}),yield this.disconnect(),y})}}const Gy=1e4;class Cre extends ea{get description(){return"Connection via UDP vs TCP"}perform(){return V(this,void 0,void 0,function*(){const e=yield this.checkConnectionProtocol("udp"),n=yield this.checkConnectionProtocol("tcp");this.bestStats=e,e.qualityLimitationDurations.bandwidth-n.qualityLimitationDurations.bandwidth>.5||(e.packetsLost-n.packetsLost)/e.packetsSent>.01?(this.appendMessage("best connection quality via tcp"),this.bestStats=n):this.appendMessage("best connection quality via udp");const r=this.bestStats;this.appendMessage("upstream bitrate: ".concat((r.bitrateTotal/r.count/1e3/1e3).toFixed(2)," mbps")),this.appendMessage("RTT: ".concat((r.rttTotal/r.count*1e3).toFixed(2)," ms")),this.appendMessage("jitter: ".concat((r.jitterTotal/r.count*1e3).toFixed(2)," ms")),r.packetsLost>0&&this.appendWarning("packets lost: ".concat((r.packetsLost/r.packetsSent*100).toFixed(2),"%")),r.qualityLimitationDurations.bandwidth>1&&this.appendWarning("bandwidth limited ".concat((r.qualityLimitationDurations.bandwidth/(Gy/1e3)*100).toFixed(2),"%")),r.qualityLimitationDurations.cpu>0&&this.appendWarning("cpu limited ".concat((r.qualityLimitationDurations.cpu/(Gy/1e3)*100).toFixed(2),"%"))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkConnectionProtocol(e){return V(this,void 0,void 0,function*(){yield this.connect(),e==="tcp"?yield this.switchProtocol("tcp"):yield this.switchProtocol("udp");const n=document.createElement("canvas");n.width=1280,n.height=720;const r=n.getContext("2d");if(!r)throw new Error("Could not get canvas context");let i=0;const s=()=>{i=(i+1)%360,r.fillStyle="hsl(".concat(i,", 100%, 50%)"),r.fillRect(0,0,n.width,n.height),requestAnimationFrame(s)};s();const l=n.captureStream(30).getVideoTracks()[0],d=(yield this.room.localParticipant.publishTrack(l,{simulcast:!1,degradationPreference:"maintain-resolution",videoEncoding:{maxBitrate:2e6}})).track,f={protocol:e,packetsLost:0,packetsSent:0,qualityLimitationDurations:{},rttTotal:0,jitterTotal:0,bitrateTotal:0,count:0},m=setInterval(()=>V(this,void 0,void 0,function*(){const g=yield d.getRTCStatsReport();g==null||g.forEach(y=>{y.type==="outbound-rtp"?(f.packetsSent=y.packetsSent,f.qualityLimitationDurations=y.qualityLimitationDurations,f.bitrateTotal+=y.targetBitrate,f.count++):y.type==="remote-inbound-rtp"&&(f.packetsLost=y.packetsLost,f.rttTotal+=y.roundTripTime,f.jitterTotal+=y.jitter)})}),1e3);return yield new Promise(g=>setTimeout(g,Gy)),clearInterval(m),l.stop(),n.remove(),yield this.disconnect(),f})}}class Tre extends ea{get description(){return"Can publish audio"}perform(){return V(this,void 0,void 0,function*(){var e;const n=yield this.connect(),r=yield pO();if(yield Jj(r,1e3))throw new Error("unable to detect audio from microphone");this.appendMessage("detected audio from microphone"),n.localParticipant.publishTrack(r),yield new Promise(l=>setTimeout(l,3e3));const s=yield(e=r.sender)===null||e===void 0?void 0:e.getStats();if(!s)throw new Error("Could not get RTCStats");let o=0;if(s.forEach(l=>{l.type==="outbound-rtp"&&(l.kind==="audio"||!l.kind&&l.mediaType==="audio")&&(o=l.packetsSent)}),o===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(o," audio packets"))})}}class Ere extends ea{get description(){return"Can publish video"}perform(){return V(this,void 0,void 0,function*(){var e;const n=yield this.connect(),r=yield vre();yield this.checkForVideo(r.mediaStreamTrack),n.localParticipant.publishTrack(r),yield new Promise(o=>setTimeout(o,5e3));const i=yield(e=r.sender)===null||e===void 0?void 0:e.getStats();if(!i)throw new Error("Could not get RTCStats");let s=0;if(i.forEach(o=>{o.type==="outbound-rtp"&&(o.kind==="video"||!o.kind&&o.mediaType==="video")&&(s+=o.packetsSent)}),s===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(s," video packets"))})}checkForVideo(e){return V(this,void 0,void 0,function*(){const n=new MediaStream;n.addTrack(e.clone());const r=document.createElement("video");r.srcObject=n,r.muted=!0,r.autoplay=!0,r.playsInline=!0,r.setAttribute("playsinline","true"),document.body.appendChild(r),yield new Promise(i=>{r.onplay=()=>{setTimeout(()=>{var s,o,l,u;const d=document.createElement("canvas"),f=e.getSettings(),m=(o=(s=f.width)!==null&&s!==void 0?s:r.videoWidth)!==null&&o!==void 0?o:1280,g=(u=(l=f.height)!==null&&l!==void 0?l:r.videoHeight)!==null&&u!==void 0?u:720;d.width=m,d.height=g;const y=d.getContext("2d");y.drawImage(r,0,0);const x=y.getImageData(0,0,d.width,d.height).data;let k=!0;for(let T=0;T<x.length;T+=4)if(x[T]!==0||x[T+1]!==0||x[T+2]!==0){k=!1;break}k?this.appendError("camera appears to be producing only black frames"):this.appendMessage("received video frames"),i()},1e3)},r.play()}),n.getTracks().forEach(i=>i.stop()),r.remove()})}}class Pre extends ea{get description(){return"Resuming connection after interruption"}perform(){return V(this,void 0,void 0,function*(){var e;const n=yield this.connect();let r=!1,i=!1,s;const o=new Promise(d=>{setTimeout(d,5e3),s=d}),l=()=>{r=!0};n.on(me.SignalReconnecting,l).on(me.Reconnecting,l).on(me.Reconnected,()=>{i=!0,s(!0)}),(e=n.engine.client.ws)===null||e===void 0||e.close();const u=n.engine.client.onClose;if(u&&u(""),yield o,r){if(!i||n.state!==bt.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class _re extends ea{get description(){return"Can connect via TURN"}perform(){return V(this,void 0,void 0,function*(){var e,n,r;Cc(new URL(this.url))&&(this.appendMessage("Using region specific url"),this.url=(e=yield new vt(this.url,this.token).getNextBestRegionUrl())!==null&&e!==void 0?e:this.url);const i=new Lw,s=yield i.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3,singlePeerConnection:!1});let o=!1,l=!1,u=!1;for(let d of s.iceServers)for(let f of d.urls)f.startsWith("turn:")?(l=!0,u=!0):f.startsWith("turns:")&&(l=!0,u=!0,o=!0),f.startsWith("stun:")&&(u=!0);u?l&&!o&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield i.close(),!((r=(n=this.connectOptions)===null||n===void 0?void 0:n.rtcConfig)===null||r===void 0)&&r.iceServers||l?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(d=>setTimeout(d,0)))})}}class Ire extends ea{get description(){return"Establishing WebRTC connection"}perform(){return V(this,void 0,void 0,function*(){let e=!1,n=!1;this.room.on(me.SignalConnected,()=>{var r;const i=this.room.engine.client.onTrickle;this.room.engine.client.onTrickle=(s,o)=>{if(s.candidate){const l=new RTCIceCandidate(s);let u="".concat(l.protocol," ").concat(l.address,":").concat(l.port," ").concat(l.type);l.address&&(Nre(l.address)?u+=" (private)":l.protocol==="tcp"&&l.tcpType==="passive"?(e=!0,u+=" (passive)"):l.protocol==="udp"&&(n=!0)),this.appendMessage(u)}i&&i(s,o)},!((r=this.room.engine.pcManager)===null||r===void 0)&&r.subscriber&&(this.room.engine.pcManager.subscriber.onIceCandidateError=s=>{s instanceof RTCPeerConnectionIceErrorEvent&&this.appendWarning("error with ICE candidate: ".concat(s.errorCode," ").concat(s.errorText," ").concat(s.url))})});try{yield this.connect(),nt.info("now the room is connected")}catch(r){throw this.appendWarning("ports need to be open on firewall in order to connect."),r}e||this.appendWarning("Server is not configured for ICE/TCP"),n||this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly")})}}function Nre(t){const e=t.split(".");if(e.length===4){if(e[0]==="10")return!0;if(e[0]==="192"&&e[1]==="168")return!0;if(e[0]==="172"){const n=parseInt(e[1],10);if(n>=16&&n<=31)return!0}}return!1}class Are extends ea{get description(){return"Connecting to signal connection via WebSocket"}perform(){return V(this,void 0,void 0,function*(){var e,n,r;(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let i=new Lw,s;try{s=yield i.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3,singlePeerConnection:!1})}catch(o){if(Cc(new URL(this.url))){this.appendMessage("Initial connection failed with error ".concat(o.message,". Retrying with region fallback"));const u=yield new vt(this.url,this.token).getNextBestRegionUrl();u&&(s=yield i.join(u,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3,singlePeerConnection:!1}),this.appendMessage("Fallback to region worked. To avoid initial connections failing, ensure you're calling room.prepareConnection() ahead of time"))}}s?(this.appendMessage("Connected to server, version ".concat(s.serverVersion,".")),((e=s.serverInfo)===null||e===void 0?void 0:e.edition)===ej.Cloud&&(!((n=s.serverInfo)===null||n===void 0)&&n.region)&&this.appendMessage("LiveKit Cloud: ".concat((r=s.serverInfo)===null||r===void 0?void 0:r.region))):this.appendError("Websocket connection could not be established"),yield i.close()})}}class _le extends Zi.EventEmitter{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.options={},this.checkResults=new Map,this.url=e,this.token=n,this.options=r}getNextCheckId(){const e=this.checkResults.size;return this.checkResults.set(e,{logs:[],status:oi.IDLE,name:"",description:""}),e}updateCheck(e,n){this.checkResults.set(e,n),this.emit("checkUpdate",e,n)}isSuccess(){return Array.from(this.checkResults.values()).every(e=>e.status!==oi.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck(e){return V(this,void 0,void 0,function*(){const n=this.getNextCheckId(),r=new e(this.url,this.token,this.options),i=o=>{this.updateCheck(n,o)};r.on("update",i);const s=yield r.run();return r.off("update",i),s})}checkWebsocket(){return V(this,void 0,void 0,function*(){return this.createAndRunCheck(Are)})}checkWebRTC(){return V(this,void 0,void 0,function*(){return this.createAndRunCheck(Ire)})}checkTURN(){return V(this,void 0,void 0,function*(){return this.createAndRunCheck(_re)})}checkReconnect(){return V(this,void 0,void 0,function*(){return this.createAndRunCheck(Pre)})}checkPublishAudio(){return V(this,void 0,void 0,function*(){return this.createAndRunCheck(Tre)})}checkPublishVideo(){return V(this,void 0,void 0,function*(){return this.createAndRunCheck(Ere)})}checkConnectionProtocol(){return V(this,void 0,void 0,function*(){const e=yield this.createAndRunCheck(Cre);if(e.data&&"protocol"in e.data){const n=e.data;this.options.protocol=n.protocol}return e})}checkCloudRegion(){return V(this,void 0,void 0,function*(){return this.createAndRunCheck(Sre)})}}function ht(t,e,n){return(e=Mre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mre(t){var e=Rre(t,"string");return typeof e=="symbol"?e:e+""}new TextEncoder;new TextDecoder;class Kn extends Error{constructor(e,n){var r;super(e,n),ht(this,"code","ERR_JOSE_GENERIC"),this.name=this.constructor.name,(r=Error.captureStackTrace)===null||r===void 0||r.call(Error,this,this.constructor)}}ht(Kn,"code","ERR_JOSE_GENERIC");class Dre extends Kn{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"unspecified",i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unspecified";super(e,{cause:{claim:r,reason:i,payload:n}}),ht(this,"code","ERR_JWT_CLAIM_VALIDATION_FAILED"),ht(this,"claim",void 0),ht(this,"reason",void 0),ht(this,"payload",void 0),this.claim=r,this.reason=i,this.payload=n}}ht(Dre,"code","ERR_JWT_CLAIM_VALIDATION_FAILED");class jre extends Kn{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"unspecified",i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unspecified";super(e,{cause:{claim:r,reason:i,payload:n}}),ht(this,"code","ERR_JWT_EXPIRED"),ht(this,"claim",void 0),ht(this,"reason",void 0),ht(this,"payload",void 0),this.claim=r,this.reason=i,this.payload=n}}ht(jre,"code","ERR_JWT_EXPIRED");class Ore extends Kn{constructor(){super(...arguments),ht(this,"code","ERR_JOSE_ALG_NOT_ALLOWED")}}ht(Ore,"code","ERR_JOSE_ALG_NOT_ALLOWED");class Lre extends Kn{constructor(){super(...arguments),ht(this,"code","ERR_JOSE_NOT_SUPPORTED")}}ht(Lre,"code","ERR_JOSE_NOT_SUPPORTED");class Fre extends Kn{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"decryption operation failed",n=arguments.length>1?arguments[1]:void 0;super(e,n),ht(this,"code","ERR_JWE_DECRYPTION_FAILED")}}ht(Fre,"code","ERR_JWE_DECRYPTION_FAILED");class Ure extends Kn{constructor(){super(...arguments),ht(this,"code","ERR_JWE_INVALID")}}ht(Ure,"code","ERR_JWE_INVALID");class Bre extends Kn{constructor(){super(...arguments),ht(this,"code","ERR_JWS_INVALID")}}ht(Bre,"code","ERR_JWS_INVALID");class Vre extends Kn{constructor(){super(...arguments),ht(this,"code","ERR_JWT_INVALID")}}ht(Vre,"code","ERR_JWT_INVALID");class zre extends Kn{constructor(){super(...arguments),ht(this,"code","ERR_JWK_INVALID")}}ht(zre,"code","ERR_JWK_INVALID");class $re extends Kn{constructor(){super(...arguments),ht(this,"code","ERR_JWKS_INVALID")}}ht($re,"code","ERR_JWKS_INVALID");class Wre extends Kn{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"no applicable key found in the JSON Web Key Set",n=arguments.length>1?arguments[1]:void 0;super(e,n),ht(this,"code","ERR_JWKS_NO_MATCHING_KEY")}}ht(Wre,"code","ERR_JWKS_NO_MATCHING_KEY");class Hre extends Kn{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"multiple matching keys found in the JSON Web Key Set",n=arguments.length>1?arguments[1]:void 0;super(e,n),ht(this,Symbol.asyncIterator,void 0),ht(this,"code","ERR_JWKS_MULTIPLE_MATCHING_KEYS")}}ht(Hre,"code","ERR_JWKS_MULTIPLE_MATCHING_KEYS");class qre extends Kn{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"request timed out",n=arguments.length>1?arguments[1]:void 0;super(e,n),ht(this,"code","ERR_JWKS_TIMEOUT")}}ht(qre,"code","ERR_JWKS_TIMEOUT");class Gre extends Kn{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"signature verification failed",n=arguments.length>1?arguments[1]:void 0;super(e,n),ht(this,"code","ERR_JWS_SIGNATURE_VERIFICATION_FAILED")}}ht(Gre,"code","ERR_JWS_SIGNATURE_VERIFICATION_FAILED");function ks(){return ks=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ks.apply(null,arguments)}const P_=new Uint8Array(0);class Pd{static getFullOptions(e){return ks({clientTools:{},onConnect:()=>{},onDebug:()=>{},onDisconnect:()=>{},onError:()=>{},onMessage:()=>{},onAudio:()=>{},onModeChange:()=>{},onStatusChange:()=>{},onCanSendFeedbackChange:()=>{},onInterruption:()=>{}},e)}constructor(e,n){var r=this;this.options=void 0,this.connection=void 0,this.lastInterruptTimestamp=0,this.mode="listening",this.status="connecting",this.volume=1,this.currentEventId=1,this.lastFeedbackEventId=0,this.canSendFeedback=!1,this.endSessionWithDetails=async function(i){r.status!=="connected"&&r.status!=="connecting"||(r.updateStatus("disconnecting"),await r.handleEndSession(),r.updateStatus("disconnected"),r.options.onDisconnect&&r.options.onDisconnect(i))},this.onMessage=async function(i){switch(i.type){case"interruption":return void r.handleInterruption(i);case"agent_response":return void r.handleAgentResponse(i);case"user_transcript":return void r.handleUserTranscript(i);case"internal_tentative_agent_response":return void r.handleTentativeAgentResponse(i);case"client_tool_call":try{await r.handleClientToolCall(i)}catch(s){r.onError(`Unexpected error in client tool call handling: ${s instanceof Error?s.message:String(s)}`,{clientToolName:i.client_tool_call.tool_name,toolCallId:i.client_tool_call.tool_call_id})}return;case"audio":return void r.handleAudio(i);case"vad_score":return void r.handleVadScore(i);case"ping":return void r.connection.sendMessage({type:"pong",event_id:i.ping_event.event_id});case"mcp_tool_call":return void r.handleMCPToolCall(i);case"mcp_connection_status":return void r.handleMCPConnectionStatus(i);case"agent_tool_request":return void r.handleAgentToolRequest(i);case"agent_tool_response":return void r.handleAgentToolResponse(i);case"conversation_initiation_metadata":return void r.handleConversationMetadata(i);case"asr_initiation_metadata":return void r.handleAsrInitiationMetadata(i);case"agent_chat_response_part":return void r.handleAgentChatResponsePart(i);case"error":return void r.handleErrorEvent(i);default:return void(r.options.onDebug&&r.options.onDebug(i))}},this.setVolume=({volume:i})=>{this.volume=i},this.options=e,this.connection=n,this.options.onConnect&&this.options.onConnect({conversationId:n.conversationId}),this.connection.onMessage(this.onMessage),this.connection.onDisconnect(this.endSessionWithDetails),this.connection.onModeChange(i=>this.updateMode(i)),this.updateStatus("connected")}endSession(){return this.endSessionWithDetails({reason:"user"})}async handleEndSession(){this.connection.close()}updateMode(e){e!==this.mode&&(this.mode=e,this.options.onModeChange&&this.options.onModeChange({mode:e}))}updateStatus(e){e!==this.status&&(this.status=e,this.options.onStatusChange&&this.options.onStatusChange({status:e}))}updateCanSendFeedback(){const e=this.currentEventId!==this.lastFeedbackEventId;this.canSendFeedback!==e&&(this.canSendFeedback=e,this.options.onCanSendFeedbackChange&&this.options.onCanSendFeedbackChange({canSendFeedback:e}))}handleInterruption(e){e.interruption_event&&(this.lastInterruptTimestamp=e.interruption_event.event_id,this.options.onInterruption&&this.options.onInterruption({event_id:e.interruption_event.event_id}))}handleAgentResponse(e){this.options.onMessage&&this.options.onMessage({source:"ai",role:"agent",message:e.agent_response_event.agent_response})}handleUserTranscript(e){this.options.onMessage&&this.options.onMessage({source:"user",role:"user",message:e.user_transcription_event.user_transcript})}handleTentativeAgentResponse(e){this.options.onDebug&&this.options.onDebug({type:"tentative_agent_response",response:e.tentative_agent_response_internal_event.tentative_agent_response})}handleVadScore(e){this.options.onVadScore&&this.options.onVadScore({vadScore:e.vad_score_event.vad_score})}async handleClientToolCall(e){if(Object.prototype.hasOwnProperty.call(this.options.clientTools,e.client_tool_call.tool_name))try{var n;const r=(n=await this.options.clientTools[e.client_tool_call.tool_name](e.client_tool_call.parameters))!=null?n:"Client tool execution successful.",i=typeof r=="object"?JSON.stringify(r):String(r);this.connection.sendMessage({type:"client_tool_result",tool_call_id:e.client_tool_call.tool_call_id,result:i,is_error:!1})}catch(r){this.onError(`Client tool execution failed with following error: ${r==null?void 0:r.message}`,{clientToolName:e.client_tool_call.tool_name}),this.connection.sendMessage({type:"client_tool_result",tool_call_id:e.client_tool_call.tool_call_id,result:`Client tool execution failed: ${r==null?void 0:r.message}`,is_error:!0})}else{if(this.options.onUnhandledClientToolCall)return void this.options.onUnhandledClientToolCall(e.client_tool_call);this.onError(`Client tool with name ${e.client_tool_call.tool_name} is not defined on client`,{clientToolName:e.client_tool_call.tool_name}),this.connection.sendMessage({type:"client_tool_result",tool_call_id:e.client_tool_call.tool_call_id,result:`Client tool with name ${e.client_tool_call.tool_name} is not defined on client`,is_error:!0})}}handleAudio(e){}handleMCPToolCall(e){this.options.onMCPToolCall&&this.options.onMCPToolCall(e.mcp_tool_call)}handleMCPConnectionStatus(e){this.options.onMCPConnectionStatus&&this.options.onMCPConnectionStatus(e.mcp_connection_status)}handleAgentToolRequest(e){this.options.onAgentToolRequest&&this.options.onAgentToolRequest(e.agent_tool_request)}handleAgentToolResponse(e){e.agent_tool_response.tool_name==="end_call"&&this.endSessionWithDetails({reason:"agent",context:new CloseEvent("end_call",{reason:"Agent ended the call"})}),this.options.onAgentToolResponse&&this.options.onAgentToolResponse(e.agent_tool_response)}handleConversationMetadata(e){this.options.onConversationMetadata&&this.options.onConversationMetadata(e.conversation_initiation_metadata_event)}handleAsrInitiationMetadata(e){this.options.onAsrInitiationMetadata&&this.options.onAsrInitiationMetadata(e.asr_initiation_metadata_event)}handleAgentChatResponsePart(e){this.options.onAgentChatResponsePart&&this.options.onAgentChatResponsePart(e.text_response_part)}handleErrorEvent(e){const n=e.error_event.error_type,r=e.error_event.message||e.error_event.reason||"Unknown error";n!=="max_duration_exceeded"?this.onError(`Server error: ${r}`,{errorType:n,code:e.error_event.code,debugMessage:e.error_event.debug_message,details:e.error_event.details}):this.endSessionWithDetails({reason:"error",message:r,context:new Event("max_duration_exceeded")})}onError(e,n){console.error(e,n),this.options.onError&&this.options.onError(e,n)}getId(){return this.connection.conversationId}isOpen(){return this.status==="connected"}setMicMuted(e){this.connection.setMicMuted(e)}getInputByteFrequencyData(){return P_}getOutputByteFrequencyData(){return P_}getInputVolume(){return 0}getOutputVolume(){return 0}sendFeedback(e){this.canSendFeedback?(this.connection.sendMessage({type:"feedback",score:e?"like":"dislike",event_id:this.currentEventId}),this.lastFeedbackEventId=this.currentEventId,this.updateCanSendFeedback()):console.warn(this.lastFeedbackEventId===0?"Cannot send feedback: the conversation has not started yet.":"Cannot send feedback: feedback has already been sent for the current response.")}sendContextualUpdate(e){this.connection.sendMessage({type:"contextual_update",text:e})}sendUserMessage(e){this.connection.sendMessage({type:"user_message",text:e})}sendUserActivity(){this.connection.sendMessage({type:"user_activity"})}sendMCPToolApprovalResult(e,n){this.connection.sendMessage({type:"mcp_tool_approval_result",tool_call_id:e,is_approved:n})}}let vO=class{constructor(e={}){this.queue=[],this.disconnectionDetails=null,this.onDisconnectCallback=null,this.onMessageCallback=null,this.onModeChangeCallback=null,this.onDebug=void 0,this.onDebug=e.onDebug}debug(e){this.onDebug&&this.onDebug(e)}onMessage(e){this.onMessageCallback=e;const n=this.queue;this.queue=[],n.length>0&&queueMicrotask(()=>{n.forEach(e)})}onDisconnect(e){this.onDisconnectCallback=e;const n=this.disconnectionDetails;n&&queueMicrotask(()=>{e(n)})}onModeChange(e){this.onModeChangeCallback=e}updateMode(e){var n;(n=this.onModeChangeCallback)==null||n.call(this,e)}disconnect(e){var n;this.disconnectionDetails||(this.disconnectionDetails=e,(n=this.onDisconnectCallback)==null||n.call(this,e))}handleMessage(e){this.onMessageCallback?this.onMessageCallback(e):this.queue.push(e)}};function qp(t){const[e,n]=t.split("_");if(!["pcm","ulaw"].includes(e))throw new Error(`Invalid format: ${t}`);const r=Number.parseInt(n);if(Number.isNaN(r))throw new Error(`Invalid sample rate: ${n}`);return{format:e,sampleRate:r}}const yO="0.12.2";function kb(t){return!!t.type}const bO="conversation_initiation_client_data";function xO(t){var e;const n={type:bO};var r,i,s,o,l,u;return t.overrides&&(n.conversation_config_override={agent:{prompt:(r=t.overrides.agent)==null?void 0:r.prompt,first_message:(i=t.overrides.agent)==null?void 0:i.firstMessage,language:(s=t.overrides.agent)==null?void 0:s.language},tts:{voice_id:(o=t.overrides.tts)==null?void 0:o.voiceId,speed:(l=t.overrides.tts)==null?void 0:l.speed},conversation:{text_only:(u=t.overrides.conversation)==null?void 0:u.textOnly}}),t.customLlmExtraBody&&(n.custom_llm_extra_body=t.customLlmExtraBody),t.dynamicVariables&&(n.dynamic_variables=t.dynamicVariables),t.userId&&(n.user_id=t.userId),(e=t.overrides)!=null&&e.client&&(n.source_info={source:t.overrides.client.source,version:t.overrides.client.version}),n}let Sb=class wO extends vO{constructor(e,n,r,i){super(),this.socket=void 0,this.conversationId=void 0,this.inputFormat=void 0,this.outputFormat=void 0,this.socket=e,this.conversationId=n,this.inputFormat=r,this.outputFormat=i,this.socket.addEventListener("error",s=>{setTimeout(()=>this.disconnect({reason:"error",message:"The connection was closed due to a socket error.",context:s}),0)}),this.socket.addEventListener("close",s=>{this.disconnect(s.code===1e3?{reason:"agent",context:s}:{reason:"error",message:s.reason||"The connection was closed by the server.",context:s})}),this.socket.addEventListener("message",s=>{try{const o=JSON.parse(s.data);if(!kb(o))return void this.debug({type:"invalid_event",message:"Received invalid socket event",data:s.data});this.handleMessage(o)}catch(o){this.debug({type:"parsing_error",message:"Failed to parse socket message",error:o instanceof Error?o.message:String(o),data:s.data})}})}static async create(e){let n=null;try{var r,i,s;const l=(r=e.origin)!=null?r:"wss://api.elevenlabs.io";let u;const d=((i=e.overrides)==null||(i=i.client)==null?void 0:i.version)||yO,f=((s=e.overrides)==null||(s=s.client)==null?void 0:s.source)||"js_sdk";if(e.signedUrl){const _=e.signedUrl.includes("?")?"&":"?";u=`${e.signedUrl}${_}source=${f}&version=${d}`}else u=`${l}/v1/convai/conversation?agent_id=${e.agentId}&source=${f}&version=${d}`;const m=["convai"];e.authorization&&m.push(`bearer.${e.authorization}`),n=new WebSocket(u,m);const g=await new Promise((_,P)=>{n.addEventListener("open",()=>{var E;const I=xO(e);(E=n)==null||E.send(JSON.stringify(I))},{once:!0}),n.addEventListener("error",E=>{setTimeout(()=>P(E),0)}),n.addEventListener("close",P),n.addEventListener("message",E=>{const I=JSON.parse(E.data);kb(I)&&(I.type==="conversation_initiation_metadata"?_(I.conversation_initiation_metadata_event):console.warn("First received message is not conversation metadata."))},{once:!0})}),{conversation_id:y,agent_output_audio_format:C,user_input_audio_format:x}=g,k=qp(x??"pcm_16000"),T=qp(C);return new wO(n,y,k,T)}catch(l){var o;throw(o=n)==null||o.close(),l}}close(){this.socket.close(1e3,"User ended conversation")}sendMessage(e){this.socket.send(JSON.stringify(e))}async setMicMuted(e){console.warn(`WebSocket connection setMicMuted called with ${e}, but this is handled by VoiceConversation`)}};function kO(t){const e=new Uint8Array(t);return window.btoa(String.fromCharCode(...e))}function Kre(t){const e=window.atob(t),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.charCodeAt(i);return r.buffer}const Df=new Map;function SO(t,e){return async(n,r)=>{const i=Df.get(t);if(i)return n.addModule(i);if(r)try{return await n.addModule(r),void Df.set(t,r)}catch(l){throw new Error(`Failed to load the ${t} worklet module from path: ${r}. Error: ${l}`)}const s=new Blob([e],{type:"application/javascript"}),o=URL.createObjectURL(s);try{return await n.addModule(o),void Df.set(t,o)}catch{URL.revokeObjectURL(o)}try{const l=`data:application/javascript;base64,${btoa(e)}`;await n.addModule(l),Df.set(t,l)}catch{throw new Error(`Failed to load the ${t} worklet module. Make sure the browser supports AudioWorklets. If you are using a strict CSP, you may need to self-host the worklet files.`)}}}const CO=SO("rawAudioProcessor",`/*
 * ulaw encoding logic taken from the wavefile library
 * https://github.com/rochars/wavefile/blob/master/lib/codecs/mulaw.js
 * USED BY @elevenlabs/client
 */

const BIAS = 0x84;
const CLIP = 32635;
const encodeTable = [
  0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,
  4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,
  5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,
  5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,
  6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
  6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
  6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
  6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7
];

function encodeSample(sample) {
  let sign;
  let exponent;
  let mantissa;
  let muLawSample;
  sign = (sample >> 8) & 0x80;
  if (sign !== 0) sample = -sample;
  sample = sample + BIAS;
  if (sample > CLIP) sample = CLIP;
  exponent = encodeTable[(sample>>7) & 0xFF];
  mantissa = (sample >> (exponent+3)) & 0x0F;
  muLawSample = ~(sign | (exponent << 4) | mantissa);
  
  return muLawSample;
}

class RawAudioProcessor extends AudioWorkletProcessor {
  constructor() {
    super();
              
    this.port.onmessage = ({ data }) => {
      switch (data.type) {
        case "setFormat":
          this.isMuted = false;
          this.buffer = []; // Initialize an empty buffer
          this.bufferSize = data.sampleRate / 4;
          this.format = data.format;

          if (globalThis.LibSampleRate && sampleRate !== data.sampleRate) {
            globalThis.LibSampleRate.create(1, sampleRate, data.sampleRate).then(resampler => {
              this.resampler = resampler;
            });
          }
          break;
        case "setMuted":
          this.isMuted = data.isMuted;
          break;
      }
    };
  }
  process(inputs) {
    if (!this.buffer) {
      return true;
    }
    
    const input = inputs[0]; // Get the first input node
    if (input.length > 0) {
      let channelData = input[0]; // Get the first channel's data

      // Resample the audio if necessary
      if (this.resampler) {
        channelData = this.resampler.full(channelData);
      }

      // Add channel data to the buffer
      this.buffer.push(...channelData);
      // Get max volume 
      let sum = 0.0;
      for (let i = 0; i < channelData.length; i++) {
        sum += channelData[i] * channelData[i];
      }
      const maxVolume = Math.sqrt(sum / channelData.length);
      // Check if buffer size has reached or exceeded the threshold
      if (this.buffer.length >= this.bufferSize) {
        const float32Array = this.isMuted 
          ? new Float32Array(this.buffer.length)
          : new Float32Array(this.buffer);

        let encodedArray = this.format === "ulaw"
          ? new Uint8Array(float32Array.length)
          : new Int16Array(float32Array.length);

        // Iterate through the Float32Array and convert each sample to PCM16
        for (let i = 0; i < float32Array.length; i++) {
          // Clamp the value to the range [-1, 1]
          let sample = Math.max(-1, Math.min(1, float32Array[i]));

          // Scale the sample to the range [-32768, 32767]
          let value = sample < 0 ? sample * 32768 : sample * 32767;
          if (this.format === "ulaw") {
            value = encodeSample(Math.round(value));
          }

          encodedArray[i] = value;
        }

        // Send the buffered data to the main script
        this.port.postMessage([encodedArray, maxVolume]);

        // Clear the buffer after sending
        this.buffer = [];
      }
    }
    return true; // Continue processing
  }
}
registerProcessor("rawAudioProcessor", RawAudioProcessor);
`);class ps extends vO{constructor(e,n,r,i,s={}){super(s),this.conversationId=void 0,this.inputFormat=void 0,this.outputFormat=void 0,this.room=void 0,this.isConnected=!1,this.audioEventId=1,this.audioCaptureContext=null,this.audioElements=[],this.outputDeviceId=null,this.outputAnalyser=null,this.outputFrequencyData=null,this.room=e,this.conversationId=n,this.inputFormat=r,this.outputFormat=i,this.setupRoomEventListeners()}static async create(e){let n;if("conversationToken"in e&&e.conversationToken)n=e.conversationToken;else{if(!("agentId"in e)||!e.agentId)throw new Error("Either conversationToken or agentId is required for WebRTC connection");try{var r,i,s;const d=((r=e.overrides)==null||(r=r.client)==null?void 0:r.version)||yO,f=((i=e.overrides)==null||(i=i.client)==null?void 0:i.source)||"js_sdk",m=`${o=(s=e.origin)!=null?s:"https://api.elevenlabs.io",o.replace(/^wss:\/\//,"https://")}/v1/convai/conversation/token?agent_id=${e.agentId}&source=${f}&version=${d}`,g=await fetch(m);if(!g.ok)throw new Error(`ElevenLabs API returned ${g.status} ${g.statusText}`);if(n=(await g.json()).token,!n)throw new Error("No conversation token received from API")}catch(d){let f=d instanceof Error?d.message:String(d);throw d instanceof Error&&d.message.includes("401")&&(f="Your agent has authentication enabled, but no signed URL or conversation token was provided."),new Error(`Failed to fetch conversation token for agent ${e.agentId}: ${f}`)}}var o;const l=new Tc;try{const d=`room_${Date.now()}`,f=qp("pcm_48000"),m=qp("pcm_48000"),g=new ps(l,d,f,m,e),y=e.livekitUrl||"wss://livekit.rtc.elevenlabs.io";var u;await l.connect(y,n),await new Promise(x=>{if(g.isConnected)x();else{const k=()=>{l.off(me.Connected,k),x()};l.on(me.Connected,k)}}),l.name&&(g.conversationId=((u=l.name.match(/(conv_[a-zA-Z0-9]+)/))==null?void 0:u[0])||l.name),await l.localParticipant.setMicrophoneEnabled(!0);const C=xO(e);return g.debug({type:bO,message:C}),await g.sendMessage(C),g}catch(d){throw await l.disconnect(),d}}setupRoomEventListeners(){var e=this;this.room.on(me.Connected,async function(){e.isConnected=!0,console.info("WebRTC room connected")}),this.room.on(me.Disconnected,n=>{this.isConnected=!1,this.disconnect({reason:"agent",context:new CloseEvent("close",{reason:n==null?void 0:n.toString()})})}),this.room.on(me.ConnectionStateChanged,n=>{n===bt.Disconnected&&(this.isConnected=!1,this.disconnect({reason:"error",message:`LiveKit connection state changed to ${n}`,context:new Event("connection_state_changed")}))}),this.room.on(me.DataReceived,(n,r)=>{try{const i=JSON.parse(new TextDecoder().decode(n));if(i.type==="audio")return;kb(i)?this.handleMessage(i):console.warn("Invalid socket event received:",i)}catch(i){console.warn("Failed to parse incoming data message:",i),console.warn("Raw payload:",new TextDecoder().decode(n))}}),this.room.on(me.TrackSubscribed,async function(n,r,i){if(n.kind===ue.Kind.Audio&&i.identity.includes("agent")){const s=n,o=s.attach();if(o.autoplay=!0,o.controls=!1,e.outputDeviceId&&o.setSinkId)try{await o.setSinkId(e.outputDeviceId)}catch(l){console.warn("Failed to set output device for new audio element:",l)}o.style.display="none",document.body.appendChild(o),e.audioElements.push(o),e.audioElements.length===1&&(e.onDebug==null||e.onDebug({type:"audio_element_ready"})),await e.setupAudioCapture(s)}}),this.room.on(me.ActiveSpeakersChanged,async function(n){e.updateMode(n.length>0&&n[0].identity.startsWith("agent")?"speaking":"listening")}),this.room.on(me.ParticipantDisconnected,n=>{var r;(r=n.identity)!=null&&r.startsWith("agent")&&this.disconnect({reason:"agent",context:new CloseEvent("close",{reason:"agent disconnected"})})})}close(){if(this.isConnected){try{this.room.localParticipant.audioTrackPublications.forEach(e=>{e.track&&e.track.stop()})}catch(e){console.warn("Error stopping local tracks:",e)}this.audioCaptureContext&&(this.audioCaptureContext.close().catch(e=>{console.warn("Error closing audio capture context:",e)}),this.audioCaptureContext=null),this.audioElements.forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)}),this.audioElements=[],this.room.disconnect()}}async sendMessage(e){if(this.isConnected&&this.room.localParticipant){if(!("user_audio_chunk"in e))try{const n=new TextEncoder().encode(JSON.stringify(e));await this.room.localParticipant.publishData(n,{reliable:!0})}catch(n){this.debug({type:"send_message_error",message:{message:e,error:n}}),console.error("Failed to send message via WebRTC:",n)}}else console.warn("Cannot send message: room not connected or no local participant")}getRoom(){return this.room}async setMicMuted(e){if(!this.isConnected||!this.room.localParticipant)return void console.warn("Cannot set microphone muted: room not connected or no local participant");const n=this.room.localParticipant.getTrackPublication(ue.Source.Microphone);if(n!=null&&n.track)try{e?await n.track.mute():await n.track.unmute()}catch{await this.room.localParticipant.setMicrophoneEnabled(!e)}else await this.room.localParticipant.setMicrophoneEnabled(!e)}async setupAudioCapture(e){try{const n=new AudioContext;this.audioCaptureContext=n,this.outputAnalyser=n.createAnalyser(),this.outputAnalyser.fftSize=2048,this.outputAnalyser.smoothingTimeConstant=.8;const r=new MediaStream([e.mediaStreamTrack]),i=n.createMediaStreamSource(r);i.connect(this.outputAnalyser),await CO(n.audioWorklet);const s=new AudioWorkletNode(n,"rawAudioProcessor");this.outputAnalyser.connect(s),s.port.postMessage({type:"setFormat",format:this.outputFormat.format,sampleRate:this.outputFormat.sampleRate}),s.port.onmessage=o=>{const[l,u]=o.data;if(u>.01){const d=kO(l.buffer),f=this.audioEventId++;this.handleMessage({type:"audio",audio_event:{audio_base_64:d,event_id:f}})}},i.connect(s)}catch(n){console.warn("Failed to set up audio capture:",n)}}setAudioVolume(e){this.audioElements.forEach(n=>{n.volume=e})}async setAudioOutputDevice(e){if(!("setSinkId"in HTMLAudioElement.prototype))throw new Error("setSinkId is not supported in this browser");const n=this.audioElements.map(async function(r){try{await r.setSinkId(e)}catch(i){throw console.error("Failed to set sink ID for audio element:",i),i}});await Promise.all(n),this.outputDeviceId=e}async setAudioInputDevice(e){if(!this.isConnected||!this.room.localParticipant)throw new Error("Cannot change input device: room not connected or no local participant");try{const n=this.room.localParticipant.getTrackPublication(ue.Source.Microphone);n!=null&&n.track&&(await n.track.stop(),await this.room.localParticipant.unpublishTrack(n.track));const r={deviceId:{exact:e},echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,channelCount:{ideal:1}},i=await pO(r);await this.room.localParticipant.publishTrack(i,{name:"microphone",source:ue.Source.Microphone})}catch(n){console.error("Failed to change input device:",n);try{await this.room.localParticipant.setMicrophoneEnabled(!0)}catch(r){console.error("Failed to recover microphone after device switch error:",r)}throw n}}getOutputByteFrequencyData(){return this.outputAnalyser?(this.outputFrequencyData!=null||(this.outputFrequencyData=new Uint8Array(this.outputAnalyser.frequencyBinCount)),this.outputAnalyser.getByteFrequencyData(this.outputFrequencyData),this.outputFrequencyData):null}}async function TO(t){const e=(function(n){return n.connectionType?n.connectionType:"conversationToken"in n&&n.conversationToken?"webrtc":"websocket"})(t);switch(e){case"websocket":return Sb.create(t);case"webrtc":return ps.create(t);default:throw new Error(`Unknown connection type: ${e}`)}}function Cb(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}async function EO(t={default:0,android:3e3}){let e=t.default;var n;if(/android/i.test(navigator.userAgent))e=(n=t.android)!=null?n:e;else if(Cb()){var r;e=(r=t.ios)!=null?r:e}e>0&&await new Promise(i=>setTimeout(i,e))}class Hw extends Pd{static async startSession(e){const n=Pd.getFullOptions(e);n.onStatusChange&&n.onStatusChange({status:"connecting"}),n.onCanSendFeedbackChange&&n.onCanSendFeedbackChange({canSendFeedback:!1}),n.onModeChange&&n.onModeChange({mode:"listening"}),n.onCanSendFeedbackChange&&n.onCanSendFeedbackChange({canSendFeedback:!1});let r=null;try{return await EO(n.connectionDelay),r=await TO(e),new Hw(n,r)}catch(s){var i;throw n.onStatusChange&&n.onStatusChange({status:"disconnected"}),(i=r)==null||i.close(),s}}}const __={echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,channelCount:{ideal:1}};class oc{static async create({sampleRate:e,format:n,preferHeadphonesForIosDevices:r,inputDeviceId:i,workletPaths:s,libsampleratePath:o}){let l=null,u=null;try{const m=ks({sampleRate:{ideal:e}},__);if(Cb()&&r){const T=(await window.navigator.mediaDevices.enumerateDevices()).find(_=>_.kind==="audioinput"&&["airpod","headphone","earphone"].find(P=>_.label.toLowerCase().includes(P)));T&&(m.deviceId={ideal:T.deviceId})}i&&(m.deviceId=oc.getDeviceIdConstraint(i));const g=navigator.mediaDevices.getSupportedConstraints().sampleRate;l=new window.AudioContext(g?{sampleRate:e}:{});const y=l.createAnalyser();if(!g){const T=o||"https://cdn.jsdelivr.net/npm/@alexanderolsen/libsamplerate-js@2.1.2/dist/libsamplerate.worklet.js";await l.audioWorklet.addModule(T)}await CO(l.audioWorklet,s==null?void 0:s.rawAudioProcessor);const C=ks({voiceIsolation:!0},m);u=await navigator.mediaDevices.getUserMedia({audio:C});const x=l.createMediaStreamSource(u),k=new AudioWorkletNode(l,"rawAudioProcessor");return k.port.postMessage({type:"setFormat",format:n,sampleRate:e}),x.connect(y),y.connect(k),await l.resume(),new oc(l,y,k,u,x)}catch(m){var d,f;throw(d=u)==null||d.getTracks().forEach(g=>{g.stop()}),(f=l)==null||f.close(),m}}static getDeviceIdConstraint(e){if(e)return Cb()?{ideal:e}:{exact:e}}constructor(e,n,r,i,s){this.context=void 0,this.analyser=void 0,this.worklet=void 0,this.inputStream=void 0,this.mediaStreamSource=void 0,this.context=e,this.analyser=n,this.worklet=r,this.inputStream=i,this.mediaStreamSource=s}async close(){this.inputStream.getTracks().forEach(e=>{e.stop()}),this.mediaStreamSource.disconnect(),await this.context.close()}setMuted(e){this.worklet.port.postMessage({type:"setMuted",isMuted:e})}async setInputDevice(e){try{const n=ks({},__);e&&(n.deviceId=oc.getDeviceIdConstraint(e));const r=ks({voiceIsolation:!0},n),i=await navigator.mediaDevices.getUserMedia({audio:r});this.inputStream.getTracks().forEach(s=>{s.stop()}),this.mediaStreamSource.disconnect(),this.inputStream=i,this.mediaStreamSource=this.context.createMediaStreamSource(i),this.mediaStreamSource.connect(this.analyser)}catch(n){throw console.error("Failed to switch input device:",n),n}}}const Yre=SO("audioConcatProcessor",`/*
 * ulaw decoding logic taken from the wavefile library
 * https://github.com/rochars/wavefile/blob/master/lib/codecs/mulaw.js
 * USED BY @elevenlabs/client
 */

const decodeTable = [0,132,396,924,1980,4092,8316,16764];

function decodeSample(muLawSample) {
  let sign;
  let exponent;
  let mantissa;
  let sample;
  muLawSample = ~muLawSample;
  sign = (muLawSample & 0x80);
  exponent = (muLawSample >> 4) & 0x07;
  mantissa = muLawSample & 0x0F;
  sample = decodeTable[exponent] + (mantissa << (exponent+3));
  if (sign !== 0) sample = -sample;

  return sample;
}

class AudioConcatProcessor extends AudioWorkletProcessor {
  constructor() {
    super();
    this.buffers = []; // Initialize an empty buffer
    this.cursor = 0;
    this.currentBuffer = null;
    this.wasInterrupted = false;
    this.finished = false;
    
    this.port.onmessage = ({ data }) => {
      switch (data.type) {
        case "setFormat":
          this.format = data.format;
          break;
        case "buffer":
          this.wasInterrupted = false;
          this.buffers.push(
            this.format === "ulaw"
              ? new Uint8Array(data.buffer)
              : new Int16Array(data.buffer)
          );
          break;
        case "interrupt":
          this.wasInterrupted = true;
          break;
        case "clearInterrupted":
          if (this.wasInterrupted) {
            this.wasInterrupted = false;
            this.buffers = [];
            this.currentBuffer = null;
          }
      }
    };
  }
  process(_, outputs) {
    let finished = false;
    const output = outputs[0][0];
    for (let i = 0; i < output.length; i++) {
      if (!this.currentBuffer) {
        if (this.buffers.length === 0) {
          finished = true;
          break;
        }
        this.currentBuffer = this.buffers.shift();
        this.cursor = 0;
      }

      let value = this.currentBuffer[this.cursor];
      if (this.format === "ulaw") {
        value = decodeSample(value);
      }
      output[i] = value / 32768;
      this.cursor++;

      if (this.cursor >= this.currentBuffer.length) {
        this.currentBuffer = null;
      }
    }

    if (this.finished !== finished) {
      this.finished = finished;
      this.port.postMessage({ type: "process", finished });
    }

    return true; // Continue processing
  }
}

registerProcessor("audioConcatProcessor", AudioConcatProcessor);
`);class Gp{static async create({sampleRate:e,format:n,outputDeviceId:r,workletPaths:i}){let s=null,o=null;try{s=new AudioContext({sampleRate:e});const d=s.createAnalyser(),f=s.createGain();o=new Audio,o.src="",o.load(),o.autoplay=!0,o.style.display="none",document.body.appendChild(o);const m=s.createMediaStreamDestination();o.srcObject=m.stream,f.connect(d),d.connect(m),await Yre(s.audioWorklet,i==null?void 0:i.audioConcatProcessor);const g=new AudioWorkletNode(s,"audioConcatProcessor");return g.port.postMessage({type:"setFormat",format:n}),g.connect(f),await s.resume(),r&&o.setSinkId&&await o.setSinkId(r),new Gp(s,d,f,g,o)}catch(d){var l,u;throw(l=o)!=null&&l.parentNode&&o.parentNode.removeChild(o),(u=o)==null||u.pause(),s&&s.state!=="closed"&&await s.close(),d}}constructor(e,n,r,i,s){this.context=void 0,this.analyser=void 0,this.gain=void 0,this.worklet=void 0,this.audioElement=void 0,this.context=e,this.analyser=n,this.gain=r,this.worklet=i,this.audioElement=s}async setOutputDevice(e){if(!("setSinkId"in HTMLAudioElement.prototype))throw new Error("setSinkId is not supported in this browser");await this.audioElement.setSinkId(e||"")}async close(){this.audioElement.parentNode&&this.audioElement.parentNode.removeChild(this.audioElement),this.audioElement.pause(),await this.context.close()}}class qw extends Pd{static async startSession(e){var n;const r=Pd.getFullOptions(e);r.onStatusChange&&r.onStatusChange({status:"connecting"}),r.onCanSendFeedbackChange&&r.onCanSendFeedbackChange({canSendFeedback:!1});let i=null,s=null,o=null,l=null,u=null;if((n=e.useWakeLock)==null||n)try{u=await navigator.wakeLock.request("screen")}catch{}try{var d;return l=await navigator.mediaDevices.getUserMedia({audio:!0}),await EO(r.connectionDelay),s=await TO(e),[i,o]=await Promise.all([oc.create(ks({},s.inputFormat,{preferHeadphonesForIosDevices:e.preferHeadphonesForIosDevices,inputDeviceId:e.inputDeviceId,workletPaths:e.workletPaths,libsampleratePath:e.libsampleratePath})),Gp.create(ks({},s.outputFormat,{outputDeviceId:e.outputDeviceId,workletPaths:e.workletPaths}))]),(d=l)==null||d.getTracks().forEach(x=>{x.stop()}),l=null,new qw(r,s,i,o,u)}catch(x){var f,m,g,y;r.onStatusChange&&r.onStatusChange({status:"disconnected"}),(f=l)==null||f.getTracks().forEach(k=>{k.stop()}),(m=s)==null||m.close(),await((g=i)==null?void 0:g.close()),await((y=o)==null?void 0:y.close());try{var C;await((C=u)==null?void 0:C.release()),u=null}catch{}throw x}}constructor(e,n,r,i,s){super(e,n),this.input=void 0,this.output=void 0,this.wakeLock=void 0,this.inputFrequencyData=void 0,this.outputFrequencyData=void 0,this.onInputWorkletMessage=o=>{this.status==="connected"&&this.connection.sendMessage({user_audio_chunk:kO(o.data[0].buffer)})},this.onOutputWorkletMessage=({data:o})=>{o.type==="process"&&this.updateMode(o.finished?"listening":"speaking")},this.addAudioBase64Chunk=o=>{this.output.gain.gain.cancelScheduledValues(this.output.context.currentTime),this.output.gain.gain.value=this.volume,this.output.worklet.port.postMessage({type:"clearInterrupted"}),this.output.worklet.port.postMessage({type:"buffer",buffer:Kre(o)})},this.fadeOutAudio=()=>{this.updateMode("listening"),this.output.worklet.port.postMessage({type:"interrupt"}),this.output.gain.gain.exponentialRampToValueAtTime(1e-4,this.output.context.currentTime+2),setTimeout(()=>{this.output.gain.gain.value=this.volume,this.output.worklet.port.postMessage({type:"clearInterrupted"})},2e3)},this.calculateVolume=o=>{if(o.length===0)return 0;let l=0;for(let u=0;u<o.length;u++)l+=o[u]/255;return l/=o.length,l<0?0:l>1?1:l},this.setVolume=({volume:o})=>{const l=Number.isFinite(o)?Math.min(1,Math.max(0,o)):1;this.volume=l,this.connection instanceof ps?this.connection.setAudioVolume(l):this.output.gain.gain.value=l},this.input=r,this.output=i,this.wakeLock=s,this.input.worklet.port.onmessage=this.onInputWorkletMessage,this.output.worklet.port.onmessage=this.onOutputWorkletMessage}async handleEndSession(){await super.handleEndSession();try{var e;await((e=this.wakeLock)==null?void 0:e.release()),this.wakeLock=null}catch{}await this.input.close(),await this.output.close()}handleInterruption(e){super.handleInterruption(e),this.fadeOutAudio()}handleAudio(e){var n,r;this.lastInterruptTimestamp<=e.audio_event.event_id&&((n=(r=this.options).onAudio)==null||n.call(r,e.audio_event.audio_base_64),this.connection instanceof ps||this.addAudioBase64Chunk(e.audio_event.audio_base_64),this.currentEventId=e.audio_event.event_id,this.updateCanSendFeedback(),this.updateMode("speaking"))}setMicMuted(e){this.connection instanceof ps?this.connection.setMicMuted(e):this.input.setMuted(e)}getInputByteFrequencyData(){return this.inputFrequencyData!=null||(this.inputFrequencyData=new Uint8Array(this.input.analyser.frequencyBinCount)),this.input.analyser.getByteFrequencyData(this.inputFrequencyData),this.inputFrequencyData}getOutputByteFrequencyData(){return this.connection instanceof ps?this.connection.getOutputByteFrequencyData()||new Uint8Array(1024):(this.outputFrequencyData!=null||(this.outputFrequencyData=new Uint8Array(this.output.analyser.frequencyBinCount)),this.output.analyser.getByteFrequencyData(this.outputFrequencyData),this.outputFrequencyData)}getInputVolume(){return this.calculateVolume(this.getInputByteFrequencyData())}getOutputVolume(){return this.calculateVolume(this.getOutputByteFrequencyData())}async changeInputDevice({sampleRate:e,format:n,preferHeadphonesForIosDevices:r,inputDeviceId:i}){try{if(this.connection instanceof Sb)try{return await this.input.setInputDevice(i),this.input}catch(o){console.warn("Failed to change device on existing input, recreating:",o)}this.connection instanceof ps&&await this.connection.setAudioInputDevice(i||""),await this.input.close();const s=await oc.create({sampleRate:e??this.connection.inputFormat.sampleRate,format:n??this.connection.inputFormat.format,preferHeadphonesForIosDevices:r,inputDeviceId:i,workletPaths:this.options.workletPaths,libsampleratePath:this.options.libsampleratePath});return this.input=s,this.input.worklet.port.onmessage=this.onInputWorkletMessage,this.input}catch(s){throw console.error("Error changing input device",s),s}}async changeOutputDevice({sampleRate:e,format:n,outputDeviceId:r}){try{if(this.connection instanceof Sb)try{return await this.output.setOutputDevice(r),this.output}catch(s){console.warn("Failed to change device on existing output, recreating:",s)}this.connection instanceof ps&&await this.connection.setAudioOutputDevice(r||""),await this.output.close();const i=await Gp.create({sampleRate:e??this.connection.outputFormat.sampleRate,format:n??this.connection.outputFormat.format,outputDeviceId:r,workletPaths:this.options.workletPaths});return this.output=i,this.output}catch(i){throw console.error("Error changing output device",i),i}}}var I_;(function(t){t.SESSION_STARTED="session_started",t.PARTIAL_TRANSCRIPT="partial_transcript",t.COMMITTED_TRANSCRIPT="committed_transcript",t.COMMITTED_TRANSCRIPT_WITH_TIMESTAMPS="committed_transcript_with_timestamps",t.AUTH_ERROR="auth_error",t.ERROR="error",t.OPEN="open",t.CLOSE="close",t.QUOTA_EXCEEDED="quota_exceeded",t.COMMIT_THROTTLED="commit_throttled",t.TRANSCRIBER_ERROR="transcriber_error",t.UNACCEPTED_TERMS="unaccepted_terms",t.RATE_LIMITED="rate_limited",t.INPUT_ERROR="input_error",t.QUEUE_OVERFLOW="queue_overflow",t.RESOURCE_EXHAUSTED="resource_exhausted",t.SESSION_TIME_LIMIT_EXCEEDED="session_time_limit_exceeded",t.CHUNK_SIZE_EXCEEDED="chunk_size_exceeded",t.INSUFFICIENT_AUDIO_ACTIVITY="insufficient_audio_activity"})(I_||(I_={}));var N_,A_;(function(t){t.PCM_8000="pcm_8000",t.PCM_16000="pcm_16000",t.PCM_22050="pcm_22050",t.PCM_24000="pcm_24000",t.PCM_44100="pcm_44100",t.PCM_48000="pcm_48000",t.ULAW_8000="ulaw_8000"})(N_||(N_={})),(function(t){t.MANUAL="manual",t.VAD="vad"})(A_||(A_={}));class Jre extends Pd{static startSession(e){return e.textOnly?Hw.startSession(e):qw.startSession(e)}}function ad(){return ad=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ad.apply(null,arguments)}const Qre=["micMuted","volume","serverLocation"];function Xre(t="us"){switch(t){case"eu-residency":case"in-residency":case"us":case"global":return t;default:return console.warn(`[ConversationalAI] Invalid server-location: ${t}. Defaulting to "us"`),"us"}}function Zre(t){return{us:"wss://api.elevenlabs.io","eu-residency":"wss://api.eu.residency.elevenlabs.io","in-residency":"wss://api.in.residency.elevenlabs.io",global:"wss://api.elevenlabs.io"}[t]}function eie(t){return{us:"wss://livekit.rtc.elevenlabs.io","eu-residency":"wss://livekit.rtc.eu.residency.elevenlabs.io","in-residency":"wss://livekit.rtc.in.residency.elevenlabs.io",global:"wss://livekit.rtc.elevenlabs.io"}[t]}function tie(t={}){const{micMuted:e,volume:n,serverLocation:r}=t,i=(function(k,T){if(k==null)return{};var _={};for(var P in k)if({}.hasOwnProperty.call(k,P)){if(T.indexOf(P)!==-1)continue;_[P]=k[P]}return _})(t,Qre),s=w.useRef(null),o=w.useRef(null),l=w.useRef(!1),[u,d]=w.useState("disconnected"),[f,m]=w.useState(!1),[g,y]=w.useState("listening"),C=w.useRef(e),x=w.useRef(n);return C.current=e,x.current=n,w.useEffect(()=>{var k;e!==void 0&&(s==null||(k=s.current)==null||k.setMicMuted(e))},[e]),w.useEffect(()=>{var k;n!==void 0&&(s==null||(k=s.current)==null||k.setVolume({volume:n}))},[n]),w.useEffect(()=>()=>{var k;l.current=!0,o.current?o.current.then(T=>T.endSession()):(k=s.current)==null||k.endSession()},[]),{startSession:async k=>{var T;if((T=s.current)!=null&&T.isOpen())return s.current.getId();if(o.current)return(await o.current).getId();l.current=!1;try{var _,P,E,I,A,L,R,j,U,z;const F=Xre((k==null?void 0:k.serverLocation)||r),W=Zre(F),Y=eie(F);if(o.current=Jre.startSession(ad({},i??{},k??{},{origin:W,livekitUrl:(k==null?void 0:k.livekitUrl)||(i==null?void 0:i.livekitUrl)||Y,overrides:ad({},(_=i==null?void 0:i.overrides)!=null?_:{},(P=k==null?void 0:k.overrides)!=null?P:{},{client:ad({},(E=i==null||(I=i.overrides)==null?void 0:I.client)!=null?E:{},(A=k==null||(L=k.overrides)==null?void 0:L.client)!=null?A:{},{source:(k==null||(R=k.overrides)==null||(R=R.client)==null?void 0:R.source)||(i==null||(j=i.overrides)==null||(j=j.client)==null?void 0:j.source)||"react_sdk",version:(k==null||(U=k.overrides)==null||(U=U.client)==null?void 0:U.version)||(i==null||(z=i.overrides)==null||(z=z.client)==null?void 0:z.version)||"0.12.3"})}),onConnect:(k==null?void 0:k.onConnect)||(i==null?void 0:i.onConnect),onDisconnect:(k==null?void 0:k.onDisconnect)||(i==null?void 0:i.onDisconnect),onError:(k==null?void 0:k.onError)||(i==null?void 0:i.onError),onMessage:(k==null?void 0:k.onMessage)||(i==null?void 0:i.onMessage),onAudio:(k==null?void 0:k.onAudio)||(i==null?void 0:i.onAudio),onDebug:(k==null?void 0:k.onDebug)||(i==null?void 0:i.onDebug),onUnhandledClientToolCall:(k==null?void 0:k.onUnhandledClientToolCall)||(i==null?void 0:i.onUnhandledClientToolCall),onVadScore:(k==null?void 0:k.onVadScore)||(i==null?void 0:i.onVadScore),onInterruption:(k==null?void 0:k.onInterruption)||(i==null?void 0:i.onInterruption),onAgentToolRequest:(k==null?void 0:k.onAgentToolRequest)||(i==null?void 0:i.onAgentToolRequest),onAgentToolResponse:(k==null?void 0:k.onAgentToolResponse)||(i==null?void 0:i.onAgentToolResponse),onConversationMetadata:(k==null?void 0:k.onConversationMetadata)||(i==null?void 0:i.onConversationMetadata),onMCPToolCall:(k==null?void 0:k.onMCPToolCall)||(i==null?void 0:i.onMCPToolCall),onMCPConnectionStatus:(k==null?void 0:k.onMCPConnectionStatus)||(i==null?void 0:i.onMCPConnectionStatus),onAsrInitiationMetadata:(k==null?void 0:k.onAsrInitiationMetadata)||(i==null?void 0:i.onAsrInitiationMetadata),onAgentChatResponsePart:(k==null?void 0:k.onAgentChatResponsePart)||(i==null?void 0:i.onAgentChatResponsePart),onModeChange:({mode:K})=>{var X;y(K),(X=(k==null?void 0:k.onModeChange)||(i==null?void 0:i.onModeChange))==null||X({mode:K})},onStatusChange:({status:K})=>{var X;d(K),(X=(k==null?void 0:k.onStatusChange)||(i==null?void 0:i.onStatusChange))==null||X({status:K})},onCanSendFeedbackChange:({canSendFeedback:K})=>{var X;m(K),(X=(k==null?void 0:k.onCanSendFeedbackChange)||(i==null?void 0:i.onCanSendFeedbackChange))==null||X({canSendFeedback:K})}})),s.current=await o.current,l.current)throw await s.current.endSession(),s.current=null,o.current=null,new Error("Session cancelled during connection");return C.current!==void 0&&s.current.setMicMuted(C.current),x.current!==void 0&&s.current.setVolume({volume:x.current}),s.current.getId()}finally{o.current=null}},endSession:async()=>{l.current=!0;const k=o.current,T=s.current;s.current=null,k?await(await k).endSession():await(T==null?void 0:T.endSession())},setVolume:({volume:k})=>{var T;(T=s.current)==null||T.setVolume({volume:k})},getInputByteFrequencyData:()=>{var k;return(k=s.current)==null?void 0:k.getInputByteFrequencyData()},getOutputByteFrequencyData:()=>{var k;return(k=s.current)==null?void 0:k.getOutputByteFrequencyData()},getInputVolume:()=>{var k,T;return(k=(T=s.current)==null?void 0:T.getInputVolume())!=null?k:0},getOutputVolume:()=>{var k,T;return(k=(T=s.current)==null?void 0:T.getOutputVolume())!=null?k:0},sendFeedback:k=>{var T;(T=s.current)==null||T.sendFeedback(k)},getId:()=>{var k;return(k=s.current)==null?void 0:k.getId()},sendContextualUpdate:k=>{var T;(T=s.current)==null||T.sendContextualUpdate(k)},sendUserMessage:k=>{var T;(T=s.current)==null||T.sendUserMessage(k)},sendUserActivity:()=>{var k;(k=s.current)==null||k.sendUserActivity()},sendMCPToolApprovalResult:(k,T)=>{var _;(_=s.current)==null||_.sendMCPToolApprovalResult(k,T)},changeInputDevice:async k=>{if(s.current&&"changeInputDevice"in s.current)return await s.current.changeInputDevice(k);throw new Error("Device switching is only available for voice conversations")},changeOutputDevice:async k=>{if(s.current&&"changeOutputDevice"in s.current)return await s.current.changeOutputDevice(k);throw new Error("Device switching is only available for voice conversations")},status:u,canSendFeedback:f,micMuted:e,isSpeaking:g==="speaking"}}function nie({submissionId:t,userId:e,interviewStatus:n,onInterviewStatusChange:r,token:i}){const[s,o]=w.useState(null),[l,u]=w.useState(null),[d,f]=w.useState(!1),[m,g]=w.useState(null),[y,C]=w.useState([]),[x,k]=w.useState(!1),T=w.useRef(null),_="agent_6401kd1h9k5ne9g9r90h5hwthc4v",P=w.useMemo(()=>{if(s)return{agent:{prompt:{prompt:s},firstMessage:"Hey  I'm going to ask you a few questions about your submission. Ready?"}}},[s]),E=w.useRef(P);w.useEffect(()=>{E.current=P},[P]),w.useEffect(()=>{T.current&&T.current.scrollIntoView({behavior:"smooth"})},[y]);const I=tie({overrides:P,onConnect:()=>{u(null)},onDisconnect:()=>{g(null)},onError:j=>{const U=j&&typeof j=="object"&&j.message||(j?String(j):"An error occurred with the voice interview");u(U)},onMessage:j=>{if(!j||typeof j!="object")return;const U=j.type||"",z=j.text||j.content||j.message||j.data||"";if(z&&z.trim()){let F="candidate";const W=(U||"").toLowerCase(),Y=(j.role||"").toString().toLowerCase(),K=(j.speaker||"").toString().toLowerCase(),X=(j.from||"").toString().toLowerCase(),se=(j.source||"").toString().toLowerCase();W==="llm_response"||W==="agent_response"||W==="agent_speech"||W==="assistant"||W==="agent"||W==="system"||Y==="assistant"||Y==="agent"||Y==="system"||K==="agent"||K==="assistant"||K==="system"||X==="agent"||X==="assistant"||se==="agent"||se==="assistant"?F="interviewer":(W==="transcript"||W==="user_transcript"||W==="user"||W==="user_speech"||Y==="user"||K==="user"||X==="user")&&(F="candidate");const D=z.trim();if(C($=>[...$,{role:F,text:D,timestamp:new Date}]),F==="interviewer"){const $=["completes our interview","completes the interview","completes this interview","covers all the questions","that's all the questions","thank you for your time","thank you for participating","interview is complete","interview is finished","we're done","we are done"],re=D.toLowerCase();$.some(ve=>re.includes(ve))&&!x&&(k(!0),r&&r("completed"),setTimeout(async()=>{try{await I.endSession()}catch{}},3e3))}}}}),A=async()=>{u(null),f(!0),C([]),k(!1);try{let j=null;try{const K=i?`/submissions/${t}/interview-agent-prompt?token=${i}`:`/submissions/${t}/interview-agent-prompt`;j=(await(await Ya(K)).json()).prompt}catch(K){let X="Failed to fetch interview prompt";if(K.message)if(K.message.includes("409"))X="Generate interview questions first";else if(K.message.includes("404"))X="Submission not found";else try{const se=K.message.match(/\{.*\}/);se?X=JSON.parse(se[0]).error||X:X=K.message}catch{X=K.message}u(X),f(!1);return}try{await navigator.mediaDevices.getUserMedia({audio:!0})}catch{u("Microphone permission denied. Please allow microphone access to start the interview."),f(!1);return}if(!j){u("Failed to load interview prompt"),f(!1);return}o(j);const U={agent:{prompt:{prompt:j},firstMessage:"Hey  I'm going to ask you a few questions about your submission. Ready?"}};let z=0,F=U;for(;z<20&&(!E.current||E.current===void 0);){if(await new Promise(K=>setTimeout(K,50)),E.current){F=E.current;break}z++}if((!F||F===void 0)&&(F=U),!F){u("Failed to load overrides. Please check that System prompt override is enabled in ElevenLabs agent settings."),f(!1);return}const W=String(t),Y=await I.startSession({agentId:_,connectionType:"webrtc",userId:e||void 0,dynamicVariables:{submissionId:W},overrides:F});g(Y);try{const{updateInterviewConversationId:K}=await _Z(async()=>{const{updateInterviewConversationId:X}=await Promise.resolve().then(()=>cZ);return{updateInterviewConversationId:X}},void 0);await K(W,Y,i)}catch{}}catch(j){u(j.message||"Failed to start voice interview")}finally{f(!1)}},L=async()=>{try{await I.endSession()}catch(j){u(j.message||"Failed to end voice interview")}},R=I.status==="connected";return h.jsxs("div",{className:"w-full max-w-2xl mx-auto p-6 bg-white rounded-xl border border-gray-200 shadow-sm",children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Voice Interview (ElevenLabs)"}),!_,l&&h.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-sm text-red-800",children:l}),h.jsxs("div",{className:"mb-4 space-y-2",children:[h.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[h.jsx("span",{className:"font-medium",children:"Status:"}),h.jsx("span",{className:`px-2 py-1 rounded ${R?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:I.status||"disconnected"})]}),h.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[h.jsx("span",{className:"font-medium",children:"Agent speaking:"}),h.jsx("span",{className:`px-2 py-1 rounded ${I.isSpeaking?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:I.isSpeaking?"yes":"no"})]}),m&&h.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[h.jsx("span",{className:"font-medium",children:"Conversation ID:"}),h.jsx("span",{className:"font-mono text-xs",children:m})]})]}),n==="completed"&&h.jsxs("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx(yc,{className:"w-5 h-5 text-green-600"}),h.jsx("h3",{className:"text-sm font-semibold text-green-900",children:"Interview Completed"})]}),h.jsx("p",{className:"text-sm text-green-800",children:"You have already completed this interview. Thank you for your participation!"})]}),n!=="completed"&&h.jsxs("div",{className:"flex gap-3 mb-4",children:[h.jsx(Ee,{onClick:A,disabled:d||R||!_||n==="completed",className:"flex-1 bg-[#1E3A8A] hover:bg-[#152a66] text-white",children:d?h.jsxs(h.Fragment,{children:[h.jsx(dI,{className:"w-4 h-4 mr-2 animate-spin"}),"Starting..."]}):h.jsxs(h.Fragment,{children:[h.jsx(fI,{className:"w-4 h-4 mr-2"}),"Start Voice Interview"]})}),h.jsxs(Ee,{onClick:L,disabled:!R||x,variant:"destructive",className:"flex-1",children:[h.jsx(f4,{className:"w-4 h-4 mr-2"}),x?"Interview Complete":"End Interview"]})]}),x&&n!=="completed"&&h.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg text-sm text-green-800",children:" Interview completed! The session has been ended automatically."}),(R||y.length>0)&&h.jsxs("div",{className:"mt-6",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Conversation Transcript"}),h.jsx("div",{className:"bg-gray-50 rounded-xl border border-gray-200 max-h-[500px] overflow-y-auto p-4",children:y.length>0?h.jsxs("div",{className:"space-y-4",children:[y.map((j,U)=>h.jsxs("div",{className:`p-4 rounded-lg border-l-4 ${j.role==="interviewer"?"bg-blue-50 border-blue-500":"bg-white border-green-500"}`,children:[h.jsxs("div",{className:`text-sm font-semibold mb-2 ${j.role==="interviewer"?"text-blue-700":"text-green-700"}`,children:[j.role==="interviewer"?"Interviewer":"Candidate",":"]}),h.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:j.text})]},U)),h.jsx("div",{ref:T})]}):h.jsx("div",{className:"text-center py-8 text-gray-500 text-sm",children:R?"Conversation will appear here as you speak...":"Start the interview to see the conversation transcript"})})]}),h.jsxs("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm text-blue-800",children:[h.jsx("p",{className:"font-medium mb-1",children:"Instructions:"}),h.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[h.jsx("li",{children:'Click "Start Voice Interview" to begin'}),h.jsx("li",{children:"Allow microphone access when prompted"}),h.jsx("li",{children:"The agent will ask questions based on your submission"}),h.jsx("li",{children:"You only have one chance to record your answers"}),h.jsx("li",{children:"The interview will end automatically when all questions are answered"})]})]})]})}function rie(){var P,E;const[t]=Fd(),e=Os(),n=t.get("token"),[r,i]=w.useState(null),[s,o]=w.useState(null),[l,u]=w.useState(!0),[d,f]=w.useState(!1),[m,g]=w.useState(null),[y,C]=w.useState(!1);w.useEffect(()=>{if(!n){e("/");return}(async()=>{var A;u(!0);try{const L=await Xl(n);if(L.success){i(L.data);const R=L.data.assessmentId;if(typeof R=="object"&&R!==null&&o(R),((A=L.data.interview)==null?void 0:A.status)==="completed"&&C(!0),L.data.status==="opted-out"){u(!1);return}if(L.data.status!=="submitted"&&L.data.status!=="expired"){e(`${Be("CandidateAssessment")}?token=${n}`);return}const j=typeof R=="object"&&R!==null&&R.isSmartInterviewerEnabled!==!1;L.data.interviewQuestions&&Array.isArray(L.data.interviewQuestions)&&L.data.interviewQuestions.length>0?f(!1):L.data.githubLink&&j?(f(!0),x()):f(!1)}else console.error("Failed to load submission")}catch(L){console.error("Error loading submission:",L)}finally{u(!1)}})()},[n,e]);const x=async()=>{let A=0;const L=async()=>{if(A>=30){f(!1),g("Interview questions are taking longer than expected. Please refresh the page.");return}try{const R=await Xl(n);R.success&&R.data.interviewQuestions&&Array.isArray(R.data.interviewQuestions)&&R.data.interviewQuestions.length>0?(i(R.data),f(!1)):(A++,setTimeout(L,1e4))}catch(R){console.error("Error polling for questions:",R),A++,A<30?setTimeout(L,1e4):(f(!1),g("Failed to check for interview questions."))}};setTimeout(L,1e4)},k=async()=>{C(!0);const I=20;let A=0;const L=async()=>{var R;if(!(A>=I))try{const j=await Xl(n);if(j.success&&j.data&&((R=j.data.interview)==null?void 0:R.status)==="completed"){i(j.data);return}A++,setTimeout(L,6e3)}catch(j){console.error("Error polling for interview completion:",j),A++,A<I&&setTimeout(L,6e3)}};L()};if(l)return h.jsx("div",{className:"min-h-screen bg-[#f8f9fb] flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"w-8 h-8 border-2 border-[#1E3A8A]/30 border-t-[#1E3A8A] rounded-full animate-spin mx-auto mb-4"}),h.jsx("p",{className:"text-gray-500",children:"Loading..."})]})});if(!r||!s)return h.jsx("div",{className:"min-h-screen bg-[#f8f9fb] flex items-center justify-center",children:h.jsx("div",{className:"text-center",children:h.jsx("p",{className:"text-red-600 mb-4",children:"Failed to load submission"})})});const T=r.status==="expired";if(r.status==="opted-out"){const I=!r.startedAt;return h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#f8f9fb] to-[#eef1f8] flex items-center justify-center p-6",children:h.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-2xl bg-white rounded-2xl shadow-xl overflow-hidden",children:[h.jsxs("div",{className:"bg-orange-500 px-8 py-6 text-center",children:[h.jsx("div",{className:"w-16 h-16 rounded-full bg-white flex items-center justify-center mx-auto mb-4",children:h.jsx(fi,{className:"w-10 h-10 text-orange-500"})}),h.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:"You Have Opted Out"}),h.jsx("p",{className:"text-white/90",children:I?"You have chosen not to start this assessment":"You have chosen not to complete this assessment"})]}),h.jsxs("div",{className:"p-8",children:[h.jsxs("div",{className:"mb-6",children:[h.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:s.title}),I?h.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-3 mb-4",children:h.jsx("p",{className:"text-xs text-blue-800 font-medium",children:" You opted out before starting the assessment"})}):h.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-3 mb-4",children:h.jsx("p",{className:"text-xs text-orange-800 font-medium",children:" You opted out after starting the assessment"})}),r.optOutReason&&h.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200 mb-4",children:[h.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Your reason:"}),h.jsx("p",{className:"text-sm text-gray-600",children:r.optOutReason})]})]}),h.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-4",children:h.jsxs("p",{className:"text-sm text-orange-800",children:[h.jsx("strong",{children:"Note:"})," ",I?"You opted out before starting the assessment. If you change your mind, please contact the assessment team.":"You opted out after starting the assessment. If you change your mind, please contact the assessment team."]})})]})]})})}return h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#f8f9fb] to-[#eef1f8] flex items-center justify-center p-6",children:h.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-2xl bg-white rounded-2xl shadow-xl overflow-hidden",children:[h.jsxs("div",{className:`px-8 py-6 text-center ${T?"bg-orange-500":"bg-green-500"}`,children:[h.jsx("div",{className:"w-16 h-16 rounded-full bg-white flex items-center justify-center mx-auto mb-4",children:h.jsx(yc,{className:`w-10 h-10 ${T?"text-orange-500":"text-green-500"}`})}),h.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:T?"Assessment Submitted (Time Expired)":"Assessment Submitted Successfully!"}),h.jsx("p",{className:"text-white/90",children:T?"Your submission was received after the time limit":"Thank you for completing the assessment"})]}),h.jsxs("div",{className:"p-8",children:[h.jsxs("div",{className:"mb-6",children:[h.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:s.title}),h.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[r.candidateName&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"font-medium",children:"Candidate:"}),h.jsx("span",{children:r.candidateName})]}),r.candidateEmail&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"font-medium",children:"Email:"}),h.jsx("span",{children:r.candidateEmail})]})]})]}),h.jsxs("div",{className:"space-y-4 mb-6",children:[r.githubLink&&h.jsx("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx($u,{className:"w-5 h-5 text-[#1E3A8A] flex-shrink-0 mt-0.5"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:"GitHub Repository"}),h.jsx("a",{href:r.githubLink,target:"_blank",rel:"noopener noreferrer",className:"text-[#1E3A8A] hover:underline text-sm break-all",children:r.githubLink})]})]})}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.timeSpent!==void 0&&h.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx(Ps,{className:"w-4 h-4 text-gray-500"}),h.jsx("span",{className:"text-xs text-gray-500",children:"Time Spent"})]}),h.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[r.timeSpent," minutes"]})]}),r.submittedAt&&h.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx(MU,{className:"w-4 h-4 text-gray-500"}),h.jsx("span",{className:"text-xs text-gray-500",children:"Submitted At"})]}),h.jsx("p",{className:"text-sm font-semibold text-gray-900",children:new Date(r.submittedAt).toLocaleString()})]})]})]}),h.jsx("div",{className:`p-4 rounded-xl mb-6 ${T?"bg-orange-50 border border-orange-200":"bg-blue-50 border border-blue-200"}`,children:h.jsx("p",{className:`text-sm ${T?"text-orange-800":"text-blue-800"}`,children:T?h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Note:"})," Your submission was received after the time limit had expired. The assessment team will review your submission."]}):h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"What's next?"})," Your submission has been received and will be reviewed by the assessment team. You will be contacted with the results."]})})}),h.jsxs("div",{className:"space-y-4",children:[d&&(s==null?void 0:s.isSmartInterviewerEnabled)!==!1&&h.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-xl",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(dI,{className:"w-5 h-5 text-blue-600 animate-spin"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Generating Interview Questions..."}),h.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"This may take a few moments. The interview will start automatically when ready."})]})]})}),m&&h.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl text-sm text-red-700",children:m}),!d&&(!r.interviewQuestions||!Array.isArray(r.interviewQuestions)||r.interviewQuestions.length===0)&&h.jsx("div",{className:"text-center",children:h.jsx("p",{className:"text-sm text-gray-500",children:"You can close this page. Your submission has been saved."})})]}),(r==null?void 0:r._id)&&(s==null?void 0:s.isSmartInterviewerEnabled)!==!1&&r.interviewQuestions&&Array.isArray(r.interviewQuestions)&&r.interviewQuestions.length>0&&h.jsx(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-8 pt-8 border-t border-gray-200",children:y||((P=r.interview)==null?void 0:P.status)==="completed"?h.jsx("div",{className:"p-6 bg-green-50 border border-green-200 rounded-xl",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(yc,{className:"w-8 h-8 text-green-600"}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-green-900",children:"Interview Completed"}),h.jsx("p",{className:"text-sm text-green-700 mt-1",children:"Thank you for completing the interview! Your responses have been recorded."})]})]})}):h.jsx(nie,{submissionId:r._id,token:n,userId:r.candidateEmail,interviewStatus:(E=r.interview)==null?void 0:E.status,onInterviewStatusChange:async I=>{I==="completed"&&k()}})})]})]})})}function Gw(t){const e=t+"CollectionProvider",[n,r]=Xi(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=x=>{const{scope:k,children:T}=x,_=Ni.useRef(null),P=Ni.useRef(new Map).current;return h.jsx(i,{scope:k,itemMap:P,collectionRef:_,children:T})};o.displayName=e;const l=t+"CollectionSlot",u=Ra(l),d=Ni.forwardRef((x,k)=>{const{scope:T,children:_}=x,P=s(l,T),E=wt(k,P.collectionRef);return h.jsx(u,{ref:E,children:_})});d.displayName=l;const f=t+"CollectionItemSlot",m="data-radix-collection-item",g=Ra(f),y=Ni.forwardRef((x,k)=>{const{scope:T,children:_,...P}=x,E=Ni.useRef(null),I=wt(k,E),A=s(f,T);return Ni.useEffect(()=>(A.itemMap.set(E,{ref:E,...P}),()=>void A.itemMap.delete(E))),h.jsx(g,{[m]:"",ref:I,children:_})});y.displayName=f;function C(x){const k=s(t+"CollectionConsumer",x);return Ni.useCallback(()=>{const _=k.collectionRef.current;if(!_)return[];const P=Array.from(_.querySelectorAll(`[${m}]`));return Array.from(k.itemMap.values()).sort((A,L)=>P.indexOf(A.ref.current)-P.indexOf(L.ref.current))},[k.collectionRef,k.itemMap])}return[{Provider:o,Slot:d,ItemSlot:y},C,r]}var iie=w.createContext(void 0);function Kw(t){const e=w.useContext(iie);return t||e||"ltr"}const sie=["top","right","bottom","left"],qo=Math.min,mr=Math.max,Kp=Math.round,jf=Math.floor,Wi=t=>({x:t,y:t}),oie={left:"right",right:"left",bottom:"top",top:"bottom"},aie={start:"end",end:"start"};function Tb(t,e,n){return mr(t,qo(e,n))}function Ds(t,e){return typeof t=="function"?t(e):t}function js(t){return t.split("-")[0]}function Lc(t){return t.split("-")[1]}function Yw(t){return t==="x"?"y":"x"}function Jw(t){return t==="y"?"height":"width"}const lie=new Set(["top","bottom"]);function Li(t){return lie.has(js(t))?"y":"x"}function Qw(t){return Yw(Li(t))}function cie(t,e,n){n===void 0&&(n=!1);const r=Lc(t),i=Qw(t),s=Jw(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Yp(o)),[o,Yp(o)]}function uie(t){const e=Yp(t);return[Eb(t),e,Eb(e)]}function Eb(t){return t.replace(/start|end/g,e=>aie[e])}const R_=["left","right"],M_=["right","left"],die=["top","bottom"],hie=["bottom","top"];function fie(t,e,n){switch(t){case"top":case"bottom":return n?e?M_:R_:e?R_:M_;case"left":case"right":return e?die:hie;default:return[]}}function pie(t,e,n,r){const i=Lc(t);let s=fie(js(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(Eb)))),s}function Yp(t){return t.replace(/left|right|bottom|top/g,e=>oie[e])}function mie(t){return{top:0,right:0,bottom:0,left:0,...t}}function PO(t){return typeof t!="number"?mie(t):{top:t,right:t,bottom:t,left:t}}function Jp(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function D_(t,e,n){let{reference:r,floating:i}=t;const s=Li(e),o=Qw(e),l=Jw(o),u=js(e),d=s==="y",f=r.x+r.width/2-i.width/2,m=r.y+r.height/2-i.height/2,g=r[l]/2-i[l]/2;let y;switch(u){case"top":y={x:f,y:r.y-i.height};break;case"bottom":y={x:f,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:m};break;case"left":y={x:r.x-i.width,y:m};break;default:y={x:r.x,y:r.y}}switch(Lc(e)){case"start":y[o]-=g*(n&&d?-1:1);break;case"end":y[o]+=g*(n&&d?-1:1);break}return y}const gie=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,l=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(e));let d=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:f,y:m}=D_(d,r,u),g=r,y={},C=0;for(let x=0;x<l.length;x++){const{name:k,fn:T}=l[x],{x:_,y:P,data:E,reset:I}=await T({x:f,y:m,initialPlacement:r,placement:g,strategy:i,middlewareData:y,rects:d,platform:o,elements:{reference:t,floating:e}});f=_??f,m=P??m,y={...y,[k]:{...y[k],...E}},I&&C<=50&&(C++,typeof I=="object"&&(I.placement&&(g=I.placement),I.rects&&(d=I.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):I.rects),{x:f,y:m}=D_(d,g,u)),x=-1)}return{x:f,y:m,placement:g,strategy:i,middlewareData:y}};async function _d(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:l,strategy:u}=t,{boundary:d="clippingAncestors",rootBoundary:f="viewport",elementContext:m="floating",altBoundary:g=!1,padding:y=0}=Ds(e,t),C=PO(y),k=l[g?m==="floating"?"reference":"floating":m],T=Jp(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(k)))==null||n?k:k.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:d,rootBoundary:f,strategy:u})),_=m==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,P=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),E=await(s.isElement==null?void 0:s.isElement(P))?await(s.getScale==null?void 0:s.getScale(P))||{x:1,y:1}:{x:1,y:1},I=Jp(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:_,offsetParent:P,strategy:u}):_);return{top:(T.top-I.top+C.top)/E.y,bottom:(I.bottom-T.bottom+C.bottom)/E.y,left:(T.left-I.left+C.left)/E.x,right:(I.right-T.right+C.right)/E.x}}const vie=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:l,middlewareData:u}=e,{element:d,padding:f=0}=Ds(t,e)||{};if(d==null)return{};const m=PO(f),g={x:n,y:r},y=Qw(i),C=Jw(y),x=await o.getDimensions(d),k=y==="y",T=k?"top":"left",_=k?"bottom":"right",P=k?"clientHeight":"clientWidth",E=s.reference[C]+s.reference[y]-g[y]-s.floating[C],I=g[y]-s.reference[y],A=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let L=A?A[P]:0;(!L||!await(o.isElement==null?void 0:o.isElement(A)))&&(L=l.floating[P]||s.floating[C]);const R=E/2-I/2,j=L/2-x[C]/2-1,U=qo(m[T],j),z=qo(m[_],j),F=U,W=L-x[C]-z,Y=L/2-x[C]/2+R,K=Tb(F,Y,W),X=!u.arrow&&Lc(i)!=null&&Y!==K&&s.reference[C]/2-(Y<F?U:z)-x[C]/2<0,se=X?Y<F?Y-F:Y-W:0;return{[y]:g[y]+se,data:{[y]:K,centerOffset:Y-K-se,...X&&{alignmentOffset:se}},reset:X}}}),yie=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:l,platform:u,elements:d}=e,{mainAxis:f=!0,crossAxis:m=!0,fallbackPlacements:g,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:C="none",flipAlignment:x=!0,...k}=Ds(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const T=js(i),_=Li(l),P=js(l)===l,E=await(u.isRTL==null?void 0:u.isRTL(d.floating)),I=g||(P||!x?[Yp(l)]:uie(l)),A=C!=="none";!g&&A&&I.push(...pie(l,x,C,E));const L=[l,...I],R=await _d(e,k),j=[];let U=((r=s.flip)==null?void 0:r.overflows)||[];if(f&&j.push(R[T]),m){const Y=cie(i,o,E);j.push(R[Y[0]],R[Y[1]])}if(U=[...U,{placement:i,overflows:j}],!j.every(Y=>Y<=0)){var z,F;const Y=(((z=s.flip)==null?void 0:z.index)||0)+1,K=L[Y];if(K&&(!(m==="alignment"?_!==Li(K):!1)||U.every(H=>Li(H.placement)===_?H.overflows[0]>0:!0)))return{data:{index:Y,overflows:U},reset:{placement:K}};let X=(F=U.filter(se=>se.overflows[0]<=0).sort((se,H)=>se.overflows[1]-H.overflows[1])[0])==null?void 0:F.placement;if(!X)switch(y){case"bestFit":{var W;const se=(W=U.filter(H=>{if(A){const te=Li(H.placement);return te===_||te==="y"}return!0}).map(H=>[H.placement,H.overflows.filter(te=>te>0).reduce((te,D)=>te+D,0)]).sort((H,te)=>H[1]-te[1])[0])==null?void 0:W[0];se&&(X=se);break}case"initialPlacement":X=l;break}if(i!==X)return{reset:{placement:X}}}return{}}}};function j_(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function O_(t){return sie.some(e=>t[e]>=0)}const bie=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=Ds(t,e);switch(r){case"referenceHidden":{const s=await _d(e,{...i,elementContext:"reference"}),o=j_(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:O_(o)}}}case"escaped":{const s=await _d(e,{...i,altBoundary:!0}),o=j_(s,n.floating);return{data:{escapedOffsets:o,escaped:O_(o)}}}default:return{}}}}},_O=new Set(["left","top"]);async function xie(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=js(n),l=Lc(n),u=Li(n)==="y",d=_O.has(o)?-1:1,f=s&&u?-1:1,m=Ds(e,t);let{mainAxis:g,crossAxis:y,alignmentAxis:C}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof C=="number"&&(y=l==="end"?C*-1:C),u?{x:y*f,y:g*d}:{x:g*d,y:y*f}}const wie=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:l}=e,u=await xie(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},kie=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:l={fn:k=>{let{x:T,y:_}=k;return{x:T,y:_}}},...u}=Ds(t,e),d={x:n,y:r},f=await _d(e,u),m=Li(js(i)),g=Yw(m);let y=d[g],C=d[m];if(s){const k=g==="y"?"top":"left",T=g==="y"?"bottom":"right",_=y+f[k],P=y-f[T];y=Tb(_,y,P)}if(o){const k=m==="y"?"top":"left",T=m==="y"?"bottom":"right",_=C+f[k],P=C-f[T];C=Tb(_,C,P)}const x=l.fn({...e,[g]:y,[m]:C});return{...x,data:{x:x.x-n,y:x.y-r,enabled:{[g]:s,[m]:o}}}}}},Sie=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:l=0,mainAxis:u=!0,crossAxis:d=!0}=Ds(t,e),f={x:n,y:r},m=Li(i),g=Yw(m);let y=f[g],C=f[m];const x=Ds(l,e),k=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(u){const P=g==="y"?"height":"width",E=s.reference[g]-s.floating[P]+k.mainAxis,I=s.reference[g]+s.reference[P]-k.mainAxis;y<E?y=E:y>I&&(y=I)}if(d){var T,_;const P=g==="y"?"width":"height",E=_O.has(js(i)),I=s.reference[m]-s.floating[P]+(E&&((T=o.offset)==null?void 0:T[m])||0)+(E?0:k.crossAxis),A=s.reference[m]+s.reference[P]+(E?0:((_=o.offset)==null?void 0:_[m])||0)-(E?k.crossAxis:0);C<I?C=I:C>A&&(C=A)}return{[g]:y,[m]:C}}}},Cie=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:l}=e,{apply:u=()=>{},...d}=Ds(t,e),f=await _d(e,d),m=js(i),g=Lc(i),y=Li(i)==="y",{width:C,height:x}=s.floating;let k,T;m==="top"||m==="bottom"?(k=m,T=g===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(T=m,k=g==="end"?"top":"bottom");const _=x-f.top-f.bottom,P=C-f.left-f.right,E=qo(x-f[k],_),I=qo(C-f[T],P),A=!e.middlewareData.shift;let L=E,R=I;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(R=P),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(L=_),A&&!g){const U=mr(f.left,0),z=mr(f.right,0),F=mr(f.top,0),W=mr(f.bottom,0);y?R=C-2*(U!==0||z!==0?U+z:mr(f.left,f.right)):L=x-2*(F!==0||W!==0?F+W:mr(f.top,f.bottom))}await u({...e,availableWidth:R,availableHeight:L});const j=await o.getDimensions(l.floating);return C!==j.width||x!==j.height?{reset:{rects:!0}}:{}}}};function Um(){return typeof window<"u"}function Fc(t){return IO(t)?(t.nodeName||"").toLowerCase():"#document"}function wr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ts(t){var e;return(e=(IO(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function IO(t){return Um()?t instanceof Node||t instanceof wr(t).Node:!1}function gi(t){return Um()?t instanceof Element||t instanceof wr(t).Element:!1}function Ji(t){return Um()?t instanceof HTMLElement||t instanceof wr(t).HTMLElement:!1}function L_(t){return!Um()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof wr(t).ShadowRoot}const Tie=new Set(["inline","contents"]);function Xd(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=vi(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!Tie.has(i)}const Eie=new Set(["table","td","th"]);function Pie(t){return Eie.has(Fc(t))}const _ie=[":popover-open",":modal"];function Bm(t){return _ie.some(e=>{try{return t.matches(e)}catch{return!1}})}const Iie=["transform","translate","scale","rotate","perspective"],Nie=["transform","translate","scale","rotate","perspective","filter"],Aie=["paint","layout","strict","content"];function Xw(t){const e=Zw(),n=gi(t)?vi(t):t;return Iie.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||Nie.some(r=>(n.willChange||"").includes(r))||Aie.some(r=>(n.contain||"").includes(r))}function Rie(t){let e=Go(t);for(;Ji(e)&&!Ec(e);){if(Xw(e))return e;if(Bm(e))return null;e=Go(e)}return null}function Zw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Mie=new Set(["html","body","#document"]);function Ec(t){return Mie.has(Fc(t))}function vi(t){return wr(t).getComputedStyle(t)}function Vm(t){return gi(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Go(t){if(Fc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||L_(t)&&t.host||ts(t);return L_(e)?e.host:e}function NO(t){const e=Go(t);return Ec(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ji(e)&&Xd(e)?e:NO(e)}function Id(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=NO(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=wr(i);if(s){const l=Pb(o);return e.concat(o,o.visualViewport||[],Xd(i)?i:[],l&&n?Id(l):[])}return e.concat(i,Id(i,[],n))}function Pb(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function AO(t){const e=vi(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Ji(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,l=Kp(n)!==s||Kp(r)!==o;return l&&(n=s,r=o),{width:n,height:r,$:l}}function ek(t){return gi(t)?t:t.contextElement}function ac(t){const e=ek(t);if(!Ji(e))return Wi(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=AO(e);let o=(s?Kp(n.width):n.width)/r,l=(s?Kp(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const Die=Wi(0);function RO(t){const e=wr(t);return!Zw()||!e.visualViewport?Die:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function jie(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==wr(t)?!1:e}function za(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=ek(t);let o=Wi(1);e&&(r?gi(r)&&(o=ac(r)):o=ac(t));const l=jie(s,n,r)?RO(s):Wi(0);let u=(i.left+l.x)/o.x,d=(i.top+l.y)/o.y,f=i.width/o.x,m=i.height/o.y;if(s){const g=wr(s),y=r&&gi(r)?wr(r):r;let C=g,x=Pb(C);for(;x&&r&&y!==C;){const k=ac(x),T=x.getBoundingClientRect(),_=vi(x),P=T.left+(x.clientLeft+parseFloat(_.paddingLeft))*k.x,E=T.top+(x.clientTop+parseFloat(_.paddingTop))*k.y;u*=k.x,d*=k.y,f*=k.x,m*=k.y,u+=P,d+=E,C=wr(x),x=Pb(C)}}return Jp({width:f,height:m,x:u,y:d})}function zm(t,e){const n=Vm(t).scrollLeft;return e?e.left+n:za(ts(t)).left+n}function MO(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-zm(t,n),i=n.top+e.scrollTop;return{x:r,y:i}}function Oie(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=ts(r),l=e?Bm(e.floating):!1;if(r===o||l&&s)return n;let u={scrollLeft:0,scrollTop:0},d=Wi(1);const f=Wi(0),m=Ji(r);if((m||!m&&!s)&&((Fc(r)!=="body"||Xd(o))&&(u=Vm(r)),Ji(r))){const y=za(r);d=ac(r),f.x=y.x+r.clientLeft,f.y=y.y+r.clientTop}const g=o&&!m&&!s?MO(o,u):Wi(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-u.scrollLeft*d.x+f.x+g.x,y:n.y*d.y-u.scrollTop*d.y+f.y+g.y}}function Lie(t){return Array.from(t.getClientRects())}function Fie(t){const e=ts(t),n=Vm(t),r=t.ownerDocument.body,i=mr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=mr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+zm(t);const l=-n.scrollTop;return vi(r).direction==="rtl"&&(o+=mr(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:l}}const F_=25;function Uie(t,e){const n=wr(t),r=ts(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,l=0,u=0;if(i){s=i.width,o=i.height;const f=Zw();(!f||f&&e==="fixed")&&(l=i.offsetLeft,u=i.offsetTop)}const d=zm(r);if(d<=0){const f=r.ownerDocument,m=f.body,g=getComputedStyle(m),y=f.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,C=Math.abs(r.clientWidth-m.clientWidth-y);C<=F_&&(s-=C)}else d<=F_&&(s+=d);return{width:s,height:o,x:l,y:u}}const Bie=new Set(["absolute","fixed"]);function Vie(t,e){const n=za(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=Ji(t)?ac(t):Wi(1),o=t.clientWidth*s.x,l=t.clientHeight*s.y,u=i*s.x,d=r*s.y;return{width:o,height:l,x:u,y:d}}function U_(t,e,n){let r;if(e==="viewport")r=Uie(t,n);else if(e==="document")r=Fie(ts(t));else if(gi(e))r=Vie(e,n);else{const i=RO(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Jp(r)}function DO(t,e){const n=Go(t);return n===e||!gi(n)||Ec(n)?!1:vi(n).position==="fixed"||DO(n,e)}function zie(t,e){const n=e.get(t);if(n)return n;let r=Id(t,[],!1).filter(l=>gi(l)&&Fc(l)!=="body"),i=null;const s=vi(t).position==="fixed";let o=s?Go(t):t;for(;gi(o)&&!Ec(o);){const l=vi(o),u=Xw(o);!u&&l.position==="fixed"&&(i=null),(s?!u&&!i:!u&&l.position==="static"&&!!i&&Bie.has(i.position)||Xd(o)&&!u&&DO(t,o))?r=r.filter(f=>f!==o):i=l,o=Go(o)}return e.set(t,r),r}function $ie(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?Bm(e)?[]:zie(e,this._c):[].concat(n),r],l=o[0],u=o.reduce((d,f)=>{const m=U_(e,f,i);return d.top=mr(m.top,d.top),d.right=qo(m.right,d.right),d.bottom=qo(m.bottom,d.bottom),d.left=mr(m.left,d.left),d},U_(e,l,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function Wie(t){const{width:e,height:n}=AO(t);return{width:e,height:n}}function Hie(t,e,n){const r=Ji(e),i=ts(e),s=n==="fixed",o=za(t,!0,s,e);let l={scrollLeft:0,scrollTop:0};const u=Wi(0);function d(){u.x=zm(i)}if(r||!r&&!s)if((Fc(e)!=="body"||Xd(i))&&(l=Vm(e)),r){const y=za(e,!0,s,e);u.x=y.x+e.clientLeft,u.y=y.y+e.clientTop}else i&&d();s&&!r&&i&&d();const f=i&&!r&&!s?MO(i,l):Wi(0),m=o.left+l.scrollLeft-u.x-f.x,g=o.top+l.scrollTop-u.y-f.y;return{x:m,y:g,width:o.width,height:o.height}}function Ky(t){return vi(t).position==="static"}function B_(t,e){if(!Ji(t)||vi(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ts(t)===n&&(n=n.ownerDocument.body),n}function jO(t,e){const n=wr(t);if(Bm(t))return n;if(!Ji(t)){let i=Go(t);for(;i&&!Ec(i);){if(gi(i)&&!Ky(i))return i;i=Go(i)}return n}let r=B_(t,e);for(;r&&Pie(r)&&Ky(r);)r=B_(r,e);return r&&Ec(r)&&Ky(r)&&!Xw(r)?n:r||Rie(t)||n}const qie=async function(t){const e=this.getOffsetParent||jO,n=this.getDimensions,r=await n(t.floating);return{reference:Hie(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Gie(t){return vi(t).direction==="rtl"}const Kie={convertOffsetParentRelativeRectToViewportRelativeRect:Oie,getDocumentElement:ts,getClippingRect:$ie,getOffsetParent:jO,getElementRects:qie,getClientRects:Lie,getDimensions:Wie,getScale:ac,isElement:gi,isRTL:Gie};function OO(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Yie(t,e){let n=null,r;const i=ts(t);function s(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,u){l===void 0&&(l=!1),u===void 0&&(u=1),s();const d=t.getBoundingClientRect(),{left:f,top:m,width:g,height:y}=d;if(l||e(),!g||!y)return;const C=jf(m),x=jf(i.clientWidth-(f+g)),k=jf(i.clientHeight-(m+y)),T=jf(f),P={rootMargin:-C+"px "+-x+"px "+-k+"px "+-T+"px",threshold:mr(0,qo(1,u))||1};let E=!0;function I(A){const L=A[0].intersectionRatio;if(L!==u){if(!E)return o();L?o(!1,L):r=setTimeout(()=>{o(!1,1e-7)},1e3)}L===1&&!OO(d,t.getBoundingClientRect())&&o(),E=!1}try{n=new IntersectionObserver(I,{...P,root:i.ownerDocument})}catch{n=new IntersectionObserver(I,P)}n.observe(t)}return o(!0),s}function Jie(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,d=ek(t),f=i||s?[...d?Id(d):[],...Id(e)]:[];f.forEach(T=>{i&&T.addEventListener("scroll",n,{passive:!0}),s&&T.addEventListener("resize",n)});const m=d&&l?Yie(d,n):null;let g=-1,y=null;o&&(y=new ResizeObserver(T=>{let[_]=T;_&&_.target===d&&y&&(y.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var P;(P=y)==null||P.observe(e)})),n()}),d&&!u&&y.observe(d),y.observe(e));let C,x=u?za(t):null;u&&k();function k(){const T=za(t);x&&!OO(x,T)&&n(),x=T,C=requestAnimationFrame(k)}return n(),()=>{var T;f.forEach(_=>{i&&_.removeEventListener("scroll",n),s&&_.removeEventListener("resize",n)}),m==null||m(),(T=y)==null||T.disconnect(),y=null,u&&cancelAnimationFrame(C)}}const Qie=wie,Xie=kie,Zie=yie,ese=Cie,tse=bie,V_=vie,nse=Sie,rse=(t,e,n)=>{const r=new Map,i={platform:Kie,...n},s={...i.platform,_c:r};return gie(t,e,{...i,platform:s})};var ise=typeof document<"u",sse=function(){},up=ise?w.useLayoutEffect:sse;function Qp(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Qp(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!Qp(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function LO(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function z_(t,e){const n=LO(t);return Math.round(e*n)/n}function Yy(t){const e=w.useRef(t);return up(()=>{e.current=t}),e}function ose(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:l=!0,whileElementsMounted:u,open:d}=t,[f,m]=w.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[g,y]=w.useState(r);Qp(g,r)||y(r);const[C,x]=w.useState(null),[k,T]=w.useState(null),_=w.useCallback(H=>{H!==A.current&&(A.current=H,x(H))},[]),P=w.useCallback(H=>{H!==L.current&&(L.current=H,T(H))},[]),E=s||C,I=o||k,A=w.useRef(null),L=w.useRef(null),R=w.useRef(f),j=u!=null,U=Yy(u),z=Yy(i),F=Yy(d),W=w.useCallback(()=>{if(!A.current||!L.current)return;const H={placement:e,strategy:n,middleware:g};z.current&&(H.platform=z.current),rse(A.current,L.current,H).then(te=>{const D={...te,isPositioned:F.current!==!1};Y.current&&!Qp(R.current,D)&&(R.current=D,Od.flushSync(()=>{m(D)}))})},[g,e,n,z,F]);up(()=>{d===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,m(H=>({...H,isPositioned:!1})))},[d]);const Y=w.useRef(!1);up(()=>(Y.current=!0,()=>{Y.current=!1}),[]),up(()=>{if(E&&(A.current=E),I&&(L.current=I),E&&I){if(U.current)return U.current(E,I,W);W()}},[E,I,W,U,j]);const K=w.useMemo(()=>({reference:A,floating:L,setReference:_,setFloating:P}),[_,P]),X=w.useMemo(()=>({reference:E,floating:I}),[E,I]),se=w.useMemo(()=>{const H={position:n,left:0,top:0};if(!X.floating)return H;const te=z_(X.floating,f.x),D=z_(X.floating,f.y);return l?{...H,transform:"translate("+te+"px, "+D+"px)",...LO(X.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:te,top:D}},[n,l,X.floating,f.x,f.y]);return w.useMemo(()=>({...f,update:W,refs:K,elements:X,floatingStyles:se}),[f,W,K,X,se])}const ase=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?V_({element:r.current,padding:i}).fn(n):{}:r?V_({element:r,padding:i}).fn(n):{}}}},lse=(t,e)=>({...Qie(t),options:[t,e]}),cse=(t,e)=>({...Xie(t),options:[t,e]}),use=(t,e)=>({...nse(t),options:[t,e]}),dse=(t,e)=>({...Zie(t),options:[t,e]}),hse=(t,e)=>({...ese(t),options:[t,e]}),fse=(t,e)=>({...tse(t),options:[t,e]}),pse=(t,e)=>({...ase(t),options:[t,e]});var mse="Arrow",FO=w.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return h.jsx(ut.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});FO.displayName=mse;var gse=FO,tk="Popper",[UO,$m]=Xi(tk),[vse,BO]=UO(tk),VO=t=>{const{__scopePopper:e,children:n}=t,[r,i]=w.useState(null);return h.jsx(vse,{scope:e,anchor:r,onAnchorChange:i,children:n})};VO.displayName=tk;var zO="PopperAnchor",$O=w.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=BO(zO,n),o=w.useRef(null),l=wt(e,o),u=w.useRef(null);return w.useEffect(()=>{const d=u.current;u.current=(r==null?void 0:r.current)||o.current,d!==u.current&&s.onAnchorChange(u.current)}),r?null:h.jsx(ut.div,{...i,ref:l})});$O.displayName=zO;var nk="PopperContent",[yse,bse]=UO(nk),WO=w.forwardRef((t,e)=>{var ie,Se,Ce,Le,qe,Je;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:u=!0,collisionBoundary:d=[],collisionPadding:f=0,sticky:m="partial",hideWhenDetached:g=!1,updatePositionStrategy:y="optimized",onPlaced:C,...x}=t,k=BO(nk,n),[T,_]=w.useState(null),P=wt(e,jt=>_(jt)),[E,I]=w.useState(null),A=IM(E),L=(A==null?void 0:A.width)??0,R=(A==null?void 0:A.height)??0,j=r+(s!=="center"?"-"+s:""),U=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},z=Array.isArray(d)?d:[d],F=z.length>0,W={padding:U,boundary:z.filter(wse),altBoundary:F},{refs:Y,floatingStyles:K,placement:X,isPositioned:se,middlewareData:H}=ose({strategy:"fixed",placement:j,whileElementsMounted:(...jt)=>Jie(...jt,{animationFrame:y==="always"}),elements:{reference:k.anchor},middleware:[lse({mainAxis:i+R,alignmentAxis:o}),u&&cse({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?use():void 0,...W}),u&&dse({...W}),hse({...W,apply:({elements:jt,rects:Ct,availableWidth:sn,availableHeight:fn})=>{const{width:Pn,height:cr}=Ct.reference,on=jt.floating.style;on.setProperty("--radix-popper-available-width",`${sn}px`),on.setProperty("--radix-popper-available-height",`${fn}px`),on.setProperty("--radix-popper-anchor-width",`${Pn}px`),on.setProperty("--radix-popper-anchor-height",`${cr}px`)}}),E&&pse({element:E,padding:l}),kse({arrowWidth:L,arrowHeight:R}),g&&fse({strategy:"referenceHidden",...W})]}),[te,D]=GO(X),$=Gi(C);On(()=>{se&&($==null||$())},[se,$]);const re=(ie=H.arrow)==null?void 0:ie.x,O=(Se=H.arrow)==null?void 0:Se.y,ve=((Ce=H.arrow)==null?void 0:Ce.centerOffset)!==0,[oe,ce]=w.useState();return On(()=>{T&&ce(window.getComputedStyle(T).zIndex)},[T]),h.jsx("div",{ref:Y.setFloating,"data-radix-popper-content-wrapper":"",style:{...K,transform:se?K.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:oe,"--radix-popper-transform-origin":[(Le=H.transformOrigin)==null?void 0:Le.x,(qe=H.transformOrigin)==null?void 0:qe.y].join(" "),...((Je=H.hide)==null?void 0:Je.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:h.jsx(yse,{scope:n,placedSide:te,onArrowChange:I,arrowX:re,arrowY:O,shouldHideArrow:ve,children:h.jsx(ut.div,{"data-side":te,"data-align":D,...x,ref:P,style:{...x.style,animation:se?void 0:"none"}})})})});WO.displayName=nk;var HO="PopperArrow",xse={top:"bottom",right:"left",bottom:"top",left:"right"},qO=w.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=bse(HO,r),o=xse[s.placedSide];return h.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:h.jsx(gse,{...i,ref:n,style:{...i.style,display:"block"}})})});qO.displayName=HO;function wse(t){return t!==null}var kse=t=>({name:"transformOrigin",options:t,fn(e){var k,T,_;const{placement:n,rects:r,middlewareData:i}=e,o=((k=i.arrow)==null?void 0:k.centerOffset)!==0,l=o?0:t.arrowWidth,u=o?0:t.arrowHeight,[d,f]=GO(n),m={start:"0%",center:"50%",end:"100%"}[f],g=(((T=i.arrow)==null?void 0:T.x)??0)+l/2,y=(((_=i.arrow)==null?void 0:_.y)??0)+u/2;let C="",x="";return d==="bottom"?(C=o?m:`${g}px`,x=`${-u}px`):d==="top"?(C=o?m:`${g}px`,x=`${r.floating.height+u}px`):d==="right"?(C=`${-u}px`,x=o?m:`${y}px`):d==="left"&&(C=`${r.floating.width+u}px`,x=o?m:`${y}px`),{data:{x:C,y:x}}}});function GO(t){const[e,n="center"]=t.split("-");return[e,n]}var KO=VO,YO=$O,JO=WO,QO=qO,Jy="rovingFocusGroup.onEntryFocus",Sse={bubbles:!1,cancelable:!0},Zd="RovingFocusGroup",[_b,XO,Cse]=Gw(Zd),[Tse,ZO]=Xi(Zd,[Cse]),[Ese,Pse]=Tse(Zd),eL=w.forwardRef((t,e)=>h.jsx(_b.Provider,{scope:t.__scopeRovingFocusGroup,children:h.jsx(_b.Slot,{scope:t.__scopeRovingFocusGroup,children:h.jsx(_se,{...t,ref:e})})}));eL.displayName=Zd;var _se=w.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:u,onEntryFocus:d,preventScrollOnEntryFocus:f=!1,...m}=t,g=w.useRef(null),y=wt(e,g),C=Kw(s),[x,k]=kc({prop:o,defaultProp:l??null,onChange:u,caller:Zd}),[T,_]=w.useState(!1),P=Gi(d),E=XO(n),I=w.useRef(!1),[A,L]=w.useState(0);return w.useEffect(()=>{const R=g.current;if(R)return R.addEventListener(Jy,P),()=>R.removeEventListener(Jy,P)},[P]),h.jsx(Ese,{scope:n,orientation:r,dir:C,loop:i,currentTabStopId:x,onItemFocus:w.useCallback(R=>k(R),[k]),onItemShiftTab:w.useCallback(()=>_(!0),[]),onFocusableItemAdd:w.useCallback(()=>L(R=>R+1),[]),onFocusableItemRemove:w.useCallback(()=>L(R=>R-1),[]),children:h.jsx(ut.div,{tabIndex:T||A===0?-1:0,"data-orientation":r,...m,ref:y,style:{outline:"none",...t.style},onMouseDown:Ue(t.onMouseDown,()=>{I.current=!0}),onFocus:Ue(t.onFocus,R=>{const j=!I.current;if(R.target===R.currentTarget&&j&&!T){const U=new CustomEvent(Jy,Sse);if(R.currentTarget.dispatchEvent(U),!U.defaultPrevented){const z=E().filter(X=>X.focusable),F=z.find(X=>X.active),W=z.find(X=>X.id===x),K=[F,W,...z].filter(Boolean).map(X=>X.ref.current);rL(K,f)}}I.current=!1}),onBlur:Ue(t.onBlur,()=>_(!1))})})}),tL="RovingFocusGroupItem",nL=w.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,children:o,...l}=t,u=Es(),d=s||u,f=Pse(tL,n),m=f.currentTabStopId===d,g=XO(n),{onFocusableItemAdd:y,onFocusableItemRemove:C,currentTabStopId:x}=f;return w.useEffect(()=>{if(r)return y(),()=>C()},[r,y,C]),h.jsx(_b.ItemSlot,{scope:n,id:d,focusable:r,active:i,children:h.jsx(ut.span,{tabIndex:m?0:-1,"data-orientation":f.orientation,...l,ref:e,onMouseDown:Ue(t.onMouseDown,k=>{r?f.onItemFocus(d):k.preventDefault()}),onFocus:Ue(t.onFocus,()=>f.onItemFocus(d)),onKeyDown:Ue(t.onKeyDown,k=>{if(k.key==="Tab"&&k.shiftKey){f.onItemShiftTab();return}if(k.target!==k.currentTarget)return;const T=Ase(k,f.orientation,f.dir);if(T!==void 0){if(k.metaKey||k.ctrlKey||k.altKey||k.shiftKey)return;k.preventDefault();let P=g().filter(E=>E.focusable).map(E=>E.ref.current);if(T==="last")P.reverse();else if(T==="prev"||T==="next"){T==="prev"&&P.reverse();const E=P.indexOf(k.currentTarget);P=f.loop?Rse(P,E+1):P.slice(E+1)}setTimeout(()=>rL(P))}}),children:typeof o=="function"?o({isCurrentTabStop:m,hasTabStop:x!=null}):o})})});nL.displayName=tL;var Ise={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Nse(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Ase(t,e,n){const r=Nse(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Ise[r]}function rL(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Rse(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Mse=eL,Dse=nL,Ib=["Enter"," "],jse=["ArrowDown","PageUp","Home"],iL=["ArrowUp","PageDown","End"],Ose=[...jse,...iL],Lse={ltr:[...Ib,"ArrowRight"],rtl:[...Ib,"ArrowLeft"]},Fse={ltr:["ArrowLeft"],rtl:["ArrowRight"]},eh="Menu",[Nd,Use,Bse]=Gw(eh),[tl,sL]=Xi(eh,[Bse,$m,ZO]),Wm=$m(),oL=ZO(),[Vse,nl]=tl(eh),[zse,th]=tl(eh),aL=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:s,modal:o=!0}=t,l=Wm(e),[u,d]=w.useState(null),f=w.useRef(!1),m=Gi(s),g=Kw(i);return w.useEffect(()=>{const y=()=>{f.current=!0,document.addEventListener("pointerdown",C,{capture:!0,once:!0}),document.addEventListener("pointermove",C,{capture:!0,once:!0})},C=()=>f.current=!1;return document.addEventListener("keydown",y,{capture:!0}),()=>{document.removeEventListener("keydown",y,{capture:!0}),document.removeEventListener("pointerdown",C,{capture:!0}),document.removeEventListener("pointermove",C,{capture:!0})}},[]),h.jsx(KO,{...l,children:h.jsx(Vse,{scope:e,open:n,onOpenChange:m,content:u,onContentChange:d,children:h.jsx(zse,{scope:e,onClose:w.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:f,dir:g,modal:o,children:r})})})};aL.displayName=eh;var $se="MenuAnchor",rk=w.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=Wm(n);return h.jsx(YO,{...i,...r,ref:e})});rk.displayName=$se;var ik="MenuPortal",[Wse,lL]=tl(ik,{forceMount:void 0}),cL=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,s=nl(ik,e);return h.jsx(Wse,{scope:e,forceMount:n,children:h.jsx(Xo,{present:n||s.open,children:h.jsx(Em,{asChild:!0,container:i,children:r})})})};cL.displayName=ik;var Vr="MenuContent",[Hse,sk]=tl(Vr),uL=w.forwardRef((t,e)=>{const n=lL(Vr,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=nl(Vr,t.__scopeMenu),o=th(Vr,t.__scopeMenu);return h.jsx(Nd.Provider,{scope:t.__scopeMenu,children:h.jsx(Xo,{present:r||s.open,children:h.jsx(Nd.Slot,{scope:t.__scopeMenu,children:o.modal?h.jsx(qse,{...i,ref:e}):h.jsx(Gse,{...i,ref:e})})})})}),qse=w.forwardRef((t,e)=>{const n=nl(Vr,t.__scopeMenu),r=w.useRef(null),i=wt(e,r);return w.useEffect(()=>{const s=r.current;if(s)return cw(s)},[]),h.jsx(ok,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ue(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Gse=w.forwardRef((t,e)=>{const n=nl(Vr,t.__scopeMenu);return h.jsx(ok,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Kse=Ra("MenuContent.ScrollLock"),ok=w.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:u,onEscapeKeyDown:d,onPointerDownOutside:f,onFocusOutside:m,onInteractOutside:g,onDismiss:y,disableOutsideScroll:C,...x}=t,k=nl(Vr,n),T=th(Vr,n),_=Wm(n),P=oL(n),E=Use(n),[I,A]=w.useState(null),L=w.useRef(null),R=wt(e,L,k.onContentChange),j=w.useRef(0),U=w.useRef(""),z=w.useRef(0),F=w.useRef(null),W=w.useRef("right"),Y=w.useRef(0),K=C?_m:w.Fragment,X=C?{as:Kse,allowPinchZoom:!0}:void 0,se=te=>{var ie,Se;const D=U.current+te,$=E().filter(Ce=>!Ce.disabled),re=document.activeElement,O=(ie=$.find(Ce=>Ce.ref.current===re))==null?void 0:ie.textValue,ve=$.map(Ce=>Ce.textValue),oe=ooe(ve,D,O),ce=(Se=$.find(Ce=>Ce.textValue===oe))==null?void 0:Se.ref.current;(function Ce(Le){U.current=Le,window.clearTimeout(j.current),Le!==""&&(j.current=window.setTimeout(()=>Ce(""),1e3))})(D),ce&&setTimeout(()=>ce.focus())};w.useEffect(()=>()=>window.clearTimeout(j.current),[]),lw();const H=w.useCallback(te=>{var $,re;return W.current===(($=F.current)==null?void 0:$.side)&&loe(te,(re=F.current)==null?void 0:re.area)},[]);return h.jsx(Hse,{scope:n,searchRef:U,onItemEnter:w.useCallback(te=>{H(te)&&te.preventDefault()},[H]),onItemLeave:w.useCallback(te=>{var D;H(te)||((D=L.current)==null||D.focus(),A(null))},[H]),onTriggerLeave:w.useCallback(te=>{H(te)&&te.preventDefault()},[H]),pointerGraceTimerRef:z,onPointerGraceIntentChange:w.useCallback(te=>{F.current=te},[]),children:h.jsx(K,{...X,children:h.jsx(Tm,{asChild:!0,trapped:i,onMountAutoFocus:Ue(s,te=>{var D;te.preventDefault(),(D=L.current)==null||D.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:h.jsx(Cm,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:f,onFocusOutside:m,onInteractOutside:g,onDismiss:y,children:h.jsx(Mse,{asChild:!0,...P,dir:T.dir,orientation:"vertical",loop:r,currentTabStopId:I,onCurrentTabStopIdChange:A,onEntryFocus:Ue(u,te=>{T.isUsingKeyboardRef.current||te.preventDefault()}),preventScrollOnEntryFocus:!0,children:h.jsx(JO,{role:"menu","aria-orientation":"vertical","data-state":EL(k.open),"data-radix-menu-content":"",dir:T.dir,..._,...x,ref:R,style:{outline:"none",...x.style},onKeyDown:Ue(x.onKeyDown,te=>{const $=te.target.closest("[data-radix-menu-content]")===te.currentTarget,re=te.ctrlKey||te.altKey||te.metaKey,O=te.key.length===1;$&&(te.key==="Tab"&&te.preventDefault(),!re&&O&&se(te.key));const ve=L.current;if(te.target!==ve||!Ose.includes(te.key))return;te.preventDefault();const ce=E().filter(ie=>!ie.disabled).map(ie=>ie.ref.current);iL.includes(te.key)&&ce.reverse(),ioe(ce)}),onBlur:Ue(t.onBlur,te=>{te.currentTarget.contains(te.target)||(window.clearTimeout(j.current),U.current="")}),onPointerMove:Ue(t.onPointerMove,Ad(te=>{const D=te.target,$=Y.current!==te.clientX;if(te.currentTarget.contains(D)&&$){const re=te.clientX>Y.current?"right":"left";W.current=re,Y.current=te.clientX}}))})})})})})})});uL.displayName=Vr;var Yse="MenuGroup",ak=w.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return h.jsx(ut.div,{role:"group",...r,ref:e})});ak.displayName=Yse;var Jse="MenuLabel",dL=w.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return h.jsx(ut.div,{...r,ref:e})});dL.displayName=Jse;var Xp="MenuItem",$_="menu.itemSelect",Hm=w.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,s=w.useRef(null),o=th(Xp,t.__scopeMenu),l=sk(Xp,t.__scopeMenu),u=wt(e,s),d=w.useRef(!1),f=()=>{const m=s.current;if(!n&&m){const g=new CustomEvent($_,{bubbles:!0,cancelable:!0});m.addEventListener($_,y=>r==null?void 0:r(y),{once:!0}),NM(m,g),g.defaultPrevented?d.current=!1:o.onClose()}};return h.jsx(hL,{...i,ref:u,disabled:n,onClick:Ue(t.onClick,f),onPointerDown:m=>{var g;(g=t.onPointerDown)==null||g.call(t,m),d.current=!0},onPointerUp:Ue(t.onPointerUp,m=>{var g;d.current||(g=m.currentTarget)==null||g.click()}),onKeyDown:Ue(t.onKeyDown,m=>{const g=l.searchRef.current!=="";n||g&&m.key===" "||Ib.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});Hm.displayName=Xp;var hL=w.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...s}=t,o=sk(Xp,n),l=oL(n),u=w.useRef(null),d=wt(e,u),[f,m]=w.useState(!1),[g,y]=w.useState("");return w.useEffect(()=>{const C=u.current;C&&y((C.textContent??"").trim())},[s.children]),h.jsx(Nd.ItemSlot,{scope:n,disabled:r,textValue:i??g,children:h.jsx(Dse,{asChild:!0,...l,focusable:!r,children:h.jsx(ut.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:d,onPointerMove:Ue(t.onPointerMove,Ad(C=>{r?o.onItemLeave(C):(o.onItemEnter(C),C.defaultPrevented||C.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ue(t.onPointerLeave,Ad(C=>o.onItemLeave(C))),onFocus:Ue(t.onFocus,()=>m(!0)),onBlur:Ue(t.onBlur,()=>m(!1))})})})}),Qse="MenuCheckboxItem",fL=w.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return h.jsx(yL,{scope:t.__scopeMenu,checked:n,children:h.jsx(Hm,{role:"menuitemcheckbox","aria-checked":Zp(n)?"mixed":n,...i,ref:e,"data-state":ck(n),onSelect:Ue(i.onSelect,()=>r==null?void 0:r(Zp(n)?!0:!n),{checkForDefaultPrevented:!1})})})});fL.displayName=Qse;var pL="MenuRadioGroup",[Xse,Zse]=tl(pL,{value:void 0,onValueChange:()=>{}}),mL=w.forwardRef((t,e)=>{const{value:n,onValueChange:r,...i}=t,s=Gi(r);return h.jsx(Xse,{scope:t.__scopeMenu,value:n,onValueChange:s,children:h.jsx(ak,{...i,ref:e})})});mL.displayName=pL;var gL="MenuRadioItem",vL=w.forwardRef((t,e)=>{const{value:n,...r}=t,i=Zse(gL,t.__scopeMenu),s=n===i.value;return h.jsx(yL,{scope:t.__scopeMenu,checked:s,children:h.jsx(Hm,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":ck(s),onSelect:Ue(r.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,n)},{checkForDefaultPrevented:!1})})})});vL.displayName=gL;var lk="MenuItemIndicator",[yL,eoe]=tl(lk,{checked:!1}),bL=w.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,s=eoe(lk,n);return h.jsx(Xo,{present:r||Zp(s.checked)||s.checked===!0,children:h.jsx(ut.span,{...i,ref:e,"data-state":ck(s.checked)})})});bL.displayName=lk;var toe="MenuSeparator",xL=w.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return h.jsx(ut.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});xL.displayName=toe;var noe="MenuArrow",wL=w.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=Wm(n);return h.jsx(QO,{...i,...r,ref:e})});wL.displayName=noe;var roe="MenuSub",[Nle,kL]=tl(roe),Bu="MenuSubTrigger",SL=w.forwardRef((t,e)=>{const n=nl(Bu,t.__scopeMenu),r=th(Bu,t.__scopeMenu),i=kL(Bu,t.__scopeMenu),s=sk(Bu,t.__scopeMenu),o=w.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:u}=s,d={__scopeMenu:t.__scopeMenu},f=w.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return w.useEffect(()=>f,[f]),w.useEffect(()=>{const m=l.current;return()=>{window.clearTimeout(m),u(null)}},[l,u]),h.jsx(rk,{asChild:!0,...d,children:h.jsx(hL,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":EL(n.open),...t,ref:dm(e,i.onTriggerChange),onClick:m=>{var g;(g=t.onClick)==null||g.call(t,m),!(t.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ue(t.onPointerMove,Ad(m=>{s.onItemEnter(m),!m.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:Ue(t.onPointerLeave,Ad(m=>{var y,C;f();const g=(y=n.content)==null?void 0:y.getBoundingClientRect();if(g){const x=(C=n.content)==null?void 0:C.dataset.side,k=x==="right",T=k?-5:5,_=g[k?"left":"right"],P=g[k?"right":"left"];s.onPointerGraceIntentChange({area:[{x:m.clientX+T,y:m.clientY},{x:_,y:g.top},{x:P,y:g.top},{x:P,y:g.bottom},{x:_,y:g.bottom}],side:x}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(m),m.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:Ue(t.onKeyDown,m=>{var y;const g=s.searchRef.current!=="";t.disabled||g&&m.key===" "||Lse[r.dir].includes(m.key)&&(n.onOpenChange(!0),(y=n.content)==null||y.focus(),m.preventDefault())})})})});SL.displayName=Bu;var CL="MenuSubContent",TL=w.forwardRef((t,e)=>{const n=lL(Vr,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=nl(Vr,t.__scopeMenu),o=th(Vr,t.__scopeMenu),l=kL(CL,t.__scopeMenu),u=w.useRef(null),d=wt(e,u);return h.jsx(Nd.Provider,{scope:t.__scopeMenu,children:h.jsx(Xo,{present:r||s.open,children:h.jsx(Nd.Slot,{scope:t.__scopeMenu,children:h.jsx(ok,{id:l.contentId,"aria-labelledby":l.triggerId,...i,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var m;o.isUsingKeyboardRef.current&&((m=u.current)==null||m.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:Ue(t.onFocusOutside,f=>{f.target!==l.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:Ue(t.onEscapeKeyDown,f=>{o.onClose(),f.preventDefault()}),onKeyDown:Ue(t.onKeyDown,f=>{var y;const m=f.currentTarget.contains(f.target),g=Fse[o.dir].includes(f.key);m&&g&&(s.onOpenChange(!1),(y=l.trigger)==null||y.focus(),f.preventDefault())})})})})})});TL.displayName=CL;function EL(t){return t?"open":"closed"}function Zp(t){return t==="indeterminate"}function ck(t){return Zp(t)?"indeterminate":t?"checked":"unchecked"}function ioe(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function soe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function ooe(t,e,n){const i=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=soe(t,Math.max(s,0));i.length===1&&(o=o.filter(d=>d!==n));const u=o.find(d=>d.toLowerCase().startsWith(i.toLowerCase()));return u!==n?u:void 0}function aoe(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const l=e[s],u=e[o],d=l.x,f=l.y,m=u.x,g=u.y;f>r!=g>r&&n<(m-d)*(r-f)/(g-f)+d&&(i=!i)}return i}function loe(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return aoe(n,e)}function Ad(t){return e=>e.pointerType==="mouse"?t(e):void 0}var coe=aL,uoe=rk,doe=cL,hoe=uL,foe=ak,poe=dL,moe=Hm,goe=fL,voe=mL,yoe=vL,boe=bL,xoe=xL,woe=wL,koe=SL,Soe=TL,qm="DropdownMenu",[Coe]=Xi(qm,[sL]),Yn=sL(),[Toe,PL]=Coe(qm),_L=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:s,onOpenChange:o,modal:l=!0}=t,u=Yn(e),d=w.useRef(null),[f,m]=kc({prop:i,defaultProp:s??!1,onChange:o,caller:qm});return h.jsx(Toe,{scope:e,triggerId:Es(),triggerRef:d,contentId:Es(),open:f,onOpenChange:m,onOpenToggle:w.useCallback(()=>m(g=>!g),[m]),modal:l,children:h.jsx(coe,{...u,open:f,onOpenChange:m,dir:r,modal:l,children:n})})};_L.displayName=qm;var IL="DropdownMenuTrigger",NL=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,s=PL(IL,n),o=Yn(n);return h.jsx(uoe,{asChild:!0,...o,children:h.jsx(ut.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:dm(e,s.triggerRef),onPointerDown:Ue(t.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(s.onOpenToggle(),s.open||l.preventDefault())}),onKeyDown:Ue(t.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&s.onOpenToggle(),l.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});NL.displayName=IL;var Eoe="DropdownMenuPortal",AL=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Yn(e);return h.jsx(doe,{...r,...n})};AL.displayName=Eoe;var RL="DropdownMenuContent",ML=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=PL(RL,n),s=Yn(n),o=w.useRef(!1);return h.jsx(hoe,{id:i.contentId,"aria-labelledby":i.triggerId,...s,...r,ref:e,onCloseAutoFocus:Ue(t.onCloseAutoFocus,l=>{var u;o.current||(u=i.triggerRef.current)==null||u.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:Ue(t.onInteractOutside,l=>{const u=l.detail.originalEvent,d=u.button===0&&u.ctrlKey===!0,f=u.button===2||d;(!i.modal||f)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ML.displayName=RL;var Poe="DropdownMenuGroup",_oe=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Yn(n);return h.jsx(foe,{...i,...r,ref:e})});_oe.displayName=Poe;var Ioe="DropdownMenuLabel",DL=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Yn(n);return h.jsx(poe,{...i,...r,ref:e})});DL.displayName=Ioe;var Noe="DropdownMenuItem",jL=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Yn(n);return h.jsx(moe,{...i,...r,ref:e})});jL.displayName=Noe;var Aoe="DropdownMenuCheckboxItem",OL=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Yn(n);return h.jsx(goe,{...i,...r,ref:e})});OL.displayName=Aoe;var Roe="DropdownMenuRadioGroup",Moe=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Yn(n);return h.jsx(voe,{...i,...r,ref:e})});Moe.displayName=Roe;var Doe="DropdownMenuRadioItem",LL=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Yn(n);return h.jsx(yoe,{...i,...r,ref:e})});LL.displayName=Doe;var joe="DropdownMenuItemIndicator",FL=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Yn(n);return h.jsx(boe,{...i,...r,ref:e})});FL.displayName=joe;var Ooe="DropdownMenuSeparator",UL=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Yn(n);return h.jsx(xoe,{...i,...r,ref:e})});UL.displayName=Ooe;var Loe="DropdownMenuArrow",Foe=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Yn(n);return h.jsx(woe,{...i,...r,ref:e})});Foe.displayName=Loe;var Uoe="DropdownMenuSubTrigger",BL=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Yn(n);return h.jsx(koe,{...i,...r,ref:e})});BL.displayName=Uoe;var Boe="DropdownMenuSubContent",VL=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Yn(n);return h.jsx(Soe,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});VL.displayName=Boe;var Voe=_L,zoe=NL,$oe=AL,zL=ML,$L=DL,WL=jL,HL=OL,qL=LL,GL=FL,KL=UL,YL=BL,JL=VL;const Woe=Voe,Hoe=zoe,qoe=w.forwardRef(({className:t,inset:e,children:n,...r},i)=>h.jsxs(YL,{ref:i,className:et("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...r,children:[n,h.jsx(aI,{className:"ml-auto"})]}));qoe.displayName=YL.displayName;const Goe=w.forwardRef(({className:t,...e},n)=>h.jsx(JL,{ref:n,className:et("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));Goe.displayName=JL.displayName;const QL=w.forwardRef(({className:t,sideOffset:e=4,...n},r)=>h.jsx($oe,{children:h.jsx(zL,{ref:r,sideOffset:e,className:et("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));QL.displayName=zL.displayName;const Nb=w.forwardRef(({className:t,inset:e,...n},r)=>h.jsx(WL,{ref:r,className:et("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",e&&"pl-8",t),...n}));Nb.displayName=WL.displayName;const Koe=w.forwardRef(({className:t,children:e,checked:n,...r},i)=>h.jsxs(HL,{ref:i,className:et("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(GL,{children:h.jsx(Mo,{className:"h-4 w-4"})})}),e]}));Koe.displayName=HL.displayName;const Yoe=w.forwardRef(({className:t,children:e,...n},r)=>h.jsxs(qL,{ref:r,className:et("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(GL,{children:h.jsx($U,{className:"h-2 w-2 fill-current"})})}),e]}));Yoe.displayName=qL.displayName;const Joe=w.forwardRef(({className:t,inset:e,...n},r)=>h.jsx($L,{ref:r,className:et("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));Joe.displayName=$L.displayName;const Ab=w.forwardRef(({className:t,...e},n)=>h.jsx(KL,{ref:n,className:et("-mx-1 my-1 h-px bg-muted",t),...e}));Ab.displayName=KL.displayName;var XL="AlertDialog",[Qoe]=Xi(XL,[JM]),Us=JM(),ZL=t=>{const{__scopeAlertDialog:e,...n}=t,r=Us(e);return h.jsx(hD,{...r,...n,modal:!0})};ZL.displayName=XL;var Xoe="AlertDialogTrigger",Zoe=w.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Us(n);return h.jsx(oZ,{...i,...r,ref:e})});Zoe.displayName=Xoe;var eae="AlertDialogPortal",e2=t=>{const{__scopeAlertDialog:e,...n}=t,r=Us(e);return h.jsx(fD,{...r,...n})};e2.displayName=eae;var tae="AlertDialogOverlay",t2=w.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Us(n);return h.jsx(fw,{...i,...r,ref:e})});t2.displayName=tae;var lc="AlertDialogContent",[nae,rae]=Qoe(lc),iae=M$("AlertDialogContent"),n2=w.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...i}=t,s=Us(n),o=w.useRef(null),l=wt(e,o),u=w.useRef(null);return h.jsx(nZ,{contentName:lc,titleName:r2,docsSlug:"alert-dialog",children:h.jsx(nae,{scope:n,cancelRef:u,children:h.jsxs(pw,{role:"alertdialog",...s,...i,ref:l,onOpenAutoFocus:Ue(i.onOpenAutoFocus,d=>{var f;d.preventDefault(),(f=u.current)==null||f.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[h.jsx(iae,{children:r}),h.jsx(oae,{contentRef:o})]})})})});n2.displayName=lc;var r2="AlertDialogTitle",i2=w.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Us(n);return h.jsx(mw,{...i,...r,ref:e})});i2.displayName=r2;var s2="AlertDialogDescription",o2=w.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Us(n);return h.jsx(gw,{...i,...r,ref:e})});o2.displayName=s2;var sae="AlertDialogAction",a2=w.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Us(n);return h.jsx(vw,{...i,...r,ref:e})});a2.displayName=sae;var l2="AlertDialogCancel",c2=w.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:i}=rae(l2,n),s=Us(n),o=wt(e,i);return h.jsx(vw,{...s,...r,ref:o})});c2.displayName=l2;var oae=({contentRef:t})=>{const e=`\`${lc}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${lc}\` by passing a \`${s2}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${lc}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return w.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},aae=ZL,lae=e2,u2=t2,d2=n2,h2=a2,f2=c2,p2=i2,m2=o2;const cae=aae,uae=lae,g2=w.forwardRef(({className:t,...e},n)=>h.jsx(u2,{className:et("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));g2.displayName=u2.displayName;const v2=w.forwardRef(({className:t,...e},n)=>h.jsxs(uae,{children:[h.jsx(g2,{}),h.jsx(d2,{ref:n,className:et("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));v2.displayName=d2.displayName;const y2=({className:t,...e})=>h.jsx("div",{className:et("flex flex-col space-y-2 text-center sm:text-left",t),...e});y2.displayName="AlertDialogHeader";const b2=({className:t,...e})=>h.jsx("div",{className:et("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});b2.displayName="AlertDialogFooter";const x2=w.forwardRef(({className:t,...e},n)=>h.jsx(p2,{ref:n,className:et("text-lg font-semibold",t),...e}));x2.displayName=p2.displayName;const w2=w.forwardRef(({className:t,...e},n)=>h.jsx(m2,{ref:n,className:et("text-sm text-muted-foreground",t),...e}));w2.displayName=m2.displayName;const k2=w.forwardRef(({className:t,...e},n)=>h.jsx(h2,{ref:n,className:et(Nx(),t),...e}));k2.displayName=h2.displayName;const S2=w.forwardRef(({className:t,...e},n)=>h.jsx(f2,{ref:n,className:et(Nx({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));S2.displayName=f2.displayName;async function dae(t){try{console.log(" [verifyUser] Calling /api/users/whoami with token");const e=await Ya("/users/whoami",{Authorization:`Bearer ${t}`});console.log(" [verifyUser] Response status:",e.status),console.log(" [verifyUser] Response ok:",e.ok);const n=await e.json();return console.log(" [verifyUser] Response data:",n),{success:!0,data:n}}catch(e){console.error(" [verifyUser] Error:",e);let n="Authentication failed. Please try again.";return e instanceof Error&&(console.error(" [verifyUser] Error message:",e.message),n=e.message,n.includes("401")||n.includes("INVALID_AUTH_TOKEN")?n="User not found in database. Please sign up first.":n.includes("Token was invalid")&&(n="Invalid authentication token. Please try signing in again.")),{success:!1,error:n}}}async function hae({companyName:t,companyLogoUrl:e,token:n}){try{let r=n;if(!r){const o=st.currentUser;if(!o)return{success:!1,error:"No user is currently signed in"};r=await o.getIdToken()}const s=await(await Fs("/users/create",{companyName:t,companyLogoUrl:e||null},{Authorization:`Bearer ${r}`})).json();return s&&(s._id||s.firebaseUid||s.id)?{success:!0,data:s}:s.success&&s.data?{success:!0,data:s.data}:{success:!1,error:s.error||"Failed to create user"}}catch(r){return Kt(r)}}async function fae(t){try{let e=t;if(!e){const i=st.currentUser;if(!i)return{success:!1,error:"No user is currently signed in"};e=await i.getIdToken()}const r=await(await Fs("/users/delete",{},{Authorization:`Bearer ${e}`})).json();return r.success&&r.data?{success:!0,data:r.data}:r&&r.message?{success:!0,data:r}:{success:!1,error:r.error||"Failed to delete account"}}catch(e){return Kt(e)}}function pae(){const t=Os(),[e,n]=w.useState(null),[r,i]=w.useState([]),[s,o]=w.useState(!0),[l,u]=w.useState(null),[d,f]=w.useState(!1),[m,g]=w.useState(!1);w.useEffect(()=>{const T=Xa(st,async _=>{if(console.log(" [Home] Auth state changed, user:",_==null?void 0:_.email),n(_),!_){console.warn(" [Home] No user found, redirecting to base website"),window.location.href="/";return}(async()=>{o(!0),u(null);try{console.log(" [Home] Fetching assessments...");const E=await lG();if(console.log(" [Home] getAssessments result:",E),E.success)console.log(" [Home] Assessments loaded:",E.data),i(E.data||[]);else{const I="error"in E?E.error:"Failed to load assessments";u(I),console.error(" [Home] Failed to load assessments:",I)}}catch(E){console.error(" [Home] Error fetching assessments:",E),u(E.message||"An unexpected error occurred")}finally{o(!1)}})()});return()=>T()},[]);const y=async()=>{try{await hE(st),window.location.href="/"}catch(T){console.error("Logout error:",T),window.location.href="/"}},C=async()=>{g(!0);try{const T=await fae();if(T.success){console.log(" Account deleted successfully");const _=st.currentUser;if(_)try{await qH(_),console.log(" Firebase user deleted")}catch(P){console.error(" Failed to delete Firebase user:",P)}await hE(st),window.location.href="/"}else{const _="error"in T?T.error:"Failed to delete account";alert(_),g(!1),f(!1)}}catch(T){console.error("Error deleting account:",T),alert("Failed to delete account. Please try again."),g(!1),f(!1)}},x=async T=>{if(confirm("Are you sure you want to delete this assessment?"))try{const _=await uG(T);if(_.success)i(r.filter(P=>P._id!==T));else{const P="error"in _?_.error:"Failed to delete assessment";alert(P)}}catch(_){console.error("Error deleting assessment:",_),alert("Failed to delete assessment")}},k=T=>{if(T<60)return`${T}m`;const _=Math.floor(T/60),P=T%60;return P>0?`${_}h ${P}m`:`${_}h`};return h.jsx("div",{className:"min-h-screen bg-[#f8f9fb]",children:h.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-8",children:[h.jsxs(_e.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center justify-between mb-8",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-2xl font-bold text-[#1E3A8A] mb-1",children:"Assessments"}),h.jsx("p",{className:"text-gray-500 text-sm",children:"Manage your technical assessments"})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(gr,{to:Be("CreateAssessment"),children:h.jsxs(Ee,{className:"bg-[#1E3A8A] hover:bg-[#152a66] text-white rounded-full px-5",children:[h.jsx(Xy,{className:"w-4 h-4 mr-2"}),"New Assessment"]})}),h.jsx(gr,{to:Be("Subscription"),children:h.jsxs(Ee,{variant:"outline",className:"border-[#1E3A8A] text-[#1E3A8A] hover:bg-[#1E3A8A]/5 rounded-full px-5",children:[h.jsx(YU,{className:"w-4 h-4 mr-2"}),"Subscription"]})}),h.jsxs(Woe,{children:[h.jsx(Hoe,{asChild:!0,children:h.jsx(Ee,{variant:"ghost",className:"rounded-full h-9 w-9 p-0",children:h.jsx("div",{className:"w-8 h-8 rounded-full bg-[#1E3A8A] flex items-center justify-center",children:h.jsx(F4,{className:"w-4 h-4 text-white"})})})}),h.jsxs(QL,{align:"end",className:"w-56",children:[e&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"px-2 py-1.5 text-sm text-gray-500",children:h.jsx("div",{className:"font-medium text-gray-900",children:e.email})}),h.jsx(Ab,{})]}),h.jsxs(Nb,{onClick:y,className:"text-red-600 cursor-pointer",children:[h.jsx(l4,{className:"w-4 h-4 mr-2"}),"Log out"]}),h.jsx(Ab,{}),h.jsxs(Nb,{onClick:()=>f(!0),className:"text-red-600 cursor-pointer",children:[h.jsx(Zy,{className:"w-4 h-4 mr-2"}),"Delete account"]})]})]})]})]}),h.jsx(cae,{open:d,onOpenChange:f,children:h.jsxs(v2,{children:[h.jsxs(y2,{children:[h.jsxs(x2,{className:"flex items-center gap-2 text-red-600",children:[h.jsx(D4,{className:"w-5 h-5"}),"Delete Account"]}),h.jsxs(w2,{className:"pt-2",children:["This action cannot be undone. This will permanently delete your account and all associated data, including:",h.jsxs("ul",{className:"list-disc list-inside mt-3 space-y-1 text-sm",children:[h.jsx("li",{children:"All your assessments"}),h.jsx("li",{children:"All candidate submissions"}),h.jsx("li",{children:"All interview data and transcripts"}),h.jsx("li",{children:"Your subscription (if active)"}),h.jsx("li",{children:"All code embeddings and indexed data"})]}),h.jsx("p",{className:"mt-4 font-semibold",children:"Are you absolutely sure you want to proceed?"})]})]}),h.jsxs(b2,{children:[h.jsx(S2,{disabled:m,children:"Cancel"}),h.jsx(k2,{onClick:C,disabled:m,className:"bg-red-600 hover:bg-red-700 text-white",children:m?"Deleting...":"Yes, delete my account"})]})]})}),l&&h.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700",children:l}),s?h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3].map(T=>h.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-5 animate-pulse",children:[h.jsx("div",{className:"h-5 bg-gray-200 rounded w-3/4 mb-3"}),h.jsx("div",{className:"h-4 bg-gray-100 rounded w-full mb-4"}),h.jsx("div",{className:"h-8 bg-gray-100 rounded w-1/3"})]},T))}):r.length===0?h.jsxs(_e.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white rounded-xl border border-gray-200 p-12 text-center",children:[h.jsx("div",{className:"w-16 h-16 rounded-2xl bg-[#1E3A8A]/10 flex items-center justify-center mx-auto mb-4",children:h.jsx(hp,{className:"w-8 h-8 text-[#1E3A8A]"})}),h.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No assessments yet"}),h.jsx("p",{className:"text-gray-500 mb-6",children:"Create your first technical assessment to start evaluating candidates"}),h.jsx(gr,{to:Be("CreateAssessment"),children:h.jsxs(Ee,{className:"bg-[#1E3A8A] hover:bg-[#152a66] text-white rounded-full px-6",children:[h.jsx(Xy,{className:"w-4 h-4 mr-2"}),"Create Assessment"]})})]}):h.jsx(_e.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map((T,_)=>h.jsxs(_e.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:_*.05},className:"bg-white rounded-xl border border-gray-200 p-5 hover:shadow-md transition-shadow group cursor-pointer",onClick:()=>{t(Be("AssessmentEditor")+`?id=${T._id}`)},children:[h.jsxs("div",{className:"flex items-start justify-between mb-3",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("h3",{className:"font-semibold text-gray-900 mb-1 line-clamp-1",children:T.title}),h.jsx(Ii,{className:"bg-blue-100 text-blue-700",children:"Active"})]}),h.jsx("button",{onClick:P=>{P.stopPropagation(),x(T._id)},className:"p-1.5 hover:bg-red-50 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity text-red-600 hover:text-red-700",title:"Delete assessment",children:h.jsx(Zy,{className:"w-4 h-4"})})]}),h.jsx("p",{className:"text-sm text-gray-500 mb-4 line-clamp-2",children:T.description||"No description"}),h.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-4",children:[h.jsxs("div",{className:"flex items-center gap-1.5",children:[h.jsx(Ps,{className:"w-4 h-4"}),h.jsx("span",{children:k(T.timeLimit)})]}),h.jsxs("div",{className:"flex items-center gap-1.5",children:[h.jsx(hp,{className:"w-4 h-4"}),h.jsxs("span",{children:["Created"," ",new Date(T.createdAt).toLocaleDateString()]})]})]}),h.jsx("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100",onClick:P=>P.stopPropagation(),children:h.jsx(gr,{to:Be("SubmissionsDashboard")+`?assessmentId=${T._id}`,className:"flex-1",children:h.jsxs(Ee,{variant:"outline",size:"sm",className:"w-full text-[#1E3A8A] border-[#1E3A8A]/20 hover:bg-[#1E3A8A]/5",children:[h.jsx(zu,{className:"w-4 h-4 mr-1.5"}),"Submissions"]})})})]},T._id))})]})})}function mae({isOpen:t,onClose:e}){const[n,r]=w.useState(""),[i,s]=w.useState(""),[o,l]=w.useState(!1),[u,d]=w.useState(""),f=async m=>{m.preventDefault(),d(""),l(!0);try{console.log(" [AuthModal] Starting sign in process..."),console.log("   Email:",n),console.log("   Step 1: Authenticating with Firebase...");const y=await(await $H(st,n,i)).user.getIdToken();console.log("    Firebase authentication successful"),console.log("   Step 2: Verifying user with backend...");const C=await dae(y);if(console.log("   [AuthModal] verifyUser result:",C),!C.success){const k="error"in C?C.error:"Authentication failed. Please try again.";console.error("    Backend verification failed:",k),d(k),l(!1);return}console.log("    Backend verification successful");const x=Be("Home");console.log("   Step 3: Redirecting to Home..."),console.log("   URL:",x),e(),setTimeout(()=>{window.location.href=x},100)}catch(g){console.error(" [AuthModal] Auth error:",g),console.error("   Error code:",g.code),console.error("   Error message:",g.message),g instanceof Error&&(g.message.includes("auth/invalid-email")?d("Invalid email address"):g.message.includes("auth/wrong-password")?d("Incorrect password"):g.message.includes("auth/user-not-found")?d("No account found with this email"):d("Login failed. Please try again.")),l(!1)}};return t?h.jsx(Bo,{children:h.jsx(_e.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:e,children:h.jsxs(_e.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:m=>m.stopPropagation(),className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden",children:[h.jsxs("div",{className:"relative bg-gradient-to-br from-[#1E3A8A] to-[#1e40af] px-6 py-8 text-center",children:[h.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-white/70 hover:text-white transition-colors",children:h.jsx(fi,{className:"w-5 h-5"})}),h.jsx("div",{className:"w-14 h-14 rounded-2xl bg-white flex items-center justify-center mx-auto mb-4 overflow-hidden",children:h.jsx("img",{src:$o,alt:"Bridge",className:"w-full h-full object-contain"})}),h.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:"Welcome back"}),h.jsx("p",{className:"text-blue-200 text-sm",children:"Sign in to continue to your dashboard"})]}),h.jsxs("div",{className:"p-6",children:[h.jsxs("form",{onSubmit:f,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Email address"}),h.jsxs("div",{className:"relative",children:[h.jsx(Wb,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),h.jsx(xn,{type:"email",value:n,onChange:m=>r(m.target.value),placeholder:"you@company.com",className:"pl-10",required:!0})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Password"}),h.jsxs("div",{className:"relative",children:[h.jsx(hI,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),h.jsx(xn,{type:"password",value:i,onChange:m=>s(m.target.value),placeholder:"Enter your password",className:"pl-10",required:!0})]})]}),u&&h.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700",children:[h.jsx(tm,{className:"w-4 h-4 flex-shrink-0"}),h.jsx("span",{children:u})]}),h.jsx(Ee,{type:"submit",disabled:o,className:"w-full bg-[#1E3A8A] hover:bg-[#152a66] text-white py-5 rounded-xl font-semibold",children:o?h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Signing in..."]}):h.jsxs("span",{className:"flex items-center justify-center gap-2",children:["Sign In",h.jsx(_c,{className:"w-4 h-4"})]})})]}),h.jsxs("div",{className:"mt-6 text-center text-sm text-gray-500",children:["Don't have an account?"," ",h.jsx("button",{onClick:()=>{e(),window.location.href=Be("GetStarted")},className:"text-[#1E3A8A] font-medium hover:underline",children:"Sign up free"})]})]})]})})}):null}function gae(){const[t,e]=w.useState("ai"),[n,r]=w.useState(""),[i,s]=w.useState(""),[o,l]=w.useState(""),[u,d]=w.useState(60),[f,m]=w.useState(""),[g,y]=w.useState(!1),[C,x]=w.useState(!1),[k,T]=w.useState(""),[_,P]=w.useState(0),[E,I]=w.useState(!0),A=w.useRef(null),L=["Looking for a backend intern with Node + Postgres experience to build internal APIs","Seeking a full-stack MERN + Langchain developer to work on MongoDB, Express, React, Node.js, and AI-powered applications","Need a senior engineer with experience in distributed systems and microservices architecture","Hiring a frontend developer skilled in TypeScript, Next.js, and modern UI frameworks"];w.useEffect(()=>{st.currentUser&&(window.location.href=Be("Home"))},[]),w.useEffect(()=>{if(n||t!=="ai")return;const W=L[_];let Y;return E?k.length<W.length?Y=setTimeout(()=>{T(W.slice(0,k.length+1))},50):Y=setTimeout(()=>{I(!1)},2e3):k.length>0?Y=setTimeout(()=>{T(k.slice(0,-1))},30):(P(K=>(K+1)%L.length),I(!0)),()=>{Y&&clearTimeout(Y)}},[k,E,_,n,t]);const R=n||t!=="ai"?L[0]:k,j=()=>{const W=A.current;if(W){W.style.height="auto";const Y=180,K=W.scrollHeight,X=Math.max(Y,K);W.style.height=`${X}px`,W.style.minHeight=`${Y}px`}};w.useEffect(()=>{j()},[]),w.useEffect(()=>{const W=setTimeout(()=>{j()},0);return()=>clearTimeout(W)},[n,t]);const U=async()=>{const W=st.currentUser;localStorage.setItem("pending_creation_mode",t),t==="ai"?n.trim()&&localStorage.setItem("pending_job_description",n.trim()):(i.trim()&&localStorage.setItem("pending_manual_title",i.trim()),o.trim()&&localStorage.setItem("pending_manual_description",o.trim()),localStorage.setItem("pending_manual_timeLimit",u.toString()),f.trim()&&localStorage.setItem("pending_starter_files_link",f.trim())),W?window.location.href=Be("CreateAssessment"):window.location.href=Be("GetStarted")},z=W=>{W.key==="Enter"&&!W.shiftKey&&(W.preventDefault(),U())},F=W=>{r(W)};return h.jsxs("div",{className:"min-h-screen bg-white",children:[h.jsx("div",{className:"absolute top-4 left-0 right-0 z-50 flex justify-center px-6",children:h.jsxs("nav",{className:"bg-white/80 backdrop-blur-md rounded-full shadow-lg border border-gray-200/50 px-4 py-2 flex items-center justify-between gap-12",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-7 h-7 rounded-lg overflow-hidden flex items-center justify-center",children:h.jsx("img",{src:$o,alt:"Bridge",className:"w-full h-full object-contain"})}),h.jsx("span",{className:"font-semibold text-gray-900 text-sm",children:"Bridge"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Ee,{onClick:()=>{window.location.href=Be("Pricing")},variant:"ghost",className:"text-gray-700 hover:text-gray-900 rounded-full text-sm px-4 py-1.5 h-auto",children:"Pricing"}),h.jsx(Ee,{onClick:()=>{window.location.href=Be("Contact")},variant:"ghost",className:"text-gray-700 hover:text-gray-900 rounded-full text-sm px-4 py-1.5 h-auto",children:"Contact"}),h.jsx(Ee,{onClick:()=>{st.currentUser?window.location.href=Be("Home"):x(!0)},variant:"ghost",className:"text-gray-700 hover:text-gray-900 rounded-full text-sm px-4 py-1.5 h-auto",children:"Sign In"}),h.jsx(Ee,{onClick:()=>{window.location.href=Be("GetStarted")},variant:"ghost",className:"text-gray-700 hover:text-gray-900 rounded-full text-sm px-4 py-1.5 h-auto",children:"Sign Up"}),h.jsx(Ee,{onClick:()=>window.open("https://calendly.com/smahadkar-ucsd/30min","_blank"),className:"bg-[#1E3A8A] hover:bg-[#152a66] text-white rounded-full text-sm px-4 py-1.5 h-auto",children:"Book a Demo"})]})]})}),h.jsx("div",{className:"bg-gradient-to-b from-[#dbeafe] via-[#eff6ff] to-white",children:h.jsxs("div",{className:"max-w-4xl mx-auto px-6 pt-24 pb-16 md:pt-28 md:pb-24",children:[h.jsxs(_e.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[h.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-4 tracking-tight",children:["Describe the role. ",h.jsx("br",{})," Bridge builds the evaluation pipeline."]}),h.jsx("p",{className:"text-lg text-gray-500 max-w-2xl mx-auto leading-relaxed mb-6",children:"Drop in a job description. Bridge creates a custom take-home, interviews completed submissions, and shows you why candidates dropped out"})]}),h.jsxs(_e.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5,delay:.15},className:"flex justify-center mb-8 gap-4",children:[h.jsx("button",{onClick:()=>e("ai"),className:`px-6 py-3 rounded-xl font-medium transition-all ${t==="ai"?"bg-[#1E3A8A] text-white shadow-md":"bg-white text-gray-700 border border-gray-200 hover:border-[#1E3A8A]/30"}`,children:"Generate with AI"}),h.jsx("button",{onClick:()=>e("manual"),className:`px-6 py-3 rounded-xl font-medium transition-all ${t==="manual"?"bg-[#1E3A8A] text-white shadow-md":"bg-white text-gray-700 border border-gray-200 hover:border-[#1E3A8A]/30"}`,children:"Create Manually"})]}),h.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"bg-white rounded-2xl shadow-[0_4px_40px_rgba(0,0,0,0.06)] border border-gray-100 overflow-hidden",children:[h.jsx("div",{className:"p-6 md:p-8",children:h.jsx(Bo,{mode:"wait",children:t==="ai"?h.jsxs(_e.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},children:[h.jsx("div",{className:"mb-5",children:h.jsx(CA,{onSelect:F,selectedPreset:n})}),h.jsx("div",{className:"relative",children:h.jsx(Is,{ref:A,value:n,onChange:W=>{r(W.target.value),setTimeout(()=>j(),0)},onKeyDown:z,onFocus:W=>{const Y=W.target,K=Y.offsetHeight,X=180;K<X&&(Y.style.height=`${X}px`,Y.style.minHeight=`${X}px`),j()},onInput:j,placeholder:R,className:"w-full text-base md:text-lg leading-relaxed resize-none border-0 focus-visible:ring-0 focus-visible:ring-offset-0 placeholder:text-gray-400 p-0",style:{minHeight:"180px",height:"180px"}})}),h.jsxs("p",{className:"text-sm text-gray-400 mt-4",children:["Press"," ",h.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-gray-500 font-mono text-xs",children:"Enter"})," ","to generate "," ",h.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-gray-500 font-mono text-xs",children:"Shift+Enter"})," ","for new line"]})]},"ai-mode"):h.jsxs(_e.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"space-y-5",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assessment Title"}),h.jsx(xn,{type:"text",value:i,onChange:W=>s(W.target.value),placeholder:"e.g., Backend API Development Assessment",className:"w-full"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assessment Description"}),h.jsx(Is,{value:o,onChange:W=>l(W.target.value),placeholder:"Describe the take-home project, requirements, and what you're looking for in the candidate's submission...",className:"w-full min-h-[200px] text-base leading-relaxed"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Limit (minutes)"}),h.jsx(xn,{type:"number",value:u,onChange:W=>{const Y=parseInt(W.target.value,10);!isNaN(Y)&&Y>0&&d(Y)},min:"1",max:"10080",className:"w-full"}),h.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Enter time limit in minutes (1-10080, max 1 week)"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Starter Files GitHub Link (Optional)"}),h.jsx(xn,{type:"url",value:f,onChange:W=>m(W.target.value),placeholder:"https://github.com/username/repo",className:"w-full"}),h.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Provide a GitHub repository link with starter files and instructions. Candidates will have access to this link when they start the assessment."})]})]},"manual-mode")})}),h.jsx("div",{className:"px-6 md:px-8 py-4 bg-gray-50/50 border-t border-gray-100 flex justify-end",children:h.jsx(Ee,{onClick:U,disabled:g||t==="ai"&&!n.trim()||t==="manual"&&(!i.trim()||!o.trim()||u<1),className:"bg-[#FFFF00] hover:bg-[#faed00] text-[#1E3A8A] px-6 py-2.5 h-auto rounded-xl font-semibold transition-all duration-200 disabled:opacity-50 shadow-sm",children:h.jsx(Bo,{mode:"wait",children:g?h.jsxs(_e.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex items-center gap-2",children:[h.jsx("span",{children:"Generating"}),h.jsxs("span",{className:"flex gap-0.5",children:[h.jsx(_e.span,{animate:{opacity:[.2,1,.2]},transition:{duration:1.2,repeat:1/0,delay:0},children:"."}),h.jsx(_e.span,{animate:{opacity:[.2,1,.2]},transition:{duration:1.2,repeat:1/0,delay:.2},children:"."}),h.jsx(_e.span,{animate:{opacity:[.2,1,.2]},transition:{duration:1.2,repeat:1/0,delay:.4},children:"."})]})]},"loading"):h.jsxs(_e.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex items-center gap-2",children:[t==="ai"?"Generate with AI":"Create Assessment",h.jsx(_c,{className:"w-4 h-4"})]},"default")})})})]})]})}),h.jsx("div",{className:"bg-white py-16 md:py-24",children:h.jsxs("div",{className:"max-w-5xl mx-auto px-6",children:[h.jsxs(_e.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"text-center mb-12",children:[h.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"See Bridge in Action"}),h.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Watch how Bridge transforms job descriptions into a comprehensive pipeline"})]}),h.jsx(_e.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.2},className:"relative w-full rounded-2xl overflow-hidden shadow-2xl bg-gray-900 aspect-video",children:h.jsx("iframe",{className:"absolute inset-0 w-full h-full",src:"https://www.youtube.com/embed/VcXoKLQ14Zg?si=nh3IAQUBBI3pwOjm",title:"Bridge Demo Video",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]})}),h.jsx("div",{className:"bg-gray-50 py-20 md:py-32",children:h.jsxs("div",{className:"max-w-6xl mx-auto px-6",children:[h.jsx(_e.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5},className:"text-center mb-16",children:h.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-4 tracking-tight",children:"Traditional Hiring vs Bridge"})}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[h.jsxs(_e.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.1},className:"bg-white rounded-2xl shadow-lg p-8 flex flex-col",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[h.jsx("div",{className:"w-12 h-12 rounded-lg bg-gray-200 flex items-center justify-center",children:h.jsx(Ps,{className:"w-6 h-6 text-gray-600"})}),h.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Traditional Hiring Methods"})]}),h.jsxs("ul",{className:"space-y-6 flex-grow mb-6",children:[h.jsxs("li",{className:"flex items-start gap-3",children:[h.jsx("div",{className:"flex-shrink-0 mt-0.5",children:h.jsx(fi,{className:"w-5 h-5 text-gray-400"})}),h.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Static assessments are outdated. Fixed question banks ignore your stack, and are easy to find online."})]}),h.jsxs("li",{className:"flex items-start gap-3",children:[h.jsx("div",{className:"flex-shrink-0 mt-0.5",children:h.jsx(fi,{className:"w-5 h-5 text-gray-400"})}),h.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Take-homes are slow to build, and candidates drop off without teams ever knowing why."})]}),h.jsxs("li",{className:"flex items-start gap-3",children:[h.jsx("div",{className:"flex-shrink-0 mt-0.5",children:h.jsx(fi,{className:"w-5 h-5 text-gray-400"})}),h.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Platforms like HackerRank and LeetCode test algorithm trivia, not real engineering work."})]})]}),h.jsx("div",{className:"border-t border-gray-200 my-6"}),h.jsx("p",{className:"text-gray-600 font-medium text-center",children:"Exhausting. Low-response. Luck-based."})]}),h.jsxs(_e.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.2},className:"bg-white rounded-2xl shadow-lg p-8 flex flex-col",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[h.jsx("div",{className:"w-12 h-12 rounded-lg bg-[#1E3A8A] flex items-center justify-center overflow-hidden",children:h.jsx("img",{src:"/bridge-logo.svg",alt:"Bridge",className:"w-7 h-7 object-contain"})}),h.jsx("h3",{className:"text-2xl font-bold text-[#1E3A8A]",children:"Bridge"})]}),h.jsxs("ul",{className:"space-y-6 flex-grow mb-6",children:[h.jsxs("li",{className:"flex items-start gap-3",children:[h.jsx("div",{className:"flex-shrink-0 mt-0.5",children:h.jsx(Mo,{className:"w-5 h-5 text-[#1E3A8A]"})}),h.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Bridge replaces fixed question banks with dynamic, role-specific projects tailored to your stack."})]}),h.jsxs("li",{className:"flex items-start gap-3",children:[h.jsx("div",{className:"flex-shrink-0 mt-0.5",children:h.jsx(Mo,{className:"w-5 h-5 text-[#1E3A8A]"})}),h.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Bridge automates take-homes and captures why candidates opt out."})]}),h.jsxs("li",{className:"flex items-start gap-3",children:[h.jsx("div",{className:"flex-shrink-0 mt-0.5",children:h.jsx(Mo,{className:"w-5 h-5 text-[#1E3A8A]"})}),h.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Bridge tests real engineering through projects and AI-led technical interviews."})]})]}),h.jsx("div",{className:"border-t border-gray-200 my-6"}),h.jsx("p",{className:"text-[#1E3A8A] font-medium text-center",children:"Automatic. High-response. Skill-based."})]})]})]})}),h.jsx("div",{className:"bg-[#1E3A8A] py-16 md:py-24",children:h.jsx("div",{className:"max-w-4xl mx-auto px-6 text-center",children:h.jsxs(_e.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5},children:[h.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"Ready to Transform Your Hiring Process?"}),h.jsx("p",{className:"text-blue-200 text-lg mb-8 max-w-2xl mx-auto",children:"Join teams who've replaced outdated assessments with Bridge's AI-powered evaluation pipeline."}),h.jsx(Ee,{onClick:()=>window.open("https://calendly.com/smahadkar-ucsd/30min","_blank"),className:"bg-[#FFFF00] hover:bg-[#faed00] text-[#1E3A8A] px-8 py-3 h-auto rounded-xl font-semibold shadow-lg",children:"Book a Demo"})]})})}),h.jsx(mae,{isOpen:C,onClose:()=>x(!1)})]})}function vae(){const[t,e]=w.useState(""),[n,r]=w.useState(""),[i,s]=w.useState(""),[o,l]=w.useState(!1),[u,d]=w.useState(""),[f,m]=w.useState(null);w.useEffect(()=>{const y=localStorage.getItem("pending_email");y&&(e(y),localStorage.removeItem("pending_email"));const C=st.currentUser;m(C),C&&C.email&&e(C.email)},[]);const g=async y=>{var C,x;if(y.preventDefault(),d(""),!f){l(!0);try{await zH(st,t,n),m(st.currentUser)}catch(k){console.error("Sign up error:",k),k.code==="auth/email-already-in-use"?d("This email is already registered. Please sign in instead."):k.code==="auth/invalid-email"?d("Invalid email address"):k.code==="auth/weak-password"?d("Password should be at least 6 characters"):d("Failed to create account. Please try again."),l(!1);return}}l(!0);try{if(!st.currentUser)throw new Error("User not authenticated");console.log(" [GetStarted] Saving user data to backend..."),console.log("   Company Name:",i),console.log("   Current User exists:",!!f);const T={companyName:i};try{console.log("    Creating user in backend...");const P=await hae(T);if(!P.success){const E="error"in P?P.error:"Failed to create user";throw new Error(E)}console.log("    User created successfully")}catch(P){if(console.error("Backend user creation error:",P),((C=P.message)==null?void 0:C.includes("Failed to fetch"))||((x=P.message)==null?void 0:x.includes("NetworkError")))console.warn("Backend is offline. Storing data locally for later sync."),localStorage.setItem("pending_backend_sync",JSON.stringify({companyName:i,timestamp:Date.now()}));else{console.error("Backend error details:",P),d(P.message||"Failed to create user account. Please try again."),l(!1);return}}localStorage.setItem("company_name",i),localStorage.setItem("user_email",t),localStorage.getItem("redirect_to_subscription")==="true"?(localStorage.removeItem("redirect_to_subscription"),window.location.href=Be("Subscription")):window.location.href=Be("CreateAssessment")}catch(k){console.error("Error:",k),d(k.message||"An error occurred. Please try again."),l(!1)}};return h.jsx("div",{className:"min-h-screen bg-gradient-to-b from-[#dbeafe] via-[#eff6ff] to-white flex items-center justify-center p-6",children:h.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md relative",children:[h.jsx(Ee,{variant:"ghost",onClick:()=>{window.location.href="/"},className:"absolute top-4 left-4 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full p-2",children:h.jsx(Pc,{className:"w-4 h-4"})}),h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("div",{className:"w-14 h-14 rounded-2xl overflow-hidden flex items-center justify-center mx-auto mb-4",children:h.jsx("img",{src:$o,alt:"Bridge",className:"w-full h-full object-contain"})}),h.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Set up your company"}),h.jsx("p",{className:"text-gray-500 text-sm",children:"Create your account and add company details"})]}),h.jsxs("form",{onSubmit:g,className:"space-y-5",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Email address"}),h.jsxs("div",{className:"relative",children:[h.jsx(Wb,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),h.jsx(xn,{type:"email",value:t,onChange:y=>e(y.target.value),placeholder:"you@company.com",className:"pl-10",required:!0,disabled:!!f})]})]}),!f&&h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Password"}),h.jsxs("div",{className:"relative",children:[h.jsx(hI,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),h.jsx(xn,{type:"password",value:n,onChange:y=>r(y.target.value),placeholder:"Enter your password (min. 6 characters)",className:"pl-10",required:!0,minLength:6})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Company name"}),h.jsx(xn,{type:"text",value:i,onChange:y=>s(y.target.value),placeholder:"Acme Inc.",className:"w-full"})]}),u&&h.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700",children:[h.jsx(tm,{className:"w-4 h-4 flex-shrink-0"}),h.jsx("span",{children:u})]}),h.jsx(Ee,{type:"submit",disabled:o||!t.trim()||!f&&!n.trim()||!i.trim(),className:"w-full bg-[#1E3A8A] hover:bg-[#152a66] text-white py-5 rounded-xl font-semibold disabled:opacity-50",children:o?h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Setting up..."]}):h.jsxs(h.Fragment,{children:["Continue",h.jsx(_c,{className:"w-4 h-4 ml-2"})]})})]})]})})}async function yae(t){try{let e=t;if(!e){const i=st.currentUser;if(!i)return{success:!1,error:"No user is currently signed in"};e=await i.getIdToken()}const r=await(await Fs("/billing/checkout",{},{Authorization:`Bearer ${e}`})).json();return r&&r.url?{success:!0,data:r}:{success:!1,error:r.error||"Failed to create checkout session"}}catch(e){return Kt(e)}}async function Rb(t){try{let e=t;if(!e){const i=st.currentUser;if(!i)return{success:!1,error:"No user is currently signed in"};e=await i.getIdToken()}const r=await(await Ya("/billing/status",{Authorization:`Bearer ${e}`})).json();return r&&typeof r.subscribed=="boolean"?{success:!0,data:r}:{success:!1,error:r.error||"Failed to get billing status"}}catch(e){return Kt(e)}}async function bae(t,e){try{let n=t;if(!n){const s=st.currentUser;if(!s)return{success:!1,error:"No user is currently signed in"};n=await s.getIdToken()}const i=await(await Fs("/billing/cancel",{reason:e||null},{Authorization:`Bearer ${n}`})).json();return i&&i.success?{success:!0,data:i}:{success:!1,error:i.error||"Failed to cancel subscription"}}catch(n){return Kt(n)}}async function xae(t){try{let e=t;if(!e){const i=st.currentUser;if(!i)return{success:!1,error:"No user is currently signed in"};e=await i.getIdToken()}const r=await(await Fs("/billing/reactivate",{},{Authorization:`Bearer ${e}`})).json();return r&&r.success?{success:!0,data:r}:{success:!1,error:r.error||"Failed to reactivate subscription"}}catch(e){return Kt(e)}}function wae(){const[t,e]=w.useState(!0),[n,r]=w.useState(null),i=Os();if(w.useEffect(()=>{const f=Xa(st,async m=>{if(!m){i("/");return}try{const g=await m.getIdToken(),y=await Rb(g);y.success&&r(y.data)}catch(g){console.error("Error fetching billing status:",g)}finally{e(!1)}});return()=>f()},[i]),t)return h.jsx("div",{className:"min-h-screen bg-[#f8f9fb] flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"w-8 h-8 border-2 border-[#1E3A8A]/30 border-t-[#1E3A8A] rounded-full animate-spin mx-auto mb-4"}),h.jsx("p",{className:"text-gray-500",children:"Loading..."})]})});const s=(n==null?void 0:n.subscribed)===!0,o=(n==null?void 0:n.cancelAtPeriodEnd)===!0,l=[{name:"Free",subtitle:"Evaluation Access",price:"$0",period:"forever",color:"blue",description:"Full access. Evaluate up to 3 candidates.",features:["1 assessment","Up to 3 candidate submissions total","Full AI follow-up interview","Assessment drop off analytics"],cta:o?"Canceled":s?"Unsubscribe":"Current Plan",ctaVariant:"outline",popular:!1,isCurrentPlan:!s&&!o,showUnsubscribe:s&&!o,showCanceled:o},{name:"Early Access",subtitle:"Unlimited",price:"$49",period:"month",color:"green",description:"Unlimited candidates. Run your hiring on Bridge.",features:["Unlimited submissions","Unlimited assessments","Full AI follow-up interview","Assessment drop off analytics"],cta:o?"Resubscribe":s?"Current Plan":"Upgrade Now",ctaVariant:o?"default":s?"outline":"default",popular:!s||o,isCurrentPlan:s&&!o,showResubscribe:o}],u=async()=>{try{const f=st.currentUser;if(!f){i("/");return}const m=await f.getIdToken();if(o){const y=await xae(m);if(y.success){alert("Your subscription has been reactivated!");const C=await Rb(m);C.success&&r(C.data)}else{const C="error"in y?y.error:"Failed to reactivate subscription";console.error("Failed to reactivate subscription:",C),alert("Failed to reactivate subscription. Please try again.")}return}const g=await yae(m);if(g.success&&g.data.url)window.location.href=g.data.url;else{const y="error"in g?g.error:"Failed to create checkout session";console.error("Failed to create checkout session:",y),alert("Failed to start checkout. Please try again.")}}catch(f){console.error("Error creating checkout session:",f),alert("An error occurred. Please try again.")}},d=()=>{i(Be("CancelSubscription"))};return h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#f8f9fb] to-[#eef1f8] py-12 px-4",children:h.jsxs("div",{className:"max-w-6xl mx-auto",children:[h.jsx(_e.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"mb-6",children:h.jsx(gr,{to:Be("Home"),children:h.jsxs(Ee,{variant:"ghost",className:"text-gray-600 hover:text-gray-900 hover:bg-gray-100",children:[h.jsx(Pc,{className:"w-4 h-4 mr-2"}),"Back to Assessments"]})})}),h.jsxs(_e.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[h.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Choose Your Plan"}),h.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Start with our free tier to evaluate candidates, then upgrade for unlimited access."})]}),h.jsx("div",{className:"grid md:grid-cols-2 gap-8 max-w-5xl mx-auto",children:l.map((f,m)=>h.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:m*.1},className:`relative bg-white rounded-2xl shadow-xl overflow-hidden border-2 ${f.popular?"border-green-500 scale-105":"border-gray-200"}`,children:[f.popular&&h.jsx("div",{className:"absolute top-0 right-0 bg-green-500 text-white px-4 py-1 text-sm font-semibold rounded-bl-lg",children:"Popular"}),h.jsxs("div",{className:"p-8",children:[h.jsxs("div",{className:"mb-6",children:[h.jsx("div",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold mb-3 ${f.color==="blue"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:f.subtitle}),h.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:f.name}),h.jsxs("div",{className:"flex items-baseline gap-2 mb-2",children:[h.jsx("span",{className:"text-5xl font-bold text-gray-900",children:f.price}),f.period!=="forever"&&h.jsxs("span",{className:"text-gray-500",children:["/",f.period]})]}),h.jsx("p",{className:"text-gray-600 text-sm",children:f.description})]}),h.jsx("ul",{className:"space-y-3 mb-8",children:f.features.map((g,y)=>h.jsxs("li",{className:"flex items-start gap-3",children:[h.jsx(Mo,{className:`w-5 h-5 flex-shrink-0 mt-0.5 ${f.color==="blue"?"text-blue-600":"text-green-600"}`}),h.jsx("span",{className:"text-gray-700",children:g})]},y))}),h.jsx(Ee,{onClick:f.isCurrentPlan?void 0:f.showUnsubscribe?d:f.showResubscribe||f.name==="Early Access"?u:void 0,variant:f.ctaVariant,disabled:f.isCurrentPlan&&!f.showUnsubscribe&&!f.showCanceled,className:`w-full py-6 text-lg font-semibold ${f.isCurrentPlan&&!f.showUnsubscribe&&!f.showCanceled?"bg-gray-100 text-gray-600 cursor-not-allowed":f.showUnsubscribe?"bg-red-600 hover:bg-red-700 text-white":f.showCanceled?"bg-gray-100 text-gray-500 cursor-not-allowed":f.name==="Early Access"?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-100 text-gray-600 cursor-not-allowed"}`,children:f.cta||"Current Plan"})]})]},f.name))}),h.jsx(_e.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"mt-12 text-center",children:h.jsx("p",{className:"text-sm text-gray-500",children:"All plans include full access to BridgeAI features. Upgrade anytime to unlock unlimited candidates."})})]})})}function C2(){const[t]=Fd(),e=t.get("session_id"),[n,r]=w.useState(!0),[i,s]=w.useState(""),o=Os();return w.useEffect(()=>{const l=Xa(st,async u=>{if(!u){o("/");return}try{const d=await u.getIdToken(),f=await Rb(d);f.success?console.log(" [BillingSuccess] Subscription status updated:",f.data):(console.error(" [BillingSuccess] Failed to fetch billing status:",f.error),s("Failed to verify subscription. Please check your account."))}catch(d){console.error(" [BillingSuccess] Error:",d),s("An error occurred while verifying your subscription.")}finally{r(!1)}});return()=>l()},[o]),n?h.jsx("div",{className:"min-h-screen bg-[#f8f9fb] flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"w-8 h-8 border-2 border-[#1E3A8A]/30 border-t-[#1E3A8A] rounded-full animate-spin mx-auto mb-4"}),h.jsx("p",{className:"text-gray-500",children:"Verifying your subscription..."})]})}):h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#f8f9fb] to-[#eef1f8] flex items-center justify-center px-4",children:h.jsx(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center",children:i?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center mx-auto mb-4",children:h.jsx("span",{className:"text-red-600 text-2xl",children:""})}),h.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Verification Error"}),h.jsx("p",{className:"text-gray-600 mb-6",children:i}),h.jsx(Ee,{onClick:()=>o(Be("Subscription")),className:"bg-[#1E3A8A] hover:bg-[#152a66] text-white",children:"Go to Subscription"})]}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"w-16 h-16 rounded-full bg-green-100 flex items-center justify-center mx-auto mb-4",children:h.jsx(yc,{className:"w-10 h-10 text-green-600"})}),h.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Subscription Activated!"}),h.jsx("p",{className:"text-gray-600 mb-6",children:"Thank you for subscribing. Your account has been upgraded and you now have access to all premium features."}),e&&h.jsxs("p",{className:"text-xs text-gray-400 mb-6",children:["Session ID: ",e.substring(0,20),"..."]}),h.jsxs(Ee,{onClick:()=>o(Be("Home")),className:"bg-[#1E3A8A] hover:bg-[#152a66] text-white",children:["Go to Dashboard",h.jsx(_c,{className:"w-4 h-4 ml-2"})]})]})})})}function T2(){const t=Os();return h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#f8f9fb] to-[#eef1f8] flex items-center justify-center px-4",children:h.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center",children:[h.jsx("div",{className:"w-16 h-16 rounded-full bg-orange-100 flex items-center justify-center mx-auto mb-4",children:h.jsx(lI,{className:"w-10 h-10 text-orange-600"})}),h.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Checkout Cancelled"}),h.jsx("p",{className:"text-gray-600 mb-6",children:"You cancelled the checkout process. No charges were made. You can upgrade your subscription anytime from your account settings."}),h.jsxs("div",{className:"flex gap-3 justify-center",children:[h.jsx(Ee,{onClick:()=>t(Be("Subscription")),variant:"outline",className:"border-[#1E3A8A] text-[#1E3A8A] hover:bg-[#1E3A8A]/5",children:"Try Again"}),h.jsxs(Ee,{onClick:()=>t(Be("Home")),className:"bg-[#1E3A8A] hover:bg-[#152a66] text-white",children:[h.jsx(Pc,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]})]})]})})}function W_(t,[e,n]){return Math.min(n,Math.max(e,t))}var E2=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),kae="VisuallyHidden",Sae=w.forwardRef((t,e)=>h.jsx(ut.span,{...t,ref:e,style:{...E2,...t.style}}));Sae.displayName=kae;var Cae=[" ","Enter","ArrowUp","ArrowDown"],Tae=[" ","Enter"],$a="Select",[Gm,Km,Eae]=Gw($a),[Uc]=Xi($a,[Eae,$m]),Ym=$m(),[Pae,ta]=Uc($a),[_ae,Iae]=Uc($a),P2=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:s,value:o,defaultValue:l,onValueChange:u,dir:d,name:f,autoComplete:m,disabled:g,required:y,form:C}=t,x=Ym(e),[k,T]=w.useState(null),[_,P]=w.useState(null),[E,I]=w.useState(!1),A=Kw(d),[L,R]=kc({prop:r,defaultProp:i??!1,onChange:s,caller:$a}),[j,U]=kc({prop:o,defaultProp:l,onChange:u,caller:$a}),z=w.useRef(null),F=k?C||!!k.closest("form"):!0,[W,Y]=w.useState(new Set),K=Array.from(W).map(X=>X.props.value).join(";");return h.jsx(KO,{...x,children:h.jsxs(Pae,{required:y,scope:e,trigger:k,onTriggerChange:T,valueNode:_,onValueNodeChange:P,valueNodeHasChildren:E,onValueNodeHasChildrenChange:I,contentId:Es(),value:j,onValueChange:U,open:L,onOpenChange:R,dir:A,triggerPointerDownPosRef:z,disabled:g,children:[h.jsx(Gm.Provider,{scope:e,children:h.jsx(_ae,{scope:t.__scopeSelect,onNativeOptionAdd:w.useCallback(X=>{Y(se=>new Set(se).add(X))},[]),onNativeOptionRemove:w.useCallback(X=>{Y(se=>{const H=new Set(se);return H.delete(X),H})},[]),children:n})}),F?h.jsxs(Q2,{"aria-hidden":!0,required:y,tabIndex:-1,name:f,autoComplete:m,value:j,onChange:X=>U(X.target.value),disabled:g,form:C,children:[j===void 0?h.jsx("option",{value:""}):null,Array.from(W)]},K):null]})})};P2.displayName=$a;var _2="SelectTrigger",I2=w.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,s=Ym(n),o=ta(_2,n),l=o.disabled||r,u=wt(e,o.onTriggerChange),d=Km(n),f=w.useRef("touch"),[m,g,y]=Z2(x=>{const k=d().filter(P=>!P.disabled),T=k.find(P=>P.value===o.value),_=eF(k,x,T);_!==void 0&&o.onValueChange(_.value)}),C=x=>{l||(o.onOpenChange(!0),y()),x&&(o.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return h.jsx(YO,{asChild:!0,...s,children:h.jsx(ut.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":X2(o.value)?"":void 0,...i,ref:u,onClick:Ue(i.onClick,x=>{x.currentTarget.focus(),f.current!=="mouse"&&C(x)}),onPointerDown:Ue(i.onPointerDown,x=>{f.current=x.pointerType;const k=x.target;k.hasPointerCapture(x.pointerId)&&k.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(C(x),x.preventDefault())}),onKeyDown:Ue(i.onKeyDown,x=>{const k=m.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&g(x.key),!(k&&x.key===" ")&&Cae.includes(x.key)&&(C(),x.preventDefault())})})})});I2.displayName=_2;var N2="SelectValue",A2=w.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:o="",...l}=t,u=ta(N2,n),{onValueNodeHasChildrenChange:d}=u,f=s!==void 0,m=wt(e,u.onValueNodeChange);return On(()=>{d(f)},[d,f]),h.jsx(ut.span,{...l,ref:m,style:{pointerEvents:"none"},children:X2(u.value)?h.jsx(h.Fragment,{children:o}):s})});A2.displayName=N2;var Nae="SelectIcon",R2=w.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return h.jsx(ut.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});R2.displayName=Nae;var Aae="SelectPortal",M2=t=>h.jsx(Em,{asChild:!0,...t});M2.displayName=Aae;var Wa="SelectContent",D2=w.forwardRef((t,e)=>{const n=ta(Wa,t.__scopeSelect),[r,i]=w.useState();if(On(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?Od.createPortal(h.jsx(j2,{scope:t.__scopeSelect,children:h.jsx(Gm.Slot,{scope:t.__scopeSelect,children:h.jsx("div",{children:t.children})})}),s):null}return h.jsx(O2,{...t,ref:e})});D2.displayName=Wa;var ni=10,[j2,na]=Uc(Wa),Rae="SelectContentImpl",Mae=Ra("SelectContent.RemoveScroll"),O2=w.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:l,sideOffset:u,align:d,alignOffset:f,arrowPadding:m,collisionBoundary:g,collisionPadding:y,sticky:C,hideWhenDetached:x,avoidCollisions:k,...T}=t,_=ta(Wa,n),[P,E]=w.useState(null),[I,A]=w.useState(null),L=wt(e,ie=>E(ie)),[R,j]=w.useState(null),[U,z]=w.useState(null),F=Km(n),[W,Y]=w.useState(!1),K=w.useRef(!1);w.useEffect(()=>{if(P)return cw(P)},[P]),lw();const X=w.useCallback(ie=>{const[Se,...Ce]=F().map(Je=>Je.ref.current),[Le]=Ce.slice(-1),qe=document.activeElement;for(const Je of ie)if(Je===qe||(Je==null||Je.scrollIntoView({block:"nearest"}),Je===Se&&I&&(I.scrollTop=0),Je===Le&&I&&(I.scrollTop=I.scrollHeight),Je==null||Je.focus(),document.activeElement!==qe))return},[F,I]),se=w.useCallback(()=>X([R,P]),[X,R,P]);w.useEffect(()=>{W&&se()},[W,se]);const{onOpenChange:H,triggerPointerDownPosRef:te}=_;w.useEffect(()=>{if(P){let ie={x:0,y:0};const Se=Le=>{var qe,Je;ie={x:Math.abs(Math.round(Le.pageX)-(((qe=te.current)==null?void 0:qe.x)??0)),y:Math.abs(Math.round(Le.pageY)-(((Je=te.current)==null?void 0:Je.y)??0))}},Ce=Le=>{ie.x<=10&&ie.y<=10?Le.preventDefault():P.contains(Le.target)||H(!1),document.removeEventListener("pointermove",Se),te.current=null};return te.current!==null&&(document.addEventListener("pointermove",Se),document.addEventListener("pointerup",Ce,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Se),document.removeEventListener("pointerup",Ce,{capture:!0})}}},[P,H,te]),w.useEffect(()=>{const ie=()=>H(!1);return window.addEventListener("blur",ie),window.addEventListener("resize",ie),()=>{window.removeEventListener("blur",ie),window.removeEventListener("resize",ie)}},[H]);const[D,$]=Z2(ie=>{const Se=F().filter(qe=>!qe.disabled),Ce=Se.find(qe=>qe.ref.current===document.activeElement),Le=eF(Se,ie,Ce);Le&&setTimeout(()=>Le.ref.current.focus())}),re=w.useCallback((ie,Se,Ce)=>{const Le=!K.current&&!Ce;(_.value!==void 0&&_.value===Se||Le)&&(j(ie),Le&&(K.current=!0))},[_.value]),O=w.useCallback(()=>P==null?void 0:P.focus(),[P]),ve=w.useCallback((ie,Se,Ce)=>{const Le=!K.current&&!Ce;(_.value!==void 0&&_.value===Se||Le)&&z(ie)},[_.value]),oe=r==="popper"?Mb:L2,ce=oe===Mb?{side:l,sideOffset:u,align:d,alignOffset:f,arrowPadding:m,collisionBoundary:g,collisionPadding:y,sticky:C,hideWhenDetached:x,avoidCollisions:k}:{};return h.jsx(j2,{scope:n,content:P,viewport:I,onViewportChange:A,itemRefCallback:re,selectedItem:R,onItemLeave:O,itemTextRefCallback:ve,focusSelectedItem:se,selectedItemText:U,position:r,isPositioned:W,searchRef:D,children:h.jsx(_m,{as:Mae,allowPinchZoom:!0,children:h.jsx(Tm,{asChild:!0,trapped:_.open,onMountAutoFocus:ie=>{ie.preventDefault()},onUnmountAutoFocus:Ue(i,ie=>{var Se;(Se=_.trigger)==null||Se.focus({preventScroll:!0}),ie.preventDefault()}),children:h.jsx(Cm,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:ie=>ie.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:h.jsx(oe,{role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:ie=>ie.preventDefault(),...T,...ce,onPlaced:()=>Y(!0),ref:L,style:{display:"flex",flexDirection:"column",outline:"none",...T.style},onKeyDown:Ue(T.onKeyDown,ie=>{const Se=ie.ctrlKey||ie.altKey||ie.metaKey;if(ie.key==="Tab"&&ie.preventDefault(),!Se&&ie.key.length===1&&$(ie.key),["ArrowUp","ArrowDown","Home","End"].includes(ie.key)){let Le=F().filter(qe=>!qe.disabled).map(qe=>qe.ref.current);if(["ArrowUp","End"].includes(ie.key)&&(Le=Le.slice().reverse()),["ArrowUp","ArrowDown"].includes(ie.key)){const qe=ie.target,Je=Le.indexOf(qe);Le=Le.slice(Je+1)}setTimeout(()=>X(Le)),ie.preventDefault()}})})})})})})});O2.displayName=Rae;var Dae="SelectItemAlignedPosition",L2=w.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,s=ta(Wa,n),o=na(Wa,n),[l,u]=w.useState(null),[d,f]=w.useState(null),m=wt(e,L=>f(L)),g=Km(n),y=w.useRef(!1),C=w.useRef(!0),{viewport:x,selectedItem:k,selectedItemText:T,focusSelectedItem:_}=o,P=w.useCallback(()=>{if(s.trigger&&s.valueNode&&l&&d&&x&&k&&T){const L=s.trigger.getBoundingClientRect(),R=d.getBoundingClientRect(),j=s.valueNode.getBoundingClientRect(),U=T.getBoundingClientRect();if(s.dir!=="rtl"){const qe=U.left-R.left,Je=j.left-qe,jt=L.left-Je,Ct=L.width+jt,sn=Math.max(Ct,R.width),fn=window.innerWidth-ni,Pn=W_(Je,[ni,Math.max(ni,fn-sn)]);l.style.minWidth=Ct+"px",l.style.left=Pn+"px"}else{const qe=R.right-U.right,Je=window.innerWidth-j.right-qe,jt=window.innerWidth-L.right-Je,Ct=L.width+jt,sn=Math.max(Ct,R.width),fn=window.innerWidth-ni,Pn=W_(Je,[ni,Math.max(ni,fn-sn)]);l.style.minWidth=Ct+"px",l.style.right=Pn+"px"}const z=g(),F=window.innerHeight-ni*2,W=x.scrollHeight,Y=window.getComputedStyle(d),K=parseInt(Y.borderTopWidth,10),X=parseInt(Y.paddingTop,10),se=parseInt(Y.borderBottomWidth,10),H=parseInt(Y.paddingBottom,10),te=K+X+W+H+se,D=Math.min(k.offsetHeight*5,te),$=window.getComputedStyle(x),re=parseInt($.paddingTop,10),O=parseInt($.paddingBottom,10),ve=L.top+L.height/2-ni,oe=F-ve,ce=k.offsetHeight/2,ie=k.offsetTop+ce,Se=K+X+ie,Ce=te-Se;if(Se<=ve){const qe=z.length>0&&k===z[z.length-1].ref.current;l.style.bottom="0px";const Je=d.clientHeight-x.offsetTop-x.offsetHeight,jt=Math.max(oe,ce+(qe?O:0)+Je+se),Ct=Se+jt;l.style.height=Ct+"px"}else{const qe=z.length>0&&k===z[0].ref.current;l.style.top="0px";const jt=Math.max(ve,K+x.offsetTop+(qe?re:0)+ce)+Ce;l.style.height=jt+"px",x.scrollTop=Se-ve+x.offsetTop}l.style.margin=`${ni}px 0`,l.style.minHeight=D+"px",l.style.maxHeight=F+"px",r==null||r(),requestAnimationFrame(()=>y.current=!0)}},[g,s.trigger,s.valueNode,l,d,x,k,T,s.dir,r]);On(()=>P(),[P]);const[E,I]=w.useState();On(()=>{d&&I(window.getComputedStyle(d).zIndex)},[d]);const A=w.useCallback(L=>{L&&C.current===!0&&(P(),_==null||_(),C.current=!1)},[P,_]);return h.jsx(Oae,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:y,onScrollButtonChange:A,children:h.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:E},children:h.jsx(ut.div,{...i,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});L2.displayName=Dae;var jae="SelectPopperPosition",Mb=w.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=ni,...s}=t,o=Ym(n);return h.jsx(JO,{...o,...s,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Mb.displayName=jae;var[Oae,uk]=Uc(Wa,{}),Db="SelectViewport",F2=w.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,s=na(Db,n),o=uk(Db,n),l=wt(e,s.onViewportChange),u=w.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),h.jsx(Gm.Slot,{scope:n,children:h.jsx(ut.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Ue(i.onScroll,d=>{const f=d.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:g}=o;if(g!=null&&g.current&&m){const y=Math.abs(u.current-f.scrollTop);if(y>0){const C=window.innerHeight-ni*2,x=parseFloat(m.style.minHeight),k=parseFloat(m.style.height),T=Math.max(x,k);if(T<C){const _=T+y,P=Math.min(C,_),E=_-P;m.style.height=P+"px",m.style.bottom==="0px"&&(f.scrollTop=E>0?E:0,m.style.justifyContent="flex-end")}}}u.current=f.scrollTop})})})]})});F2.displayName=Db;var U2="SelectGroup",[Lae,Fae]=Uc(U2),Uae=w.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Es();return h.jsx(Lae,{scope:n,id:i,children:h.jsx(ut.div,{role:"group","aria-labelledby":i,...r,ref:e})})});Uae.displayName=U2;var B2="SelectLabel",V2=w.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Fae(B2,n);return h.jsx(ut.div,{id:i.id,...r,ref:e})});V2.displayName=B2;var em="SelectItem",[Bae,z2]=Uc(em),$2=w.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...o}=t,l=ta(em,n),u=na(em,n),d=l.value===r,[f,m]=w.useState(s??""),[g,y]=w.useState(!1),C=wt(e,_=>{var P;return(P=u.itemRefCallback)==null?void 0:P.call(u,_,r,i)}),x=Es(),k=w.useRef("touch"),T=()=>{i||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(Bae,{scope:n,value:r,disabled:i,textId:x,isSelected:d,onItemTextChange:w.useCallback(_=>{m(P=>P||((_==null?void 0:_.textContent)??"").trim())},[]),children:h.jsx(Gm.ItemSlot,{scope:n,value:r,disabled:i,textValue:f,children:h.jsx(ut.div,{role:"option","aria-labelledby":x,"data-highlighted":g?"":void 0,"aria-selected":d&&g,"data-state":d?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:C,onFocus:Ue(o.onFocus,()=>y(!0)),onBlur:Ue(o.onBlur,()=>y(!1)),onClick:Ue(o.onClick,()=>{k.current!=="mouse"&&T()}),onPointerUp:Ue(o.onPointerUp,()=>{k.current==="mouse"&&T()}),onPointerDown:Ue(o.onPointerDown,_=>{k.current=_.pointerType}),onPointerMove:Ue(o.onPointerMove,_=>{var P;k.current=_.pointerType,i?(P=u.onItemLeave)==null||P.call(u):k.current==="mouse"&&_.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ue(o.onPointerLeave,_=>{var P;_.currentTarget===document.activeElement&&((P=u.onItemLeave)==null||P.call(u))}),onKeyDown:Ue(o.onKeyDown,_=>{var E;((E=u.searchRef)==null?void 0:E.current)!==""&&_.key===" "||(Tae.includes(_.key)&&T(),_.key===" "&&_.preventDefault())})})})})});$2.displayName=em;var Vu="SelectItemText",W2=w.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...s}=t,o=ta(Vu,n),l=na(Vu,n),u=z2(Vu,n),d=Iae(Vu,n),[f,m]=w.useState(null),g=wt(e,T=>m(T),u.onItemTextChange,T=>{var _;return(_=l.itemTextRefCallback)==null?void 0:_.call(l,T,u.value,u.disabled)}),y=f==null?void 0:f.textContent,C=w.useMemo(()=>h.jsx("option",{value:u.value,disabled:u.disabled,children:y},u.value),[u.disabled,u.value,y]),{onNativeOptionAdd:x,onNativeOptionRemove:k}=d;return On(()=>(x(C),()=>k(C)),[x,k,C]),h.jsxs(h.Fragment,{children:[h.jsx(ut.span,{id:u.textId,...s,ref:g}),u.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Od.createPortal(s.children,o.valueNode):null]})});W2.displayName=Vu;var H2="SelectItemIndicator",q2=w.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return z2(H2,n).isSelected?h.jsx(ut.span,{"aria-hidden":!0,...r,ref:e}):null});q2.displayName=H2;var jb="SelectScrollUpButton",G2=w.forwardRef((t,e)=>{const n=na(jb,t.__scopeSelect),r=uk(jb,t.__scopeSelect),[i,s]=w.useState(!1),o=wt(e,r.onScrollButtonChange);return On(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=u.scrollTop>0;s(d)};const u=n.viewport;return l(),u.addEventListener("scroll",l),()=>u.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?h.jsx(Y2,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:u}=n;l&&u&&(l.scrollTop=l.scrollTop-u.offsetHeight)}}):null});G2.displayName=jb;var Ob="SelectScrollDownButton",K2=w.forwardRef((t,e)=>{const n=na(Ob,t.__scopeSelect),r=uk(Ob,t.__scopeSelect),[i,s]=w.useState(!1),o=wt(e,r.onScrollButtonChange);return On(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=u.scrollHeight-u.clientHeight,f=Math.ceil(u.scrollTop)<d;s(f)};const u=n.viewport;return l(),u.addEventListener("scroll",l),()=>u.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?h.jsx(Y2,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:u}=n;l&&u&&(l.scrollTop=l.scrollTop+u.offsetHeight)}}):null});K2.displayName=Ob;var Y2=w.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,s=na("SelectScrollButton",n),o=w.useRef(null),l=Km(n),u=w.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return w.useEffect(()=>()=>u(),[u]),On(()=>{var f;const d=l().find(m=>m.ref.current===document.activeElement);(f=d==null?void 0:d.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),h.jsx(ut.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:Ue(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Ue(i.onPointerMove,()=>{var d;(d=s.onItemLeave)==null||d.call(s),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Ue(i.onPointerLeave,()=>{u()})})}),Vae="SelectSeparator",J2=w.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return h.jsx(ut.div,{"aria-hidden":!0,...r,ref:e})});J2.displayName=Vae;var Lb="SelectArrow",zae=w.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Ym(n),s=ta(Lb,n),o=na(Lb,n);return s.open&&o.position==="popper"?h.jsx(QO,{...i,...r,ref:e}):null});zae.displayName=Lb;var $ae="SelectBubbleInput",Q2=w.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const i=w.useRef(null),s=wt(r,i),o=_M(e);return w.useEffect(()=>{const l=i.current;if(!l)return;const u=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==e&&f){const m=new Event("change",{bubbles:!0});f.call(l,e),l.dispatchEvent(m)}},[o,e]),h.jsx(ut.select,{...n,style:{...E2,...n.style},ref:s,defaultValue:e})});Q2.displayName=$ae;function X2(t){return t===""||t===void 0}function Z2(t){const e=Gi(t),n=w.useRef(""),r=w.useRef(0),i=w.useCallback(o=>{const l=n.current+o;e(l),(function u(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>u(""),1e3))})(l)},[e]),s=w.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return w.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function eF(t,e,n){const i=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=Wae(t,Math.max(s,0));i.length===1&&(o=o.filter(d=>d!==n));const u=o.find(d=>d.textValue.toLowerCase().startsWith(i.toLowerCase()));return u!==n?u:void 0}function Wae(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Hae=P2,tF=I2,qae=A2,Gae=R2,Kae=M2,nF=D2,Yae=F2,rF=V2,iF=$2,Jae=W2,Qae=q2,sF=G2,oF=K2,aF=J2;const Xae=Hae,Zae=qae,lF=w.forwardRef(({className:t,children:e,...n},r)=>h.jsxs(tF,{ref:r,className:et("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,h.jsx(Gae,{asChild:!0,children:h.jsx(vc,{className:"h-4 w-4 opacity-50"})})]}));lF.displayName=tF.displayName;const cF=w.forwardRef(({className:t,...e},n)=>h.jsx(sF,{ref:n,className:et("flex cursor-default items-center justify-center py-1",t),...e,children:h.jsx(dp,{className:"h-4 w-4"})}));cF.displayName=sF.displayName;const uF=w.forwardRef(({className:t,...e},n)=>h.jsx(oF,{ref:n,className:et("flex cursor-default items-center justify-center py-1",t),...e,children:h.jsx(vc,{className:"h-4 w-4"})}));uF.displayName=oF.displayName;const dF=w.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>h.jsx(Kae,{children:h.jsxs(nF,{ref:i,className:et("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[h.jsx(cF,{}),h.jsx(Yae,{className:et("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),h.jsx(uF,{})]})}));dF.displayName=nF.displayName;const ele=w.forwardRef(({className:t,...e},n)=>h.jsx(rF,{ref:n,className:et("px-2 py-1.5 text-sm font-semibold",t),...e}));ele.displayName=rF.displayName;const hF=w.forwardRef(({className:t,children:e,...n},r)=>h.jsxs(iF,{ref:r,className:et("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[h.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(Qae,{children:h.jsx(Mo,{className:"h-4 w-4"})})}),h.jsx(Jae,{children:e})]}));hF.displayName=iF.displayName;const tle=w.forwardRef(({className:t,...e},n)=>h.jsx(aF,{ref:n,className:et("-mx-1 my-1 h-px bg-muted",t),...e}));tle.displayName=aF.displayName;const nle=["Too expensive","Not using the product enough","Found a better alternative","Missing features I need","Technical issues","Not what I expected","Temporary pause","Other"];function rle(){const[t,e]=w.useState(!0),[n,r]=w.useState(""),[i,s]=w.useState(!1),o=Os();w.useEffect(()=>{const u=Xa(st,d=>{if(!d){o("/");return}e(!1)});return()=>u()},[o]);const l=async()=>{if(!n){alert("Please select a reason for canceling.");return}s(!0);try{const u=st.currentUser;if(!u){o("/");return}const d=await u.getIdToken(),f=await bae(d,n);if(f.success)alert("Your subscription has been canceled. You'll retain access until the end of your billing period."),o(Be("Subscription"));else{const m="error"in f?f.error:"Failed to cancel subscription";console.error("Failed to cancel subscription:",m),alert("Failed to cancel subscription. Please try again.")}}catch(u){console.error("Error canceling subscription:",u),alert("An error occurred. Please try again.")}finally{s(!1)}};return t?h.jsx("div",{className:"min-h-screen bg-[#f8f9fb] flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"w-8 h-8 border-2 border-[#1E3A8A]/30 border-t-[#1E3A8A] rounded-full animate-spin mx-auto mb-4"}),h.jsx("p",{className:"text-gray-500",children:"Loading..."})]})}):h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#f8f9fb] to-[#eef1f8] py-12 px-4",children:h.jsxs("div",{className:"max-w-2xl mx-auto",children:[h.jsx(_e.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"mb-6",children:h.jsx(gr,{to:Be("Subscription"),children:h.jsxs(Ee,{variant:"ghost",className:"text-gray-600 hover:text-gray-900 hover:bg-gray-100",children:[h.jsx(Pc,{className:"w-4 h-4 mr-2"}),"Back to Subscription"]})})}),h.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-xl p-8",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx(fi,{className:"w-8 h-8 text-red-600"})}),h.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Cancel Subscription"}),h.jsx("p",{className:"text-gray-600",children:"We're sorry to see you go. Your subscription will remain active until the end of your billing period."})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsxs("label",{htmlFor:"reason",className:"block text-sm font-medium text-gray-700 mb-2",children:["Why are you canceling? ",h.jsx("span",{className:"text-red-500",children:"*"})]}),h.jsxs(Xae,{value:n,onValueChange:r,children:[h.jsx(lF,{className:"w-full",children:h.jsx(Zae,{placeholder:"Select a reason"})}),h.jsx(dF,{children:nle.map(u=>h.jsx(hF,{value:u,children:u},u))})]})]}),h.jsxs("div",{className:"flex gap-4 pt-4",children:[h.jsx(Ee,{variant:"outline",onClick:()=>o(Be("Subscription")),className:"flex-1",disabled:i,children:"Keep Subscription"}),h.jsx(Ee,{onClick:l,disabled:!n||i,className:"flex-1 bg-red-600 hover:bg-red-700 text-white",children:i?"Canceling...":"Cancel Subscription"})]})]})]})]})})}function ile(){return h.jsxs("div",{className:"min-h-screen bg-white",children:[h.jsx("div",{className:"absolute top-4 left-0 right-0 z-50 flex justify-center px-6",children:h.jsxs("nav",{className:"bg-white/80 backdrop-blur-md rounded-full shadow-lg border border-gray-200/50 px-4 py-2 flex items-center justify-between gap-12",children:[h.jsx("div",{className:"flex items-center gap-2",children:h.jsxs("a",{href:"/",className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-7 h-7 rounded-lg overflow-hidden flex items-center justify-center",children:h.jsx("img",{src:$o,alt:"Bridge",className:"w-full h-full object-contain"})}),h.jsx("span",{className:"font-semibold text-gray-900 text-sm",children:"Bridge"})]})}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Ee,{onClick:()=>{window.location.href=Be("Pricing")},variant:"ghost",className:"text-gray-700 hover:text-gray-900 rounded-full text-sm px-4 py-1.5 h-auto",children:"Pricing"}),h.jsx(Ee,{onClick:()=>{window.location.href=Be("Contact")},variant:"ghost",className:"text-gray-700 hover:text-gray-900 rounded-full text-sm px-4 py-1.5 h-auto",children:"Contact"}),h.jsx(Ee,{onClick:()=>{st.currentUser?window.location.href=Be("Home"):window.location.href=Be("GetStarted")},variant:"ghost",className:"text-gray-700 hover:text-gray-900 rounded-full text-sm px-4 py-1.5 h-auto",children:"Sign In"}),h.jsx(Ee,{onClick:()=>window.location.href=Be("GetStarted"),variant:"ghost",className:"text-gray-700 hover:text-gray-900 rounded-full text-sm px-4 py-1.5 h-auto",children:"Sign Up"}),h.jsx(Ee,{onClick:()=>window.open("https://calendly.com/smahadkar-ucsd/30min","_blank"),className:"bg-[#1E3A8A] hover:bg-[#152a66] text-white rounded-full text-sm px-4 py-1.5 h-auto",children:"Book a Demo"})]})]})}),h.jsx("div",{className:"bg-gradient-to-br from-[#f8f9fb] to-[#eef1f8] py-24 md:py-32 pt-32",children:h.jsxs("div",{className:"max-w-6xl mx-auto px-6",children:[h.jsxs(_e.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[h.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Choose Your Plan"}),h.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Start with our free tier to evaluate candidates, then upgrade for unlimited access."})]}),h.jsx("div",{className:"grid md:grid-cols-2 gap-8 max-w-5xl mx-auto",children:[{name:"Free",subtitle:"Evaluation Access",price:"$0",period:"forever",color:"blue",description:"Full access. Evaluate up to 3 candidates.",features:["1 assessment","Up to 3 candidate submissions total","Full AI follow-up interview","Assessment drop off analytics"],cta:"Current Plan",ctaVariant:"outline",popular:!1},{name:"Early Access",subtitle:"Unlimited",price:"$49",period:"month",color:"green",description:"Unlimited candidates. Run your hiring on Bridge.",features:["Unlimited submissions","Unlimited assessments","Full AI follow-up interview","Assessment drop off analytics"],cta:"Upgrade Now",ctaVariant:"default",popular:!0}].map((t,e)=>h.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:e*.1,duration:.5},className:`relative bg-white rounded-2xl shadow-xl overflow-hidden border-2 ${t.popular?"border-green-500 scale-105":"border-gray-200"}`,children:[t.popular&&h.jsx("div",{className:"absolute top-0 right-0 bg-green-500 text-white px-4 py-1 text-sm font-semibold rounded-bl-lg",children:"Popular"}),h.jsxs("div",{className:"p-8",children:[h.jsxs("div",{className:"mb-6",children:[h.jsx("div",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold mb-3 ${t.color==="blue"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:t.subtitle}),h.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-2",children:t.name}),h.jsxs("div",{className:"flex items-baseline gap-2 mb-2",children:[h.jsx("span",{className:"text-5xl font-bold text-gray-900",children:t.price}),t.period!=="forever"&&h.jsxs("span",{className:"text-gray-500",children:["/",t.period]})]}),h.jsx("p",{className:"text-gray-600 text-sm",children:t.description})]}),h.jsx("ul",{className:"space-y-3 mb-8",children:t.features.map((n,r)=>h.jsxs("li",{className:"flex items-start gap-3",children:[h.jsx(Mo,{className:`w-5 h-5 flex-shrink-0 mt-0.5 ${t.color==="blue"?"text-blue-600":"text-green-600"}`}),h.jsx("span",{className:"text-gray-700",children:n})]},r))}),h.jsx(Ee,{onClick:t.popular?()=>{st.currentUser?window.location.href=Be("Subscription"):(localStorage.setItem("redirect_to_subscription","true"),window.location.href=Be("GetStarted"))}:void 0,variant:t.ctaVariant,disabled:!t.popular,className:`w-full py-6 text-lg font-semibold ${t.popular?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-100 text-gray-600 cursor-not-allowed"}`,children:t.cta})]})]},t.name))}),h.jsx(_e.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3,duration:.5},className:"mt-12 text-center",children:h.jsx("p",{className:"text-sm text-gray-500",children:"All plans include full access to BridgeAI features. Upgrade anytime to unlock unlimited candidates."})})]})})]})}function sle(){return h.jsxs("div",{className:"min-h-screen bg-white",children:[h.jsx("div",{className:"absolute top-4 left-0 right-0 z-50 flex justify-center px-6",children:h.jsxs("nav",{className:"bg-white/80 backdrop-blur-md rounded-full shadow-lg border border-gray-200/50 px-4 py-2 flex items-center justify-between gap-12",children:[h.jsx("div",{className:"flex items-center gap-2",children:h.jsxs("a",{href:"/",className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-7 h-7 rounded-lg overflow-hidden flex items-center justify-center",children:h.jsx("img",{src:$o,alt:"Bridge",className:"w-full h-full object-contain"})}),h.jsx("span",{className:"font-semibold text-gray-900 text-sm",children:"Bridge"})]})}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Ee,{onClick:()=>{window.location.href=Be("Pricing")},variant:"ghost",className:"text-gray-700 hover:text-gray-900 rounded-full text-sm px-4 py-1.5 h-auto",children:"Pricing"}),h.jsx(Ee,{onClick:()=>{window.location.href=Be("Contact")},variant:"ghost",className:"text-gray-700 hover:text-gray-900 rounded-full text-sm px-4 py-1.5 h-auto",children:"Contact"}),h.jsx(Ee,{onClick:()=>{st.currentUser?window.location.href=Be("Home"):window.location.href=Be("GetStarted")},variant:"ghost",className:"text-gray-700 hover:text-gray-900 rounded-full text-sm px-4 py-1.5 h-auto",children:"Sign In"}),h.jsx(Ee,{onClick:()=>window.location.href=Be("GetStarted"),variant:"ghost",className:"text-gray-700 hover:text-gray-900 rounded-full text-sm px-4 py-1.5 h-auto",children:"Sign Up"}),h.jsx(Ee,{onClick:()=>window.open("https://calendly.com/smahadkar-ucsd/30min","_blank"),className:"bg-[#1E3A8A] hover:bg-[#152a66] text-white rounded-full text-sm px-4 py-1.5 h-auto",children:"Book a Demo"})]})]})}),h.jsx("div",{className:"bg-gradient-to-b from-gray-50 to-white py-24 md:py-32 pt-32",children:h.jsxs("div",{className:"max-w-4xl mx-auto px-6",children:[h.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-[#1E3A8A]/10 mb-4",children:h.jsx(AU,{className:"w-8 h-8 text-[#1E3A8A]"})}),h.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Contact Us"}),h.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Found a bug or have a question? Contact us and we'll get back to you as soon as possible."})]}),h.jsx(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-8 md:p-12",children:h.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[h.jsxs("div",{className:"flex items-start gap-4",children:[h.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-100 flex items-center justify-center flex-shrink-0",children:h.jsx(Wb,{className:"w-6 h-6 text-[#1E3A8A]"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Email"}),h.jsx("a",{href:"mailto:saaz.m@icloud.com",className:"text-[#1E3A8A] hover:text-[#152a66] hover:underline transition-colors",children:"saaz.m@icloud.com"})]})]}),h.jsxs("div",{className:"flex items-start gap-4",children:[h.jsx("div",{className:"w-12 h-12 rounded-xl bg-green-100 flex items-center justify-center flex-shrink-0",children:h.jsx(fI,{className:"w-6 h-6 text-[#1E3A8A]"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Phone"}),h.jsx("a",{href:"tel:+18623370989",className:"text-[#1E3A8A] hover:text-[#152a66] hover:underline transition-colors",children:"(862) 337-0989"})]})]})]})})]})})]})}const ole={CreateAssessment:fG,AssessmentEditor:fZ,CandidateSubmission:mZ,SubmissionsDashboard:CZ,CandidateAssessment:TZ,CandidateSubmitted:rie,Home:pae,Landing:gae,GetStarted:vae,Subscription:wae,BillingSuccess:C2,BillingCancel:T2,CancelSubscription:rle,Pricing:ile,Contact:sle},ale={mainPage:"Landing",Pages:ole};function lle(){const t=Ga();return w.useEffect(()=>{var e;(e=window.parent)==null||e.postMessage({type:"app_changed_url",url:window.location.href},"*")},[t]),null}function cle({}){const e=Ga().pathname.substring(1);return h.jsx("div",{className:"min-h-screen flex items-center justify-center p-6 bg-slate-50",children:h.jsx("div",{className:"max-w-md w-full",children:h.jsxs("div",{className:"text-center space-y-6",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("h1",{className:"text-7xl font-light text-slate-300",children:"404"}),h.jsx("div",{className:"h-0.5 w-16 bg-slate-200 mx-auto"})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsx("h2",{className:"text-2xl font-medium text-slate-800",children:"Page Not Found"}),h.jsxs("p",{className:"text-slate-600 leading-relaxed",children:["The page"," ",h.jsxs("span",{className:"font-medium text-slate-700",children:['"',e,'"']})," ","could not be found in this application."]})]}),h.jsx("div",{className:"pt-6",children:h.jsxs("button",{onClick:()=>window.location.href="/",className:"inline-flex items-center px-4 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 hover:border-slate-300 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:[h.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"Go Home"]})})]})})})}var H_={},ule="@vercel/analytics",dle="1.6.1",hle=()=>{window.va||(window.va=function(...e){(window.vaq=window.vaq||[]).push(e)})};function fF(){return typeof window<"u"}function pF(){try{const t="production"}catch{}return"production"}function fle(t="auto"){if(t==="auto"){window.vam=pF();return}window.vam=t}function ple(){return(fF()?window.vam:pF())||"production"}function Fb(){return ple()==="development"}function mle(t){return t.scriptSrc?t.scriptSrc:Fb()?"https://va.vercel-scripts.com/v1/script.debug.js":t.basePath?`${t.basePath}/insights/script.js`:"/_vercel/insights/script.js"}function gle(t={debug:!0}){var e;if(!fF())return;fle(t.mode),hle(),t.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",t.beforeSend));const n=mle(t);if(document.head.querySelector(`script[src*="${n}"]`))return;const r=document.createElement("script");r.src=n,r.defer=!0,r.dataset.sdkn=ule+(t.framework?`/${t.framework}`:""),r.dataset.sdkv=dle,t.disableAutoTrack&&(r.dataset.disableAutoTrack="1"),t.endpoint?r.dataset.endpoint=t.endpoint:t.basePath&&(r.dataset.endpoint=`${t.basePath}/insights`),t.dsn&&(r.dataset.dsn=t.dsn),r.onerror=()=>{const i=Fb()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${n}. ${i}`)},Fb()&&t.debug===!1&&(r.dataset.debug="false"),document.head.appendChild(r)}function vle({route:t,path:e}){var n;(n=window.va)==null||n.call(window,"pageview",{route:t,path:e})}function yle(){if(!(typeof process>"u"||typeof H_>"u"))return H_.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function ble(t){return w.useEffect(()=>{var e;t.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",t.beforeSend))},[t.beforeSend]),w.useEffect(()=>{gle({framework:t.framework||"react",basePath:t.basePath??yle(),...t.route!==void 0&&{disableAutoTrack:!0},...t})},[]),w.useEffect(()=>{t.route&&t.path&&vle({route:t.route,path:t.path})},[t.route,t.path]),null}const{Pages:mF,Layout:q_,mainPage:xle}=ale,Ub=xle,wle=mF[Ub],Of=({children:t,currentPageName:e})=>q_?h.jsx(q_,{currentPageName:e,children:t}):h.jsx(h.Fragment,{children:t});function kle(){return h.jsxs(X5,{client:Z5,children:[h.jsxs(eB,{children:[h.jsx(lle,{}),h.jsxs(q6,{children:[h.jsx(Dl,{path:"/",element:h.jsx(Of,{currentPageName:Ub,children:h.jsx(wle,{})})}),Object.entries(mF).filter(([t])=>t!==Ub).map(([t,e])=>h.jsx(Dl,{path:`/${t}`,element:h.jsx(Of,{currentPageName:t,children:h.jsx(e,{})})},t)),h.jsx(Dl,{path:"/billing/success",element:h.jsx(Of,{currentPageName:"BillingSuccess",children:h.jsx(C2,{})})}),h.jsx(Dl,{path:"/billing/cancel",element:h.jsx(Of,{currentPageName:"BillingCancel",children:h.jsx(T2,{})})}),h.jsx(Dl,{path:"*",element:h.jsx(cle,{})})]})]}),h.jsx(C5,{}),h.jsx(e6,{}),h.jsx(ble,{})]})}pU.createRoot(document.getElementById("root")).render(h.jsx(kle,{}));
